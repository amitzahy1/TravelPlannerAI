
export const IMAGE_BANK: Record<string, Record<string, string[]>> = {
        food: {
                ramen_tonkotsu: [
                        'https://images.unsplash.com/photo-1552611052-33e04de081de?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1591814441334-0f2c45791242?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1623341214825-9f4f9738c7c7?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1557872248-48bc0619a139?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1585032226651-759b368d7246?auto=format&fit=crop&w=800&q=80',
                ],
                ramen_shoyu: [
                        'https://images.unsplash.com/photo-1547592166-23ac45744acd?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1618413920153-6ec52973801f?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1569437061241-a848be43cc82?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1570198031268-e48356133290?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?auto=format&fit=crop&w=800&q=80',
                ],
                ramen_dry: [
                        'https://images.unsplash.com/photo-1612929633738-8fe44f7ec841?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1526233940723-cd3505859124?auto=format&fit=crop&w=800&q=80',
                ],
                pizza_neapolitan: [
                        'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1594007654729-407eceeae721?auto=format&fit=crop&w=800&q=80',
                ],
                pizza_american: [
                        'https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1534308983496-4fabb1a015ee?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1541745537411-b8046dc6d66c?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1544982503-9f984c14501a?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1571407970349-bc81e7e96d47?auto=format&fit=crop&w=800&q=80',
                ],
                burger_smash: [
                        'https://images.unsplash.com/photo-1550547660-d9450f859349?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1586190812112-239567c69998?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1547584370-2cc98b8b8dc8?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&w=800&q=80',
                ],
                burger_gourmet: [
                        'https://images.unsplash.com/photo-1571091718767-18b5b1457add?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1553979459-d2229ba7143b?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1572802419224-296b0aeee0d9?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1499186024912-c374ac2e9922?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1551782450-a2132b4ba21d?auto=format&fit=crop&w=800&q=80',
                ],
                thai_pad_thai: [
                        'https://images.unsplash.com/photo-1559314809-0d155014e29e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1625398416128-25198bd0a101?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1590301157890-4810ed352733?auto=format&fit=crop&w=800&q=80',
                ],
                thai_curry: [
                        'https://images.unsplash.com/photo-1455619452474-d2fb29da6403?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1473093226795-af9932fe5856?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1548943487-a2e4b43eb488?auto=format&fit=crop&w=800&q=80',
                ],
                thai_street: [
                        'https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1563245372-f21724e3856d?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1539405174458-94736f887568?auto=format&fit=crop&w=800&q=80',
                ],
                cafe_art: [
                        'https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1521017432531-fbd92d768814?auto=format&fit=crop&w=800&q=80',
                ],
                cafe_interior: [
                        'https://images.unsplash.com/photo-1445116572660-236b28497be0?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1559925393-8be0ec4767c8?auto=format&fit=crop&w=800&q=80',
                ],
                steak: [
                        'https://images.unsplash.com/photo-1600891964092-4316c288032e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1546964124-0cce460f38ef?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&w=800&q=80',
                ],
                seafood: [
                        'https://images.unsplash.com/photo-1534080564583-6be75777b70a?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1626804475297-411dbcc76c74?auto=format&fit=crop&w=800&q=80',
                ],
                georgian: [
                        'https://images.unsplash.com/photo-1628102475017-09f0753063eb?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1628102467333-e59546059d48?auto=format&fit=crop&w=800&q=80',
                ]
        },
        attraction: {
                temple: [
                        'https://images.unsplash.com/photo-1563492065599-3520f775eeed?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1582234031737-25e640236a28?auto=format&fit=crop&w=800&q=80',
                ],
                viewpoint: [
                        'https://images.unsplash.com/photo-1533105079780-92b9be482077?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=800&q=80',
                ],
                museum: [
                        'https://images.unsplash.com/photo-1518998053901-5348d3969105?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1544967082-d9d3fbc7b3cc?auto=format&fit=crop&w=800&q=80',
                ],
                nature: [
                        'https://images.unsplash.com/photo-1496347315686-5f274d046ccc?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1625234190130-f80c65590924?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=800&q=80',
                ],
                beach: [
                        'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1519046904884-53103b34b206?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1506929562872-bb421503ef21?auto=format&fit=crop&w=800&q=80',
                ],
                monument: [
                        'https://images.unsplash.com/photo-1533105079780-92b9be482077?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1543349689-9a4d426bee8e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1449156001533-cb39c8994c00?auto=format&fit=crop&w=800&q=80',
                ],
                market: [
                        'https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1553535919-4b62db9405d4?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1555392859-0098492040b2?auto=format&fit=crop&w=800&q=80',
                ]
        },
        shopping: {
                mall: [
                        'https://images.unsplash.com/photo-1519567241046-7f570eee3d9f?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1567449303078-57ad431de067?auto=format&fit=crop&w=800&q=80',
                ]
        },
        misc: {
                fallback: [
                        'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1500835556837-99ac94a94552?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1473625247510-8ceb1760943f?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1488646953014-85cb44e25828?auto=format&fit=crop&w=800&q=80',
                        'https://images.unsplash.com/photo-1527631746610-bca00a040d60?auto=format&fit=crop&w=800&q=80',
                ]
        }
};

/**
 * Deterministic Hash Algorithm
 * Ensures the same place name always gets the same image from its pool.
 */
const getIndexFromHash = (name: string, poolSize: number): number => {
        let hash = 0;
        for (let i = 0; i < name.length; i++) {
                hash = name.charCodeAt(i) + ((hash << 5) - hash);
        }
        return Math.abs(hash) % poolSize;
};

/**
 * getPlaceImage: Semantic + Deterministic Image Engine
 */
export const getPlaceImage = (name: string, type: 'food' | 'attraction' | 'hotel' | 'shopping' | string, tags: string[] = []): string => {
        const lowerName = name.toLowerCase();
        const allTags = tags.map(t => t.toLowerCase());
        const searchString = `${lowerName} ${allTags.join(' ')}`;

        let category: string = '';
        let subCategory: string = 'generic';

        if (type === 'food') {
                category = 'food';

                // Ramen Semantic Scanners
                if (searchString.includes('tonkotsu') || searchString.includes('creamy')) subCategory = 'ramen_tonkotsu';
                else if (searchString.includes('shoyu') || searchString.includes('soy')) subCategory = 'ramen_shoyu';
                else if (searchString.includes('mazesoba') || searchString.includes('dry ramen') || searchString.includes('maze')) subCategory = 'ramen_dry';
                else if (searchString.includes('ramen')) subCategory = 'ramen_tonkotsu'; // Default ramen

                // Pizza Semantic Scanners
                else if (searchString.includes('neapolitan') || searchString.includes('wood oven') || searchString.includes('artisanal')) subCategory = 'pizza_neapolitan';
                else if (searchString.includes('pepperoni') || searchString.includes('american pizza') || searchString.includes('deliver')) subCategory = 'pizza_american';
                else if (searchString.includes('pizza')) subCategory = 'pizza_neapolitan';

                // Burger Semantic Scanners
                else if (searchString.includes('smash') || searchString.includes('crispy') || searchString.includes('street burger')) subCategory = 'burger_smash';
                else if (searchString.includes('gourmet') || searchString.includes('steakhouse') || searchString.includes('tall burger')) subCategory = 'burger_gourmet';
                else if (searchString.includes('burger')) subCategory = 'burger_smash';

                // Thai Semantic Scanners
                else if (searchString.includes('pad thai')) subCategory = 'thai_pad_thai';
                else if (searchString.includes('curry') || searchString.includes('soup')) subCategory = 'thai_curry';
                else if (searchString.includes('market') || searchString.includes('street')) subCategory = 'thai_street';
                else if (searchString.includes('thai')) subCategory = 'thai_street';

                // Cafe Semantic Scanners
                else if (searchString.includes('latte') || searchString.includes('art') || searchString.includes('barista')) subCategory = 'cafe_art';
                else if (searchString.includes('minimalist') || searchString.includes('interior') || searchString.includes('modern')) subCategory = 'cafe_interior';
                else if (searchString.includes('cafe') || searchString.includes('coffee')) subCategory = 'cafe_art';

                // Other Food
                else if (searchString.includes('steak') || searchString.includes('grill')) subCategory = 'steak';
                else if (searchString.includes('sea') || searchString.includes('fish')) subCategory = 'seafood';
                else if (searchString.includes('georgian') || searchString.includes('khachapuri')) subCategory = 'georgian';
        }
        else if (type === 'attraction') {
                category = 'attraction';
                if (searchString.includes('temple') || searchString.includes('wat')) subCategory = 'temple';
                else if (searchString.includes('museum') || searchString.includes('gallery')) subCategory = 'museum';
                else if (searchString.includes('beach') || searchString.includes('island')) subCategory = 'beach';
                else if (searchString.includes('park') || searchString.includes('garden') || searchString.includes('nature')) subCategory = 'nature';
                else if (searchString.includes('market') || searchString.includes('bazaar')) subCategory = 'market';
                else if (searchString.includes('monument') || searchString.includes('statue') || searchString.includes('big buddha')) subCategory = 'monument';
                else subCategory = 'viewpoint';
        }
        else if (type === 'shopping') {
                category = 'shopping';
                subCategory = 'mall';
        }

        // Attempt to find pool
        const pool = category && (IMAGE_BANK[category] as any)[subCategory] ? (IMAGE_BANK[category] as any)[subCategory] : IMAGE_BANK.misc.fallback;

        const index = getIndexFromHash(name, pool.length);
        return pool[index];
};
