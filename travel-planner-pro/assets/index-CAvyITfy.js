(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function O0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var W_={exports:{}},Dd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function xP(){if(hT)return Dd;hT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var f in r)f!=="key"&&(a[f]=r[f])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:a}}return Dd.Fragment=e,Dd.jsx=t,Dd.jsxs=t,Dd}var fT;function wP(){return fT||(fT=1,W_.exports=xP()),W_.exports}var g=wP(),Z_={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function bP(){if(mT)return lt;mT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function N(J){return J===null||typeof J!="object"?null:(J=S&&J[S]||J["@@iterator"],typeof J=="function"?J:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,P={};function Q(J,ce,be){this.props=J,this.context=ce,this.refs=P,this.updater=be||O}Q.prototype.isReactComponent={},Q.prototype.setState=function(J,ce){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ce,"setState")},Q.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function W(){}W.prototype=Q.prototype;function H(J,ce,be){this.props=J,this.context=ce,this.refs=P,this.updater=be||O}var j=H.prototype=new W;j.constructor=H,V(j,Q.prototype),j.isPureReactComponent=!0;var Z=Array.isArray;function Y(){}var D={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function U(J,ce,be){var re=be.ref;return{$$typeof:n,type:J,key:ce,ref:re!==void 0?re:null,props:be}}function G(J,ce){return U(J.type,ce,J.props)}function $(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function te(J){var ce={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(be){return ce[be]})}var K=/\/+/g;function Le(J,ce){return typeof J=="object"&&J!==null&&J.key!=null?te(""+J.key):ce.toString(36)}function rt(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(Y,Y):(J.status="pending",J.then(function(ce){J.status==="pending"&&(J.status="fulfilled",J.value=ce)},function(ce){J.status==="pending"&&(J.status="rejected",J.reason=ce)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function fe(J,ce,be,re,ve){var z=typeof J;(z==="undefined"||z==="boolean")&&(J=null);var se=!1;if(J===null)se=!0;else switch(z){case"bigint":case"string":case"number":se=!0;break;case"object":switch(J.$$typeof){case n:case e:se=!0;break;case x:return se=J._init,fe(se(J._payload),ce,be,re,ve)}}if(se)return ve=ve(J),se=re===""?"."+Le(J,0):re,Z(ve)?(be="",se!=null&&(be=se.replace(K,"$&/")+"/"),fe(ve,ce,be,"",function(Fe){return Fe})):ve!=null&&($(ve)&&(ve=G(ve,be+(ve.key==null||J&&J.key===ve.key?"":(""+ve.key).replace(K,"$&/")+"/")+se)),ce.push(ve)),1;se=0;var oe=re===""?".":re+":";if(Z(J))for(var Me=0;Me<J.length;Me++)re=J[Me],z=oe+Le(re,Me),se+=fe(re,ce,be,z,ve);else if(Me=N(J),typeof Me=="function")for(J=Me.call(J),Me=0;!(re=J.next()).done;)re=re.value,z=oe+Le(re,Me++),se+=fe(re,ce,be,z,ve);else if(z==="object"){if(typeof J.then=="function")return fe(rt(J),ce,be,re,ve);throw ce=String(J),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return se}function Ie(J,ce,be){if(J==null)return J;var re=[],ve=0;return fe(J,re,"","",function(z){return ce.call(be,z,ve++)}),re}function Ee(J){if(J._status===-1){var ce=J._result;ce=ce(),ce.then(function(be){(J._status===0||J._status===-1)&&(J._status=1,J._result=be)},function(be){(J._status===0||J._status===-1)&&(J._status=2,J._result=be)}),J._status===-1&&(J._status=0,J._result=ce)}if(J._status===1)return J._result.default;throw J._result}var Qe=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},pe={map:Ie,forEach:function(J,ce,be){Ie(J,function(){ce.apply(this,arguments)},be)},count:function(J){var ce=0;return Ie(J,function(){ce++}),ce},toArray:function(J){return Ie(J,function(ce){return ce})||[]},only:function(J){if(!$(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return lt.Activity=T,lt.Children=pe,lt.Component=Q,lt.Fragment=t,lt.Profiler=r,lt.PureComponent=H,lt.StrictMode=i,lt.Suspense=m,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,lt.__COMPILER_RUNTIME={__proto__:null,c:function(J){return D.H.useMemoCache(J)}},lt.cache=function(J){return function(){return J.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(J,ce,be){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var re=V({},J.props),ve=J.key;if(ce!=null)for(z in ce.key!==void 0&&(ve=""+ce.key),ce)!k.call(ce,z)||z==="key"||z==="__self"||z==="__source"||z==="ref"&&ce.ref===void 0||(re[z]=ce[z]);var z=arguments.length-2;if(z===1)re.children=be;else if(1<z){for(var se=Array(z),oe=0;oe<z;oe++)se[oe]=arguments[oe+2];re.children=se}return U(J.type,ve,re)},lt.createContext=function(J){return J={$$typeof:c,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:a,_context:J},J},lt.createElement=function(J,ce,be){var re,ve={},z=null;if(ce!=null)for(re in ce.key!==void 0&&(z=""+ce.key),ce)k.call(ce,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ve[re]=ce[re]);var se=arguments.length-2;if(se===1)ve.children=be;else if(1<se){for(var oe=Array(se),Me=0;Me<se;Me++)oe[Me]=arguments[Me+2];ve.children=oe}if(J&&J.defaultProps)for(re in se=J.defaultProps,se)ve[re]===void 0&&(ve[re]=se[re]);return U(J,z,ve)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(J){return{$$typeof:f,render:J}},lt.isValidElement=$,lt.lazy=function(J){return{$$typeof:x,_payload:{_status:-1,_result:J},_init:Ee}},lt.memo=function(J,ce){return{$$typeof:p,type:J,compare:ce===void 0?null:ce}},lt.startTransition=function(J){var ce=D.T,be={};D.T=be;try{var re=J(),ve=D.S;ve!==null&&ve(be,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Y,Qe)}catch(z){Qe(z)}finally{ce!==null&&be.types!==null&&(ce.types=be.types),D.T=ce}},lt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},lt.use=function(J){return D.H.use(J)},lt.useActionState=function(J,ce,be){return D.H.useActionState(J,ce,be)},lt.useCallback=function(J,ce){return D.H.useCallback(J,ce)},lt.useContext=function(J){return D.H.useContext(J)},lt.useDebugValue=function(){},lt.useDeferredValue=function(J,ce){return D.H.useDeferredValue(J,ce)},lt.useEffect=function(J,ce){return D.H.useEffect(J,ce)},lt.useEffectEvent=function(J){return D.H.useEffectEvent(J)},lt.useId=function(){return D.H.useId()},lt.useImperativeHandle=function(J,ce,be){return D.H.useImperativeHandle(J,ce,be)},lt.useInsertionEffect=function(J,ce){return D.H.useInsertionEffect(J,ce)},lt.useLayoutEffect=function(J,ce){return D.H.useLayoutEffect(J,ce)},lt.useMemo=function(J,ce){return D.H.useMemo(J,ce)},lt.useOptimistic=function(J,ce){return D.H.useOptimistic(J,ce)},lt.useReducer=function(J,ce,be){return D.H.useReducer(J,ce,be)},lt.useRef=function(J){return D.H.useRef(J)},lt.useState=function(J){return D.H.useState(J)},lt.useSyncExternalStore=function(J,ce,be){return D.H.useSyncExternalStore(J,ce,be)},lt.useTransition=function(){return D.H.useTransition()},lt.version="19.2.3",lt}var pT;function U0(){return pT||(pT=1,Z_.exports=bP()),Z_.exports}var X=U0();const V0=O0(X);var X_={exports:{}},Ld={},Q_={exports:{}},ey={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function TP(){return gT||(gT=1,(function(n){function e(fe,Ie){var Ee=fe.length;fe.push(Ie);e:for(;0<Ee;){var Qe=Ee-1>>>1,pe=fe[Qe];if(0<r(pe,Ie))fe[Qe]=Ie,fe[Ee]=pe,Ee=Qe;else break e}}function t(fe){return fe.length===0?null:fe[0]}function i(fe){if(fe.length===0)return null;var Ie=fe[0],Ee=fe.pop();if(Ee!==Ie){fe[0]=Ee;e:for(var Qe=0,pe=fe.length,J=pe>>>1;Qe<J;){var ce=2*(Qe+1)-1,be=fe[ce],re=ce+1,ve=fe[re];if(0>r(be,Ee))re<pe&&0>r(ve,be)?(fe[Qe]=ve,fe[re]=Ee,Qe=re):(fe[Qe]=be,fe[ce]=Ee,Qe=ce);else if(re<pe&&0>r(ve,Ee))fe[Qe]=ve,fe[re]=Ee,Qe=re;else break e}}return Ie}function r(fe,Ie){var Ee=fe.sortIndex-Ie.sortIndex;return Ee!==0?Ee:fe.id-Ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],x=1,T=null,S=3,N=!1,O=!1,V=!1,P=!1,Q=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function j(fe){for(var Ie=t(p);Ie!==null;){if(Ie.callback===null)i(p);else if(Ie.startTime<=fe)i(p),Ie.sortIndex=Ie.expirationTime,e(m,Ie);else break;Ie=t(p)}}function Z(fe){if(V=!1,j(fe),!O)if(t(m)!==null)O=!0,Y||(Y=!0,te());else{var Ie=t(p);Ie!==null&&rt(Z,Ie.startTime-fe)}}var Y=!1,D=-1,k=5,U=-1;function G(){return P?!0:!(n.unstable_now()-U<k)}function $(){if(P=!1,Y){var fe=n.unstable_now();U=fe;var Ie=!0;try{e:{O=!1,V&&(V=!1,W(D),D=-1),N=!0;var Ee=S;try{t:{for(j(fe),T=t(m);T!==null&&!(T.expirationTime>fe&&G());){var Qe=T.callback;if(typeof Qe=="function"){T.callback=null,S=T.priorityLevel;var pe=Qe(T.expirationTime<=fe);if(fe=n.unstable_now(),typeof pe=="function"){T.callback=pe,j(fe),Ie=!0;break t}T===t(m)&&i(m),j(fe)}else i(m);T=t(m)}if(T!==null)Ie=!0;else{var J=t(p);J!==null&&rt(Z,J.startTime-fe),Ie=!1}}break e}finally{T=null,S=Ee,N=!1}Ie=void 0}}finally{Ie?te():Y=!1}}}var te;if(typeof H=="function")te=function(){H($)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Le=K.port2;K.port1.onmessage=$,te=function(){Le.postMessage(null)}}else te=function(){Q($,0)};function rt(fe,Ie){D=Q(function(){fe(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(fe){fe.callback=null},n.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<fe?Math.floor(1e3/fe):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(fe){switch(S){case 1:case 2:case 3:var Ie=3;break;default:Ie=S}var Ee=S;S=Ie;try{return fe()}finally{S=Ee}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(fe,Ie){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ee=S;S=fe;try{return Ie()}finally{S=Ee}},n.unstable_scheduleCallback=function(fe,Ie,Ee){var Qe=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Qe+Ee:Qe):Ee=Qe,fe){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Ee+pe,fe={id:x++,callback:Ie,priorityLevel:fe,startTime:Ee,expirationTime:pe,sortIndex:-1},Ee>Qe?(fe.sortIndex=Ee,e(p,fe),t(m)===null&&fe===t(p)&&(V?(W(D),D=-1):V=!0,rt(Z,Ee-Qe))):(fe.sortIndex=pe,e(m,fe),O||N||(O=!0,Y||(Y=!0,te()))),fe},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(fe){var Ie=S;return function(){var Ee=S;S=Ie;try{return fe.apply(this,arguments)}finally{S=Ee}}}})(ey)),ey}var _T;function EP(){return _T||(_T=1,Q_.exports=TP()),Q_.exports}var ty={exports:{}},_i={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function SP(){if(yT)return _i;yT=1;var n=U0();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(m,p,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:m,containerInfo:p,implementation:x}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_i.createPortal=function(m,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,x)},_i.flushSync=function(m){var p=c.T,x=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=x,i.d.f()}},_i.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},_i.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},_i.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var x=p.as,T=f(x,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:N}):x==="script"&&i.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_i.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},_i.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,T=f(x,p.crossOrigin);i.d.L(m,x,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_i.preloadModule=function(m,p){if(typeof m=="string")if(p){var x=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},_i.requestFormReset=function(m){i.d.r(m)},_i.unstable_batchedUpdates=function(m,p){return m(p)},_i.useFormState=function(m,p,x){return c.H.useFormState(m,p,x)},_i.useFormStatus=function(){return c.H.useHostTransitionStatus()},_i.version="19.2.3",_i}var vT;function AP(){if(vT)return ty.exports;vT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ty.exports=SP(),ty.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function CP(){if(xT)return Ld;xT=1;var n=EP(),e=U0(),t=AP();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function p(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,h=o;;){var b=u.return;if(b===null)break;var E=b.alternate;if(E===null){if(h=b.return,h!==null){u=h;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===u)return m(b),s;if(E===h)return m(b),o;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=b,h=E;else{for(var R=!1,F=b.child;F;){if(F===u){R=!0,u=b,h=E;break}if(F===h){R=!0,h=b,u=E;break}F=F.sibling}if(!R){for(F=E.child;F;){if(F===u){R=!0,u=E,h=b;break}if(F===h){R=!0,h=E,u=b;break}F=F.sibling}if(!R)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function x(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=x(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),H=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function Le(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case Q:return"Profiler";case P:return"StrictMode";case Z:return"Suspense";case Y:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case H:return s.displayName||"Context";case W:return(s._context.displayName||"Context")+".Consumer";case j:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return o=s.displayName||null,o!==null?o:Le(s.type)||"Memo";case k:o=s._payload,s=s._init;try{return Le(s(o))}catch{}}return null}var rt=Array.isArray,fe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Qe=[],pe=-1;function J(s){return{current:s}}function ce(s){0>pe||(s.current=Qe[pe],Qe[pe]=null,pe--)}function be(s,o){pe++,Qe[pe]=s.current,s.current=o}var re=J(null),ve=J(null),z=J(null),se=J(null);function oe(s,o){switch(be(z,o),be(ve,s),be(re,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Lb(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Lb(o),s=Ob(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ce(re),be(re,s)}function Me(){ce(re),ce(ve),ce(z)}function Fe(s){s.memoizedState!==null&&be(se,s);var o=re.current,u=Ob(o,s.type);o!==u&&(be(ve,s),be(re,u))}function yt(s){ve.current===s&&(ce(re),ce(ve)),se.current===s&&(ce(se),Rd._currentValue=Ee)}var dt,Ft;function kt(s){if(dt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);dt=o&&o[1]||"",Ft=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+s+Ft}var mn=!1;function tt(s,o){if(!s||mn)return"";mn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(xe){var _e=xe}Reflect.construct(s,[],Ae)}else{try{Ae.call()}catch(xe){_e=xe}s.call(Ae.prototype)}}else{try{throw Error()}catch(xe){_e=xe}(Ae=s())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(xe){if(xe&&_e&&typeof xe.stack=="string")return[xe.stack,_e.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),R=E[0],F=E[1];if(R&&F){var ne=R.split(`
`),he=F.split(`
`);for(b=h=0;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;for(;b<he.length&&!he[b].includes("DetermineComponentFrameRoot");)b++;if(h===ne.length||b===he.length)for(h=ne.length-1,b=he.length-1;1<=h&&0<=b&&ne[h]!==he[b];)b--;for(;1<=h&&0<=b;h--,b--)if(ne[h]!==he[b]){if(h!==1||b!==1)do if(h--,b--,0>b||ne[h]!==he[b]){var we=`
`+ne[h].replace(" at new "," at ");return s.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",s.displayName)),we}while(1<=h&&0<=b);break}}}finally{mn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?kt(u):""}function qt(s,o){switch(s.tag){case 26:case 27:case 5:return kt(s.type);case 16:return kt("Lazy");case 13:return s.child!==o&&o!==null?kt("Suspense Fallback"):kt("Suspense");case 19:return kt("SuspenseList");case 0:case 15:return tt(s.type,!1);case 11:return tt(s.type.render,!1);case 1:return tt(s.type,!0);case 31:return kt("Activity");default:return""}}function vt(s){try{var o="",u=null;do o+=qt(s,u),u=s,s=s.return;while(s);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var mt=Object.prototype.hasOwnProperty,zt=n.unstable_scheduleCallback,En=n.unstable_cancelCallback,ci=n.unstable_shouldYield,oo=n.unstable_requestPaint,Ln=n.unstable_now,Xs=n.unstable_getCurrentPriorityLevel,ao=n.unstable_ImmediatePriority,Zo=n.unstable_UserBlockingPriority,Qs=n.unstable_NormalPriority,Yc=n.unstable_LowPriority,al=n.unstable_IdlePriority,ll=n.log,mu=n.unstable_setDisableYieldValue,ki=null,xn=null;function Ei(s){if(typeof ll=="function"&&mu(s),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(ki,s)}catch{}}var un=Math.clz32?Math.clz32:pu,Ir=Math.log,Xo=Math.LN2;function pu(s){return s>>>=0,s===0?32:31-(Ir(s)/Xo|0)|0}var es=256,Rr=262144,cn=4194304;function Es(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ss(s,o,u){var h=s.pendingLanes;if(h===0)return 0;var b=0,E=s.suspendedLanes,R=s.pingedLanes;s=s.warmLanes;var F=h&134217727;return F!==0?(h=F&~E,h!==0?b=Es(h):(R&=F,R!==0?b=Es(R):u||(u=F&~s,u!==0&&(b=Es(u))))):(F=h&~E,F!==0?b=Es(F):R!==0?b=Es(R):u||(u=h&~s,u!==0&&(b=Es(u)))),b===0?0:o!==0&&o!==b&&(o&E)===0&&(E=b&-b,u=o&-o,E>=u||E===32&&(u&4194048)!==0)?o:b}function ts(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Wc(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gu(){var s=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),s}function As(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function er(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zc(s,o,u,h,b,E){var R=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var F=s.entanglements,ne=s.expirationTimes,he=s.hiddenUpdates;for(u=R&~u;0<u;){var we=31-un(u),Ae=1<<we;F[we]=0,ne[we]=-1;var _e=he[we];if(_e!==null)for(he[we]=null,we=0;we<_e.length;we++){var xe=_e[we];xe!==null&&(xe.lane&=-536870913)}u&=~Ae}h!==0&&lo(s,h,0),E!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=E&~(R&~o))}function lo(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-un(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function ul(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var h=31-un(u),b=1<<h;b&o|s[h]&o&&(s[h]|=o),u&=~b}}function cl(s,o){var u=o&-o;return u=(u&42)!==0?1:Hn(u),(u&(s.suspendedLanes|o))!==0?0:u}function Hn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ze(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function dl(){var s=Ie.p;return s!==0?s:(s=window.event,s===void 0?32:rT(s.type))}function Di(s,o){var u=Ie.p;try{return Ie.p=s,o()}finally{Ie.p=u}}var Li=Math.random().toString(36).slice(2),dn="__reactFiber$"+Li,pn="__reactProps$"+Li,ns="__reactContainer$"+Li,is="__reactEvents$"+Li,_u="__reactListeners$"+Li,yu="__reactHandles$"+Li,vu="__reactResources$"+Li,Cs="__reactMarker$"+Li;function Qo(s){delete s[dn],delete s[pn],delete s[is],delete s[_u],delete s[yu]}function ss(s){var o=s[dn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[ns]||u[dn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Hb(s);s!==null;){if(u=s[dn])return u;s=Hb(s)}return o}s=u,u=s.parentNode}return null}function Oi(s){if(s=s[dn]||s[ns]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function qn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Ns(s){var o=s[vu];return o||(o=s[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function gn(s){s[Cs]=!0}var hl=new Set,fl={};function Is(s,o){Ui(s,o),Ui(s+"Capture",o)}function Ui(s,o){for(fl[s]=o,s=0;s<o.length;s++)hl.add(o[s])}var tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ea={},ta={};function Mr(s){return mt.call(ta,s)?!0:mt.call(ea,s)?!1:tr.test(s)?ta[s]=!0:(ea[s]=!0,!1)}function gt(s,o,u){if(Mr(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function xt(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function sn(s,o,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+h)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Si(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function uo(s,o,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,E=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return b.call(this)},set:function(R){u=""+R,E.call(this,R)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(R){u=""+R},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Oe(s){if(!s._valueTracker){var o=Si(s)?"checked":"value";s._valueTracker=uo(s,o,""+s[o])}}function Gt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return s&&(h=Si(s)?s.checked?"true":"false":s.value),s=h,s!==u?(o.setValue(s),!0):!1}function Vi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Rs=/[\n"\\]/g;function Xt(s){return s.replace(Rs,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function na(s,o,u,h,b,E,R,F){s.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.type=R:s.removeAttribute("type"),o!=null?R==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+rn(o)):s.value!==""+rn(o)&&(s.value=""+rn(o)):R!=="submit"&&R!=="reset"||s.removeAttribute("value"),o!=null?rs(s,R,rn(o)):u!=null?rs(s,R,rn(u)):h!=null&&s.removeAttribute("value"),b==null&&E!=null&&(s.defaultChecked=!!E),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+rn(F):s.removeAttribute("name")}function co(s,o,u,h,b,E,R,F){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),o!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){Oe(s);return}u=u!=null?""+rn(u):"",o=o!=null?""+rn(o):u,F||o===s.value||(s.value=o),s.defaultValue=o}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=F?s.checked:!!h,s.defaultChecked=!!h,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.name=R),Oe(s)}function rs(s,o,u){o==="number"&&Vi(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function $t(s,o,u,h){if(s=s.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<s.length;u++)b=o.hasOwnProperty("$"+s[u].value),s[u].selected!==b&&(s[u].selected=b),b&&h&&(s[u].defaultSelected=!0)}else{for(u=""+rn(u),o=null,b=0;b<s.length;b++){if(s[b].value===u){s[b].selected=!0,h&&(s[b].defaultSelected=!0);return}o!==null||s[b].disabled||(o=s[b])}o!==null&&(o.selected=!0)}}function Ms(s,o,u){if(o!=null&&(o=""+rn(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+rn(u):""}function Bi(s,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(i(92));if(rt(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=rn(o),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),Oe(s)}function Sn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nr(s,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,u):typeof u!="number"||u===0||ia.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function ho(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var b in o)h=o[b],o.hasOwnProperty(b)&&u[b]!==h&&nr(s,b,h)}else for(var E in o)o.hasOwnProperty(E)&&nr(s,E,o[E])}function Pr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(s){return Ps.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function di(){}var sa=null;function hi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Dr=null,Ze=null;function Gn(s){var o=Oi(s);if(o&&(s=o.stateNode)){var u=s[pn]||null;e:switch(s=o.stateNode,o.type){case"input":if(na(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Xt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==s&&h.form===s.form){var b=h[pn]||null;if(!b)throw Error(i(90));na(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===s.form&&Gt(h)}break e;case"textarea":Ms(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&$t(s,!!u.multiple,o,!1)}}}var Dt=!1;function ir(s,o,u){if(Dt)return s(o,u);Dt=!0;try{var h=s(o);return h}finally{if(Dt=!1,(Dr!==null||Ze!==null)&&(Nf(),Dr&&(o=Dr,s=Ze,Ze=Dr=null,Gn(o),s)))for(o=0;o<s.length;o++)Gn(s[o])}}function Ai(s,o){var u=s.stateNode;if(u===null)return null;var h=u[pn]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sr=!1;if(fi)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){sr=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{sr=!1}var Fi=null,rr=null,on=null;function os(){if(on)return on;var s,o=rr,u=o.length,h,b="value"in Fi?Fi.value:Fi.textContent,E=b.length;for(s=0;s<u&&o[s]===b[s];s++);var R=u-s;for(h=1;h<=R&&o[u-h]===b[E-h];h++);return on=b.slice(s,1<h?1-h:void 0)}function Lr(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ks(){return!0}function as(){return!1}function An(s){function o(u,h,b,E,R){this._reactName=u,this._targetInst=b,this.type=h,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(u=s[F],this[F]=u?u(E):E[F]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ks:as,this.isPropagationStopped=as,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),o}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=An(ls),or=T({},ls,{view:0,detail:0}),pt=An(or),Or,$n,mi,mo=T({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==mi&&(mi&&s.type==="mousemove"?(Or=s.screenX-mi.screenX,$n=s.screenY-mi.screenY):$n=Or=0,mi=s),Or)},movementY:function(s){return"movementY"in s?s.movementY:$n}}),ml=An(mo),ar=T({},mo,{dataTransfer:0}),xu=An(ar),pl=T({},or,{relatedTarget:0}),po=An(pl),gl=T({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),ra=An(gl),oa=T({},ls,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ci=An(oa),wu=T({},ls,{data:0}),us=An(wu),cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_l={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aa(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=yl[s])?!!o[s]:!1}function Ur(){return aa}var Jn=T({},or,{key:function(s){if(s.key){var o=cs[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Lr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_l[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(s){return s.type==="keypress"?Lr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),vl=An(Jn),bu=T({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lr=An(bu),v=T({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),C=An(v),M=T({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=An(M),ue=T({},mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ye=An(ue),Pe=T({},ls,{newState:0,oldState:0}),nt=An(Pe),Rt=[9,13,27,32],Mt=fi&&"CompositionEvent"in window,Qt=null;fi&&"documentMode"in document&&(Qt=document.documentMode);var zi=fi&&"TextEvent"in window&&!Qt,ji=fi&&(!Mt||Qt&&8<Qt&&11>=Qt),Ni=" ",ds=!1;function go(s,o){switch(s){case"keyup":return Rt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _o(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var la=!1;function hs(s,o){switch(s){case"compositionend":return _o(o);case"keypress":return o.which!==32?null:(ds=!0,Ni);case"textInput":return s=o.data,s===Ni&&ds?null:s;default:return null}}function ua(s,o){if(la)return s==="compositionend"||!Mt&&go(s,o)?(s=os(),on=rr=Fi=null,la=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ji&&o.locale!=="ko"?null:o.data;default:return null}}var mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ls(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!mg[s.type]:o==="textarea"}function qh(s,o,u,h){Dr?Ze?Ze.push(h):Ze=[h]:Dr=h,o=Lf(o,"onChange"),0<o.length&&(u=new Ds("onChange","change",null,u,h),s.push({event:u,listeners:o}))}var Os=null,xl=null;function wl(s){Ib(s,0)}function bl(s){var o=qn(s);if(Gt(o))return s}function Tl(s,o){if(s==="change")return o}var Gh=!1;if(fi){var Us;if(fi){var ca="oninput"in document;if(!ca){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),ca=typeof $h.oninput=="function"}Us=ca}else Us=!1;Gh=Us&&(!document.documentMode||9<document.documentMode)}function Tu(){Os&&(Os.detachEvent("onpropertychange",Jh),xl=Os=null)}function Jh(s){if(s.propertyName==="value"&&bl(xl)){var o=[];qh(o,xl,s,hi(s)),ir(wl,o)}}function ur(s,o,u){s==="focusin"?(Tu(),Os=o,xl=u,Os.attachEvent("onpropertychange",Jh)):s==="focusout"&&Tu()}function pg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bl(xl)}function da(s,o){if(s==="click")return bl(o)}function gg(s,o){if(s==="input"||s==="change")return bl(o)}function cr(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Kn=typeof Object.is=="function"?Object.is:cr;function ha(s,o){if(Kn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var b=u[h];if(!mt.call(o,b)||!Kn(s[b],o[b]))return!1}return!0}function Eu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function El(s,o){var u=Eu(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=o&&h>=o)return{node:u,offset:o-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Eu(u)}}function Su(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Su(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Sl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Vi(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Vi(s.document)}return o}function Vr(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Au=fi&&"documentMode"in document&&11>=document.documentMode,Br=null,Cu=null,Al=null,fa=!1;function Kh(s,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fa||Br==null||Br!==Vi(h)||(h=Br,"selectionStart"in h&&Vr(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Al&&ha(Al,h)||(Al=h,h=Lf(Cu,"onSelect"),0<h.length&&(o=new Ds("onSelect","select",null,o,u),s.push({event:o,listeners:h}),o.target=Br)))}function Fr(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var ma={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Nu={},Yh={};fi&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Yn(s){if(Nu[s])return Nu[s];if(!ma[s])return s;var o=ma[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Yh)return Nu[s]=o[u];return s}var Cl=Yn("animationend"),Wh=Yn("animationiteration"),Nl=Yn("animationstart"),_g=Yn("transitionrun"),Zh=Yn("transitionstart"),yg=Yn("transitioncancel"),pa=Yn("transitionend"),Xh=new Map,zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zr.push("scrollEnd");function Hi(s,o){Xh.set(s,o),Is(o,[s])}var Il=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},qi=[],pi=0,Iu=0;function Rl(){for(var s=pi,o=Iu=pi=0;o<s;){var u=qi[o];qi[o++]=null;var h=qi[o];qi[o++]=null;var b=qi[o];qi[o++]=null;var E=qi[o];if(qi[o++]=null,h!==null&&b!==null){var R=h.pending;R===null?b.next=b:(b.next=R.next,R.next=b),h.pending=b}E!==0&&ga(u,b,E)}}function jr(s,o,u,h){qi[pi++]=s,qi[pi++]=o,qi[pi++]=u,qi[pi++]=h,Iu|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Xc(s,o,u,h){return jr(s,o,u,h),Ml(s)}function Vs(s,o){return jr(s,null,null,o),Ml(s)}function ga(s,o,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var b=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(b=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,b&&o!==null&&(b=31-un(u),s=E.hiddenUpdates,h=s[b],h===null?s[b]=[o]:h.push(o),o.lane=u|536870912),E):null}function Ml(s){if(50<Td)throw Td=0,x_=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var yo={};function vg(s,o,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(s,o,u,h){return new vg(s,o,u,h)}function Ru(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bs(s,o){var u=s.alternate;return u===null?(u=gi(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Qc(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Pl(s,o,u,h,b,E){var R=0;if(h=s,typeof s=="function")Ru(s)&&(R=1);else if(typeof s=="string")R=lP(s,u,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=gi(31,u,o,b),s.elementType=U,s.lanes=E,s;case V:return vo(u.children,b,E,o);case P:R=8,b|=24;break;case Q:return s=gi(12,u,o,b|2),s.elementType=Q,s.lanes=E,s;case Z:return s=gi(13,u,o,b),s.elementType=Z,s.lanes=E,s;case Y:return s=gi(19,u,o,b),s.elementType=Y,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:R=10;break e;case W:R=9;break e;case j:R=11;break e;case D:R=14;break e;case k:R=16,h=null;break e}R=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return o=gi(R,u,o,b),o.elementType=s,o.type=h,o.lanes=E,o}function vo(s,o,u,h){return s=gi(7,s,h,o),s.lanes=u,s}function Mu(s,o,u){return s=gi(6,s,null,o),s.lanes=u,s}function ed(s){var o=gi(18,null,null,0);return o.stateNode=s,o}function td(s,o,u){return o=gi(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var l=new WeakMap;function d(s,o){if(typeof s=="object"&&s!==null){var u=l.get(s);return u!==void 0?u:(o={value:s,source:o,stack:vt(o)},l.set(s,o),o)}return{value:s,source:o,stack:vt(o)}}var w=[],A=0,I=null,B=0,ee=[],le=0,ge=null,Se=1,ke="";function $e(s,o){w[A++]=B,w[A++]=I,I=s,B=o}function ht(s,o,u){ee[le++]=Se,ee[le++]=ke,ee[le++]=ge,ge=s;var h=Se;s=ke;var b=32-un(h)-1;h&=~(1<<b),u+=1;var E=32-un(o)+b;if(30<E){var R=b-b%5;E=(h&(1<<R)-1).toString(32),h>>=R,b-=R,Se=1<<32-un(o)+b|u<<b|h,ke=E+s}else Se=1<<E|u<<b|h,ke=s}function On(s){s.return!==null&&($e(s,1),ht(s,1,0))}function _n(s){for(;s===I;)I=w[--A],w[A]=null,B=w[--A],w[A]=null;for(;s===ge;)ge=ee[--le],ee[le]=null,ke=ee[--le],ee[le]=null,Se=ee[--le],ee[le]=null}function Ii(s,o){ee[le++]=Se,ee[le++]=ke,ee[le++]=ge,Se=o.id,ke=o.overflow,ge=s}var Lt=null,Ot=null,wt=!1,Hr=null,Gi=!1,Pu=Error(i(519));function qr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(d(o,s)),Pu}function nd(s){var o=s.stateNode,u=s.type,h=s.memoizedProps;switch(o[dn]=s,o[pn]=h,u){case"dialog":Tt("cancel",o),Tt("close",o);break;case"iframe":case"object":case"embed":Tt("load",o);break;case"video":case"audio":for(u=0;u<Sd.length;u++)Tt(Sd[u],o);break;case"source":Tt("error",o);break;case"img":case"image":case"link":Tt("error",o),Tt("load",o);break;case"details":Tt("toggle",o);break;case"input":Tt("invalid",o),co(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Tt("invalid",o);break;case"textarea":Tt("invalid",o),Bi(o,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||kb(o.textContent,u)?(h.popover!=null&&(Tt("beforetoggle",o),Tt("toggle",o)),h.onScroll!=null&&Tt("scroll",o),h.onScrollEnd!=null&&Tt("scrollend",o),h.onClick!=null&&(o.onclick=di),o=!0):o=!1,o||qr(s,!0)}function hn(s){for(Lt=s.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Lt=Lt.return}}function dr(s){if(s!==Lt)return!1;if(!wt)return hn(s),wt=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||L_(s.type,s.memoizedProps)),u=!u),u&&Ot&&qr(s),hn(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ot=jb(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ot=jb(s)}else o===27?(o=Ot,Ra(s.type)?(s=F_,F_=null,Ot=s):Ot=o):Ot=Lt?zs(s.stateNode.nextSibling):null;return!0}function xo(){Ot=Lt=null,wt=!1}function id(){var s=Hr;return s!==null&&(Yi===null?Yi=s:Yi.push.apply(Yi,s),Hr=null),s}function kl(s){Hr===null?Hr=[s]:Hr.push(s)}var Dl=J(null),Gr=null,hr=null;function _a(s,o,u){be(Dl,o._currentValue),o._currentValue=u}function wo(s){s._currentValue=Dl.current,ce(Dl)}function xg(s,o,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===u)break;s=s.return}}function wg(s,o,u,h){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var E=b.dependencies;if(E!==null){var R=b.child;E=E.firstContext;e:for(;E!==null;){var F=E;E=b;for(var ne=0;ne<o.length;ne++)if(F.context===o[ne]){E.lanes|=u,F=E.alternate,F!==null&&(F.lanes|=u),xg(E.return,u,s),h||(R=null);break e}E=F.next}}else if(b.tag===18){if(R=b.return,R===null)throw Error(i(341));R.lanes|=u,E=R.alternate,E!==null&&(E.lanes|=u),xg(R,u,s),R=null}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===s){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}}function ku(s,o,u,h){s=null;for(var b=o,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var R=b.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var F=b.type;Kn(b.pendingProps.value,R.value)||(s!==null?s.push(F):s=[F])}}else if(b===se.current){if(R=b.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Rd):s=[Rd])}b=b.return}s!==null&&wg(o,s,u,h),o.flags|=262144}function Qh(s){for(s=s.firstContext;s!==null;){if(!Kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ll(s){Gr=s,hr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ei(s){return yx(Gr,s)}function ef(s,o){return Gr===null&&Ll(s),yx(s,o)}function yx(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},hr===null){if(s===null)throw Error(i(308));hr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else hr=hr.next=o;return u}var sM=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},rM=n.unstable_scheduleCallback,oM=n.unstable_NormalPriority,Cn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new sM,data:new Map,refCount:0}}function sd(s){s.refCount--,s.refCount===0&&rM(oM,function(){s.controller.abort()})}var rd=null,Tg=0,Du=0,Lu=null;function aM(s,o){if(rd===null){var u=rd=[];Tg=0,Du=A_(),Lu={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Tg++,o.then(vx,vx),o}function vx(){if(--Tg===0&&rd!==null){Lu!==null&&(Lu.status="fulfilled");var s=rd;rd=null,Du=0,Lu=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function lM(s,o){var u=[],h={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(h.status="rejected",h.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),h}var xx=fe.S;fe.S=function(s,o){ib=Ln(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aM(s,o),xx!==null&&xx(s,o)};var Ol=J(null);function Eg(){var s=Ol.current;return s!==null?s:en.pooledCache}function tf(s,o){o===null?be(Ol,Ol.current):be(Ol,o.pool)}function wx(){var s=Eg();return s===null?null:{parent:Cn._currentValue,pool:s}}var Ou=Error(i(460)),Sg=Error(i(474)),nf=Error(i(542)),sf={then:function(){}};function bx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Tx(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(di,di),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Sx(s),s;default:if(typeof o.status=="string")o.then(di,di);else{if(s=en,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=h}},function(h){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Sx(s),s}throw Vl=o,Ou}}function Ul(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Vl=u,Ou):u}}var Vl=null;function Ex(){if(Vl===null)throw Error(i(459));var s=Vl;return Vl=null,s}function Sx(s){if(s===Ou||s===nf)throw Error(i(483))}var Uu=null,od=0;function rf(s){var o=od;return od+=1,Uu===null&&(Uu=[]),Tx(Uu,s,o)}function ad(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function of(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Ax(s){function o(ae,ie){if(s){var de=ae.deletions;de===null?(ae.deletions=[ie],ae.flags|=16):de.push(ie)}}function u(ae,ie){if(!s)return null;for(;ie!==null;)o(ae,ie),ie=ie.sibling;return null}function h(ae){for(var ie=new Map;ae!==null;)ae.key!==null?ie.set(ae.key,ae):ie.set(ae.index,ae),ae=ae.sibling;return ie}function b(ae,ie){return ae=Bs(ae,ie),ae.index=0,ae.sibling=null,ae}function E(ae,ie,de){return ae.index=de,s?(de=ae.alternate,de!==null?(de=de.index,de<ie?(ae.flags|=67108866,ie):de):(ae.flags|=67108866,ie)):(ae.flags|=1048576,ie)}function R(ae){return s&&ae.alternate===null&&(ae.flags|=67108866),ae}function F(ae,ie,de,Te){return ie===null||ie.tag!==6?(ie=Mu(de,ae.mode,Te),ie.return=ae,ie):(ie=b(ie,de),ie.return=ae,ie)}function ne(ae,ie,de,Te){var Ke=de.type;return Ke===V?we(ae,ie,de.props.children,Te,de.key):ie!==null&&(ie.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===k&&Ul(Ke)===ie.type)?(ie=b(ie,de.props),ad(ie,de),ie.return=ae,ie):(ie=Pl(de.type,de.key,de.props,null,ae.mode,Te),ad(ie,de),ie.return=ae,ie)}function he(ae,ie,de,Te){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==de.containerInfo||ie.stateNode.implementation!==de.implementation?(ie=td(de,ae.mode,Te),ie.return=ae,ie):(ie=b(ie,de.children||[]),ie.return=ae,ie)}function we(ae,ie,de,Te,Ke){return ie===null||ie.tag!==7?(ie=vo(de,ae.mode,Te,Ke),ie.return=ae,ie):(ie=b(ie,de),ie.return=ae,ie)}function Ae(ae,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=Mu(""+ie,ae.mode,de),ie.return=ae,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case N:return de=Pl(ie.type,ie.key,ie.props,null,ae.mode,de),ad(de,ie),de.return=ae,de;case O:return ie=td(ie,ae.mode,de),ie.return=ae,ie;case k:return ie=Ul(ie),Ae(ae,ie,de)}if(rt(ie)||te(ie))return ie=vo(ie,ae.mode,de,null),ie.return=ae,ie;if(typeof ie.then=="function")return Ae(ae,rf(ie),de);if(ie.$$typeof===H)return Ae(ae,ef(ae,ie),de);of(ae,ie)}return null}function _e(ae,ie,de,Te){var Ke=ie!==null?ie.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Ke!==null?null:F(ae,ie,""+de,Te);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case N:return de.key===Ke?ne(ae,ie,de,Te):null;case O:return de.key===Ke?he(ae,ie,de,Te):null;case k:return de=Ul(de),_e(ae,ie,de,Te)}if(rt(de)||te(de))return Ke!==null?null:we(ae,ie,de,Te,null);if(typeof de.then=="function")return _e(ae,ie,rf(de),Te);if(de.$$typeof===H)return _e(ae,ie,ef(ae,de),Te);of(ae,de)}return null}function xe(ae,ie,de,Te,Ke){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(de)||null,F(ie,ae,""+Te,Ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return ae=ae.get(Te.key===null?de:Te.key)||null,ne(ie,ae,Te,Ke);case O:return ae=ae.get(Te.key===null?de:Te.key)||null,he(ie,ae,Te,Ke);case k:return Te=Ul(Te),xe(ae,ie,de,Te,Ke)}if(rt(Te)||te(Te))return ae=ae.get(de)||null,we(ie,ae,Te,Ke,null);if(typeof Te.then=="function")return xe(ae,ie,de,rf(Te),Ke);if(Te.$$typeof===H)return xe(ae,ie,de,ef(ie,Te),Ke);of(ie,Te)}return null}function He(ae,ie,de,Te){for(var Ke=null,Ut=null,Ge=ie,ft=ie=0,At=null;Ge!==null&&ft<de.length;ft++){Ge.index>ft?(At=Ge,Ge=null):At=Ge.sibling;var Vt=_e(ae,Ge,de[ft],Te);if(Vt===null){Ge===null&&(Ge=At);break}s&&Ge&&Vt.alternate===null&&o(ae,Ge),ie=E(Vt,ie,ft),Ut===null?Ke=Vt:Ut.sibling=Vt,Ut=Vt,Ge=At}if(ft===de.length)return u(ae,Ge),wt&&$e(ae,ft),Ke;if(Ge===null){for(;ft<de.length;ft++)Ge=Ae(ae,de[ft],Te),Ge!==null&&(ie=E(Ge,ie,ft),Ut===null?Ke=Ge:Ut.sibling=Ge,Ut=Ge);return wt&&$e(ae,ft),Ke}for(Ge=h(Ge);ft<de.length;ft++)At=xe(Ge,ae,ft,de[ft],Te),At!==null&&(s&&At.alternate!==null&&Ge.delete(At.key===null?ft:At.key),ie=E(At,ie,ft),Ut===null?Ke=At:Ut.sibling=At,Ut=At);return s&&Ge.forEach(function(La){return o(ae,La)}),wt&&$e(ae,ft),Ke}function Xe(ae,ie,de,Te){if(de==null)throw Error(i(151));for(var Ke=null,Ut=null,Ge=ie,ft=ie=0,At=null,Vt=de.next();Ge!==null&&!Vt.done;ft++,Vt=de.next()){Ge.index>ft?(At=Ge,Ge=null):At=Ge.sibling;var La=_e(ae,Ge,Vt.value,Te);if(La===null){Ge===null&&(Ge=At);break}s&&Ge&&La.alternate===null&&o(ae,Ge),ie=E(La,ie,ft),Ut===null?Ke=La:Ut.sibling=La,Ut=La,Ge=At}if(Vt.done)return u(ae,Ge),wt&&$e(ae,ft),Ke;if(Ge===null){for(;!Vt.done;ft++,Vt=de.next())Vt=Ae(ae,Vt.value,Te),Vt!==null&&(ie=E(Vt,ie,ft),Ut===null?Ke=Vt:Ut.sibling=Vt,Ut=Vt);return wt&&$e(ae,ft),Ke}for(Ge=h(Ge);!Vt.done;ft++,Vt=de.next())Vt=xe(Ge,ae,ft,Vt.value,Te),Vt!==null&&(s&&Vt.alternate!==null&&Ge.delete(Vt.key===null?ft:Vt.key),ie=E(Vt,ie,ft),Ut===null?Ke=Vt:Ut.sibling=Vt,Ut=Vt);return s&&Ge.forEach(function(vP){return o(ae,vP)}),wt&&$e(ae,ft),Ke}function Zt(ae,ie,de,Te){if(typeof de=="object"&&de!==null&&de.type===V&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case N:e:{for(var Ke=de.key;ie!==null;){if(ie.key===Ke){if(Ke=de.type,Ke===V){if(ie.tag===7){u(ae,ie.sibling),Te=b(ie,de.props.children),Te.return=ae,ae=Te;break e}}else if(ie.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===k&&Ul(Ke)===ie.type){u(ae,ie.sibling),Te=b(ie,de.props),ad(Te,de),Te.return=ae,ae=Te;break e}u(ae,ie);break}else o(ae,ie);ie=ie.sibling}de.type===V?(Te=vo(de.props.children,ae.mode,Te,de.key),Te.return=ae,ae=Te):(Te=Pl(de.type,de.key,de.props,null,ae.mode,Te),ad(Te,de),Te.return=ae,ae=Te)}return R(ae);case O:e:{for(Ke=de.key;ie!==null;){if(ie.key===Ke)if(ie.tag===4&&ie.stateNode.containerInfo===de.containerInfo&&ie.stateNode.implementation===de.implementation){u(ae,ie.sibling),Te=b(ie,de.children||[]),Te.return=ae,ae=Te;break e}else{u(ae,ie);break}else o(ae,ie);ie=ie.sibling}Te=td(de,ae.mode,Te),Te.return=ae,ae=Te}return R(ae);case k:return de=Ul(de),Zt(ae,ie,de,Te)}if(rt(de))return He(ae,ie,de,Te);if(te(de)){if(Ke=te(de),typeof Ke!="function")throw Error(i(150));return de=Ke.call(de),Xe(ae,ie,de,Te)}if(typeof de.then=="function")return Zt(ae,ie,rf(de),Te);if(de.$$typeof===H)return Zt(ae,ie,ef(ae,de),Te);of(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ie!==null&&ie.tag===6?(u(ae,ie.sibling),Te=b(ie,de),Te.return=ae,ae=Te):(u(ae,ie),Te=Mu(de,ae.mode,Te),Te.return=ae,ae=Te),R(ae)):u(ae,ie)}return function(ae,ie,de,Te){try{od=0;var Ke=Zt(ae,ie,de,Te);return Uu=null,Ke}catch(Ge){if(Ge===Ou||Ge===nf)throw Ge;var Ut=gi(29,Ge,null,ae.mode);return Ut.lanes=Te,Ut.return=ae,Ut}finally{}}}var Bl=Ax(!0),Cx=Ax(!1),ya=!1;function Ag(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cg(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function va(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function xa(s,o,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(jt&2)!==0){var b=h.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),h.pending=o,o=Ml(s),ga(s,null,u),o}return jr(s,h,o,u),Ml(s)}function ld(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,ul(s,u)}}function Ng(s,o){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var b=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?b=E=R:E=E.next=R,u=u.next}while(u!==null);E===null?b=E=o:E=E.next=o}else b=E=o;u={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Ig=!1;function ud(){if(Ig){var s=Lu;if(s!==null)throw s}}function cd(s,o,u,h){Ig=!1;var b=s.updateQueue;ya=!1;var E=b.firstBaseUpdate,R=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var ne=F,he=ne.next;ne.next=null,R===null?E=he:R.next=he,R=ne;var we=s.alternate;we!==null&&(we=we.updateQueue,F=we.lastBaseUpdate,F!==R&&(F===null?we.firstBaseUpdate=he:F.next=he,we.lastBaseUpdate=ne))}if(E!==null){var Ae=b.baseState;R=0,we=he=ne=null,F=E;do{var _e=F.lane&-536870913,xe=_e!==F.lane;if(xe?(St&_e)===_e:(h&_e)===_e){_e!==0&&_e===Du&&(Ig=!0),we!==null&&(we=we.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var He=s,Xe=F;_e=o;var Zt=u;switch(Xe.tag){case 1:if(He=Xe.payload,typeof He=="function"){Ae=He.call(Zt,Ae,_e);break e}Ae=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Xe.payload,_e=typeof He=="function"?He.call(Zt,Ae,_e):He,_e==null)break e;Ae=T({},Ae,_e);break e;case 2:ya=!0}}_e=F.callback,_e!==null&&(s.flags|=64,xe&&(s.flags|=8192),xe=b.callbacks,xe===null?b.callbacks=[_e]:xe.push(_e))}else xe={lane:_e,tag:F.tag,payload:F.payload,callback:F.callback,next:null},we===null?(he=we=xe,ne=Ae):we=we.next=xe,R|=_e;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;xe=F,F=xe.next,xe.next=null,b.lastBaseUpdate=xe,b.shared.pending=null}}while(!0);we===null&&(ne=Ae),b.baseState=ne,b.firstBaseUpdate=he,b.lastBaseUpdate=we,E===null&&(b.shared.lanes=0),Sa|=R,s.lanes=R,s.memoizedState=Ae}}function Nx(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Ix(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Nx(u[s],o)}var Vu=J(null),af=J(0);function Rx(s,o){s=Ro,be(af,s),be(Vu,o),Ro=s|o.baseLanes}function Rg(){be(af,Ro),be(Vu,Vu.current)}function Mg(){Ro=af.current,ce(Vu),ce(af)}var fs=J(null),Fs=null;function wa(s){var o=s.alternate;be(wn,wn.current&1),be(fs,s),Fs===null&&(o===null||Vu.current!==null||o.memoizedState!==null)&&(Fs=s)}function Pg(s){be(wn,wn.current),be(fs,s),Fs===null&&(Fs=s)}function Mx(s){s.tag===22?(be(wn,wn.current),be(fs,s),Fs===null&&(Fs=s)):ba()}function ba(){be(wn,wn.current),be(fs,fs.current)}function ms(s){ce(fs),Fs===s&&(Fs=null),ce(wn)}var wn=J(0);function lf(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||V_(u)||B_(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bo=0,ct=null,Yt=null,Nn=null,uf=!1,Bu=!1,Fl=!1,cf=0,dd=0,Fu=null,uM=0;function yn(){throw Error(i(321))}function kg(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Kn(s[u],o[u]))return!1;return!0}function Dg(s,o,u,h,b,E){return bo=E,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,fe.H=s===null||s.memoizedState===null?mw:Yg,Fl=!1,E=u(h,b),Fl=!1,Bu&&(E=kx(o,u,h,b)),Px(s),E}function Px(s){fe.H=md;var o=Yt!==null&&Yt.next!==null;if(bo=0,Nn=Yt=ct=null,uf=!1,dd=0,Fu=null,o)throw Error(i(300));s===null||In||(s=s.dependencies,s!==null&&Qh(s)&&(In=!0))}function kx(s,o,u,h){ct=s;var b=0;do{if(Bu&&(Fu=null),dd=0,Bu=!1,25<=b)throw Error(i(301));if(b+=1,Nn=Yt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}fe.H=pw,E=o(u,h)}while(Bu);return E}function cM(){var s=fe.H,o=s.useState()[0];return o=typeof o.then=="function"?hd(o):o,s=s.useState()[0],(Yt!==null?Yt.memoizedState:null)!==s&&(ct.flags|=1024),o}function Lg(){var s=cf!==0;return cf=0,s}function Og(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Ug(s){if(uf){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}uf=!1}bo=0,Nn=Yt=ct=null,Bu=!1,dd=cf=0,Fu=null}function Ri(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ct.memoizedState=Nn=s:Nn=Nn.next=s,Nn}function bn(){if(Yt===null){var s=ct.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var o=Nn===null?ct.memoizedState:Nn.next;if(o!==null)Nn=o,Yt=s;else{if(s===null)throw ct.alternate===null?Error(i(467)):Error(i(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Nn===null?ct.memoizedState=Nn=s:Nn=Nn.next=s}return Nn}function df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hd(s){var o=dd;return dd+=1,Fu===null&&(Fu=[]),s=Tx(Fu,s,o),o=ct,(Nn===null?o.memoizedState:Nn.next)===null&&(o=o.alternate,fe.H=o===null||o.memoizedState===null?mw:Yg),s}function hf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return hd(s);if(s.$$typeof===H)return ei(s)}throw Error(i(438,String(s)))}function Vg(s){var o=null,u=ct.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=df(),ct.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),h=0;h<s;h++)u[h]=G;return o.index++,u}function To(s,o){return typeof o=="function"?o(s):o}function ff(s){var o=bn();return Bg(o,Yt,s)}function Bg(s,o,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var b=s.baseQueue,E=h.pending;if(E!==null){if(b!==null){var R=b.next;b.next=E.next,E.next=R}o.baseQueue=b=E,h.pending=null}if(E=s.baseState,b===null)s.memoizedState=E;else{o=b.next;var F=R=null,ne=null,he=o,we=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(St&Ae)===Ae:(bo&Ae)===Ae){var _e=he.revertLane;if(_e===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===Du&&(we=!0);else if((bo&_e)===_e){he=he.next,_e===Du&&(we=!0);continue}else Ae={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ne===null?(F=ne=Ae,R=E):ne=ne.next=Ae,ct.lanes|=_e,Sa|=_e;Ae=he.action,Fl&&u(E,Ae),E=he.hasEagerState?he.eagerState:u(E,Ae)}else _e={lane:Ae,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ne===null?(F=ne=_e,R=E):ne=ne.next=_e,ct.lanes|=Ae,Sa|=Ae;he=he.next}while(he!==null&&he!==o);if(ne===null?R=E:ne.next=F,!Kn(E,s.memoizedState)&&(In=!0,we&&(u=Lu,u!==null)))throw u;s.memoizedState=E,s.baseState=R,s.baseQueue=ne,h.lastRenderedState=E}return b===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Fg(s){var o=bn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,b=u.pending,E=o.memoizedState;if(b!==null){u.pending=null;var R=b=b.next;do E=s(E,R.action),R=R.next;while(R!==b);Kn(E,o.memoizedState)||(In=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),u.lastRenderedState=E}return[E,h]}function Dx(s,o,u){var h=ct,b=bn(),E=wt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=o();var R=!Kn((Yt||b).memoizedState,u);if(R&&(b.memoizedState=u,In=!0),b=b.queue,Hg(Ux.bind(null,h,b,s),[s]),b.getSnapshot!==o||R||Nn!==null&&Nn.memoizedState.tag&1){if(h.flags|=2048,zu(9,{destroy:void 0},Ox.bind(null,h,b,u,o),null),en===null)throw Error(i(349));E||(bo&127)!==0||Lx(h,o,u)}return u}function Lx(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=ct.updateQueue,o===null?(o=df(),ct.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Ox(s,o,u,h){o.value=u,o.getSnapshot=h,Vx(o)&&Bx(s)}function Ux(s,o,u){return u(function(){Vx(o)&&Bx(s)})}function Vx(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Kn(s,u)}catch{return!0}}function Bx(s){var o=Vs(s,2);o!==null&&Wi(o,s,2)}function zg(s){var o=Ri();if(typeof s=="function"){var u=s;if(s=u(),Fl){Ei(!0);try{u()}finally{Ei(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:s},o}function Fx(s,o,u,h){return s.baseState=u,Bg(s,Yt,typeof h=="function"?h:To)}function dM(s,o,u,h,b){if(gf(s))throw Error(i(485));if(s=o.action,s!==null){var E={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){E.listeners.push(R)}};fe.T!==null?u(!0):E.isTransition=!1,h(E),u=o.pending,u===null?(E.next=o.pending=E,zx(o,E)):(E.next=u.next,o.pending=u.next=E)}}function zx(s,o){var u=o.action,h=o.payload,b=s.state;if(o.isTransition){var E=fe.T,R={};fe.T=R;try{var F=u(b,h),ne=fe.S;ne!==null&&ne(R,F),jx(s,o,F)}catch(he){jg(s,o,he)}finally{E!==null&&R.types!==null&&(E.types=R.types),fe.T=E}}else try{E=u(b,h),jx(s,o,E)}catch(he){jg(s,o,he)}}function jx(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){Hx(s,o,h)},function(h){return jg(s,o,h)}):Hx(s,o,u)}function Hx(s,o,u){o.status="fulfilled",o.value=u,qx(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,zx(s,u)))}function jg(s,o,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,qx(o),o=o.next;while(o!==h)}s.action=null}function qx(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Gx(s,o){return o}function $x(s,o){if(wt){var u=en.formState;if(u!==null){e:{var h=ct;if(wt){if(Ot){t:{for(var b=Ot,E=Gi;b.nodeType!==8;){if(!E){b=null;break t}if(b=zs(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Ot=zs(b.nextSibling),h=b.data==="F!";break e}}qr(h)}h=!1}h&&(o=u[0])}}return u=Ri(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gx,lastRenderedState:o},u.queue=h,u=dw.bind(null,ct,h),h.dispatch=u,h=zg(!1),E=Kg.bind(null,ct,!1,h.queue),h=Ri(),b={state:o,dispatch:null,action:s,pending:null},h.queue=b,u=dM.bind(null,ct,b,E,u),b.dispatch=u,h.memoizedState=s,[o,u,!1]}function Jx(s){var o=bn();return Kx(o,Yt,s)}function Kx(s,o,u){if(o=Bg(s,o,Gx)[0],s=ff(To)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=hd(o)}catch(R){throw R===Ou?nf:R}else h=o;o=bn();var b=o.queue,E=b.dispatch;return u!==o.memoizedState&&(ct.flags|=2048,zu(9,{destroy:void 0},hM.bind(null,b,u),null)),[h,E,s]}function hM(s,o){s.action=o}function Yx(s){var o=bn(),u=Yt;if(u!==null)return Kx(o,u,s);bn(),o=o.memoizedState,u=bn();var h=u.queue.dispatch;return u.memoizedState=s,[o,h,!1]}function zu(s,o,u,h){return s={tag:s,create:u,deps:h,inst:o,next:null},o=ct.updateQueue,o===null&&(o=df(),ct.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,o.lastEffect=s),s}function Wx(){return bn().memoizedState}function mf(s,o,u,h){var b=Ri();ct.flags|=s,b.memoizedState=zu(1|o,{destroy:void 0},u,h===void 0?null:h)}function pf(s,o,u,h){var b=bn();h=h===void 0?null:h;var E=b.memoizedState.inst;Yt!==null&&h!==null&&kg(h,Yt.memoizedState.deps)?b.memoizedState=zu(o,E,u,h):(ct.flags|=s,b.memoizedState=zu(1|o,E,u,h))}function Zx(s,o){mf(8390656,8,s,o)}function Hg(s,o){pf(2048,8,s,o)}function fM(s){ct.flags|=4;var o=ct.updateQueue;if(o===null)o=df(),ct.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function Xx(s){var o=bn().memoizedState;return fM({ref:o,nextImpl:s}),function(){if((jt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Qx(s,o){return pf(4,2,s,o)}function ew(s,o){return pf(4,4,s,o)}function tw(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function nw(s,o,u){u=u!=null?u.concat([s]):null,pf(4,4,tw.bind(null,o,s),u)}function qg(){}function iw(s,o){var u=bn();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&kg(o,h[1])?h[0]:(u.memoizedState=[s,o],s)}function sw(s,o){var u=bn();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&kg(o,h[1]))return h[0];if(h=s(),Fl){Ei(!0);try{s()}finally{Ei(!1)}}return u.memoizedState=[h,o],h}function Gg(s,o,u){return u===void 0||(bo&1073741824)!==0&&(St&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=rb(),ct.lanes|=s,Sa|=s,u)}function rw(s,o,u,h){return Kn(u,o)?u:Vu.current!==null?(s=Gg(s,u,h),Kn(s,o)||(In=!0),s):(bo&42)===0||(bo&1073741824)!==0&&(St&261930)===0?(In=!0,s.memoizedState=u):(s=rb(),ct.lanes|=s,Sa|=s,o)}function ow(s,o,u,h,b){var E=Ie.p;Ie.p=E!==0&&8>E?E:8;var R=fe.T,F={};fe.T=F,Kg(s,!1,o,u);try{var ne=b(),he=fe.S;if(he!==null&&he(F,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var we=lM(ne,h);fd(s,o,we,_s(s))}else fd(s,o,h,_s(s))}catch(Ae){fd(s,o,{then:function(){},status:"rejected",reason:Ae},_s())}finally{Ie.p=E,R!==null&&F.types!==null&&(R.types=F.types),fe.T=R}}function mM(){}function $g(s,o,u,h){if(s.tag!==5)throw Error(i(476));var b=aw(s).queue;ow(s,b,o,Ee,u===null?mM:function(){return lw(s),u(h)})}function aw(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:Ee},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function lw(s){var o=aw(s);o.next===null&&(o=s.alternate.memoizedState),fd(s,o.next.queue,{},_s())}function Jg(){return ei(Rd)}function uw(){return bn().memoizedState}function cw(){return bn().memoizedState}function pM(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=_s();s=va(u);var h=xa(o,s,u);h!==null&&(Wi(h,o,u),ld(h,o,u)),o={cache:bg()},s.payload=o;return}o=o.return}}function gM(s,o,u){var h=_s();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},gf(s)?hw(o,u):(u=Xc(s,o,u,h),u!==null&&(Wi(u,s,h),fw(u,o,h)))}function dw(s,o,u){var h=_s();fd(s,o,u,h)}function fd(s,o,u,h){var b={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(gf(s))hw(o,b);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var R=o.lastRenderedState,F=E(R,u);if(b.hasEagerState=!0,b.eagerState=F,Kn(F,R))return jr(s,o,b,0),en===null&&Rl(),!1}catch{}finally{}if(u=Xc(s,o,b,h),u!==null)return Wi(u,s,h),fw(u,o,h),!0}return!1}function Kg(s,o,u,h){if(h={lane:2,revertLane:A_(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},gf(s)){if(o)throw Error(i(479))}else o=Xc(s,u,h,2),o!==null&&Wi(o,s,2)}function gf(s){var o=s.alternate;return s===ct||o!==null&&o===ct}function hw(s,o){Bu=uf=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function fw(s,o,u){if((u&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,ul(s,u)}}var md={readContext:ei,use:hf,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};md.useEffectEvent=yn;var mw={readContext:ei,use:hf,useCallback:function(s,o){return Ri().memoizedState=[s,o===void 0?null:o],s},useContext:ei,useEffect:Zx,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,mf(4194308,4,tw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return mf(4194308,4,s,o)},useInsertionEffect:function(s,o){mf(4,2,s,o)},useMemo:function(s,o){var u=Ri();o=o===void 0?null:o;var h=s();if(Fl){Ei(!0);try{s()}finally{Ei(!1)}}return u.memoizedState=[h,o],h},useReducer:function(s,o,u){var h=Ri();if(u!==void 0){var b=u(o);if(Fl){Ei(!0);try{u(o)}finally{Ei(!1)}}}else b=o;return h.memoizedState=h.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},h.queue=s,s=s.dispatch=gM.bind(null,ct,s),[h.memoizedState,s]},useRef:function(s){var o=Ri();return s={current:s},o.memoizedState=s},useState:function(s){s=zg(s);var o=s.queue,u=dw.bind(null,ct,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:qg,useDeferredValue:function(s,o){var u=Ri();return Gg(u,s,o)},useTransition:function(){var s=zg(!1);return s=ow.bind(null,ct,s.queue,!0,!1),Ri().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var h=ct,b=Ri();if(wt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),en===null)throw Error(i(349));(St&127)!==0||Lx(h,o,u)}b.memoizedState=u;var E={value:u,getSnapshot:o};return b.queue=E,Zx(Ux.bind(null,h,E,s),[s]),h.flags|=2048,zu(9,{destroy:void 0},Ox.bind(null,h,E,u,o),null),u},useId:function(){var s=Ri(),o=en.identifierPrefix;if(wt){var u=ke,h=Se;u=(h&~(1<<32-un(h)-1)).toString(32)+u,o="_"+o+"R_"+u,u=cf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=uM++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Jg,useFormState:$x,useActionState:$x,useOptimistic:function(s){var o=Ri();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Kg.bind(null,ct,!0,u),u.dispatch=o,[s,o]},useMemoCache:Vg,useCacheRefresh:function(){return Ri().memoizedState=pM.bind(null,ct)},useEffectEvent:function(s){var o=Ri(),u={impl:s};return o.memoizedState=u,function(){if((jt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Yg={readContext:ei,use:hf,useCallback:iw,useContext:ei,useEffect:Hg,useImperativeHandle:nw,useInsertionEffect:Qx,useLayoutEffect:ew,useMemo:sw,useReducer:ff,useRef:Wx,useState:function(){return ff(To)},useDebugValue:qg,useDeferredValue:function(s,o){var u=bn();return rw(u,Yt.memoizedState,s,o)},useTransition:function(){var s=ff(To)[0],o=bn().memoizedState;return[typeof s=="boolean"?s:hd(s),o]},useSyncExternalStore:Dx,useId:uw,useHostTransitionStatus:Jg,useFormState:Jx,useActionState:Jx,useOptimistic:function(s,o){var u=bn();return Fx(u,Yt,s,o)},useMemoCache:Vg,useCacheRefresh:cw};Yg.useEffectEvent=Xx;var pw={readContext:ei,use:hf,useCallback:iw,useContext:ei,useEffect:Hg,useImperativeHandle:nw,useInsertionEffect:Qx,useLayoutEffect:ew,useMemo:sw,useReducer:Fg,useRef:Wx,useState:function(){return Fg(To)},useDebugValue:qg,useDeferredValue:function(s,o){var u=bn();return Yt===null?Gg(u,s,o):rw(u,Yt.memoizedState,s,o)},useTransition:function(){var s=Fg(To)[0],o=bn().memoizedState;return[typeof s=="boolean"?s:hd(s),o]},useSyncExternalStore:Dx,useId:uw,useHostTransitionStatus:Jg,useFormState:Yx,useActionState:Yx,useOptimistic:function(s,o){var u=bn();return Yt!==null?Fx(u,Yt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Vg,useCacheRefresh:cw};pw.useEffectEvent=Xx;function Wg(s,o,u,h){o=s.memoizedState,u=u(h,o),u=u==null?o:T({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Zg={enqueueSetState:function(s,o,u){s=s._reactInternals;var h=_s(),b=va(h);b.payload=o,u!=null&&(b.callback=u),o=xa(s,b,h),o!==null&&(Wi(o,s,h),ld(o,s,h))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var h=_s(),b=va(h);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=xa(s,b,h),o!==null&&(Wi(o,s,h),ld(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=_s(),h=va(u);h.tag=2,o!=null&&(h.callback=o),o=xa(s,h,u),o!==null&&(Wi(o,s,u),ld(o,s,u))}};function gw(s,o,u,h,b,E,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,R):o.prototype&&o.prototype.isPureReactComponent?!ha(u,h)||!ha(b,E):!0}function _w(s,o,u,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==s&&Zg.enqueueReplaceState(o,o.state,null)}function zl(s,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(s=s.defaultProps){u===o&&(u=T({},u));for(var b in s)u[b]===void 0&&(u[b]=s[b])}return u}function yw(s){Il(s)}function vw(s){console.error(s)}function xw(s){Il(s)}function _f(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function ww(s,o,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Xg(s,o,u){return u=va(u),u.tag=3,u.payload={element:null},u.callback=function(){_f(s,o)},u}function bw(s){return s=va(s),s.tag=3,s}function Tw(s,o,u,h){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var E=h.value;s.payload=function(){return b(E)},s.callback=function(){ww(o,u,h)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(s.callback=function(){ww(o,u,h),typeof b!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var F=h.stack;this.componentDidCatch(h.value,{componentStack:F!==null?F:""})})}function _M(s,o,u,h,b){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&ku(o,u,b,!0),u=fs.current,u!==null){switch(u.tag){case 31:case 13:return Fs===null?If():u.alternate===null&&vn===0&&(vn=3),u.flags&=-257,u.flags|=65536,u.lanes=b,h===sf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),T_(s,h,b)),!1;case 22:return u.flags|=65536,h===sf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),T_(s,h,b)),!1}throw Error(i(435,u.tag))}return T_(s,h,b),If(),!1}if(wt)return o=fs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,h!==Pu&&(s=Error(i(422),{cause:h}),kl(d(s,u)))):(h!==Pu&&(o=Error(i(423),{cause:h}),kl(d(o,u))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,h=d(h,u),b=Xg(s.stateNode,h,b),Ng(s,b),vn!==4&&(vn=2)),!1;var E=Error(i(520),{cause:h});if(E=d(E,u),bd===null?bd=[E]:bd.push(E),vn!==4&&(vn=2),o===null)return!0;h=d(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=b&-b,u.lanes|=s,s=Xg(u.stateNode,h,s),Ng(u,s),!1;case 1:if(o=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Aa===null||!Aa.has(E))))return u.flags|=65536,b&=-b,u.lanes|=b,b=bw(b),Tw(b,s,u,h),Ng(u,b),!1}u=u.return}while(u!==null);return!1}var Qg=Error(i(461)),In=!1;function ti(s,o,u,h){o.child=s===null?Cx(o,null,u,h):Bl(o,s.child,u,h)}function Ew(s,o,u,h,b){u=u.render;var E=o.ref;if("ref"in h){var R={};for(var F in h)F!=="ref"&&(R[F]=h[F])}else R=h;return Ll(o),h=Dg(s,o,u,R,E,b),F=Lg(),s!==null&&!In?(Og(s,o,b),Eo(s,o,b)):(wt&&F&&On(o),o.flags|=1,ti(s,o,h,b),o.child)}function Sw(s,o,u,h,b){if(s===null){var E=u.type;return typeof E=="function"&&!Ru(E)&&E.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=E,Aw(s,o,E,h,b)):(s=Pl(u.type,null,h,o,o.mode,b),s.ref=o.ref,s.return=o,o.child=s)}if(E=s.child,!a_(s,b)){var R=E.memoizedProps;if(u=u.compare,u=u!==null?u:ha,u(R,h)&&s.ref===o.ref)return Eo(s,o,b)}return o.flags|=1,s=Bs(E,h),s.ref=o.ref,s.return=o,o.child=s}function Aw(s,o,u,h,b){if(s!==null){var E=s.memoizedProps;if(ha(E,h)&&s.ref===o.ref)if(In=!1,o.pendingProps=h=E,a_(s,b))(s.flags&131072)!==0&&(In=!0);else return o.lanes=s.lanes,Eo(s,o,b)}return e_(s,o,u,h,b)}function Cw(s,o,u,h){var b=h.children,E=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=o.child=s.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~E}else h=0,o.child=null;return Nw(s,o,E,u,h)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&tf(o,E!==null?E.cachePool:null),E!==null?Rx(o,E):Rg(),Mx(o);else return h=o.lanes=536870912,Nw(s,o,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(tf(o,E.cachePool),Rx(o,E),ba(),o.memoizedState=null):(s!==null&&tf(o,null),Rg(),ba());return ti(s,o,b,u),o.child}function pd(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Nw(s,o,u,h,b){var E=Eg();return E=E===null?null:{parent:Cn._currentValue,pool:E},o.memoizedState={baseLanes:u,cachePool:E},s!==null&&tf(o,null),Rg(),Mx(o),s!==null&&ku(s,o,h,!0),o.childLanes=b,null}function yf(s,o){return o=xf({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function Iw(s,o,u){return Bl(o,s.child,null,u),s=yf(o,o.pendingProps),s.flags|=2,ms(o),o.memoizedState=null,s}function yM(s,o,u){var h=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(wt){if(h.mode==="hidden")return s=yf(o,h),o.lanes=536870912,pd(null,s);if(Pg(o),(s=Ot)?(s=zb(s,Gi),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ge!==null?{id:Se,overflow:ke}:null,retryLane:536870912,hydrationErrors:null},u=ed(s),u.return=o,o.child=u,Lt=o,Ot=null)):s=null,s===null)throw qr(o);return o.lanes=536870912,null}return yf(o,h)}var E=s.memoizedState;if(E!==null){var R=E.dehydrated;if(Pg(o),b)if(o.flags&256)o.flags&=-257,o=Iw(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(In||ku(s,o,u,!1),b=(u&s.childLanes)!==0,In||b){if(h=en,h!==null&&(R=cl(h,u),R!==0&&R!==E.retryLane))throw E.retryLane=R,Vs(s,R),Wi(h,s,R),Qg;If(),o=Iw(s,o,u)}else s=E.treeContext,Ot=zs(R.nextSibling),Lt=o,wt=!0,Hr=null,Gi=!1,s!==null&&Ii(o,s),o=yf(o,h),o.flags|=4096;return o}return s=Bs(s.child,{mode:h.mode,children:h.children}),s.ref=o.ref,o.child=s,s.return=o,s}function vf(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function e_(s,o,u,h,b){return Ll(o),u=Dg(s,o,u,h,void 0,b),h=Lg(),s!==null&&!In?(Og(s,o,b),Eo(s,o,b)):(wt&&h&&On(o),o.flags|=1,ti(s,o,u,b),o.child)}function Rw(s,o,u,h,b,E){return Ll(o),o.updateQueue=null,u=kx(o,h,u,b),Px(s),h=Lg(),s!==null&&!In?(Og(s,o,E),Eo(s,o,E)):(wt&&h&&On(o),o.flags|=1,ti(s,o,u,E),o.child)}function Mw(s,o,u,h,b){if(Ll(o),o.stateNode===null){var E=yo,R=u.contextType;typeof R=="object"&&R!==null&&(E=ei(R)),E=new u(h,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Zg,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=h,E.state=o.memoizedState,E.refs={},Ag(o),R=u.contextType,E.context=typeof R=="object"&&R!==null?ei(R):yo,E.state=o.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Wg(o,u,R,h),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(R=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),R!==E.state&&Zg.enqueueReplaceState(E,E.state,null),cd(o,h,E,b),ud(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){E=o.stateNode;var F=o.memoizedProps,ne=zl(u,F);E.props=ne;var he=E.context,we=u.contextType;R=yo,typeof we=="object"&&we!==null&&(R=ei(we));var Ae=u.getDerivedStateFromProps;we=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function",F=o.pendingProps!==F,we||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F||he!==R)&&_w(o,E,h,R),ya=!1;var _e=o.memoizedState;E.state=_e,cd(o,h,E,b),ud(),he=o.memoizedState,F||_e!==he||ya?(typeof Ae=="function"&&(Wg(o,u,Ae,h),he=o.memoizedState),(ne=ya||gw(o,u,ne,h,_e,he,R))?(we||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=he),E.props=h,E.state=he,E.context=R,h=ne):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{E=o.stateNode,Cg(s,o),R=o.memoizedProps,we=zl(u,R),E.props=we,Ae=o.pendingProps,_e=E.context,he=u.contextType,ne=yo,typeof he=="object"&&he!==null&&(ne=ei(he)),F=u.getDerivedStateFromProps,(he=typeof F=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==Ae||_e!==ne)&&_w(o,E,h,ne),ya=!1,_e=o.memoizedState,E.state=_e,cd(o,h,E,b),ud();var xe=o.memoizedState;R!==Ae||_e!==xe||ya||s!==null&&s.dependencies!==null&&Qh(s.dependencies)?(typeof F=="function"&&(Wg(o,u,F,h),xe=o.memoizedState),(we=ya||gw(o,u,we,h,_e,xe,ne)||s!==null&&s.dependencies!==null&&Qh(s.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,xe,ne),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,xe,ne)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===s.memoizedProps&&_e===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&_e===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=xe),E.props=h,E.state=xe,E.context=ne,h=we):(typeof E.componentDidUpdate!="function"||R===s.memoizedProps&&_e===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&_e===s.memoizedState||(o.flags|=1024),h=!1)}return E=h,vf(s,o),h=(o.flags&128)!==0,E||h?(E=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,s!==null&&h?(o.child=Bl(o,s.child,null,b),o.child=Bl(o,null,u,b)):ti(s,o,u,b),o.memoizedState=E.state,s=o.child):s=Eo(s,o,b),s}function Pw(s,o,u,h){return xo(),o.flags|=256,ti(s,o,u,h),o.child}var t_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function n_(s){return{baseLanes:s,cachePool:wx()}}function i_(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=gs),s}function kw(s,o,u){var h=o.pendingProps,b=!1,E=(o.flags&128)!==0,R;if((R=E)||(R=s!==null&&s.memoizedState===null?!1:(wn.current&2)!==0),R&&(b=!0,o.flags&=-129),R=(o.flags&32)!==0,o.flags&=-33,s===null){if(wt){if(b?wa(o):ba(),(s=Ot)?(s=zb(s,Gi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ge!==null?{id:Se,overflow:ke}:null,retryLane:536870912,hydrationErrors:null},u=ed(s),u.return=o,o.child=u,Lt=o,Ot=null)):s=null,s===null)throw qr(o);return B_(s)?o.lanes=32:o.lanes=536870912,null}var F=h.children;return h=h.fallback,b?(ba(),b=o.mode,F=xf({mode:"hidden",children:F},b),h=vo(h,b,u,null),F.return=o,h.return=o,F.sibling=h,o.child=F,h=o.child,h.memoizedState=n_(u),h.childLanes=i_(s,R,u),o.memoizedState=t_,pd(null,h)):(wa(o),s_(o,F))}var ne=s.memoizedState;if(ne!==null&&(F=ne.dehydrated,F!==null)){if(E)o.flags&256?(wa(o),o.flags&=-257,o=r_(s,o,u)):o.memoizedState!==null?(ba(),o.child=s.child,o.flags|=128,o=null):(ba(),F=h.fallback,b=o.mode,h=xf({mode:"visible",children:h.children},b),F=vo(F,b,u,null),F.flags|=2,h.return=o,F.return=o,h.sibling=F,o.child=h,Bl(o,s.child,null,u),h=o.child,h.memoizedState=n_(u),h.childLanes=i_(s,R,u),o.memoizedState=t_,o=pd(null,h));else if(wa(o),B_(F)){if(R=F.nextSibling&&F.nextSibling.dataset,R)var he=R.dgst;R=he,h=Error(i(419)),h.stack="",h.digest=R,kl({value:h,source:null,stack:null}),o=r_(s,o,u)}else if(In||ku(s,o,u,!1),R=(u&s.childLanes)!==0,In||R){if(R=en,R!==null&&(h=cl(R,u),h!==0&&h!==ne.retryLane))throw ne.retryLane=h,Vs(s,h),Wi(R,s,h),Qg;V_(F)||If(),o=r_(s,o,u)}else V_(F)?(o.flags|=192,o.child=s.child,o=null):(s=ne.treeContext,Ot=zs(F.nextSibling),Lt=o,wt=!0,Hr=null,Gi=!1,s!==null&&Ii(o,s),o=s_(o,h.children),o.flags|=4096);return o}return b?(ba(),F=h.fallback,b=o.mode,ne=s.child,he=ne.sibling,h=Bs(ne,{mode:"hidden",children:h.children}),h.subtreeFlags=ne.subtreeFlags&65011712,he!==null?F=Bs(he,F):(F=vo(F,b,u,null),F.flags|=2),F.return=o,h.return=o,h.sibling=F,o.child=h,pd(null,h),h=o.child,F=s.child.memoizedState,F===null?F=n_(u):(b=F.cachePool,b!==null?(ne=Cn._currentValue,b=b.parent!==ne?{parent:ne,pool:ne}:b):b=wx(),F={baseLanes:F.baseLanes|u,cachePool:b}),h.memoizedState=F,h.childLanes=i_(s,R,u),o.memoizedState=t_,pd(s.child,h)):(wa(o),u=s.child,s=u.sibling,u=Bs(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,s!==null&&(R=o.deletions,R===null?(o.deletions=[s],o.flags|=16):R.push(s)),o.child=u,o.memoizedState=null,u)}function s_(s,o){return o=xf({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function xf(s,o){return s=gi(22,s,null,o),s.lanes=0,s}function r_(s,o,u){return Bl(o,s.child,null,u),s=s_(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Dw(s,o,u){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),xg(s.return,o,u)}function o_(s,o,u,h,b,E){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:b,treeForkCount:E}:(R.isBackwards=o,R.rendering=null,R.renderingStartTime=0,R.last=h,R.tail=u,R.tailMode=b,R.treeForkCount=E)}function Lw(s,o,u){var h=o.pendingProps,b=h.revealOrder,E=h.tail;h=h.children;var R=wn.current,F=(R&2)!==0;if(F?(R=R&1|2,o.flags|=128):R&=1,be(wn,R),ti(s,o,h,u),h=wt?B:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dw(s,u,o);else if(s.tag===19)Dw(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)s=u.alternate,s!==null&&lf(s)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),o_(o,!1,b,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(s=b.alternate,s!==null&&lf(s)===null){o.child=b;break}s=b.sibling,b.sibling=u,u=b,b=s}o_(o,!0,u,null,E,h);break;case"together":o_(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function Eo(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Sa|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(ku(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=Bs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Bs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function a_(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Qh(s)))}function vM(s,o,u){switch(o.tag){case 3:oe(o,o.stateNode.containerInfo),_a(o,Cn,s.memoizedState.cache),xo();break;case 27:case 5:Fe(o);break;case 4:oe(o,o.stateNode.containerInfo);break;case 10:_a(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Pg(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(wa(o),o.flags|=128,null):(u&o.child.childLanes)!==0?kw(s,o,u):(wa(o),s=Eo(s,o,u),s!==null?s.sibling:null);wa(o);break;case 19:var b=(s.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(ku(s,o,u,!1),h=(u&o.childLanes)!==0),b){if(h)return Lw(s,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),be(wn,wn.current),h)break;return null;case 22:return o.lanes=0,Cw(s,o,u,o.pendingProps);case 24:_a(o,Cn,s.memoizedState.cache)}return Eo(s,o,u)}function Ow(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)In=!0;else{if(!a_(s,u)&&(o.flags&128)===0)return In=!1,vM(s,o,u);In=(s.flags&131072)!==0}else In=!1,wt&&(o.flags&1048576)!==0&&ht(o,B,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(s=Ul(o.elementType),o.type=s,typeof s=="function")Ru(s)?(h=zl(s,h),o.tag=1,o=Mw(null,o,s,h,u)):(o.tag=0,o=e_(null,o,s,h,u));else{if(s!=null){var b=s.$$typeof;if(b===j){o.tag=11,o=Ew(null,o,s,h,u);break e}else if(b===D){o.tag=14,o=Sw(null,o,s,h,u);break e}}throw o=Le(s)||s,Error(i(306,o,""))}}return o;case 0:return e_(s,o,o.type,o.pendingProps,u);case 1:return h=o.type,b=zl(h,o.pendingProps),Mw(s,o,h,b,u);case 3:e:{if(oe(o,o.stateNode.containerInfo),s===null)throw Error(i(387));h=o.pendingProps;var E=o.memoizedState;b=E.element,Cg(s,o),cd(o,h,null,u);var R=o.memoizedState;if(h=R.cache,_a(o,Cn,h),h!==E.cache&&wg(o,[Cn],u,!0),ud(),h=R.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:R.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=Pw(s,o,h,u);break e}else if(h!==b){b=d(Error(i(424)),o),kl(b),o=Pw(s,o,h,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ot=zs(s.firstChild),Lt=o,wt=!0,Hr=null,Gi=!0,u=Cx(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(xo(),h===b){o=Eo(s,o,u);break e}ti(s,o,h,u)}o=o.child}return o;case 26:return vf(s,o),s===null?(u=Jb(o.type,null,o.pendingProps,null))?o.memoizedState=u:wt||(u=o.type,s=o.pendingProps,h=Of(z.current).createElement(u),h[dn]=o,h[pn]=s,ni(h,u,s),gn(h),o.stateNode=h):o.memoizedState=Jb(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Fe(o),s===null&&wt&&(h=o.stateNode=qb(o.type,o.pendingProps,z.current),Lt=o,Gi=!0,b=Ot,Ra(o.type)?(F_=b,Ot=zs(h.firstChild)):Ot=b),ti(s,o,o.pendingProps.children,u),vf(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&wt&&((b=h=Ot)&&(h=YM(h,o.type,o.pendingProps,Gi),h!==null?(o.stateNode=h,Lt=o,Ot=zs(h.firstChild),Gi=!1,b=!0):b=!1),b||qr(o)),Fe(o),b=o.type,E=o.pendingProps,R=s!==null?s.memoizedProps:null,h=E.children,L_(b,E)?h=null:R!==null&&L_(b,R)&&(o.flags|=32),o.memoizedState!==null&&(b=Dg(s,o,cM,null,null,u),Rd._currentValue=b),vf(s,o),ti(s,o,h,u),o.child;case 6:return s===null&&wt&&((s=u=Ot)&&(u=WM(u,o.pendingProps,Gi),u!==null?(o.stateNode=u,Lt=o,Ot=null,s=!0):s=!1),s||qr(o)),null;case 13:return kw(s,o,u);case 4:return oe(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=Bl(o,null,h,u):ti(s,o,h,u),o.child;case 11:return Ew(s,o,o.type,o.pendingProps,u);case 7:return ti(s,o,o.pendingProps,u),o.child;case 8:return ti(s,o,o.pendingProps.children,u),o.child;case 12:return ti(s,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,_a(o,o.type,h.value),ti(s,o,h.children,u),o.child;case 9:return b=o.type._context,h=o.pendingProps.children,Ll(o),b=ei(b),h=h(b),o.flags|=1,ti(s,o,h,u),o.child;case 14:return Sw(s,o,o.type,o.pendingProps,u);case 15:return Aw(s,o,o.type,o.pendingProps,u);case 19:return Lw(s,o,u);case 31:return yM(s,o,u);case 22:return Cw(s,o,u,o.pendingProps);case 24:return Ll(o),h=ei(Cn),s===null?(b=Eg(),b===null&&(b=en,E=bg(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=u),b=E),o.memoizedState={parent:h,cache:b},Ag(o),_a(o,Cn,b)):((s.lanes&u)!==0&&(Cg(s,o),cd(o,null,null,u),ud()),b=s.memoizedState,E=o.memoizedState,b.parent!==h?(b={parent:h,cache:h},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),_a(o,Cn,h)):(h=E.cache,_a(o,Cn,h),h!==b.cache&&wg(o,[Cn],u,!0))),ti(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function So(s){s.flags|=4}function l_(s,o,u,h,b){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(ub())s.flags|=8192;else throw Vl=sf,Sg}else s.flags&=-16777217}function Uw(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Xb(o))if(ub())s.flags|=8192;else throw Vl=sf,Sg}function wf(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?gu():536870912,s.lanes|=o,Gu|=o)}function gd(s,o){if(!wt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function an(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(o)for(var b=s.child;b!==null;)u|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)u|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=h,s.childLanes=u,o}function xM(s,o,u){var h=o.pendingProps;switch(_n(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(o),null;case 1:return an(o),null;case 3:return u=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),wo(Cn),Me(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(dr(o)?So(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,id())),an(o),null;case 26:var b=o.type,E=o.memoizedState;return s===null?(So(o),E!==null?(an(o),Uw(o,E)):(an(o),l_(o,b,null,h,u))):E?E!==s.memoizedState?(So(o),an(o),Uw(o,E)):(an(o),o.flags&=-16777217):(s=s.memoizedProps,s!==h&&So(o),an(o),l_(o,b,s,h,u)),null;case 27:if(yt(o),u=z.current,b=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&So(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return an(o),null}s=re.current,dr(o)?nd(o):(s=qb(b,h,u),o.stateNode=s,So(o))}return an(o),null;case 5:if(yt(o),b=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&So(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return an(o),null}if(E=re.current,dr(o))nd(o);else{var R=Of(z.current);switch(E){case 1:E=R.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=R.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=R.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=R.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=R.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?R.createElement("select",{is:h.is}):R.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?R.createElement(b,{is:h.is}):R.createElement(b)}}E[dn]=o,E[pn]=h;e:for(R=o.child;R!==null;){if(R.tag===5||R.tag===6)E.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===o)break e;for(;R.sibling===null;){if(R.return===null||R.return===o)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}o.stateNode=E;e:switch(ni(E,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&So(o)}}return an(o),l_(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&So(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(s=z.current,dr(o)){if(s=o.stateNode,u=o.memoizedProps,h=null,b=Lt,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}s[dn]=o,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||kb(s.nodeValue,u)),s||qr(o,!0)}else s=Of(s).createTextNode(h),s[dn]=o,o.stateNode=s}return an(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(h=dr(o),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[dn]=o}else xo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;an(o),s=!1}else u=id(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(ms(o),o):(ms(o),null);if((o.flags&128)!==0)throw Error(i(558))}return an(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=dr(o),h!==null&&h.dehydrated!==null){if(s===null){if(!b)throw Error(i(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[dn]=o}else xo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;an(o),b=!1}else b=id(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(ms(o),o):(ms(o),null)}return ms(o),(o.flags&128)!==0?(o.lanes=u,o):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=o.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==b&&(h.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),wf(o,o.updateQueue),an(o),null);case 4:return Me(),s===null&&R_(o.stateNode.containerInfo),an(o),null;case 10:return wo(o.type),an(o),null;case 19:if(ce(wn),h=o.memoizedState,h===null)return an(o),null;if(b=(o.flags&128)!==0,E=h.rendering,E===null)if(b)gd(h,!1);else{if(vn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=lf(s),E!==null){for(o.flags|=128,gd(h,!1),s=E.updateQueue,o.updateQueue=s,wf(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)Qc(u,s),u=u.sibling;return be(wn,wn.current&1|2),wt&&$e(o,h.treeForkCount),o.child}s=s.sibling}h.tail!==null&&Ln()>Af&&(o.flags|=128,b=!0,gd(h,!1),o.lanes=4194304)}else{if(!b)if(s=lf(E),s!==null){if(o.flags|=128,b=!0,s=s.updateQueue,o.updateQueue=s,wf(o,s),gd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!wt)return an(o),null}else 2*Ln()-h.renderingStartTime>Af&&u!==536870912&&(o.flags|=128,b=!0,gd(h,!1),o.lanes=4194304);h.isBackwards?(E.sibling=o.child,o.child=E):(s=h.last,s!==null?s.sibling=E:o.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ln(),s.sibling=null,u=wn.current,be(wn,b?u&1|2:u&1),wt&&$e(o,h.treeForkCount),s):(an(o),null);case 22:case 23:return ms(o),Mg(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(an(o),o.subtreeFlags&6&&(o.flags|=8192)):an(o),u=o.updateQueue,u!==null&&wf(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),s!==null&&ce(Ol),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),wo(Cn),an(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function wM(s,o){switch(_n(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return wo(Cn),Me(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return yt(o),null;case 31:if(o.memoizedState!==null){if(ms(o),o.alternate===null)throw Error(i(340));xo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ms(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));xo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ce(wn),null;case 4:return Me(),null;case 10:return wo(o.type),null;case 22:case 23:return ms(o),Mg(),s!==null&&ce(Ol),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return wo(Cn),null;case 25:return null;default:return null}}function Vw(s,o){switch(_n(o),o.tag){case 3:wo(Cn),Me();break;case 26:case 27:case 5:yt(o);break;case 4:Me();break;case 31:o.memoizedState!==null&&ms(o);break;case 13:ms(o);break;case 19:ce(wn);break;case 10:wo(o.type);break;case 22:case 23:ms(o),Mg(),s!==null&&ce(Ol);break;case 24:wo(Cn)}}function _d(s,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var b=h.next;u=b;do{if((u.tag&s)===s){h=void 0;var E=u.create,R=u.inst;h=E(),R.destroy=h}u=u.next}while(u!==b)}}catch(F){Kt(o,o.return,F)}}function Ta(s,o,u){try{var h=o.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var E=b.next;h=E;do{if((h.tag&s)===s){var R=h.inst,F=R.destroy;if(F!==void 0){R.destroy=void 0,b=o;var ne=u,he=F;try{he()}catch(we){Kt(b,ne,we)}}}h=h.next}while(h!==E)}}catch(we){Kt(o,o.return,we)}}function Bw(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{Ix(o,u)}catch(h){Kt(s,s.return,h)}}}function Fw(s,o,u){u.props=zl(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Kt(s,o,h)}}function yd(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(b){Kt(s,o,b)}}function $r(s,o){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(b){Kt(s,o,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){Kt(s,o,b)}else u.current=null}function zw(s){var o=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(b){Kt(s,s.return,b)}}function u_(s,o,u){try{var h=s.stateNode;HM(h,s.type,u,o),h[pn]=o}catch(b){Kt(s,s.return,b)}}function jw(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ra(s.type)||s.tag===4}function c_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||jw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ra(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function d_(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=di));else if(h!==4&&(h===27&&Ra(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(d_(s,o,u),s=s.sibling;s!==null;)d_(s,o,u),s=s.sibling}function bf(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(h!==4&&(h===27&&Ra(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(bf(s,o,u),s=s.sibling;s!==null;)bf(s,o,u),s=s.sibling}function Hw(s){var o=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);ni(o,h,u),o[dn]=s,o[pn]=u}catch(E){Kt(s,s.return,E)}}var Ao=!1,Rn=!1,h_=!1,qw=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function bM(s,o){if(s=s.containerInfo,k_=Hf,s=Sl(s),Vr(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var b=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var R=0,F=-1,ne=-1,he=0,we=0,Ae=s,_e=null;t:for(;;){for(var xe;Ae!==u||b!==0&&Ae.nodeType!==3||(F=R+b),Ae!==E||h!==0&&Ae.nodeType!==3||(ne=R+h),Ae.nodeType===3&&(R+=Ae.nodeValue.length),(xe=Ae.firstChild)!==null;)_e=Ae,Ae=xe;for(;;){if(Ae===s)break t;if(_e===u&&++he===b&&(F=R),_e===E&&++we===h&&(ne=R),(xe=Ae.nextSibling)!==null)break;Ae=_e,_e=Ae.parentNode}Ae=xe}u=F===-1||ne===-1?null:{start:F,end:ne}}else u=null}u=u||{start:0,end:0}}else u=null;for(D_={focusedElem:s,selectionRange:u},Hf=!1,Wn=o;Wn!==null;)if(o=Wn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Wn=s;else for(;Wn!==null;){switch(o=Wn,E=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)b=s[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=o,b=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var He=zl(u.type,b);s=h.getSnapshotBeforeUpdate(He,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Xe){Kt(u,u.return,Xe)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)U_(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":U_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Wn=s;break}Wn=o.return}}function Gw(s,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:No(s,u),h&4&&_d(5,u);break;case 1:if(No(s,u),h&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(R){Kt(u,u.return,R)}else{var b=zl(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(b,o,s.__reactInternalSnapshotBeforeUpdate)}catch(R){Kt(u,u.return,R)}}h&64&&Bw(u),h&512&&yd(u,u.return);break;case 3:if(No(s,u),h&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Ix(s,o)}catch(R){Kt(u,u.return,R)}}break;case 27:o===null&&h&4&&Hw(u);case 26:case 5:No(s,u),o===null&&h&4&&zw(u),h&512&&yd(u,u.return);break;case 12:No(s,u);break;case 31:No(s,u),h&4&&Kw(s,u);break;case 13:No(s,u),h&4&&Yw(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=MM.bind(null,u),ZM(s,u))));break;case 22:if(h=u.memoizedState!==null||Ao,!h){o=o!==null&&o.memoizedState!==null||Rn,b=Ao;var E=Rn;Ao=h,(Rn=o)&&!E?Io(s,u,(u.subtreeFlags&8772)!==0):No(s,u),Ao=b,Rn=E}break;case 30:break;default:No(s,u)}}function $w(s){var o=s.alternate;o!==null&&(s.alternate=null,$w(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Qo(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ln=null,$i=!1;function Co(s,o,u){for(u=u.child;u!==null;)Jw(s,o,u),u=u.sibling}function Jw(s,o,u){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(ki,u)}catch{}switch(u.tag){case 26:Rn||$r(u,o),Co(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Rn||$r(u,o);var h=ln,b=$i;Ra(u.type)&&(ln=u.stateNode,$i=!1),Co(s,o,u),Cd(u.stateNode),ln=h,$i=b;break;case 5:Rn||$r(u,o);case 6:if(h=ln,b=$i,ln=null,Co(s,o,u),ln=h,$i=b,ln!==null)if($i)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(u.stateNode)}catch(E){Kt(u,o,E)}else try{ln.removeChild(u.stateNode)}catch(E){Kt(u,o,E)}break;case 18:ln!==null&&($i?(s=ln,Bb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Qu(s)):Bb(ln,u.stateNode));break;case 4:h=ln,b=$i,ln=u.stateNode.containerInfo,$i=!0,Co(s,o,u),ln=h,$i=b;break;case 0:case 11:case 14:case 15:Ta(2,u,o),Rn||Ta(4,u,o),Co(s,o,u);break;case 1:Rn||($r(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Fw(u,o,h)),Co(s,o,u);break;case 21:Co(s,o,u);break;case 22:Rn=(h=Rn)||u.memoizedState!==null,Co(s,o,u),Rn=h;break;default:Co(s,o,u)}}function Kw(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Qu(s)}catch(u){Kt(o,o.return,u)}}}function Yw(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Qu(s)}catch(u){Kt(o,o.return,u)}}function TM(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new qw),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new qw),o;default:throw Error(i(435,s.tag))}}function Tf(s,o){var u=TM(s);o.forEach(function(h){if(!u.has(h)){u.add(h);var b=PM.bind(null,s,h);h.then(b,b)}})}function Ji(s,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var b=u[h],E=s,R=o,F=R;e:for(;F!==null;){switch(F.tag){case 27:if(Ra(F.type)){ln=F.stateNode,$i=!1;break e}break;case 5:ln=F.stateNode,$i=!1;break e;case 3:case 4:ln=F.stateNode.containerInfo,$i=!0;break e}F=F.return}if(ln===null)throw Error(i(160));Jw(E,R,b),ln=null,$i=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Ww(o,s),o=o.sibling}var fr=null;function Ww(s,o){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ji(o,s),Ki(s),h&4&&(Ta(3,s,s.return),_d(3,s),Ta(5,s,s.return));break;case 1:Ji(o,s),Ki(s),h&512&&(Rn||u===null||$r(u,u.return)),h&64&&Ao&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var b=fr;if(Ji(o,s),Ki(s),h&512&&(Rn||u===null||$r(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":E=b.getElementsByTagName("title")[0],(!E||E[Cs]||E[dn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(h),b.head.insertBefore(E,b.querySelector("head > title"))),ni(E,h,u),E[dn]=s,gn(E),h=E;break e;case"link":var R=Wb("link","href",b).get(h+(u.href||""));if(R){for(var F=0;F<R.length;F++)if(E=R[F],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(F,1);break t}}E=b.createElement(h),ni(E,h,u),b.head.appendChild(E);break;case"meta":if(R=Wb("meta","content",b).get(h+(u.content||""))){for(F=0;F<R.length;F++)if(E=R[F],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(F,1);break t}}E=b.createElement(h),ni(E,h,u),b.head.appendChild(E);break;default:throw Error(i(468,h))}E[dn]=s,gn(E),h=E}s.stateNode=h}else Zb(b,s.type,s.stateNode);else s.stateNode=Yb(b,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Zb(b,s.type,s.stateNode):Yb(b,h,s.memoizedProps)):h===null&&s.stateNode!==null&&u_(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ji(o,s),Ki(s),h&512&&(Rn||u===null||$r(u,u.return)),u!==null&&h&4&&u_(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ji(o,s),Ki(s),h&512&&(Rn||u===null||$r(u,u.return)),s.flags&32){b=s.stateNode;try{Sn(b,"")}catch(He){Kt(s,s.return,He)}}h&4&&s.stateNode!=null&&(b=s.memoizedProps,u_(s,b,u!==null?u.memoizedProps:b)),h&1024&&(h_=!0);break;case 6:if(Ji(o,s),Ki(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(He){Kt(s,s.return,He)}}break;case 3:if(Bf=null,b=fr,fr=Uf(o.containerInfo),Ji(o,s),fr=b,Ki(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Qu(o.containerInfo)}catch(He){Kt(s,s.return,He)}h_&&(h_=!1,Zw(s));break;case 4:h=fr,fr=Uf(s.stateNode.containerInfo),Ji(o,s),Ki(s),fr=h;break;case 12:Ji(o,s),Ki(s);break;case 31:Ji(o,s),Ki(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Tf(s,h)));break;case 13:Ji(o,s),Ki(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Sf=Ln()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Tf(s,h)));break;case 22:b=s.memoizedState!==null;var ne=u!==null&&u.memoizedState!==null,he=Ao,we=Rn;if(Ao=he||b,Rn=we||ne,Ji(o,s),Rn=we,Ao=he,Ki(s),h&8192)e:for(o=s.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||ne||Ao||Rn||jl(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){ne=u=o;try{if(E=ne.stateNode,b)R=E.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{F=ne.stateNode;var Ae=ne.memoizedProps.style,_e=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;F.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(He){Kt(ne,ne.return,He)}}}else if(o.tag===6){if(u===null){ne=o;try{ne.stateNode.nodeValue=b?"":ne.memoizedProps}catch(He){Kt(ne,ne.return,He)}}}else if(o.tag===18){if(u===null){ne=o;try{var xe=ne.stateNode;b?Fb(xe,!0):Fb(ne.stateNode,!1)}catch(He){Kt(ne,ne.return,He)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Tf(s,u))));break;case 19:Ji(o,s),Ki(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Tf(s,h)));break;case 30:break;case 21:break;default:Ji(o,s),Ki(s)}}function Ki(s){var o=s.flags;if(o&2){try{for(var u,h=s.return;h!==null;){if(jw(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var b=u.stateNode,E=c_(s);bf(s,E,b);break;case 5:var R=u.stateNode;u.flags&32&&(Sn(R,""),u.flags&=-33);var F=c_(s);bf(s,F,R);break;case 3:case 4:var ne=u.stateNode.containerInfo,he=c_(s);d_(s,he,ne);break;default:throw Error(i(161))}}catch(we){Kt(s,s.return,we)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Zw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Zw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function No(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Gw(s,o.alternate,o),o=o.sibling}function jl(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Ta(4,o,o.return),jl(o);break;case 1:$r(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Fw(o,o.return,u),jl(o);break;case 27:Cd(o.stateNode);case 26:case 5:$r(o,o.return),jl(o);break;case 22:o.memoizedState===null&&jl(o);break;case 30:jl(o);break;default:jl(o)}s=s.sibling}}function Io(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,b=s,E=o,R=E.flags;switch(E.tag){case 0:case 11:case 15:Io(b,E,u),_d(4,E);break;case 1:if(Io(b,E,u),h=E,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(he){Kt(h,h.return,he)}if(h=E,b=h.updateQueue,b!==null){var F=h.stateNode;try{var ne=b.shared.hiddenCallbacks;if(ne!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ne.length;b++)Nx(ne[b],F)}catch(he){Kt(h,h.return,he)}}u&&R&64&&Bw(E),yd(E,E.return);break;case 27:Hw(E);case 26:case 5:Io(b,E,u),u&&h===null&&R&4&&zw(E),yd(E,E.return);break;case 12:Io(b,E,u);break;case 31:Io(b,E,u),u&&R&4&&Kw(b,E);break;case 13:Io(b,E,u),u&&R&4&&Yw(b,E);break;case 22:E.memoizedState===null&&Io(b,E,u),yd(E,E.return);break;case 30:break;default:Io(b,E,u)}o=o.sibling}}function f_(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&sd(u))}function m_(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&sd(s))}function mr(s,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Xw(s,o,u,h),o=o.sibling}function Xw(s,o,u,h){var b=o.flags;switch(o.tag){case 0:case 11:case 15:mr(s,o,u,h),b&2048&&_d(9,o);break;case 1:mr(s,o,u,h);break;case 3:mr(s,o,u,h),b&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&sd(s)));break;case 12:if(b&2048){mr(s,o,u,h),s=o.stateNode;try{var E=o.memoizedProps,R=E.id,F=E.onPostCommit;typeof F=="function"&&F(R,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ne){Kt(o,o.return,ne)}}else mr(s,o,u,h);break;case 31:mr(s,o,u,h);break;case 13:mr(s,o,u,h);break;case 23:break;case 22:E=o.stateNode,R=o.alternate,o.memoizedState!==null?E._visibility&2?mr(s,o,u,h):vd(s,o):E._visibility&2?mr(s,o,u,h):(E._visibility|=2,ju(s,o,u,h,(o.subtreeFlags&10256)!==0||!1)),b&2048&&f_(R,o);break;case 24:mr(s,o,u,h),b&2048&&m_(o.alternate,o);break;default:mr(s,o,u,h)}}function ju(s,o,u,h,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=s,R=o,F=u,ne=h,he=R.flags;switch(R.tag){case 0:case 11:case 15:ju(E,R,F,ne,b),_d(8,R);break;case 23:break;case 22:var we=R.stateNode;R.memoizedState!==null?we._visibility&2?ju(E,R,F,ne,b):vd(E,R):(we._visibility|=2,ju(E,R,F,ne,b)),b&&he&2048&&f_(R.alternate,R);break;case 24:ju(E,R,F,ne,b),b&&he&2048&&m_(R.alternate,R);break;default:ju(E,R,F,ne,b)}o=o.sibling}}function vd(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,h=o,b=h.flags;switch(h.tag){case 22:vd(u,h),b&2048&&f_(h.alternate,h);break;case 24:vd(u,h),b&2048&&m_(h.alternate,h);break;default:vd(u,h)}o=o.sibling}}var xd=8192;function Hu(s,o,u){if(s.subtreeFlags&xd)for(s=s.child;s!==null;)Qw(s,o,u),s=s.sibling}function Qw(s,o,u){switch(s.tag){case 26:Hu(s,o,u),s.flags&xd&&s.memoizedState!==null&&uP(u,fr,s.memoizedState,s.memoizedProps);break;case 5:Hu(s,o,u);break;case 3:case 4:var h=fr;fr=Uf(s.stateNode.containerInfo),Hu(s,o,u),fr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=xd,xd=16777216,Hu(s,o,u),xd=h):Hu(s,o,u));break;default:Hu(s,o,u)}}function eb(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function wd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Wn=h,nb(h,s)}eb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tb(s),s=s.sibling}function tb(s){switch(s.tag){case 0:case 11:case 15:wd(s),s.flags&2048&&Ta(9,s,s.return);break;case 3:wd(s);break;case 12:wd(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Ef(s)):wd(s);break;default:wd(s)}}function Ef(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Wn=h,nb(h,s)}eb(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Ta(8,o,o.return),Ef(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Ef(o));break;default:Ef(o)}s=s.sibling}}function nb(s,o){for(;Wn!==null;){var u=Wn;switch(u.tag){case 0:case 11:case 15:Ta(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:sd(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Wn=h;else e:for(u=s;Wn!==null;){h=Wn;var b=h.sibling,E=h.return;if($w(h),h===u){Wn=null;break e}if(b!==null){b.return=E,Wn=b;break e}Wn=E}}}var EM={getCacheForType:function(s){var o=ei(Cn),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return ei(Cn).controller.signal}},SM=typeof WeakMap=="function"?WeakMap:Map,jt=0,en=null,bt=null,St=0,Jt=0,ps=null,Ea=!1,qu=!1,p_=!1,Ro=0,vn=0,Sa=0,Hl=0,g_=0,gs=0,Gu=0,bd=null,Yi=null,__=!1,Sf=0,ib=0,Af=1/0,Cf=null,Aa=null,Un=0,Ca=null,$u=null,Mo=0,y_=0,v_=null,sb=null,Td=0,x_=null;function _s(){return(jt&2)!==0&&St!==0?St&-St:fe.T!==null?A_():dl()}function rb(){if(gs===0)if((St&536870912)===0||wt){var s=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),gs=s}else gs=536870912;return s=fs.current,s!==null&&(s.flags|=32),gs}function Wi(s,o,u){(s===en&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)&&(Ju(s,0),Na(s,St,gs,!1)),er(s,u),((jt&2)===0||s!==en)&&(s===en&&((jt&2)===0&&(Hl|=u),vn===4&&Na(s,St,gs,!1)),Jr(s))}function ob(s,o,u){if((jt&6)!==0)throw Error(i(327));var h=!u&&(o&127)===0&&(o&s.expiredLanes)===0||ts(s,o),b=h?NM(s,o):b_(s,o,!0),E=h;do{if(b===0){qu&&!h&&Na(s,o,0,!1);break}else{if(u=s.current.alternate,E&&!AM(u)){b=b_(s,o,!1),E=!1;continue}if(b===2){if(E=o,s.errorRecoveryDisabledLanes&E)var R=0;else R=s.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){o=R;e:{var F=s;b=bd;var ne=F.current.memoizedState.isDehydrated;if(ne&&(Ju(F,R).flags|=256),R=b_(F,R,!1),R!==2){if(p_&&!ne){F.errorRecoveryDisabledLanes|=E,Hl|=E,b=4;break e}E=Yi,Yi=b,E!==null&&(Yi===null?Yi=E:Yi.push.apply(Yi,E))}b=R}if(E=!1,b!==2)continue}}if(b===1){Ju(s,0),Na(s,o,0,!0);break}e:{switch(h=s,E=b,E){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Na(h,o,gs,!Ea);break e;case 2:Yi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(b=Sf+300-Ln(),10<b)){if(Na(h,o,gs,!Ea),Ss(h,0,!0)!==0)break e;Mo=o,h.timeoutHandle=Ub(ab.bind(null,h,u,Yi,Cf,__,o,gs,Hl,Gu,Ea,E,"Throttled",-0,0),b);break e}ab(h,u,Yi,Cf,__,o,gs,Hl,Gu,Ea,E,null,-0,0)}}break}while(!0);Jr(s)}function ab(s,o,u,h,b,E,R,F,ne,he,we,Ae,_e,xe){if(s.timeoutHandle=-1,Ae=o.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},Qw(o,E,Ae);var He=(E&62914560)===E?Sf-Ln():(E&4194048)===E?ib-Ln():0;if(He=cP(Ae,He),He!==null){Mo=E,s.cancelPendingCommit=He(pb.bind(null,s,o,E,u,h,b,R,F,ne,we,Ae,null,_e,xe)),Na(s,E,R,!he);return}}pb(s,o,E,u,h,b,R,F,ne)}function AM(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var b=u[h],E=b.getSnapshot;b=b.value;try{if(!Kn(E(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Na(s,o,u,h){o&=~g_,o&=~Hl,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var b=o;0<b;){var E=31-un(b),R=1<<E;h[E]=-1,b&=~R}u!==0&&lo(s,u,o)}function Nf(){return(jt&6)===0?(Ed(0),!1):!0}function w_(){if(bt!==null){if(Jt===0)var s=bt.return;else s=bt,hr=Gr=null,Ug(s),Uu=null,od=0,s=bt;for(;s!==null;)Vw(s.alternate,s),s=s.return;bt=null}}function Ju(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,$M(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Mo=0,w_(),en=s,bt=u=Bs(s.current,null),St=o,Jt=0,ps=null,Ea=!1,qu=ts(s,o),p_=!1,Gu=gs=g_=Hl=Sa=vn=0,Yi=bd=null,__=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var b=31-un(h),E=1<<b;o|=s[b],h&=~E}return Ro=o,Rl(),u}function lb(s,o){ct=null,fe.H=md,o===Ou||o===nf?(o=Ex(),Jt=3):o===Sg?(o=Ex(),Jt=4):Jt=o===Qg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ps=o,bt===null&&(vn=1,_f(s,d(o,s.current)))}function ub(){var s=fs.current;return s===null?!0:(St&4194048)===St?Fs===null:(St&62914560)===St||(St&536870912)!==0?s===Fs:!1}function cb(){var s=fe.H;return fe.H=md,s===null?md:s}function db(){var s=fe.A;return fe.A=EM,s}function If(){vn=4,Ea||(St&4194048)!==St&&fs.current!==null||(qu=!0),(Sa&134217727)===0&&(Hl&134217727)===0||en===null||Na(en,St,gs,!1)}function b_(s,o,u){var h=jt;jt|=2;var b=cb(),E=db();(en!==s||St!==o)&&(Cf=null,Ju(s,o)),o=!1;var R=vn;e:do try{if(Jt!==0&&bt!==null){var F=bt,ne=ps;switch(Jt){case 8:w_(),R=6;break e;case 3:case 2:case 9:case 6:fs.current===null&&(o=!0);var he=Jt;if(Jt=0,ps=null,Ku(s,F,ne,he),u&&qu){R=0;break e}break;default:he=Jt,Jt=0,ps=null,Ku(s,F,ne,he)}}CM(),R=vn;break}catch(we){lb(s,we)}while(!0);return o&&s.shellSuspendCounter++,hr=Gr=null,jt=h,fe.H=b,fe.A=E,bt===null&&(en=null,St=0,Rl()),R}function CM(){for(;bt!==null;)hb(bt)}function NM(s,o){var u=jt;jt|=2;var h=cb(),b=db();en!==s||St!==o?(Cf=null,Af=Ln()+500,Ju(s,o)):qu=ts(s,o);e:do try{if(Jt!==0&&bt!==null){o=bt;var E=ps;t:switch(Jt){case 1:Jt=0,ps=null,Ku(s,o,E,1);break;case 2:case 9:if(bx(E)){Jt=0,ps=null,fb(o);break}o=function(){Jt!==2&&Jt!==9||en!==s||(Jt=7),Jr(s)},E.then(o,o);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:bx(E)?(Jt=0,ps=null,fb(o)):(Jt=0,ps=null,Ku(s,o,E,7));break;case 5:var R=null;switch(bt.tag){case 26:R=bt.memoizedState;case 5:case 27:var F=bt;if(R?Xb(R):F.stateNode.complete){Jt=0,ps=null;var ne=F.sibling;if(ne!==null)bt=ne;else{var he=F.return;he!==null?(bt=he,Rf(he)):bt=null}break t}}Jt=0,ps=null,Ku(s,o,E,5);break;case 6:Jt=0,ps=null,Ku(s,o,E,6);break;case 8:w_(),vn=6;break e;default:throw Error(i(462))}}IM();break}catch(we){lb(s,we)}while(!0);return hr=Gr=null,fe.H=h,fe.A=b,jt=u,bt!==null?0:(en=null,St=0,Rl(),vn)}function IM(){for(;bt!==null&&!ci();)hb(bt)}function hb(s){var o=Ow(s.alternate,s,Ro);s.memoizedProps=s.pendingProps,o===null?Rf(s):bt=o}function fb(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=Rw(u,o,o.pendingProps,o.type,void 0,St);break;case 11:o=Rw(u,o,o.pendingProps,o.type.render,o.ref,St);break;case 5:Ug(o);default:Vw(u,o),o=bt=Qc(o,Ro),o=Ow(u,o,Ro)}s.memoizedProps=s.pendingProps,o===null?Rf(s):bt=o}function Ku(s,o,u,h){hr=Gr=null,Ug(o),Uu=null,od=0;var b=o.return;try{if(_M(s,b,o,u,St)){vn=1,_f(s,d(u,s.current)),bt=null;return}}catch(E){if(b!==null)throw bt=b,E;vn=1,_f(s,d(u,s.current)),bt=null;return}o.flags&32768?(wt||h===1?s=!0:qu||(St&536870912)!==0?s=!1:(Ea=s=!0,(h===2||h===9||h===3||h===6)&&(h=fs.current,h!==null&&h.tag===13&&(h.flags|=16384))),mb(o,s)):Rf(o)}function Rf(s){var o=s;do{if((o.flags&32768)!==0){mb(o,Ea);return}s=o.return;var u=xM(o.alternate,o,Ro);if(u!==null){bt=u;return}if(o=o.sibling,o!==null){bt=o;return}bt=o=s}while(o!==null);vn===0&&(vn=5)}function mb(s,o){do{var u=wM(s.alternate,s);if(u!==null){u.flags&=32767,bt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){bt=s;return}bt=s=u}while(s!==null);vn=6,bt=null}function pb(s,o,u,h,b,E,R,F,ne){s.cancelPendingCommit=null;do Mf();while(Un!==0);if((jt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(E=o.lanes|o.childLanes,E|=Iu,Zc(s,u,E,R,F,ne),s===en&&(bt=en=null,St=0),$u=o,Ca=s,Mo=u,y_=E,v_=b,sb=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,kM(Qs,function(){return xb(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=fe.T,fe.T=null,b=Ie.p,Ie.p=2,R=jt,jt|=4;try{bM(s,o,u)}finally{jt=R,Ie.p=b,fe.T=h}}Un=1,gb(),_b(),yb()}}function gb(){if(Un===1){Un=0;var s=Ca,o=$u,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=fe.T,fe.T=null;var h=Ie.p;Ie.p=2;var b=jt;jt|=4;try{Ww(o,s);var E=D_,R=Sl(s.containerInfo),F=E.focusedElem,ne=E.selectionRange;if(R!==F&&F&&F.ownerDocument&&Su(F.ownerDocument.documentElement,F)){if(ne!==null&&Vr(F)){var he=ne.start,we=ne.end;if(we===void 0&&(we=he),"selectionStart"in F)F.selectionStart=he,F.selectionEnd=Math.min(we,F.value.length);else{var Ae=F.ownerDocument||document,_e=Ae&&Ae.defaultView||window;if(_e.getSelection){var xe=_e.getSelection(),He=F.textContent.length,Xe=Math.min(ne.start,He),Zt=ne.end===void 0?Xe:Math.min(ne.end,He);!xe.extend&&Xe>Zt&&(R=Zt,Zt=Xe,Xe=R);var ae=El(F,Xe),ie=El(F,Zt);if(ae&&ie&&(xe.rangeCount!==1||xe.anchorNode!==ae.node||xe.anchorOffset!==ae.offset||xe.focusNode!==ie.node||xe.focusOffset!==ie.offset)){var de=Ae.createRange();de.setStart(ae.node,ae.offset),xe.removeAllRanges(),Xe>Zt?(xe.addRange(de),xe.extend(ie.node,ie.offset)):(de.setEnd(ie.node,ie.offset),xe.addRange(de))}}}}for(Ae=[],xe=F;xe=xe.parentNode;)xe.nodeType===1&&Ae.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Ae.length;F++){var Te=Ae[F];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Hf=!!k_,D_=k_=null}finally{jt=b,Ie.p=h,fe.T=u}}s.current=o,Un=2}}function _b(){if(Un===2){Un=0;var s=Ca,o=$u,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=fe.T,fe.T=null;var h=Ie.p;Ie.p=2;var b=jt;jt|=4;try{Gw(s,o.alternate,o)}finally{jt=b,Ie.p=h,fe.T=u}}Un=3}}function yb(){if(Un===4||Un===3){Un=0,oo();var s=Ca,o=$u,u=Mo,h=sb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Un=5:(Un=0,$u=Ca=null,vb(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Aa=null),ze(u),o=o.stateNode,xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(ki,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=fe.T,b=Ie.p,Ie.p=2,fe.T=null;try{for(var E=s.onRecoverableError,R=0;R<h.length;R++){var F=h[R];E(F.value,{componentStack:F.stack})}}finally{fe.T=o,Ie.p=b}}(Mo&3)!==0&&Mf(),Jr(s),b=s.pendingLanes,(u&261930)!==0&&(b&42)!==0?s===x_?Td++:(Td=0,x_=s):Td=0,Ed(0)}}function vb(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,sd(o)))}function Mf(){return gb(),_b(),yb(),xb()}function xb(){if(Un!==5)return!1;var s=Ca,o=y_;y_=0;var u=ze(Mo),h=fe.T,b=Ie.p;try{Ie.p=32>u?32:u,fe.T=null,u=v_,v_=null;var E=Ca,R=Mo;if(Un=0,$u=Ca=null,Mo=0,(jt&6)!==0)throw Error(i(331));var F=jt;if(jt|=4,tb(E.current),Xw(E,E.current,R,u),jt=F,Ed(0,!1),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(ki,E)}catch{}return!0}finally{Ie.p=b,fe.T=h,vb(s,o)}}function wb(s,o,u){o=d(u,o),o=Xg(s.stateNode,o,2),s=xa(s,o,2),s!==null&&(er(s,2),Jr(s))}function Kt(s,o,u){if(s.tag===3)wb(s,s,u);else for(;o!==null;){if(o.tag===3){wb(o,s,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Aa===null||!Aa.has(h))){s=d(u,s),u=bw(2),h=xa(o,u,2),h!==null&&(Tw(u,h,o,s),er(h,2),Jr(h));break}}o=o.return}}function T_(s,o,u){var h=s.pingCache;if(h===null){h=s.pingCache=new SM;var b=new Set;h.set(o,b)}else b=h.get(o),b===void 0&&(b=new Set,h.set(o,b));b.has(u)||(p_=!0,b.add(u),s=RM.bind(null,s,o,u),o.then(s,s))}function RM(s,o,u){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,en===s&&(St&u)===u&&(vn===4||vn===3&&(St&62914560)===St&&300>Ln()-Sf?(jt&2)===0&&Ju(s,0):g_|=u,Gu===St&&(Gu=0)),Jr(s)}function bb(s,o){o===0&&(o=gu()),s=Vs(s,o),s!==null&&(er(s,o),Jr(s))}function MM(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),bb(s,u)}function PM(s,o){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,b=s.memoizedState;b!==null&&(u=b.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),bb(s,u)}function kM(s,o){return zt(s,o)}var Pf=null,Yu=null,E_=!1,kf=!1,S_=!1,Ia=0;function Jr(s){s!==Yu&&s.next===null&&(Yu===null?Pf=Yu=s:Yu=Yu.next=s),kf=!0,E_||(E_=!0,LM())}function Ed(s,o){if(!S_&&kf){S_=!0;do for(var u=!1,h=Pf;h!==null;){if(s!==0){var b=h.pendingLanes;if(b===0)var E=0;else{var R=h.suspendedLanes,F=h.pingedLanes;E=(1<<31-un(42|s)+1)-1,E&=b&~(R&~F),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,Ab(h,E))}else E=St,E=Ss(h,h===en?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||ts(h,E)||(u=!0,Ab(h,E));h=h.next}while(u);S_=!1}}function DM(){Tb()}function Tb(){kf=E_=!1;var s=0;Ia!==0&&GM()&&(s=Ia);for(var o=Ln(),u=null,h=Pf;h!==null;){var b=h.next,E=Eb(h,o);E===0?(h.next=null,u===null?Pf=b:u.next=b,b===null&&(Yu=u)):(u=h,(s!==0||(E&3)!==0)&&(kf=!0)),h=b}Un!==0&&Un!==5||Ed(s),Ia!==0&&(Ia=0)}function Eb(s,o){for(var u=s.suspendedLanes,h=s.pingedLanes,b=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var R=31-un(E),F=1<<R,ne=b[R];ne===-1?((F&u)===0||(F&h)!==0)&&(b[R]=Wc(F,o)):ne<=o&&(s.expiredLanes|=F),E&=~F}if(o=en,u=St,u=Ss(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===o&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&En(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ts(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(h!==null&&En(h),ze(u)){case 2:case 8:u=Zo;break;case 32:u=Qs;break;case 268435456:u=al;break;default:u=Qs}return h=Sb.bind(null,s),u=zt(u,h),s.callbackPriority=o,s.callbackNode=u,o}return h!==null&&h!==null&&En(h),s.callbackPriority=2,s.callbackNode=null,2}function Sb(s,o){if(Un!==0&&Un!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Mf()&&s.callbackNode!==u)return null;var h=St;return h=Ss(s,s===en?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(ob(s,h,o),Eb(s,Ln()),s.callbackNode!=null&&s.callbackNode===u?Sb.bind(null,s):null)}function Ab(s,o){if(Mf())return null;ob(s,o,!0)}function LM(){JM(function(){(jt&6)!==0?zt(ao,DM):Tb()})}function A_(){if(Ia===0){var s=Du;s===0&&(s=es,es<<=1,(es&261888)===0&&(es=256)),Ia=s}return Ia}function Cb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:kr(""+s)}function Nb(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function OM(s,o,u,h,b){if(o==="submit"&&u&&u.stateNode===b){var E=Cb((b[pn]||null).action),R=h.submitter;R&&(o=(o=R[pn]||null)?Cb(o.formAction):R.getAttribute("formAction"),o!==null&&(E=o,R=null));var F=new Ds("action","action",null,h,b);s.push({event:F,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ia!==0){var ne=R?Nb(b,R):new FormData(b);$g(u,{pending:!0,data:ne,method:b.method,action:E},null,ne)}}else typeof E=="function"&&(F.preventDefault(),ne=R?Nb(b,R):new FormData(b),$g(u,{pending:!0,data:ne,method:b.method,action:E},E,ne))},currentTarget:b}]})}}for(var C_=0;C_<zr.length;C_++){var N_=zr[C_],UM=N_.toLowerCase(),VM=N_[0].toUpperCase()+N_.slice(1);Hi(UM,"on"+VM)}Hi(Cl,"onAnimationEnd"),Hi(Wh,"onAnimationIteration"),Hi(Nl,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(_g,"onTransitionRun"),Hi(Zh,"onTransitionStart"),Hi(yg,"onTransitionCancel"),Hi(pa,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Is("onBeforeInput",["compositionend","keypress","textInput","paste"]),Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sd));function Ib(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],b=h.event;h=h.listeners;e:{var E=void 0;if(o)for(var R=h.length-1;0<=R;R--){var F=h[R],ne=F.instance,he=F.currentTarget;if(F=F.listener,ne!==E&&b.isPropagationStopped())break e;E=F,b.currentTarget=he;try{E(b)}catch(we){Il(we)}b.currentTarget=null,E=ne}else for(R=0;R<h.length;R++){if(F=h[R],ne=F.instance,he=F.currentTarget,F=F.listener,ne!==E&&b.isPropagationStopped())break e;E=F,b.currentTarget=he;try{E(b)}catch(we){Il(we)}b.currentTarget=null,E=ne}}}}function Tt(s,o){var u=o[is];u===void 0&&(u=o[is]=new Set);var h=s+"__bubble";u.has(h)||(Rb(o,s,2,!1),u.add(h))}function I_(s,o,u){var h=0;o&&(h|=4),Rb(u,s,h,o)}var Df="_reactListening"+Math.random().toString(36).slice(2);function R_(s){if(!s[Df]){s[Df]=!0,hl.forEach(function(u){u!=="selectionchange"&&(BM.has(u)||I_(u,!1,s),I_(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Df]||(o[Df]=!0,I_("selectionchange",!1,o))}}function Rb(s,o,u,h){switch(rT(o)){case 2:var b=fP;break;case 8:b=mP;break;default:b=G_}u=b.bind(null,o,u,s),b=void 0,!sr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),h?b!==void 0?s.addEventListener(o,u,{capture:!0,passive:b}):s.addEventListener(o,u,!0):b!==void 0?s.addEventListener(o,u,{passive:b}):s.addEventListener(o,u,!1)}function M_(s,o,u,h,b){var E=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var R=h.tag;if(R===3||R===4){var F=h.stateNode.containerInfo;if(F===b)break;if(R===4)for(R=h.return;R!==null;){var ne=R.tag;if((ne===3||ne===4)&&R.stateNode.containerInfo===b)return;R=R.return}for(;F!==null;){if(R=ss(F),R===null)return;if(ne=R.tag,ne===5||ne===6||ne===26||ne===27){h=E=R;continue e}F=F.parentNode}}h=h.return}ir(function(){var he=E,we=hi(u),Ae=[];e:{var _e=Xh.get(s);if(_e!==void 0){var xe=Ds,He=s;switch(s){case"keypress":if(Lr(u)===0)break e;case"keydown":case"keyup":xe=vl;break;case"focusin":He="focus",xe=po;break;case"focusout":He="blur",xe=po;break;case"beforeblur":case"afterblur":xe=po;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=C;break;case Cl:case Wh:case Nl:xe=ra;break;case pa:xe=q;break;case"scroll":case"scrollend":xe=pt;break;case"wheel":xe=ye;break;case"copy":case"cut":case"paste":xe=Ci;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=lr;break;case"toggle":case"beforetoggle":xe=nt}var Xe=(o&4)!==0,Zt=!Xe&&(s==="scroll"||s==="scrollend"),ae=Xe?_e!==null?_e+"Capture":null:_e;Xe=[];for(var ie=he,de;ie!==null;){var Te=ie;if(de=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||de===null||ae===null||(Te=Ai(ie,ae),Te!=null&&Xe.push(Ad(ie,Te,de))),Zt)break;ie=ie.return}0<Xe.length&&(_e=new xe(_e,He,null,u,we),Ae.push({event:_e,listeners:Xe}))}}if((o&7)===0){e:{if(_e=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",_e&&u!==sa&&(He=u.relatedTarget||u.fromElement)&&(ss(He)||He[ns]))break e;if((xe||_e)&&(_e=we.window===we?we:(_e=we.ownerDocument)?_e.defaultView||_e.parentWindow:window,xe?(He=u.relatedTarget||u.toElement,xe=he,He=He?ss(He):null,He!==null&&(Zt=a(He),Xe=He.tag,He!==Zt||Xe!==5&&Xe!==27&&Xe!==6)&&(He=null)):(xe=null,He=he),xe!==He)){if(Xe=ml,Te="onMouseLeave",ae="onMouseEnter",ie="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=lr,Te="onPointerLeave",ae="onPointerEnter",ie="pointer"),Zt=xe==null?_e:qn(xe),de=He==null?_e:qn(He),_e=new Xe(Te,ie+"leave",xe,u,we),_e.target=Zt,_e.relatedTarget=de,Te=null,ss(we)===he&&(Xe=new Xe(ae,ie+"enter",He,u,we),Xe.target=de,Xe.relatedTarget=Zt,Te=Xe),Zt=Te,xe&&He)t:{for(Xe=FM,ae=xe,ie=He,de=0,Te=ae;Te;Te=Xe(Te))de++;Te=0;for(var Ke=ie;Ke;Ke=Xe(Ke))Te++;for(;0<de-Te;)ae=Xe(ae),de--;for(;0<Te-de;)ie=Xe(ie),Te--;for(;de--;){if(ae===ie||ie!==null&&ae===ie.alternate){Xe=ae;break t}ae=Xe(ae),ie=Xe(ie)}Xe=null}else Xe=null;xe!==null&&Mb(Ae,_e,xe,Xe,!1),He!==null&&Zt!==null&&Mb(Ae,Zt,He,Xe,!0)}}e:{if(_e=he?qn(he):window,xe=_e.nodeName&&_e.nodeName.toLowerCase(),xe==="select"||xe==="input"&&_e.type==="file")var Ut=Tl;else if(Ls(_e))if(Gh)Ut=gg;else{Ut=pg;var Ge=ur}else xe=_e.nodeName,!xe||xe.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?he&&Pr(he.elementType)&&(Ut=Tl):Ut=da;if(Ut&&(Ut=Ut(s,he))){qh(Ae,Ut,u,we);break e}Ge&&Ge(s,_e,he),s==="focusout"&&he&&_e.type==="number"&&he.memoizedProps.value!=null&&rs(_e,"number",_e.value)}switch(Ge=he?qn(he):window,s){case"focusin":(Ls(Ge)||Ge.contentEditable==="true")&&(Br=Ge,Cu=he,Al=null);break;case"focusout":Al=Cu=Br=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,Kh(Ae,u,we);break;case"selectionchange":if(Au)break;case"keydown":case"keyup":Kh(Ae,u,we)}var ft;if(Mt)e:{switch(s){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else la?go(s,u)&&(At="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(At="onCompositionStart");At&&(ji&&u.locale!=="ko"&&(la||At!=="onCompositionStart"?At==="onCompositionEnd"&&la&&(ft=os()):(Fi=we,rr="value"in Fi?Fi.value:Fi.textContent,la=!0)),Ge=Lf(he,At),0<Ge.length&&(At=new us(At,s,null,u,we),Ae.push({event:At,listeners:Ge}),ft?At.data=ft:(ft=_o(u),ft!==null&&(At.data=ft)))),(ft=zi?hs(s,u):ua(s,u))&&(At=Lf(he,"onBeforeInput"),0<At.length&&(Ge=new us("onBeforeInput","beforeinput",null,u,we),Ae.push({event:Ge,listeners:At}),Ge.data=ft)),OM(Ae,s,he,u,we)}Ib(Ae,o)})}function Ad(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Lf(s,o){for(var u=o+"Capture",h=[];s!==null;){var b=s,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=Ai(s,u),b!=null&&h.unshift(Ad(s,b,E)),b=Ai(s,o),b!=null&&h.push(Ad(s,b,E))),s.tag===3)return h;s=s.return}return[]}function FM(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Mb(s,o,u,h,b){for(var E=o._reactName,R=[];u!==null&&u!==h;){var F=u,ne=F.alternate,he=F.stateNode;if(F=F.tag,ne!==null&&ne===h)break;F!==5&&F!==26&&F!==27||he===null||(ne=he,b?(he=Ai(u,E),he!=null&&R.unshift(Ad(u,he,ne))):b||(he=Ai(u,E),he!=null&&R.push(Ad(u,he,ne)))),u=u.return}R.length!==0&&s.push({event:o,listeners:R})}var zM=/\r\n?/g,jM=/\u0000|\uFFFD/g;function Pb(s){return(typeof s=="string"?s:""+s).replace(zM,`
`).replace(jM,"")}function kb(s,o){return o=Pb(o),Pb(s)===o}function Wt(s,o,u,h,b,E){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Sn(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Sn(s,""+h);break;case"className":xt(s,"class",h);break;case"tabIndex":xt(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":xt(s,u,h);break;case"style":ho(s,h,E);break;case"data":if(o!=="object"){xt(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=kr(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(o!=="input"&&Wt(s,o,"name",b.name,b,null),Wt(s,o,"formEncType",b.formEncType,b,null),Wt(s,o,"formMethod",b.formMethod,b,null),Wt(s,o,"formTarget",b.formTarget,b,null)):(Wt(s,o,"encType",b.encType,b,null),Wt(s,o,"method",b.method,b,null),Wt(s,o,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=kr(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=di);break;case"onScroll":h!=null&&Tt("scroll",s);break;case"onScrollEnd":h!=null&&Tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(b.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=kr(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Tt("beforetoggle",s),Tt("toggle",s),gt(s,"popover",h);break;case"xlinkActuate":sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":sn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":sn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":sn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":sn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gt(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=fo.get(u)||u,gt(s,u,h))}}function P_(s,o,u,h,b,E){switch(u){case"style":ho(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(b.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?Sn(s,h):(typeof h=="number"||typeof h=="bigint")&&Sn(s,""+h);break;case"onScroll":h!=null&&Tt("scroll",s);break;case"onScrollEnd":h!=null&&Tt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),E=s[pn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(o,E,b),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,h,b);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):gt(s,u,h)}}}function ni(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",s),Tt("load",s);var h=!1,b=!1,E;for(E in u)if(u.hasOwnProperty(E)){var R=u[E];if(R!=null)switch(E){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Wt(s,o,E,R,u,null)}}b&&Wt(s,o,"srcSet",u.srcSet,u,null),h&&Wt(s,o,"src",u.src,u,null);return;case"input":Tt("invalid",s);var F=E=R=b=null,ne=null,he=null;for(h in u)if(u.hasOwnProperty(h)){var we=u[h];if(we!=null)switch(h){case"name":b=we;break;case"type":R=we;break;case"checked":ne=we;break;case"defaultChecked":he=we;break;case"value":E=we;break;case"defaultValue":F=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,o));break;default:Wt(s,o,h,we,u,null)}}co(s,E,F,ne,he,R,b,!1);return;case"select":Tt("invalid",s),h=R=E=null;for(b in u)if(u.hasOwnProperty(b)&&(F=u[b],F!=null))switch(b){case"value":E=F;break;case"defaultValue":R=F;break;case"multiple":h=F;default:Wt(s,o,b,F,u,null)}o=E,u=R,s.multiple=!!h,o!=null?$t(s,!!h,o,!1):u!=null&&$t(s,!!h,u,!0);return;case"textarea":Tt("invalid",s),E=b=h=null;for(R in u)if(u.hasOwnProperty(R)&&(F=u[R],F!=null))switch(R){case"value":h=F;break;case"defaultValue":b=F;break;case"children":E=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(91));break;default:Wt(s,o,R,F,u,null)}Bi(s,h,b,E);return;case"option":for(ne in u)if(u.hasOwnProperty(ne)&&(h=u[ne],h!=null))switch(ne){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Wt(s,o,ne,h,u,null)}return;case"dialog":Tt("beforetoggle",s),Tt("toggle",s),Tt("cancel",s),Tt("close",s);break;case"iframe":case"object":Tt("load",s);break;case"video":case"audio":for(h=0;h<Sd.length;h++)Tt(Sd[h],s);break;case"image":Tt("error",s),Tt("load",s);break;case"details":Tt("toggle",s);break;case"embed":case"source":case"link":Tt("error",s),Tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in u)if(u.hasOwnProperty(he)&&(h=u[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Wt(s,o,he,h,u,null)}return;default:if(Pr(o)){for(we in u)u.hasOwnProperty(we)&&(h=u[we],h!==void 0&&P_(s,o,we,h,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(h=u[F],h!=null&&Wt(s,o,F,h,u,null))}function HM(s,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,R=null,F=null,ne=null,he=null,we=null;for(xe in u){var Ae=u[xe];if(u.hasOwnProperty(xe)&&Ae!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":ne=Ae;default:h.hasOwnProperty(xe)||Wt(s,o,xe,null,h,Ae)}}for(var _e in h){var xe=h[_e];if(Ae=u[_e],h.hasOwnProperty(_e)&&(xe!=null||Ae!=null))switch(_e){case"type":E=xe;break;case"name":b=xe;break;case"checked":he=xe;break;case"defaultChecked":we=xe;break;case"value":R=xe;break;case"defaultValue":F=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,o));break;default:xe!==Ae&&Wt(s,o,_e,xe,h,Ae)}}na(s,R,F,ne,he,we,E,b);return;case"select":xe=R=F=_e=null;for(E in u)if(ne=u[E],u.hasOwnProperty(E)&&ne!=null)switch(E){case"value":break;case"multiple":xe=ne;default:h.hasOwnProperty(E)||Wt(s,o,E,null,h,ne)}for(b in h)if(E=h[b],ne=u[b],h.hasOwnProperty(b)&&(E!=null||ne!=null))switch(b){case"value":_e=E;break;case"defaultValue":F=E;break;case"multiple":R=E;default:E!==ne&&Wt(s,o,b,E,h,ne)}o=F,u=R,h=xe,_e!=null?$t(s,!!u,_e,!1):!!h!=!!u&&(o!=null?$t(s,!!u,o,!0):$t(s,!!u,u?[]:"",!1));return;case"textarea":xe=_e=null;for(F in u)if(b=u[F],u.hasOwnProperty(F)&&b!=null&&!h.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Wt(s,o,F,null,h,b)}for(R in h)if(b=h[R],E=u[R],h.hasOwnProperty(R)&&(b!=null||E!=null))switch(R){case"value":_e=b;break;case"defaultValue":xe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==E&&Wt(s,o,R,b,h,E)}Ms(s,_e,xe);return;case"option":for(var He in u)if(_e=u[He],u.hasOwnProperty(He)&&_e!=null&&!h.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:Wt(s,o,He,null,h,_e)}for(ne in h)if(_e=h[ne],xe=u[ne],h.hasOwnProperty(ne)&&_e!==xe&&(_e!=null||xe!=null))switch(ne){case"selected":s.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Wt(s,o,ne,_e,h,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in u)_e=u[Xe],u.hasOwnProperty(Xe)&&_e!=null&&!h.hasOwnProperty(Xe)&&Wt(s,o,Xe,null,h,_e);for(he in h)if(_e=h[he],xe=u[he],h.hasOwnProperty(he)&&_e!==xe&&(_e!=null||xe!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,o));break;default:Wt(s,o,he,_e,h,xe)}return;default:if(Pr(o)){for(var Zt in u)_e=u[Zt],u.hasOwnProperty(Zt)&&_e!==void 0&&!h.hasOwnProperty(Zt)&&P_(s,o,Zt,void 0,h,_e);for(we in h)_e=h[we],xe=u[we],!h.hasOwnProperty(we)||_e===xe||_e===void 0&&xe===void 0||P_(s,o,we,_e,h,xe);return}}for(var ae in u)_e=u[ae],u.hasOwnProperty(ae)&&_e!=null&&!h.hasOwnProperty(ae)&&Wt(s,o,ae,null,h,_e);for(Ae in h)_e=h[Ae],xe=u[Ae],!h.hasOwnProperty(Ae)||_e===xe||_e==null&&xe==null||Wt(s,o,Ae,_e,h,xe)}function Db(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qM(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var b=u[h],E=b.transferSize,R=b.initiatorType,F=b.duration;if(E&&F&&Db(R)){for(R=0,F=b.responseEnd,h+=1;h<u.length;h++){var ne=u[h],he=ne.startTime;if(he>F)break;var we=ne.transferSize,Ae=ne.initiatorType;we&&Db(Ae)&&(ne=ne.responseEnd,R+=we*(ne<F?1:(F-he)/(ne-he)))}if(--h,o+=8*(E+R)/(b.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var k_=null,D_=null;function Of(s){return s.nodeType===9?s:s.ownerDocument}function Lb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ob(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function L_(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var O_=null;function GM(){var s=window.event;return s&&s.type==="popstate"?s===O_?!1:(O_=s,!0):(O_=null,!1)}var Ub=typeof setTimeout=="function"?setTimeout:void 0,$M=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,JM=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(s){return Vb.resolve(null).then(s).catch(KM)}:Ub;function KM(s){setTimeout(function(){throw s})}function Ra(s){return s==="head"}function Bb(s,o){var u=o,h=0;do{var b=u.nextSibling;if(s.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(b),Qu(o);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Cd(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Cd(u);for(var E=u.firstChild;E;){var R=E.nextSibling,F=E.nodeName;E[Cs]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=R}}else u==="body"&&Cd(s.ownerDocument.body);u=b}while(u);Qu(o)}function Fb(s,o){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function U_(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":U_(u),Qo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function YM(s,o,u,h){for(;s.nodeType===1;){var b=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Cs])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=zs(s.nextSibling),s===null)break}return null}function WM(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=zs(s.nextSibling),s===null))return null;return s}function zb(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=zs(s.nextSibling),s===null))return null;return s}function V_(s){return s.data==="$?"||s.data==="$~"}function B_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function ZM(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function zs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var F_=null;function jb(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return zs(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function Hb(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function qb(s,o,u){switch(o=Of(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Cd(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Qo(s)}var js=new Map,Gb=new Set;function Uf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Po=Ie.d;Ie.d={f:XM,r:QM,D:eP,C:tP,L:nP,m:iP,X:rP,S:sP,M:oP};function XM(){var s=Po.f(),o=Nf();return s||o}function QM(s){var o=Oi(s);o!==null&&o.tag===5&&o.type==="form"?lw(o):Po.r(s)}var Wu=typeof document>"u"?null:document;function $b(s,o,u){var h=Wu;if(h&&typeof o=="string"&&o){var b=Xt(o);b='link[rel="'+s+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),Gb.has(b)||(Gb.add(b),s={rel:s,crossOrigin:u,href:o},h.querySelector(b)===null&&(o=h.createElement("link"),ni(o,"link",s),gn(o),h.head.appendChild(o)))}}function eP(s){Po.D(s),$b("dns-prefetch",s,null)}function tP(s,o){Po.C(s,o),$b("preconnect",s,o)}function nP(s,o,u){Po.L(s,o,u);var h=Wu;if(h&&s&&o){var b='link[rel="preload"][as="'+Xt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Xt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Xt(u.imageSizes)+'"]')):b+='[href="'+Xt(s)+'"]';var E=b;switch(o){case"style":E=Zu(s);break;case"script":E=Xu(s)}js.has(E)||(s=T({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),js.set(E,s),h.querySelector(b)!==null||o==="style"&&h.querySelector(Nd(E))||o==="script"&&h.querySelector(Id(E))||(o=h.createElement("link"),ni(o,"link",s),gn(o),h.head.appendChild(o)))}}function iP(s,o){Po.m(s,o);var u=Wu;if(u&&s){var h=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+Xt(h)+'"][href="'+Xt(s)+'"]',E=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Xu(s)}if(!js.has(E)&&(s=T({rel:"modulepreload",href:s},o),js.set(E,s),u.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Id(E)))return}h=u.createElement("link"),ni(h,"link",s),gn(h),u.head.appendChild(h)}}}function sP(s,o,u){Po.S(s,o,u);var h=Wu;if(h&&s){var b=Ns(h).hoistableStyles,E=Zu(s);o=o||"default";var R=b.get(E);if(!R){var F={loading:0,preload:null};if(R=h.querySelector(Nd(E)))F.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},u),(u=js.get(E))&&z_(s,u);var ne=R=h.createElement("link");gn(ne),ni(ne,"link",s),ne._p=new Promise(function(he,we){ne.onload=he,ne.onerror=we}),ne.addEventListener("load",function(){F.loading|=1}),ne.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Vf(R,o,h)}R={type:"stylesheet",instance:R,count:1,state:F},b.set(E,R)}}}function rP(s,o){Po.X(s,o);var u=Wu;if(u&&s){var h=Ns(u).hoistableScripts,b=Xu(s),E=h.get(b);E||(E=u.querySelector(Id(b)),E||(s=T({src:s,async:!0},o),(o=js.get(b))&&j_(s,o),E=u.createElement("script"),gn(E),ni(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(b,E))}}function oP(s,o){Po.M(s,o);var u=Wu;if(u&&s){var h=Ns(u).hoistableScripts,b=Xu(s),E=h.get(b);E||(E=u.querySelector(Id(b)),E||(s=T({src:s,async:!0,type:"module"},o),(o=js.get(b))&&j_(s,o),E=u.createElement("script"),gn(E),ni(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(b,E))}}function Jb(s,o,u,h){var b=(b=z.current)?Uf(b):null;if(!b)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Zu(u.href),u=Ns(b).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Zu(u.href);var E=Ns(b).hoistableStyles,R=E.get(s);if(R||(b=b.ownerDocument||b,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,R),(E=b.querySelector(Nd(s)))&&!E._p&&(R.instance=E,R.state.loading=5),js.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},js.set(s,u),E||aP(b,s,u,R.state))),o&&h===null)throw Error(i(528,""));return R}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Xu(u),u=Ns(b).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Zu(s){return'href="'+Xt(s)+'"'}function Nd(s){return'link[rel="stylesheet"]['+s+"]"}function Kb(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function aP(s,o,u,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),ni(o,"link",u),gn(o),s.head.appendChild(o))}function Xu(s){return'[src="'+Xt(s)+'"]'}function Id(s){return"script[async]"+s}function Yb(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+Xt(u.href)+'"]');if(h)return o.instance=h,gn(h),h;var b=T({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),gn(h),ni(h,"style",b),Vf(h,u.precedence,s),o.instance=h;case"stylesheet":b=Zu(u.href);var E=s.querySelector(Nd(b));if(E)return o.state.loading|=4,o.instance=E,gn(E),E;h=Kb(u),(b=js.get(b))&&z_(h,b),E=(s.ownerDocument||s).createElement("link"),gn(E);var R=E;return R._p=new Promise(function(F,ne){R.onload=F,R.onerror=ne}),ni(E,"link",h),o.state.loading|=4,Vf(E,u.precedence,s),o.instance=E;case"script":return E=Xu(u.src),(b=s.querySelector(Id(E)))?(o.instance=b,gn(b),b):(h=u,(b=js.get(E))&&(h=T({},u),j_(h,b)),s=s.ownerDocument||s,b=s.createElement("script"),gn(b),ni(b,"link",h),s.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Vf(h,u.precedence,s));return o.instance}function Vf(s,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,E=b,R=0;R<h.length;R++){var F=h[R];if(F.dataset.precedence===o)E=F;else if(E!==b)break}E?E.parentNode.insertBefore(s,E.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function z_(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function j_(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Bf=null;function Wb(s,o,u){if(Bf===null){var h=new Map,b=Bf=new Map;b.set(u,h)}else b=Bf,h=b.get(u),h||(h=new Map,b.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),b=0;b<u.length;b++){var E=u[b];if(!(E[Cs]||E[dn]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var R=E.getAttribute(o)||"";R=s+R;var F=h.get(R);F?F.push(E):h.set(R,[E])}}return h}function Zb(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function lP(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Xb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function uP(s,o,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=Zu(h.href),E=o.querySelector(Nd(b));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Ff.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=E,gn(E);return}E=o.ownerDocument||o,h=Kb(h),(b=js.get(b))&&z_(h,b),E=E.createElement("link"),gn(E);var R=E;R._p=new Promise(function(F,ne){R.onload=F,R.onerror=ne}),ni(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Ff.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var H_=0;function cP(s,o){return s.stylesheets&&s.count===0&&jf(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&jf(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+o);0<s.imgBytes&&H_===0&&(H_=62500*qM());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&jf(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>H_?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function Ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var zf=null;function jf(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,zf=new Map,o.forEach(dP,s),zf=null,Ff.call(s))}function dP(s,o){if(!(o.state.loading&4)){var u=zf.get(s);if(u)var h=u.get(null);else{u=new Map,zf.set(s,u);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var R=b[E];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),h=R)}h&&u.set(null,h)}b=o.instance,R=b.getAttribute("data-precedence"),E=u.get(R)||h,E===h&&u.set(null,b),u.set(R,b),this.count++,h=Ff.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),E?E.parentNode.insertBefore(b,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),o.state.loading|=4}}var Rd={$$typeof:H,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function hP(s,o,u,h,b,E,R,F,ne){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function Qb(s,o,u,h,b,E,R,F,ne,he,we,Ae){return s=new hP(s,o,u,R,ne,he,we,Ae,F),o=1,E===!0&&(o|=24),E=gi(3,null,null,o),s.current=E,E.stateNode=s,o=bg(),o.refCount++,s.pooledCache=o,o.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:o},Ag(E),s}function eT(s){return s?(s=yo,s):yo}function tT(s,o,u,h,b,E){b=eT(b),h.context===null?h.context=b:h.pendingContext=b,h=va(o),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=xa(s,h,o),u!==null&&(Wi(u,s,o),ld(u,s,o))}function nT(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function q_(s,o){nT(s,o),(s=s.alternate)&&nT(s,o)}function iT(s){if(s.tag===13||s.tag===31){var o=Vs(s,67108864);o!==null&&Wi(o,s,67108864),q_(s,67108864)}}function sT(s){if(s.tag===13||s.tag===31){var o=_s();o=Hn(o);var u=Vs(s,o);u!==null&&Wi(u,s,o),q_(s,o)}}var Hf=!0;function fP(s,o,u,h){var b=fe.T;fe.T=null;var E=Ie.p;try{Ie.p=2,G_(s,o,u,h)}finally{Ie.p=E,fe.T=b}}function mP(s,o,u,h){var b=fe.T;fe.T=null;var E=Ie.p;try{Ie.p=8,G_(s,o,u,h)}finally{Ie.p=E,fe.T=b}}function G_(s,o,u,h){if(Hf){var b=$_(h);if(b===null)M_(s,o,h,qf,u),oT(s,h);else if(gP(b,s,o,u,h))h.stopPropagation();else if(oT(s,h),o&4&&-1<pP.indexOf(s)){for(;b!==null;){var E=Oi(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var R=Es(E.pendingLanes);if(R!==0){var F=E;for(F.pendingLanes|=2,F.entangledLanes|=2;R;){var ne=1<<31-un(R);F.entanglements[1]|=ne,R&=~ne}Jr(E),(jt&6)===0&&(Af=Ln()+500,Ed(0))}}break;case 31:case 13:F=Vs(E,2),F!==null&&Wi(F,E,2),Nf(),q_(E,2)}if(E=$_(h),E===null&&M_(s,o,h,qf,u),E===b)break;b=E}b!==null&&h.stopPropagation()}else M_(s,o,h,null,u)}}function $_(s){return s=hi(s),J_(s)}var qf=null;function J_(s){if(qf=null,s=ss(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===31){if(s=f(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return qf=s,null}function rT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xs()){case ao:return 2;case Zo:return 8;case Qs:case Yc:return 32;case al:return 268435456;default:return 32}default:return 32}}var K_=!1,Ma=null,Pa=null,ka=null,Md=new Map,Pd=new Map,Da=[],pP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oT(s,o){switch(s){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Md.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(o.pointerId)}}function kd(s,o,u,h,b,E){return s===null||s.nativeEvent!==E?(s={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[b]},o!==null&&(o=Oi(o),o!==null&&iT(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),s)}function gP(s,o,u,h,b){switch(o){case"focusin":return Ma=kd(Ma,s,o,u,h,b),!0;case"dragenter":return Pa=kd(Pa,s,o,u,h,b),!0;case"mouseover":return ka=kd(ka,s,o,u,h,b),!0;case"pointerover":var E=b.pointerId;return Md.set(E,kd(Md.get(E)||null,s,o,u,h,b)),!0;case"gotpointercapture":return E=b.pointerId,Pd.set(E,kd(Pd.get(E)||null,s,o,u,h,b)),!0}return!1}function aT(s){var o=ss(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,Di(s.priority,function(){sT(u)});return}}else if(o===31){if(o=f(u),o!==null){s.blockedOn=o,Di(s.priority,function(){sT(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=$_(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);sa=h,u.target.dispatchEvent(h),sa=null}else return o=Oi(u),o!==null&&iT(o),s.blockedOn=u,!1;o.shift()}return!0}function lT(s,o,u){Gf(s)&&u.delete(o)}function _P(){K_=!1,Ma!==null&&Gf(Ma)&&(Ma=null),Pa!==null&&Gf(Pa)&&(Pa=null),ka!==null&&Gf(ka)&&(ka=null),Md.forEach(lT),Pd.forEach(lT)}function $f(s,o){s.blockedOn===o&&(s.blockedOn=null,K_||(K_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_P)))}var Jf=null;function uT(s){Jf!==s&&(Jf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jf===s&&(Jf=null);for(var o=0;o<s.length;o+=3){var u=s[o],h=s[o+1],b=s[o+2];if(typeof h!="function"){if(J_(h||u)===null)continue;break}var E=Oi(u);E!==null&&(s.splice(o,3),o-=3,$g(E,{pending:!0,data:b,method:u.method,action:h},h,b))}}))}function Qu(s){function o(ne){return $f(ne,s)}Ma!==null&&$f(Ma,s),Pa!==null&&$f(Pa,s),ka!==null&&$f(ka,s),Md.forEach(o),Pd.forEach(o);for(var u=0;u<Da.length;u++){var h=Da[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Da.length&&(u=Da[0],u.blockedOn===null);)aT(u),u.blockedOn===null&&Da.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var b=u[h],E=u[h+1],R=b[pn]||null;if(typeof E=="function")R||uT(u);else if(R){var F=null;if(E&&E.hasAttribute("formAction")){if(b=E,R=E[pn]||null)F=R.formAction;else if(J_(b)!==null)continue}else F=R.action;typeof F=="function"?u[h+1]=F:(u.splice(h,3),h-=3),uT(u)}}}function cT(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(R){return b=R})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Y_(s){this._internalRoot=s}Kf.prototype.render=Y_.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,h=_s();tT(u,h,s,o,null,null)},Kf.prototype.unmount=Y_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;tT(s.current,2,null,s,null,null),Nf(),o[ns]=null}};function Kf(s){this._internalRoot=s}Kf.prototype.unstable_scheduleHydration=function(s){if(s){var o=dl();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Da.length&&o!==0&&o<Da[u].priority;u++);Da.splice(u,0,s),u===0&&aT(s)}};var dT=e.version;if(dT!=="19.2.3")throw Error(i(527,dT,"19.2.3"));Ie.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(o),s=s!==null?x(s):null,s=s===null?null:s.stateNode,s};var yP={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:fe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{ki=Yf.inject(yP),xn=Yf}catch{}}return Ld.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,h="",b=yw,E=vw,R=xw;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError)),o=Qb(s,1,!1,null,null,u,h,null,b,E,R,cT),s[ns]=o.current,R_(s),new Y_(o)},Ld.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var h=!1,b="",E=yw,R=vw,F=xw,ne=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.formState!==void 0&&(ne=u.formState)),o=Qb(s,1,!0,o,u??null,h,b,ne,E,R,F,cT),o.context=eT(null),u=o.current,h=_s(),h=Hn(h),b=va(h),b.callback=null,xa(u,b,h),u=h,o.current.lanes=u,er(o,u),Jr(o),s[ns]=o.current,R_(s),new Kf(o)},Ld.version="19.2.3",Ld}var wT;function NP(){if(wT)return X_.exports;wT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),X_.exports=CP(),X_.exports}var IP=NP();const RP=O0(IP);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bT="popstate";function MP(n={}){function e(r,a){let{pathname:c="/",search:f="",hash:m=""}=Dc(r.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Py("",{pathname:c,search:f,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){let c=r.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=r.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof a=="string"?a:mh(a))}function i(r,a){Ks(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return kP(e,t,i,n)}function zn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ks(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PP(){return Math.random().toString(36).substring(2,10)}function TT(n,e){return{usr:n.state,key:n.key,idx:e}}function Py(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dc(e):e,state:t,key:e&&e.key||i||PP()}}function mh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function kP(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,c=r.history,f="POP",m=null,p=x();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function x(){return(c.state||{idx:null}).idx}function T(){f="POP";let P=x(),Q=P==null?null:P-p;p=P,m&&m({action:f,location:V.location,delta:Q})}function S(P,Q){f="PUSH";let W=Py(V.location,P,Q);t&&t(W,P),p=x()+1;let H=TT(W,p),j=V.createHref(W);try{c.pushState(H,"",j)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;r.location.assign(j)}a&&m&&m({action:f,location:V.location,delta:1})}function N(P,Q){f="REPLACE";let W=Py(V.location,P,Q);t&&t(W,P),p=x();let H=TT(W,p),j=V.createHref(W);c.replaceState(H,"",j),a&&m&&m({action:f,location:V.location,delta:0})}function O(P){return DP(P)}let V={get action(){return f},get location(){return n(r,c)},listen(P){if(m)throw new Error("A history only accepts one active listener");return r.addEventListener(bT,T),m=P,()=>{r.removeEventListener(bT,T),m=null}},createHref(P){return e(r,P)},createURL:O,encodeLocation(P){let Q=O(P);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:S,replace:N,go(P){return c.go(P)}};return V}function DP(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:mh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function TC(n,e,t="/"){return LP(n,e,t,!1)}function LP(n,e,t,i){let r=typeof e=="string"?Dc(e):e,a=zo(r.pathname||"/",t);if(a==null)return null;let c=EC(n);OP(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=JP(a);f=GP(c[m],p,i)}return f}function EC(n,e=[],t=[],i="",r=!1){let a=(c,f,m=r,p)=>{let x={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&m)return;zn(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let T=Fo([i,x.relativePath]),S=t.concat(x);c.children&&c.children.length>0&&(zn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),EC(c.children,e,S,T,m)),!(c.path==null&&!c.index)&&e.push({path:T,score:HP(T,c.index),routesMeta:S})};return n.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))a(c,f);else for(let p of SC(c.path))a(c,f,!0,p)}),e}function SC(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let c=SC(i.join("/")),f=[];return f.push(...c.map(m=>m===""?a:[a,m].join("/"))),r&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function OP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qP(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var UP=/^:[\w-]+$/,VP=3,BP=2,FP=1,zP=10,jP=-2,ET=n=>n==="*";function HP(n,e){let t=n.split("/"),i=t.length;return t.some(ET)&&(i+=jP),e&&(i+=BP),t.filter(r=>!ET(r)).reduce((r,a)=>r+(UP.test(a)?VP:a===""?FP:zP),i)}function qP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function GP(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,x=a==="/"?e:e.slice(a.length)||"/",T=Hm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},x),S=m.route;if(!T&&p&&t&&!i[i.length-1].route.index&&(T=Hm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!T)return null;Object.assign(r,T.params),c.push({params:r,pathname:Fo([a,T.pathname]),pathnameBase:ZP(Fo([a,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(a=Fo([a,T.pathnameBase]))}return c}function Hm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=$P(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],c=a.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:i.reduce((p,{paramName:x,isOptional:T},S)=>{if(x==="*"){let O=f[S]||"";c=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const N=f[S];return T&&!N?p[x]=void 0:p[x]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function $P(n,e=!1,t=!0){Ks(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function JP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ks(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function zo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var AC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KP=n=>AC.test(n);function YP(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Dc(n):n,a;if(t)if(KP(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ks(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=ST(t.substring(1),"/"):a=ST(t,e)}else a=e;return{pathname:a,search:XP(i),hash:QP(r)}}function ST(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function ny(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function CC(n){let e=WP(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function NC(n,e,t,i=!1){let r;typeof n=="string"?r=Dc(n):(r={...n},zn(!r.pathname||!r.pathname.includes("?"),ny("?","pathname","search",r)),zn(!r.pathname||!r.pathname.includes("#"),ny("#","pathname","hash",r)),zn(!r.search||!r.search.includes("#"),ny("#","search","hash",r)));let a=n===""||r.pathname==="",c=a?"/":r.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;r.pathname=S.join("/")}f=T>=0?e[T]:"/"}let m=YP(r,f),p=c&&c!=="/"&&c.endsWith("/"),x=(a||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||x)&&(m.pathname+="/"),m}var Fo=n=>n.join("/").replace(/\/\/+/g,"/"),ZP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ek=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function tk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function nk(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var IC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function RC(n,e){let t=n;if(typeof t!="string"||!AC.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,r=!1;if(IC)try{let a=new URL(window.location.href),c=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=zo(c.pathname,e);c.origin===a.origin&&f!=null?t=f+c.search+c.hash:r=!0}catch{Ks(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MC=["POST","PUT","PATCH","DELETE"];new Set(MC);var ik=["GET",...MC];new Set(ik);var Lc=X.createContext(null);Lc.displayName="DataRouter";var Sp=X.createContext(null);Sp.displayName="DataRouterState";var sk=X.createContext(!1),PC=X.createContext({isTransitioning:!1});PC.displayName="ViewTransition";var rk=X.createContext(new Map);rk.displayName="Fetchers";var ok=X.createContext(null);ok.displayName="Await";var Ws=X.createContext(null);Ws.displayName="Navigation";var Ap=X.createContext(null);Ap.displayName="Location";var Jo=X.createContext({outlet:null,matches:[],isDataRoute:!1});Jo.displayName="Route";var B0=X.createContext(null);B0.displayName="RouteError";var kC="REACT_ROUTER_ERROR",ak="REDIRECT",lk="ROUTE_ERROR_RESPONSE";function uk(n){if(n.startsWith(`${kC}:${ak}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ck(n){if(n.startsWith(`${kC}:${lk}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ek(e.status,e.statusText,e.data)}catch{}}function dk(n,{relative:e}={}){zn(Ih(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=X.useContext(Ws),{hash:r,pathname:a,search:c}=Rh(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:Fo([t,a])),i.createHref({pathname:f,search:c,hash:r})}function Ih(){return X.useContext(Ap)!=null}function au(){return zn(Ih(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(Ap).location}var DC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LC(n){X.useContext(Ws).static||X.useLayoutEffect(n)}function hk(){let{isDataRoute:n}=X.useContext(Jo);return n?Sk():fk()}function fk(){zn(Ih(),"useNavigate() may be used only in the context of a <Router> component.");let n=X.useContext(Lc),{basename:e,navigator:t}=X.useContext(Ws),{matches:i}=X.useContext(Jo),{pathname:r}=au(),a=JSON.stringify(CC(i)),c=X.useRef(!1);return LC(()=>{c.current=!0}),X.useCallback((m,p={})=>{if(Ks(c.current,DC),!c.current)return;if(typeof m=="number"){t.go(m);return}let x=NC(m,JSON.parse(a),r,p.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Fo([e,x.pathname])),(p.replace?t.replace:t.push)(x,p.state,p)},[e,t,a,r,n])}X.createContext(null);function Rh(n,{relative:e}={}){let{matches:t}=X.useContext(Jo),{pathname:i}=au(),r=JSON.stringify(CC(t));return X.useMemo(()=>NC(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function mk(n,e,t,i,r){zn(Ih(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=X.useContext(Ws),{matches:c}=X.useContext(Jo),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",T=f&&f.route;{let W=T&&T.path||"";UC(p,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let S=au(),N;N=S;let O=N.pathname||"/",V=O;if(x!=="/"){let W=x.replace(/^\//,"").split("/");V="/"+O.replace(/^\//,"").split("/").slice(W.length).join("/")}let P=TC(n,{pathname:V});return Ks(T||P!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Ks(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),vk(P&&P.map(W=>Object.assign({},W,{params:Object.assign({},m,W.params),pathname:Fo([x,a.encodeLocation?a.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?x:Fo([x,a.encodeLocation?a.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),c,t,i,r)}function pk(){let n=Ek(),e=tk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:a},"ErrorBoundary")," or"," ",X.createElement("code",{style:a},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:r},t):null,c)}var gk=X.createElement(pk,null),OC=class extends X.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=ck(n.digest);t&&(n=t)}let e=n!==void 0?X.createElement(Jo.Provider,{value:this.props.routeContext},X.createElement(B0.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?X.createElement(_k,{error:n},e):e}};OC.contextType=sk;var iy=new WeakMap;function _k({children:n,error:e}){let{basename:t}=X.useContext(Ws);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=uk(e.digest);if(i){let r=iy.get(e);if(r)throw r;let a=RC(i.location,t);if(IC&&!iy.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw iy.set(e,c),c}return X.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function yk({routeContext:n,match:e,children:t}){let i=X.useContext(Lc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(Jo.Provider,{value:n},t)}function vk(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t==null?void 0:t.errors;if(c!=null){let x=a.findIndex(T=>T.route.id&&(c==null?void 0:c[T.route.id])!==void 0);zn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,x+1))}let f=!1,m=-1;if(t)for(let x=0;x<a.length;x++){let T=a[x];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(m=x),T.route.id){let{loaderData:S,errors:N}=t,O=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!N||N[T.route.id]===void 0);if(T.route.lazy||O){f=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}let p=t&&i?(x,T)=>{var S,N;i(x,{location:t.location,params:((N=(S=t.matches)==null?void 0:S[0])==null?void 0:N.params)??{},unstable_pattern:nk(t.matches),errorInfo:T})}:void 0;return a.reduceRight((x,T,S)=>{let N,O=!1,V=null,P=null;t&&(N=c&&T.route.id?c[T.route.id]:void 0,V=T.route.errorElement||gk,f&&(m<0&&S===0?(UC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,P=null):m===S&&(O=!0,P=T.route.hydrateFallbackElement||null)));let Q=e.concat(a.slice(0,S+1)),W=()=>{let H;return N?H=V:O?H=P:T.route.Component?H=X.createElement(T.route.Component,null):T.route.element?H=T.route.element:H=x,X.createElement(yk,{match:T,routeContext:{outlet:x,matches:Q,isDataRoute:t!=null},children:H})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?X.createElement(OC,{location:t.location,revalidation:t.revalidation,component:V,error:N,children:W(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:p}):W()},null)}function F0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xk(n){let e=X.useContext(Lc);return zn(e,F0(n)),e}function wk(n){let e=X.useContext(Sp);return zn(e,F0(n)),e}function bk(n){let e=X.useContext(Jo);return zn(e,F0(n)),e}function z0(n){let e=bk(n),t=e.matches[e.matches.length-1];return zn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Tk(){return z0("useRouteId")}function Ek(){var i;let n=X.useContext(B0),e=wk("useRouteError"),t=z0("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function Sk(){let{router:n}=xk("useNavigate"),e=z0("useNavigate"),t=X.useRef(!1);return LC(()=>{t.current=!0}),X.useCallback(async(r,a={})=>{Ks(t.current,DC),t.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var AT={};function UC(n,e,t){!e&&!AT[n]&&(AT[n]=!0,Ks(!1,t))}X.memo(Ak);function Ak({routes:n,future:e,state:t,onError:i}){return mk(n,void 0,t,i,e)}function Ck({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1,unstable_useTransitions:c}){zn(!Ih(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=X.useMemo(()=>({basename:f,navigator:r,static:a,unstable_useTransitions:c,future:{}}),[f,r,a,c]);typeof t=="string"&&(t=Dc(t));let{pathname:p="/",search:x="",hash:T="",state:S=null,key:N="default"}=t,O=X.useMemo(()=>{let V=zo(p,f);return V==null?null:{location:{pathname:V,search:x,hash:T,state:S,key:N},navigationType:i}},[f,p,x,T,S,N,i]);return Ks(O!=null,`<Router basename="${f}"> is not able to match the URL "${p}${x}${T}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:X.createElement(Ws.Provider,{value:m},X.createElement(Ap.Provider,{children:e,value:O}))}var _m="get",ym="application/x-www-form-urlencoded";function Cp(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Nk(n){return Cp(n)&&n.tagName.toLowerCase()==="button"}function Ik(n){return Cp(n)&&n.tagName.toLowerCase()==="form"}function Rk(n){return Cp(n)&&n.tagName.toLowerCase()==="input"}function Mk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Pk(n,e){return n.button===0&&(!e||e==="_self")&&!Mk(n)}var Wf=null;function kk(){if(Wf===null)try{new FormData(document.createElement("form"),0),Wf=!1}catch{Wf=!0}return Wf}var Dk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sy(n){return n!=null&&!Dk.has(n)?(Ks(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ym}"`),null):n}function Lk(n,e){let t,i,r,a,c;if(Ik(n)){let f=n.getAttribute("action");i=f?zo(f,e):null,t=n.getAttribute("method")||_m,r=sy(n.getAttribute("enctype"))||ym,a=new FormData(n)}else if(Nk(n)||Rk(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?zo(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||_m,r=sy(n.getAttribute("formenctype"))||sy(f.getAttribute("enctype"))||ym,a=new FormData(f,n),!kk()){let{name:p,type:x,value:T}=n;if(x==="image"){let S=p?`${p}.`:"";a.append(`${S}x`,"0"),a.append(`${S}y`,"0")}else p&&a.append(p,T)}}else{if(Cp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_m,i=null,r=ym,c=n}return a&&r==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function j0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ok(n,e,t,i){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&zo(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function Uk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Bk(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let c=await Uk(a,t);return c.links?c.links():[]}return[]}));return Hk(i.flat(1).filter(Vk).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function CT(n,e,t,i,r,a){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var x;return t[p].pathname!==m.pathname||((x=t[p].route.path)==null?void 0:x.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return a==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):a==="data"?e.filter((m,p)=>{var T;let x=i.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Fk(n,e,{includeHydrateFallback:t}={}){return zk(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function zk(n){return[...new Set(n)]}function jk(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Hk(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(jk(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function VC(){let n=X.useContext(Lc);return j0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function qk(){let n=X.useContext(Sp);return j0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var H0=X.createContext(void 0);H0.displayName="FrameworkContext";function BC(){let n=X.useContext(H0);return j0(n,"You must render this element inside a <HydratedRouter> element"),n}function Gk(n,e){let t=X.useContext(H0),[i,r]=X.useState(!1),[a,c]=X.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:x,onTouchStart:T}=e,S=X.useRef(null);X.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let V=Q=>{Q.forEach(W=>{c(W.isIntersecting)})},P=new IntersectionObserver(V,{threshold:.5});return S.current&&P.observe(S.current),()=>{P.disconnect()}}},[n]),X.useEffect(()=>{if(i){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[i]);let N=()=>{r(!0)},O=()=>{r(!1),c(!1)};return t?n!=="intent"?[a,S,{}]:[a,S,{onFocus:Od(f,N),onBlur:Od(m,O),onMouseEnter:Od(p,N),onMouseLeave:Od(x,O),onTouchStart:Od(T,N)}]:[!1,S,{}]}function Od(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function $k({page:n,...e}){let{router:t}=VC(),i=X.useMemo(()=>TC(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?X.createElement(Kk,{page:n,matches:i,...e}):null}function Jk(n){let{manifest:e,routeModules:t}=BC(),[i,r]=X.useState([]);return X.useEffect(()=>{let a=!1;return Bk(n,e,t).then(c=>{a||r(c)}),()=>{a=!0}},[n,e,t]),i}function Kk({page:n,matches:e,...t}){let i=au(),{future:r,manifest:a,routeModules:c}=BC(),{basename:f}=VC(),{loaderData:m,matches:p}=qk(),x=X.useMemo(()=>CT(n,e,p,a,i,"data"),[n,e,p,a,i]),T=X.useMemo(()=>CT(n,e,p,a,i,"assets"),[n,e,p,a,i]),S=X.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let V=new Set,P=!1;if(e.forEach(W=>{var j;let H=a.routes[W.route.id];!H||!H.hasLoader||(!x.some(Z=>Z.route.id===W.route.id)&&W.route.id in m&&((j=c[W.route.id])!=null&&j.shouldRevalidate)||H.hasClientLoader?P=!0:V.add(W.route.id))}),V.size===0)return[];let Q=Ok(n,f,r.unstable_trailingSlashAwareDataRequests,"data");return P&&V.size>0&&Q.searchParams.set("_routes",e.filter(W=>V.has(W.route.id)).map(W=>W.route.id).join(",")),[Q.pathname+Q.search]},[f,r.unstable_trailingSlashAwareDataRequests,m,i,a,x,e,n,c]),N=X.useMemo(()=>Fk(T,a),[T,a]),O=Jk(T);return X.createElement(X.Fragment,null,S.map(V=>X.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),N.map(V=>X.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),O.map(({key:V,link:P})=>X.createElement("link",{key:V,nonce:t.nonce,...P})))}function Yk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Wk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wk&&(window.__reactRouterVersion="7.12.0")}catch{}function Zk({basename:n,children:e,unstable_useTransitions:t,window:i}){let r=X.useRef();r.current==null&&(r.current=MP({window:i,v5Compat:!0}));let a=r.current,[c,f]=X.useState({action:a.action,location:a.location}),m=X.useCallback(p=>{t===!1?f(p):X.startTransition(()=>f(p))},[t]);return X.useLayoutEffect(()=>a.listen(m),[a,m]),X.createElement(Ck,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t})}var FC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zC=X.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:c,state:f,target:m,to:p,preventScrollReset:x,viewTransition:T,unstable_defaultShouldRevalidate:S,...N},O){let{basename:V,unstable_useTransitions:P}=X.useContext(Ws),Q=typeof p=="string"&&FC.test(p),W=RC(p,V);p=W.to;let H=dk(p,{relative:r}),[j,Z,Y]=Gk(i,N),D=tD(p,{replace:c,state:f,target:m,preventScrollReset:x,relative:r,viewTransition:T,unstable_defaultShouldRevalidate:S,unstable_useTransitions:P});function k(G){e&&e(G),G.defaultPrevented||D(G)}let U=X.createElement("a",{...N,...Y,href:W.absoluteURL||H,onClick:W.isExternal||a?e:k,ref:Yk(O,Z),target:m,"data-discover":!Q&&t==="render"?"true":void 0});return j&&!Q?X.createElement(X.Fragment,null,U,X.createElement($k,{page:H})):U});zC.displayName="Link";var Xk=X.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:c,viewTransition:f,children:m,...p},x){let T=Rh(c,{relative:p.relative}),S=au(),N=X.useContext(Sp),{navigator:O,basename:V}=X.useContext(Ws),P=N!=null&&oD(T)&&f===!0,Q=O.encodeLocation?O.encodeLocation(T).pathname:T.pathname,W=S.pathname,H=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(W=W.toLowerCase(),H=H?H.toLowerCase():null,Q=Q.toLowerCase()),H&&V&&(H=zo(H,V)||H);const j=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Z=W===Q||!r&&W.startsWith(Q)&&W.charAt(j)==="/",Y=H!=null&&(H===Q||!r&&H.startsWith(Q)&&H.charAt(Q.length)==="/"),D={isActive:Z,isPending:Y,isTransitioning:P},k=Z?e:void 0,U;typeof i=="function"?U=i(D):U=[i,Z?"active":null,Y?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let G=typeof a=="function"?a(D):a;return X.createElement(zC,{...p,"aria-current":k,className:U,ref:x,style:G,to:c,viewTransition:f},typeof m=="function"?m(D):m)});Xk.displayName="NavLink";var Qk=X.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:c=_m,action:f,onSubmit:m,relative:p,preventScrollReset:x,viewTransition:T,unstable_defaultShouldRevalidate:S,...N},O)=>{let{unstable_useTransitions:V}=X.useContext(Ws),P=sD(),Q=rD(f,{relative:p}),W=c.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&FC.test(f),j=Z=>{if(m&&m(Z),Z.defaultPrevented)return;Z.preventDefault();let Y=Z.nativeEvent.submitter,D=(Y==null?void 0:Y.getAttribute("formmethod"))||c,k=()=>P(Y||Z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:a,relative:p,preventScrollReset:x,viewTransition:T,unstable_defaultShouldRevalidate:S});V&&t!==!1?X.startTransition(()=>k()):k()};return X.createElement("form",{ref:O,method:W,action:Q,onSubmit:i?m:j,...N,"data-discover":!H&&n==="render"?"true":void 0})});Qk.displayName="Form";function eD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jC(n){let e=X.useContext(Lc);return zn(e,eD(n)),e}function tD(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=hk(),x=au(),T=Rh(n,{relative:a});return X.useCallback(S=>{if(Pk(S,e)){S.preventDefault();let N=t!==void 0?t:mh(x)===mh(T),O=()=>p(n,{replace:N,state:i,preventScrollReset:r,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f});m?X.startTransition(()=>O()):O()}},[x,p,T,t,i,e,n,r,a,c,f,m])}var nD=0,iD=()=>`__${String(++nD)}__`;function sD(){let{router:n}=jC("useSubmit"),{basename:e}=X.useContext(Ws),t=Tk(),i=n.fetch,r=n.navigate;return X.useCallback(async(a,c={})=>{let{action:f,method:m,encType:p,formData:x,body:T}=Lk(a,e);if(c.navigate===!1){let S=c.fetcherKey||iD();await i(S,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:T,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await r(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:T,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,r,e,t])}function rD(n,{relative:e}={}){let{basename:t}=X.useContext(Ws),i=X.useContext(Jo);zn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Rh(n||".",{relative:e})},c=au();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),m=f.getAll("index");if(m.some(x=>x==="")){f.delete("index"),m.filter(T=>T).forEach(T=>f.append("index",T));let x=f.toString();a.search=x?`?${x}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Fo([t,a.pathname])),mh(a)}function oD(n,{relative:e}={}){let t=X.useContext(PC);zn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jC("useViewTransitionState"),r=Rh(n,{relative:e});if(!t.isTransitioning)return!1;let a=zo(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=zo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Hm(r.pathname,c)!=null||Hm(r.pathname,a)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),NT=n=>{const e=lD(n);return e.charAt(0).toUpperCase()+e.slice(1)},HC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),uD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=X.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...f},m)=>X.createElement("svg",{ref:m,...cD,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:HC("lucide",r),...!a&&!uD(f)&&{"aria-hidden":"true"},...f},[...c.map(([p,x])=>X.createElement(p,x)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(n,e)=>{const t=X.forwardRef(({className:i,...r},a)=>X.createElement(dD,{ref:a,iconNode:e,className:HC(`lucide-${aD(NT(n))}`,`lucide-${n}`,i),...r}));return t.displayName=NT(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ph=je("arrow-left",hD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],IT=je("bed-double",fD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],pD=je("bot",mD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],qC=je("brain-circuit",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],yD=je("briefcase",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],xD=je("calendar-check",vD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Za=je("calendar",wD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],RT=je("camera",bD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],hc=je("car",TD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],SD=je("check",ED);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],CD=je("chevron-down",AD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ID=je("chevron-right",ND);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],q0=je("circle-alert",RD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],GC=je("circle-check-big",MD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gh=je("circle-check",PD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$C=je("clock",kD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],eu=je("cloud-upload",DD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],OD=je("coffee",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],VD=je("copy",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Np=je("dollar-sign",BD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],JC=je("download",FD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],jD=je("external-link",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qD=je("eye-off",HD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$D=je("eye",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],KD=je("file-image",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_h=je("file-text",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ZD=je("globe",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],ws=je("hotel",XD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],eL=je("landmark",QD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],KC=je("layout-grid",tL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],YC=je("list",nL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ts=je("loader-circle",iL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],rL=je("lock",sL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Xa=je("map-pin",oL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],rl=je("map",aL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],uL=je("maximize-2",lL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],dL=je("message-circle",cL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],fL=je("moon",hL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],pL=je("mountain",mL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ip=je("navigation",gL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],yL=je("panels-top-left",_L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xL=je("pen",vL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],bs=je("plane",wL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Er=je("plus",bL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ry=je("receipt",TL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],SL=je("refresh-cw",EL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],WC=je("rotate-cw",AL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],NL=je("save",CL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ZC=je("search",IL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ML=je("send",RL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],XC=je("shield-check",PL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Lo=je("shopping-bag",kL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ai=je("sparkles",DL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],OL=je("square-pen",LL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],QC=je("stamp",UL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ec=je("star",VL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],G0=je("sticky-note",BL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Uo=je("ticket",FL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xr=je("trash-2",zL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],HL=je("tree-palm",jL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],GL=je("trending-up",qL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Rp=je("trophy",$L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KL=je("user",JL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],qa=je("utensils",YL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],nh=je("wallet",WL);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bi=je("x",ZL);var XL={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QL,e4;function t4(){return{geminiUrl:QL,vertexUrl:e4}}function n4(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const c=t4();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(a=c.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ko{}function De(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(n,e,t){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let p=0;p<m.length;p++){const x=m[p];y(x,e.slice(a+1),t[p])}else for(const p of m)y(p,e.slice(a+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];y(m[0],e.slice(a+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function _(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(f=>_(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function i4(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),c=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&a.length>f)for(let m=f;m<a.length;m++){const p=a[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}ky(n,r,a,0,c)}}function ky(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const c=a.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const m of f[c])ky(m,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=c[p];for(const[p,x]of Object.entries(m)){const T=[];for(const S of t.slice(i))S==="*"?T.push(p):T.push(S);y(c,T,x)}for(const p of f)delete c[p]}}else{const c=n;a in c&&ky(c[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s4(n){const e={},t=_(n,["operationName"]);t!=null&&y(e,["operationName"],t);const i=_(n,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function r4(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response","generateVideoResponse"]);return c!=null&&y(e,["response"],a4(c)),e}function o4(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response"]);return c!=null&&y(e,["response"],l4(c)),e}function a4(n){const e={},t=_(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>u4(c))),y(e,["generatedVideos"],a)}const i=_(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=_(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function l4(n){const e={},t=_(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>c4(c))),y(e,["generatedVideos"],a)}const i=_(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=_(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function u4(n){const e={},t=_(n,["video"]);return t!=null&&y(e,["video"],g4(t)),e}function c4(n){const e={},t=_(n,["_self"]);return t!=null&&y(e,["video"],_4(t)),e}function d4(n){const e={},t=_(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function h4(n){const e={},t=_(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function f4(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response"]);return c!=null&&y(e,["response"],m4(c)),e}function m4(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["parent"]);i!=null&&y(e,["parent"],i);const r=_(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function e1(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response"]);return c!=null&&y(e,["response"],p4(c)),e}function p4(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["parent"]);i!=null&&y(e,["parent"],i);const r=_(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function g4(n){const e={},t=_(n,["uri"]);t!=null&&y(e,["uri"],t);const i=_(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],$0(i));const r=_(n,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function _4(n){const e={},t=_(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=_(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],$0(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var MT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(MT||(MT={}));var PT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(PT||(PT={}));var kT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(kT||(kT={}));var Be;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Be||(Be={}));var DT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(DT||(DT={}));var LT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(LT||(LT={}));var OT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(OT||(OT={}));var UT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(UT||(UT={}));var VT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(VT||(VT={}));var BT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(BT||(BT={}));var FT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(FT||(FT={}));var zT;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(zT||(zT={}));var jT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(jT||(jT={}));var HT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(HT||(HT={}));var qT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(qT||(qT={}));var GT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(GT||(GT={}));var $T;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})($T||($T={}));var JT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(JT||(JT={}));var KT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(KT||(KT={}));var YT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(YT||(YT={}));var WT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(WT||(WT={}));var qm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(qm||(qm={}));var ZT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ZT||(ZT={}));var XT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(XT||(XT={}));var QT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(QT||(QT={}));var Dy;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dy||(Dy={}));var eE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(eE||(eE={}));var tE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(tE||(tE={}));var Ly;(function(n){n.COLLECTION="COLLECTION"})(Ly||(Ly={}));var nE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(nE||(nE={}));var iE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iE||(iE={}));var sE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(sE||(sE={}));var rE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(rE||(rE={}));var oE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(oE||(oE={}));var aE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(aE||(aE={}));var lE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(lE||(lE={}));var uE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(uE||(uE={}));var cE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cE||(cE={}));var dE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(dE||(dE={}));var hE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(hE||(hE={}));var fE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(fE||(fE={}));var mE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(mE||(mE={}));var pE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(pE||(pE={}));var gE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(gE||(gE={}));var _E;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(_E||(_E={}));var yE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(yE||(yE={}));var vE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vE||(vE={}));var xE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xE||(xE={}));var wE;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(wE||(wE={}));var bE;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(bE||(bE={}));var TE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(TE||(TE={}));var EE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EE||(EE={}));var SE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(SE||(SE={}));var AE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AE||(AE={}));var CE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(CE||(CE={}));var NE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(NE||(NE={}));var fc;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(fc||(fc={}));class Oy{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ud{get text(){var e,t,i,r,a,c,f,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",x=!1;const T=[];for(const S of(m=(f=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,O]of Object.entries(S))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(O!==null||O!==void 0)&&T.push(N);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;x=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?p:void 0}get data(){var e,t,i,r,a,c,f,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const x=[];for(const T of(m=(f=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,N]of Object.entries(T))S!=="inlineData"&&(N!==null||N!==void 0)&&x.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,r,a,c,f,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,r,a,c,f,m,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(m=(f=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((x==null?void 0:x.length)!==0)return(p=x==null?void 0:x[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,r,a,c,f,m,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(m=(f=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((x==null?void 0:x.length)!==0)return(p=x==null?void 0:x[0])===null||p===void 0?void 0:p.output}}class IE{}class RE{}class y4{}class v4{}class x4{}class w4{}class ME{}class PE{}class kE{}class b4{}class Gm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Gm;let r;const a=e;return t?r=o4(a):r=r4(a),Object.assign(i,r),i}}class DE{}class LE{}class OE{}class UE{}class T4{}class E4{}class S4{}class J0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new J0,a=f4(e);return Object.assign(i,a),i}}class A4{}class C4{}class N4{}class VE{}class I4{get text(){var e,t,i;let r="",a=!1;const c=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&a.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class R4{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class K0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new K0,a=e1(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function t1(n,e){const t=Bt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function n1(n){return Array.isArray(n)?n.map(e=>$m(e)):[$m(n)]}function $m(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function i1(n){const e=$m(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function s1(n){const e=$m(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function r1(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>BE(e)):[BE(n)]}function Uy(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function FE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wi(n){if(n==null)throw new Error("ContentUnion is required");return Uy(n)?n:{role:"user",parts:r1(n)}}function Y0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=wi(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=wi(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>wi(t)):[wi(e)]}function Js(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(FE(n)||zE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wi(n)]}const e=[],t=[],i=Uy(n[0]);for(const r of n){const a=Uy(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(FE(r)||zE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:r1(t)}),e}function M4(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Be).includes(t[0].toUpperCase())?t[0].toUpperCase():Be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Be).includes(i.toUpperCase())?i.toUpperCase():Be.TYPE_UNSPECIFIED})}}function pc(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&M4(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Be).includes(f.toUpperCase())?f.toUpperCase():Be.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=pc(f);else if(i.includes(c)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(pc(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,x]of Object.entries(f))m[p]=pc(x);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function W0(n){return pc(n)}function Z0(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function X0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Oc(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pc(e.response));return n}function Uc(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function P4(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Yo(n,e){if(typeof e!="string")throw new Error("name must be a string");return P4(n,e,"cachedContents")}function o1(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ol(n){return $0(n)}function k4(n){return n!=null&&typeof n=="object"&&"name"in n}function D4(n){return n!=null&&typeof n=="object"&&"video"in n}function L4(n){return n!=null&&typeof n=="object"&&"uri"in n}function a1(n){var e;let t;if(k4(n)&&(t=n.name),!(L4(n)&&(t=n.uri,t===void 0))&&!(D4(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function l1(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function u1(n){for(const e of["models","tunedModels","publisherModels"])if(O4(n,e))return n[e];return[]}function O4(n,e){return n!==null&&typeof n=="object"&&e in n}function U4(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function V4(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const c=U4(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function c1(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function B4(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function d1(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Vc(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function h1(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F4(n){const e={},t=_(n,["responsesFile"]);t!=null&&y(e,["fileName"],t);const i=_(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>x5(c))),y(e,["inlinedResponses"],a)}const r=_(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["inlinedEmbedContentResponses"],a)}return e}function z4(n){const e={},t=_(n,["predictionsFormat"]);t!=null&&y(e,["format"],t);const i=_(n,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=_(n,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function j4(n){const e={},t=_(n,["format"]);t!=null&&y(e,["predictionsFormat"],t);const i=_(n,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=_(n,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),_(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(_(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function vm(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=_(n,["metadata","state"]);r!=null&&y(e,["state"],h1(r));const a=_(n,["metadata","createTime"]);a!=null&&y(e,["createTime"],a);const c=_(n,["metadata","endTime"]);c!=null&&y(e,["endTime"],c);const f=_(n,["metadata","updateTime"]);f!=null&&y(e,["updateTime"],f);const m=_(n,["metadata","model"]);m!=null&&y(e,["model"],m);const p=_(n,["metadata","output"]);return p!=null&&y(e,["dest"],F4(d1(p))),e}function Vy(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["displayName"]);i!=null&&y(e,["displayName"],i);const r=_(n,["state"]);r!=null&&y(e,["state"],h1(r));const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["createTime"]);c!=null&&y(e,["createTime"],c);const f=_(n,["startTime"]);f!=null&&y(e,["startTime"],f);const m=_(n,["endTime"]);m!=null&&y(e,["endTime"],m);const p=_(n,["updateTime"]);p!=null&&y(e,["updateTime"],p);const x=_(n,["model"]);x!=null&&y(e,["model"],x);const T=_(n,["inputConfig"]);T!=null&&y(e,["src"],H4(T));const S=_(n,["outputConfig"]);S!=null&&y(e,["dest"],z4(d1(S)));const N=_(n,["completionStats"]);return N!=null&&y(e,["completionStats"],N),e}function H4(n){const e={},t=_(n,["instancesFormat"]);t!=null&&y(e,["format"],t);const i=_(n,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=_(n,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function q4(n,e){const t={};if(_(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(_(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=_(e,["fileName"]);i!=null&&y(t,["fileName"],i);const r=_(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>v5(n,c))),y(t,["requests","requests"],a)}return t}function G4(n){const e={},t=_(n,["format"]);t!=null&&y(e,["instancesFormat"],t);const i=_(n,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=_(n,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),_(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $4(n){const e={},t=_(n,["data"]);if(t!=null&&y(e,["data"],t),_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function J4(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function K4(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function Y4(n){const e={},t=_(n,["content"]);t!=null&&y(e,["content"],t);const i=_(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],W4(i));const r=_(n,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const a=_(n,["finishReason"]);a!=null&&y(e,["finishReason"],a);const c=_(n,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const f=_(n,["groundingMetadata"]);f!=null&&y(e,["groundingMetadata"],f);const m=_(n,["index"]);m!=null&&y(e,["index"],m);const p=_(n,["logprobsResult"]);p!=null&&y(e,["logprobsResult"],p);const x=_(n,["safetyRatings"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(N=>N)),y(e,["safetyRatings"],S)}const T=_(n,["urlContextMetadata"]);return T!=null&&y(e,["urlContextMetadata"],T),e}function W4(n){const e={},t=_(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function f1(n){const e={},t=_(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>C5(a))),y(e,["parts"],r)}const i=_(n,["role"]);return i!=null&&y(e,["role"],i),e}function Z4(n,e){const t={},i=_(n,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),_(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function X4(n,e){const t={},i=_(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=_(n,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],j4(B4(r))),t}function jE(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["src"]);r!=null&&y(t,["batch","inputConfig"],q4(n,c1(n,r)));const a=_(e,["config"]);return a!=null&&Z4(a,t),t}function Q4(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["model"],Bt(n,i));const r=_(e,["src"]);r!=null&&y(t,["inputConfig"],G4(c1(n,r)));const a=_(e,["config"]);return a!=null&&X4(a,t),t}function e5(n,e){const t={},i=_(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),t}function t5(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["src"]);r!=null&&y(t,["batch","inputConfig"],l5(n,r));const a=_(e,["config"]);return a!=null&&e5(a,t),t}function n5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function i5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function s5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["name"]);i!=null&&y(e,["name"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);return a!=null&&y(e,["error"],a),e}function r5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["name"]);i!=null&&y(e,["name"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);return a!=null&&y(e,["error"],a),e}function o5(n,e){const t={},i=_(e,["contents"]);if(i!=null){let a=Y0(n,i);Array.isArray(a)&&(a=a.map(c=>c)),y(t,["requests[]","request","content"],a)}const r=_(e,["config"]);return r!=null&&(y(t,["_self"],a5(r,t)),i4(t,{"requests[].*":"requests[].request.*"})),t}function a5(n,e){const t={},i=_(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=_(n,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const a=_(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),_(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function l5(n,e){const t={},i=_(e,["fileName"]);i!=null&&y(t,["file_name"],i);const r=_(e,["inlinedRequests"]);return r!=null&&y(t,["requests"],o5(n,r)),t}function u5(n){const e={};if(_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=_(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function c5(n){const e={},t=_(n,["id"]);t!=null&&y(e,["id"],t);const i=_(n,["args"]);i!=null&&y(e,["args"],i);const r=_(n,["name"]);if(r!=null&&y(e,["name"],r),_(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d5(n){const e={},t=_(n,["allowedFunctionNames"]);t!=null&&y(e,["allowedFunctionNames"],t);const i=_(n,["mode"]);if(i!=null&&y(e,["mode"],i),_(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h5(n,e,t){const i={},r=_(e,["systemInstruction"]);t!==void 0&&r!=null&&y(t,["systemInstruction"],f1(wi(r)));const a=_(e,["temperature"]);a!=null&&y(i,["temperature"],a);const c=_(e,["topP"]);c!=null&&y(i,["topP"],c);const f=_(e,["topK"]);f!=null&&y(i,["topK"],f);const m=_(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const p=_(e,["maxOutputTokens"]);p!=null&&y(i,["maxOutputTokens"],p);const x=_(e,["stopSequences"]);x!=null&&y(i,["stopSequences"],x);const T=_(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=_(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const N=_(e,["presencePenalty"]);N!=null&&y(i,["presencePenalty"],N);const O=_(e,["frequencyPenalty"]);O!=null&&y(i,["frequencyPenalty"],O);const V=_(e,["seed"]);V!=null&&y(i,["seed"],V);const P=_(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const Q=_(e,["responseSchema"]);Q!=null&&y(i,["responseSchema"],W0(Q));const W=_(e,["responseJsonSchema"]);if(W!=null&&y(i,["responseJsonSchema"],W),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=_(e,["safetySettings"]);if(t!==void 0&&H!=null){let K=H;Array.isArray(K)&&(K=K.map(Le=>N5(Le))),y(t,["safetySettings"],K)}const j=_(e,["tools"]);if(t!==void 0&&j!=null){let K=Uc(j);Array.isArray(K)&&(K=K.map(Le=>R5(Oc(Le)))),y(t,["tools"],K)}const Z=_(e,["toolConfig"]);if(t!==void 0&&Z!=null&&y(t,["toolConfig"],I5(Z)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=_(e,["cachedContent"]);t!==void 0&&Y!=null&&y(t,["cachedContent"],Yo(n,Y));const D=_(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const k=_(e,["mediaResolution"]);k!=null&&y(i,["mediaResolution"],k);const U=_(e,["speechConfig"]);if(U!=null&&y(i,["speechConfig"],Z0(U)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=_(e,["thinkingConfig"]);G!=null&&y(i,["thinkingConfig"],G);const $=_(e,["imageConfig"]);$!=null&&y(i,["imageConfig"],y5($));const te=_(e,["enableEnhancedCivicAnswers"]);if(te!=null&&y(i,["enableEnhancedCivicAnswers"],te),_(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function f5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>Y4(p))),y(e,["candidates"],m)}const r=_(n,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const a=_(n,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const c=_(n,["responseId"]);c!=null&&y(e,["responseId"],c);const f=_(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function m5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function p5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Vc(n,i)),t}function g5(n){const e={};if(_(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=_(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function _5(n){const e={};if(_(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=_(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function y5(n){const e={},t=_(n,["aspectRatio"]);t!=null&&y(e,["aspectRatio"],t);const i=_(n,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),_(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(_(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function v5(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["request","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let f=Js(r);Array.isArray(f)&&(f=f.map(m=>f1(m))),y(t,["request","contents"],f)}const a=_(e,["metadata"]);a!=null&&y(t,["metadata"],a);const c=_(e,["config"]);return c!=null&&y(t,["request","generationConfig"],h5(n,c,_(t,["request"],{}))),t}function x5(n){const e={},t=_(n,["response"]);t!=null&&y(e,["response"],f5(t));const i=_(n,["error"]);return i!=null&&y(e,["error"],i),e}function w5(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),_(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function b5(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const a=_(n,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),t}function T5(n){const e={},t=_(n,["config"]);return t!=null&&w5(t,e),e}function E5(n){const e={},t=_(n,["config"]);return t!=null&&b5(t,e),e}function S5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>vm(c))),y(e,["batchJobs"],a)}return e}function A5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Vy(c))),y(e,["batchJobs"],a)}return e}function C5(n){const e={},t=_(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=_(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=_(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const a=_(n,["fileData"]);a!=null&&y(e,["fileData"],u5(a));const c=_(n,["functionCall"]);c!=null&&y(e,["functionCall"],c5(c));const f=_(n,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const m=_(n,["inlineData"]);m!=null&&y(e,["inlineData"],$4(m));const p=_(n,["text"]);p!=null&&y(e,["text"],p);const x=_(n,["thought"]);x!=null&&y(e,["thought"],x);const T=_(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const S=_(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function N5(n){const e={},t=_(n,["category"]);if(t!=null&&y(e,["category"],t),_(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=_(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function I5(n){const e={},t=_(n,["retrievalConfig"]);t!=null&&y(e,["retrievalConfig"],t);const i=_(n,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],d5(i)),e}function R5(n){const e={};if(_(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=_(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=_(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=_(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),_(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>T)),y(e,["functionDeclarations"],x)}const c=_(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],g5(c));const f=_(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],_5(f));const m=_(n,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const p=_(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(jo||(jo={}));class lu{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let M5=class extends Ko{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(jo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=jE(this.apiClient,e),i=t._url,r=De("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,m=f.requests,p=[];for(const x of m){const T=Object.assign({},x);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const N=T.request;N.systemInstruction=S,T.request=N}p.push(T)}return f.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(c)i.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Q4(this.apiClient,e);return f=De("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>Vy(x))}else{const p=jE(this.apiClient,e);return f=De("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>vm(x))}}async createEmbeddingsInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=t5(this.apiClient,e);return a=De("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>vm(m))}}async get(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=p5(this.apiClient,e);return f=De("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>Vy(x))}else{const p=m5(this.apiClient,e);return f=De("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>vm(x))}}async cancel(e){var t,i,r,a;let c="",f={};if(this.apiClient.isVertexAI()){const m=K4(this.apiClient,e);c=De("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=J4(this.apiClient,e);c=De("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=E5(e);return f=De("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=A5(x),S=new VE;return Object.assign(S,T),S})}else{const p=T5(e);return f=De("batches",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=S5(x),S=new VE;return Object.assign(S,T),S})}}async delete(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=i5(this.apiClient,e);return f=De("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>r5(x))}else{const p=n5(this.apiClient,e);return f=De("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>s5(x))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P5(n){const e={},t=_(n,["data"]);if(t!=null&&y(e,["data"],t),_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function HE(n){const e={},t=_(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>tO(a))),y(e,["parts"],r)}const i=_(n,["role"]);return i!=null&&y(e,["role"],i),e}function k5(n,e){const t={},i=_(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=_(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const a=_(n,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const c=_(n,["contents"]);if(e!==void 0&&c!=null){let x=Js(c);Array.isArray(x)&&(x=x.map(T=>HE(T))),y(e,["contents"],x)}const f=_(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],HE(wi(f)));const m=_(n,["tools"]);if(e!==void 0&&m!=null){let x=m;Array.isArray(x)&&(x=x.map(T=>iO(T))),y(e,["tools"],x)}const p=_(n,["toolConfig"]);if(e!==void 0&&p!=null&&y(e,["toolConfig"],nO(p)),_(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function D5(n,e){const t={},i=_(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=_(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const a=_(n,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const c=_(n,["contents"]);if(e!==void 0&&c!=null){let T=Js(c);Array.isArray(T)&&(T=T.map(S=>S)),y(e,["contents"],T)}const f=_(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],wi(f));const m=_(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>sO(S))),y(e,["tools"],T)}const p=_(n,["toolConfig"]);e!==void 0&&p!=null&&y(e,["toolConfig"],p);const x=_(n,["kmsKeyName"]);return e!==void 0&&x!=null&&y(e,["encryption_spec","kmsKeyName"],x),t}function L5(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["model"],t1(n,i));const r=_(e,["config"]);return r!=null&&k5(r,t),t}function O5(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["model"],t1(n,i));const r=_(e,["config"]);return r!=null&&D5(r,t),t}function U5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Yo(n,i)),t}function V5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Yo(n,i)),t}function B5(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function F5(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function z5(n){const e={};if(_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=_(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function j5(n){const e={},t=_(n,["id"]);t!=null&&y(e,["id"],t);const i=_(n,["args"]);i!=null&&y(e,["args"],i);const r=_(n,["name"]);if(r!=null&&y(e,["name"],r),_(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H5(n){const e={},t=_(n,["allowedFunctionNames"]);t!=null&&y(e,["allowedFunctionNames"],t);const i=_(n,["mode"]);if(i!=null&&y(e,["mode"],i),_(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function q5(n){const e={},t=_(n,["description"]);t!=null&&y(e,["description"],t);const i=_(n,["name"]);i!=null&&y(e,["name"],i);const r=_(n,["parameters"]);r!=null&&y(e,["parameters"],r);const a=_(n,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const c=_(n,["response"]);c!=null&&y(e,["response"],c);const f=_(n,["responseJsonSchema"]);if(f!=null&&y(e,["responseJsonSchema"],f),_(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function G5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Yo(n,i)),t}function $5(n,e){const t={},i=_(e,["name"]);return i!=null&&y(t,["_url","name"],Yo(n,i)),t}function J5(n){const e={};if(_(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=_(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function K5(n){const e={};if(_(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=_(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function Y5(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function W5(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function Z5(n){const e={},t=_(n,["config"]);return t!=null&&Y5(t,e),e}function X5(n){const e={},t=_(n,["config"]);return t!=null&&W5(t,e),e}function Q5(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["cachedContents"],a)}return e}function eO(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["cachedContents"],a)}return e}function tO(n){const e={},t=_(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=_(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=_(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const a=_(n,["fileData"]);a!=null&&y(e,["fileData"],z5(a));const c=_(n,["functionCall"]);c!=null&&y(e,["functionCall"],j5(c));const f=_(n,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const m=_(n,["inlineData"]);m!=null&&y(e,["inlineData"],P5(m));const p=_(n,["text"]);p!=null&&y(e,["text"],p);const x=_(n,["thought"]);x!=null&&y(e,["thought"],x);const T=_(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const S=_(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function nO(n){const e={},t=_(n,["retrievalConfig"]);t!=null&&y(e,["retrievalConfig"],t);const i=_(n,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],H5(i)),e}function iO(n){const e={};if(_(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=_(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=_(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=_(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),_(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>T)),y(e,["functionDeclarations"],x)}const c=_(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],J5(c));const f=_(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],K5(f));const m=_(n,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const p=_(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function sO(n){const e={},t=_(n,["retrieval"]);t!=null&&y(e,["retrieval"],t);const i=_(n,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),_(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=_(n,["codeExecution"]);r!=null&&y(e,["codeExecution"],r);const a=_(n,["enterpriseWebSearch"]);a!=null&&y(e,["enterpriseWebSearch"],a);const c=_(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>q5(S))),y(e,["functionDeclarations"],T)}const f=_(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=_(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const p=_(n,["googleSearchRetrieval"]);p!=null&&y(e,["googleSearchRetrieval"],p);const x=_(n,["urlContext"]);return x!=null&&y(e,["urlContext"],x),e}function rO(n,e){const t={},i=_(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=_(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),t}function oO(n,e){const t={},i=_(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=_(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),t}function aO(n,e){const t={},i=_(e,["name"]);i!=null&&y(t,["_url","name"],Yo(n,i));const r=_(e,["config"]);return r!=null&&rO(r,t),t}function lO(n,e){const t={},i=_(e,["name"]);i!=null&&y(t,["_url","name"],Yo(n,i));const r=_(e,["config"]);return r!=null&&oO(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO extends Ko{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(jo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=O5(this.apiClient,e);return f=De("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const p=L5(this.apiClient,e);return f=De("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async get(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=$5(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const p=G5(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async delete(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=V5(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=F5(x),S=new OE;return Object.assign(S,T),S})}else{const p=U5(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=B5(x),S=new OE;return Object.assign(S,T),S})}}async update(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=lO(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>x)}else{const p=aO(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>x)}}async listInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=X5(e);return f=De("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=eO(x),S=new UE;return Object.assign(S,T),S})}else{const p=Z5(e);return f=De("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=Q5(x),S=new UE;return Object.assign(S,T),S})}}}function Jm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function qE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ot(n){return this instanceof ot?(this.v=n,this):new ot(n)}function xr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(N){return function(O){return Promise.resolve(O).then(N,T)}}function f(N,O){i[N]&&(r[N]=function(V){return new Promise(function(P,Q){a.push([N,V,P,Q])>1||m(N,V)})},O&&(r[N]=O(r[N])))}function m(N,O){try{p(i[N](O))}catch(V){S(a[0][3],V)}}function p(N){N.value instanceof ot?Promise.resolve(N.value.v).then(x,T):S(a[0][2],N)}function x(N){m("next",N)}function T(N){m("throw",N)}function S(N,O){N(O),a.shift(),a.length&&m(a[0][0],a[0][1])}}function wr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qE=="function"?qE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(c){return new Promise(function(f,m){c=n[a](c),r(f,m,c.done,c.value)})}}function r(a,c,f,m){Promise.resolve(m).then(function(p){a({value:p,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:m1(t)}function m1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function dO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function GE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!m1(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class hO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new fO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let fO=class{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),dO(a)}async sendMessage(e){var t;await this.sendPromise;const i=wi(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,c,f;const m=await r,p=(c=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,x=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];x!=null&&(S=(f=x.slice(T))!==null&&f!==void 0?f:[]);const N=p?[p]:[];this.recordHistory(i,N,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=wi(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?GE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return xr(this,arguments,function*(){var r,a,c,f,m,p;const x=[];try{for(var T=!0,S=wr(e),N;N=yield ot(S.next()),r=N.done,!r;T=!0){f=N.value,T=!1;const O=f;if(cO(O)){const V=(p=(m=O.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;V!==void 0&&x.push(V)}yield yield ot(O)}}catch(O){a={error:O}}finally{try{!T&&!r&&(c=S.return)&&(yield ot(c.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,x)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...GE(i)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mO(n){const e={},t=_(n,["file"]);return t!=null&&y(e,["file"],t),e}function pO(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function gO(n){const e={},t=_(n,["name"]);return t!=null&&y(e,["_url","file"],a1(t)),e}function _O(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function yO(n){const e={},t=_(n,["name"]);return t!=null&&y(e,["_url","file"],a1(t)),e}function vO(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function xO(n){const e={},t=_(n,["config"]);return t!=null&&vO(t,e),e}function wO(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bO=class extends Ko{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(jo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xO(e);return a=De("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>{const p=wO(m),x=new A4;return Object.assign(x,p),x})}}async createInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mO(e);return a=De("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=pO(m),x=new C4;return Object.assign(x,p),x})}}async get(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yO(e);return a=De("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gO(e);return a=De("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>{const p=_O(m),x=new N4;return Object.assign(x,p),x})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xm(n){const e={},t=_(n,["data"]);if(t!=null&&y(e,["data"],t),_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function TO(n){const e={},t=_(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>BO(a))),y(e,["parts"],r)}const i=_(n,["role"]);return i!=null&&y(e,["role"],i),e}function EO(n){const e={};if(_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=_(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function SO(n){const e={},t=_(n,["id"]);t!=null&&y(e,["id"],t);const i=_(n,["args"]);i!=null&&y(e,["args"],i);const r=_(n,["name"]);if(r!=null&&y(e,["name"],r),_(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AO(n){const e={},t=_(n,["description"]);t!=null&&y(e,["description"],t);const i=_(n,["name"]);i!=null&&y(e,["name"],i);const r=_(n,["parameters"]);r!=null&&y(e,["parameters"],r);const a=_(n,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const c=_(n,["response"]);c!=null&&y(e,["response"],c);const f=_(n,["responseJsonSchema"]);if(f!=null&&y(e,["responseJsonSchema"],f),_(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function CO(n){const e={},t=_(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=_(n,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=_(n,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const a=_(n,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const c=_(n,["enableAffectiveDialog"]);c!=null&&y(e,["enableAffectiveDialog"],c);const f=_(n,["frequencyPenalty"]);f!=null&&y(e,["frequencyPenalty"],f);const m=_(n,["logprobs"]);m!=null&&y(e,["logprobs"],m);const p=_(n,["maxOutputTokens"]);p!=null&&y(e,["maxOutputTokens"],p);const x=_(n,["mediaResolution"]);x!=null&&y(e,["mediaResolution"],x);const T=_(n,["presencePenalty"]);T!=null&&y(e,["presencePenalty"],T);const S=_(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const N=_(n,["responseMimeType"]);N!=null&&y(e,["responseMimeType"],N);const O=_(n,["responseModalities"]);O!=null&&y(e,["responseModalities"],O);const V=_(n,["responseSchema"]);V!=null&&y(e,["responseSchema"],V);const P=_(n,["routingConfig"]);P!=null&&y(e,["routingConfig"],P);const Q=_(n,["seed"]);Q!=null&&y(e,["seed"],Q);const W=_(n,["speechConfig"]);W!=null&&y(e,["speechConfig"],W);const H=_(n,["stopSequences"]);H!=null&&y(e,["stopSequences"],H);const j=_(n,["temperature"]);j!=null&&y(e,["temperature"],j);const Z=_(n,["thinkingConfig"]);Z!=null&&y(e,["thinkingConfig"],Z);const Y=_(n,["topK"]);Y!=null&&y(e,["topK"],Y);const D=_(n,["topP"]);if(D!=null&&y(e,["topP"],D),_(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NO(n){const e={};if(_(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=_(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function IO(n){const e={};if(_(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=_(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function RO(n,e){const t={},i=_(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=_(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const a=_(n,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const c=_(n,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const f=_(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=_(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=_(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=_(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const T=_(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],X0(T));const S=_(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const N=_(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],N);const O=_(n,["systemInstruction"]);e!==void 0&&O!=null&&y(e,["setup","systemInstruction"],TO(wi(O)));const V=_(n,["tools"]);if(e!==void 0&&V!=null){let Y=Uc(V);Array.isArray(Y)&&(Y=Y.map(D=>zO(Oc(D)))),y(e,["setup","tools"],Y)}const P=_(n,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],FO(P));const Q=_(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&y(e,["setup","inputAudioTranscription"],Q);const W=_(n,["outputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","outputAudioTranscription"],W);const H=_(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&y(e,["setup","realtimeInputConfig"],H);const j=_(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const Z=_(n,["proactivity"]);if(e!==void 0&&Z!=null&&y(e,["setup","proactivity"],Z),_(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function MO(n,e){const t={},i=_(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],CO(i));const r=_(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const a=_(n,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const c=_(n,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const f=_(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=_(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=_(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=_(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const T=_(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],X0(T));const S=_(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const N=_(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],N);const O=_(n,["systemInstruction"]);e!==void 0&&O!=null&&y(e,["setup","systemInstruction"],wi(O));const V=_(n,["tools"]);if(e!==void 0&&V!=null){let D=Uc(V);Array.isArray(D)&&(D=D.map(k=>jO(Oc(k)))),y(e,["setup","tools"],D)}const P=_(n,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],P);const Q=_(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&y(e,["setup","inputAudioTranscription"],Q);const W=_(n,["outputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","outputAudioTranscription"],W);const H=_(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&y(e,["setup","realtimeInputConfig"],H);const j=_(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const Z=_(n,["proactivity"]);e!==void 0&&Z!=null&&y(e,["setup","proactivity"],Z);const Y=_(n,["explicitVadSignal"]);return e!==void 0&&Y!=null&&y(e,["setup","explicitVadSignal"],Y),t}function PO(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["setup","model"],Bt(n,i));const r=_(e,["config"]);return r!=null&&y(t,["config"],RO(r,t)),t}function kO(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["setup","model"],Bt(n,i));const r=_(e,["config"]);return r!=null&&y(t,["config"],MO(r,t)),t}function DO(n){const e={},t=_(n,["musicGenerationConfig"]);return t!=null&&y(e,["musicGenerationConfig"],t),e}function LO(n){const e={},t=_(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function OO(n){const e={},t=_(n,["media"]);if(t!=null){let p=n1(t);Array.isArray(p)&&(p=p.map(x=>xm(x))),y(e,["mediaChunks"],p)}const i=_(n,["audio"]);i!=null&&y(e,["audio"],xm(s1(i)));const r=_(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const a=_(n,["video"]);a!=null&&y(e,["video"],xm(i1(a)));const c=_(n,["text"]);c!=null&&y(e,["text"],c);const f=_(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=_(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function UO(n){const e={},t=_(n,["media"]);if(t!=null){let p=n1(t);Array.isArray(p)&&(p=p.map(x=>x)),y(e,["mediaChunks"],p)}const i=_(n,["audio"]);i!=null&&y(e,["audio"],s1(i));const r=_(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const a=_(n,["video"]);a!=null&&y(e,["video"],i1(a));const c=_(n,["text"]);c!=null&&y(e,["text"],c);const f=_(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=_(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function VO(n){const e={},t=_(n,["setupComplete"]);t!=null&&y(e,["setupComplete"],t);const i=_(n,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=_(n,["toolCall"]);r!=null&&y(e,["toolCall"],r);const a=_(n,["toolCallCancellation"]);a!=null&&y(e,["toolCallCancellation"],a);const c=_(n,["usageMetadata"]);c!=null&&y(e,["usageMetadata"],HO(c));const f=_(n,["goAway"]);f!=null&&y(e,["goAway"],f);const m=_(n,["sessionResumptionUpdate"]);m!=null&&y(e,["sessionResumptionUpdate"],m);const p=_(n,["voiceActivityDetectionSignal"]);p!=null&&y(e,["voiceActivityDetectionSignal"],p);const x=_(n,["voiceActivity"]);return x!=null&&y(e,["voiceActivity"],qO(x)),e}function BO(n){const e={},t=_(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=_(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=_(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const a=_(n,["fileData"]);a!=null&&y(e,["fileData"],EO(a));const c=_(n,["functionCall"]);c!=null&&y(e,["functionCall"],SO(c));const f=_(n,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const m=_(n,["inlineData"]);m!=null&&y(e,["inlineData"],xm(m));const p=_(n,["text"]);p!=null&&y(e,["text"],p);const x=_(n,["thought"]);x!=null&&y(e,["thought"],x);const T=_(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const S=_(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function FO(n){const e={},t=_(n,["handle"]);if(t!=null&&y(e,["handle"],t),_(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zO(n){const e={};if(_(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=_(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=_(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=_(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),_(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>T)),y(e,["functionDeclarations"],x)}const c=_(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],NO(c));const f=_(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],IO(f));const m=_(n,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const p=_(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function jO(n){const e={},t=_(n,["retrieval"]);t!=null&&y(e,["retrieval"],t);const i=_(n,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),_(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=_(n,["codeExecution"]);r!=null&&y(e,["codeExecution"],r);const a=_(n,["enterpriseWebSearch"]);a!=null&&y(e,["enterpriseWebSearch"],a);const c=_(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>AO(S))),y(e,["functionDeclarations"],T)}const f=_(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=_(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const p=_(n,["googleSearchRetrieval"]);p!=null&&y(e,["googleSearchRetrieval"],p);const x=_(n,["urlContext"]);return x!=null&&y(e,["urlContext"],x),e}function HO(n){const e={},t=_(n,["promptTokenCount"]);t!=null&&y(e,["promptTokenCount"],t);const i=_(n,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=_(n,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const a=_(n,["toolUsePromptTokenCount"]);a!=null&&y(e,["toolUsePromptTokenCount"],a);const c=_(n,["thoughtsTokenCount"]);c!=null&&y(e,["thoughtsTokenCount"],c);const f=_(n,["totalTokenCount"]);f!=null&&y(e,["totalTokenCount"],f);const m=_(n,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(O=>O)),y(e,["promptTokensDetails"],N)}const p=_(n,["cacheTokensDetails"]);if(p!=null){let N=p;Array.isArray(N)&&(N=N.map(O=>O)),y(e,["cacheTokensDetails"],N)}const x=_(n,["candidatesTokensDetails"]);if(x!=null){let N=x;Array.isArray(N)&&(N=N.map(O=>O)),y(e,["responseTokensDetails"],N)}const T=_(n,["toolUsePromptTokensDetails"]);if(T!=null){let N=T;Array.isArray(N)&&(N=N.map(O=>O)),y(e,["toolUsePromptTokensDetails"],N)}const S=_(n,["trafficType"]);return S!=null&&y(e,["trafficType"],S),e}function qO(n){const e={},t=_(n,["type"]);return t!=null&&y(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(n){const e={},t=_(n,["data"]);if(t!=null&&y(e,["data"],t),_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $O(n){const e={},t=_(n,["content"]);t!=null&&y(e,["content"],t);const i=_(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],JO(i));const r=_(n,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const a=_(n,["finishReason"]);a!=null&&y(e,["finishReason"],a);const c=_(n,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const f=_(n,["groundingMetadata"]);f!=null&&y(e,["groundingMetadata"],f);const m=_(n,["index"]);m!=null&&y(e,["index"],m);const p=_(n,["logprobsResult"]);p!=null&&y(e,["logprobsResult"],p);const x=_(n,["safetyRatings"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(N=>N)),y(e,["safetyRatings"],S)}const T=_(n,["urlContextMetadata"]);return T!=null&&y(e,["urlContextMetadata"],T),e}function JO(n){const e={},t=_(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function KO(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let a=Js(r);Array.isArray(a)&&(a=a.map(c=>c)),y(t,["contents"],a)}return t}function YO(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),y(e,["tokensInfo"],r)}return e}function WO(n){const e={},t=_(n,["values"]);t!=null&&y(e,["values"],t);const i=_(n,["statistics"]);return i!=null&&y(e,["statistics"],ZO(i)),e}function ZO(n){const e={},t=_(n,["truncated"]);t!=null&&y(e,["truncated"],t);const i=_(n,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Mp(n){const e={},t=_(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>oU(a))),y(e,["parts"],r)}const i=_(n,["role"]);return i!=null&&y(e,["role"],i),e}function XO(n){const e={},t=_(n,["controlType"]);t!=null&&y(e,["controlType"],t);const i=_(n,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function QO(n){const e={};if(_(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(_(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(_(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function e3(n,e){const t={},i=_(n,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],wi(i));const r=_(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>y1(f))),y(e,["tools"],c)}const a=_(n,["generationConfig"]);return e!==void 0&&a!=null&&y(e,["generationConfig"],G3(a)),t}function t3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let c=Js(r);Array.isArray(c)&&(c=c.map(f=>Mp(f))),y(t,["contents"],c)}const a=_(e,["config"]);return a!=null&&QO(a),t}function n3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let c=Js(r);Array.isArray(c)&&(c=c.map(f=>f)),y(t,["contents"],c)}const a=_(e,["config"]);return a!=null&&e3(a,t),t}function i3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=_(n,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function s3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function r3(n,e){const t={},i=_(e,["model"]);return i!=null&&y(t,["_url","name"],Bt(n,i)),t}function o3(n,e){const t={},i=_(e,["model"]);return i!=null&&y(t,["_url","name"],Bt(n,i)),t}function a3(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function l3(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function u3(n,e){const t={},i=_(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=_(n,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const a=_(n,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const c=_(n,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const f=_(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=_(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const p=_(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const x=_(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const T=_(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&y(e,["parameters","includeSafetyAttributes"],T);const S=_(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const N=_(n,["language"]);e!==void 0&&N!=null&&y(e,["parameters","language"],N);const O=_(n,["outputMimeType"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","mimeType"],O);const V=_(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&y(e,["parameters","outputOptions","compressionQuality"],V);const P=_(n,["addWatermark"]);e!==void 0&&P!=null&&y(e,["parameters","addWatermark"],P);const Q=_(n,["labels"]);e!==void 0&&Q!=null&&y(e,["labels"],Q);const W=_(n,["editMode"]);e!==void 0&&W!=null&&y(e,["parameters","editMode"],W);const H=_(n,["baseSteps"]);return e!==void 0&&H!=null&&y(e,["parameters","editConfig","baseSteps"],H),t}function c3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["prompt"]);r!=null&&y(t,["instances[0]","prompt"],r);const a=_(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>hU(m))),y(t,["instances[0]","referenceImages"],f)}const c=_(e,["config"]);return c!=null&&u3(c,t),t}function d3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Pp(a))),y(e,["generatedImages"],r)}return e}function h3(n,e){const t={},i=_(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=_(n,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const a=_(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),_(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function f3(n,e){const t={},i=_(n,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=_(n,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const a=_(n,["outputDimensionality"]);e!==void 0&&a!=null&&y(e,["parameters","outputDimensionality"],a);const c=_(n,["mimeType"]);e!==void 0&&c!=null&&y(e,["instances[]","mimeType"],c);const f=_(n,["autoTruncate"]);return e!==void 0&&f!=null&&y(e,["parameters","autoTruncate"],f),t}function m3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let f=Y0(n,r);Array.isArray(f)&&(f=f.map(m=>m)),y(t,["requests[]","content"],f)}const a=_(e,["config"]);a!=null&&h3(a,t);const c=_(e,["model"]);return c!==void 0&&y(t,["requests[]","model"],Bt(n,c)),t}function p3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let c=Y0(n,r);Array.isArray(c)&&(c=c.map(f=>f)),y(t,["instances[]","content"],c)}const a=_(e,["config"]);return a!=null&&f3(a,t),t}function g3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["embeddings"],a)}const r=_(n,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function _3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>WO(c))),y(e,["embeddings"],a)}const r=_(n,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function y3(n){const e={},t=_(n,["endpoint"]);t!=null&&y(e,["name"],t);const i=_(n,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function v3(n){const e={};if(_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=_(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function x3(n){const e={},t=_(n,["id"]);t!=null&&y(e,["id"],t);const i=_(n,["args"]);i!=null&&y(e,["args"],i);const r=_(n,["name"]);if(r!=null&&y(e,["name"],r),_(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w3(n){const e={},t=_(n,["allowedFunctionNames"]);t!=null&&y(e,["allowedFunctionNames"],t);const i=_(n,["mode"]);if(i!=null&&y(e,["mode"],i),_(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function b3(n){const e={},t=_(n,["description"]);t!=null&&y(e,["description"],t);const i=_(n,["name"]);i!=null&&y(e,["name"],i);const r=_(n,["parameters"]);r!=null&&y(e,["parameters"],r);const a=_(n,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const c=_(n,["response"]);c!=null&&y(e,["response"],c);const f=_(n,["responseJsonSchema"]);if(f!=null&&y(e,["responseJsonSchema"],f),_(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function T3(n,e,t){const i={},r=_(e,["systemInstruction"]);t!==void 0&&r!=null&&y(t,["systemInstruction"],Mp(wi(r)));const a=_(e,["temperature"]);a!=null&&y(i,["temperature"],a);const c=_(e,["topP"]);c!=null&&y(i,["topP"],c);const f=_(e,["topK"]);f!=null&&y(i,["topK"],f);const m=_(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const p=_(e,["maxOutputTokens"]);p!=null&&y(i,["maxOutputTokens"],p);const x=_(e,["stopSequences"]);x!=null&&y(i,["stopSequences"],x);const T=_(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=_(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const N=_(e,["presencePenalty"]);N!=null&&y(i,["presencePenalty"],N);const O=_(e,["frequencyPenalty"]);O!=null&&y(i,["frequencyPenalty"],O);const V=_(e,["seed"]);V!=null&&y(i,["seed"],V);const P=_(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const Q=_(e,["responseSchema"]);Q!=null&&y(i,["responseSchema"],W0(Q));const W=_(e,["responseJsonSchema"]);if(W!=null&&y(i,["responseJsonSchema"],W),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=_(e,["safetySettings"]);if(t!==void 0&&H!=null){let K=H;Array.isArray(K)&&(K=K.map(Le=>fU(Le))),y(t,["safetySettings"],K)}const j=_(e,["tools"]);if(t!==void 0&&j!=null){let K=Uc(j);Array.isArray(K)&&(K=K.map(Le=>xU(Oc(Le)))),y(t,["tools"],K)}const Z=_(e,["toolConfig"]);if(t!==void 0&&Z!=null&&y(t,["toolConfig"],vU(Z)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=_(e,["cachedContent"]);t!==void 0&&Y!=null&&y(t,["cachedContent"],Yo(n,Y));const D=_(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const k=_(e,["mediaResolution"]);k!=null&&y(i,["mediaResolution"],k);const U=_(e,["speechConfig"]);if(U!=null&&y(i,["speechConfig"],Z0(U)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=_(e,["thinkingConfig"]);G!=null&&y(i,["thinkingConfig"],G);const $=_(e,["imageConfig"]);$!=null&&y(i,["imageConfig"],W3($));const te=_(e,["enableEnhancedCivicAnswers"]);if(te!=null&&y(i,["enableEnhancedCivicAnswers"],te),_(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function E3(n,e,t){const i={},r=_(e,["systemInstruction"]);t!==void 0&&r!=null&&y(t,["systemInstruction"],wi(r));const a=_(e,["temperature"]);a!=null&&y(i,["temperature"],a);const c=_(e,["topP"]);c!=null&&y(i,["topP"],c);const f=_(e,["topK"]);f!=null&&y(i,["topK"],f);const m=_(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const p=_(e,["maxOutputTokens"]);p!=null&&y(i,["maxOutputTokens"],p);const x=_(e,["stopSequences"]);x!=null&&y(i,["stopSequences"],x);const T=_(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=_(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const N=_(e,["presencePenalty"]);N!=null&&y(i,["presencePenalty"],N);const O=_(e,["frequencyPenalty"]);O!=null&&y(i,["frequencyPenalty"],O);const V=_(e,["seed"]);V!=null&&y(i,["seed"],V);const P=_(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const Q=_(e,["responseSchema"]);Q!=null&&y(i,["responseSchema"],W0(Q));const W=_(e,["responseJsonSchema"]);W!=null&&y(i,["responseJsonSchema"],W);const H=_(e,["routingConfig"]);H!=null&&y(i,["routingConfig"],H);const j=_(e,["modelSelectionConfig"]);j!=null&&y(i,["modelConfig"],j);const Z=_(e,["safetySettings"]);if(t!==void 0&&Z!=null){let Ie=Z;Array.isArray(Ie)&&(Ie=Ie.map(Ee=>Ee)),y(t,["safetySettings"],Ie)}const Y=_(e,["tools"]);if(t!==void 0&&Y!=null){let Ie=Uc(Y);Array.isArray(Ie)&&(Ie=Ie.map(Ee=>y1(Oc(Ee)))),y(t,["tools"],Ie)}const D=_(e,["toolConfig"]);t!==void 0&&D!=null&&y(t,["toolConfig"],D);const k=_(e,["labels"]);t!==void 0&&k!=null&&y(t,["labels"],k);const U=_(e,["cachedContent"]);t!==void 0&&U!=null&&y(t,["cachedContent"],Yo(n,U));const G=_(e,["responseModalities"]);G!=null&&y(i,["responseModalities"],G);const $=_(e,["mediaResolution"]);$!=null&&y(i,["mediaResolution"],$);const te=_(e,["speechConfig"]);te!=null&&y(i,["speechConfig"],Z0(te));const K=_(e,["audioTimestamp"]);K!=null&&y(i,["audioTimestamp"],K);const Le=_(e,["thinkingConfig"]);Le!=null&&y(i,["thinkingConfig"],Le);const rt=_(e,["imageConfig"]);if(rt!=null&&y(i,["imageConfig"],Z3(rt)),_(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const fe=_(e,["modelArmorConfig"]);return t!==void 0&&fe!=null&&y(t,["modelArmorConfig"],fe),i}function $E(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let c=Js(r);Array.isArray(c)&&(c=c.map(f=>Mp(f))),y(t,["contents"],c)}const a=_(e,["config"]);return a!=null&&y(t,["generationConfig"],T3(n,a,t)),t}function JE(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["contents"]);if(r!=null){let c=Js(r);Array.isArray(c)&&(c=c.map(f=>f)),y(t,["contents"],c)}const a=_(e,["config"]);return a!=null&&y(t,["generationConfig"],E3(n,a,t)),t}function KE(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>$O(p))),y(e,["candidates"],m)}const r=_(n,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const a=_(n,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const c=_(n,["responseId"]);c!=null&&y(e,["responseId"],c);const f=_(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function YE(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["candidates"],p)}const r=_(n,["createTime"]);r!=null&&y(e,["createTime"],r);const a=_(n,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const c=_(n,["promptFeedback"]);c!=null&&y(e,["promptFeedback"],c);const f=_(n,["responseId"]);f!=null&&y(e,["responseId"],f);const m=_(n,["usageMetadata"]);return m!=null&&y(e,["usageMetadata"],m),e}function S3(n,e){const t={};if(_(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=_(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=_(n,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const a=_(n,["guidanceScale"]);if(e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a),_(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=_(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=_(n,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const m=_(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&y(e,["parameters","includeSafetyAttributes"],m);const p=_(n,["includeRaiReason"]);e!==void 0&&p!=null&&y(e,["parameters","includeRaiReason"],p);const x=_(n,["language"]);e!==void 0&&x!=null&&y(e,["parameters","language"],x);const T=_(n,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const S=_(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S),_(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(_(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=_(n,["imageSize"]);if(e!==void 0&&N!=null&&y(e,["parameters","sampleImageSize"],N),_(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function A3(n,e){const t={},i=_(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=_(n,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const a=_(n,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const c=_(n,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const f=_(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=_(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const p=_(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const x=_(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const T=_(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&y(e,["parameters","includeSafetyAttributes"],T);const S=_(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const N=_(n,["language"]);e!==void 0&&N!=null&&y(e,["parameters","language"],N);const O=_(n,["outputMimeType"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","mimeType"],O);const V=_(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&y(e,["parameters","outputOptions","compressionQuality"],V);const P=_(n,["addWatermark"]);e!==void 0&&P!=null&&y(e,["parameters","addWatermark"],P);const Q=_(n,["labels"]);e!==void 0&&Q!=null&&y(e,["labels"],Q);const W=_(n,["imageSize"]);e!==void 0&&W!=null&&y(e,["parameters","sampleImageSize"],W);const H=_(n,["enhancePrompt"]);return e!==void 0&&H!=null&&y(e,["parameters","enhancePrompt"],H),t}function C3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["prompt"]);r!=null&&y(t,["instances[0]","prompt"],r);const a=_(e,["config"]);return a!=null&&S3(a,t),t}function N3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["prompt"]);r!=null&&y(t,["instances[0]","prompt"],r);const a=_(e,["config"]);return a!=null&&A3(a,t),t}function I3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>z3(c))),y(e,["generatedImages"],a)}const r=_(n,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],g1(r)),e}function R3(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>Pp(c))),y(e,["generatedImages"],a)}const r=_(n,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],_1(r)),e}function M3(n,e){const t={},i=_(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),_(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=_(n,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),_(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=_(n,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const c=_(n,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const f=_(n,["personGeneration"]);if(e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f),_(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=_(n,["negativePrompt"]);e!==void 0&&m!=null&&y(e,["parameters","negativePrompt"],m);const p=_(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&y(e,["parameters","enhancePrompt"],p),_(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=_(n,["lastFrame"]);e!==void 0&&x!=null&&y(e,["instances[0]","lastFrame"],kp(x));const T=_(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(N=>kU(N))),y(e,["instances[0]","referenceImages"],S)}if(_(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(_(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function P3(n,e){const t={},i=_(n,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=_(n,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const a=_(n,["fps"]);e!==void 0&&a!=null&&y(e,["parameters","fps"],a);const c=_(n,["durationSeconds"]);e!==void 0&&c!=null&&y(e,["parameters","durationSeconds"],c);const f=_(n,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const m=_(n,["aspectRatio"]);e!==void 0&&m!=null&&y(e,["parameters","aspectRatio"],m);const p=_(n,["resolution"]);e!==void 0&&p!=null&&y(e,["parameters","resolution"],p);const x=_(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const T=_(n,["pubsubTopic"]);e!==void 0&&T!=null&&y(e,["parameters","pubsubTopic"],T);const S=_(n,["negativePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","negativePrompt"],S);const N=_(n,["enhancePrompt"]);e!==void 0&&N!=null&&y(e,["parameters","enhancePrompt"],N);const O=_(n,["generateAudio"]);e!==void 0&&O!=null&&y(e,["parameters","generateAudio"],O);const V=_(n,["lastFrame"]);e!==void 0&&V!=null&&y(e,["instances[0]","lastFrame"],Nr(V));const P=_(n,["referenceImages"]);if(e!==void 0&&P!=null){let H=P;Array.isArray(H)&&(H=H.map(j=>DU(j))),y(e,["instances[0]","referenceImages"],H)}const Q=_(n,["mask"]);e!==void 0&&Q!=null&&y(e,["instances[0]","mask"],PU(Q));const W=_(n,["compressionQuality"]);return e!==void 0&&W!=null&&y(e,["parameters","compressionQuality"],W),t}function k3(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response","generateVideoResponse"]);return c!=null&&y(e,["response"],U3(c)),e}function D3(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response"]);return c!=null&&y(e,["response"],V3(c)),e}function L3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["prompt"]);r!=null&&y(t,["instances[0]","prompt"],r);const a=_(e,["image"]);a!=null&&y(t,["instances[0]","image"],kp(a));const c=_(e,["video"]);c!=null&&y(t,["instances[0]","video"],v1(c));const f=_(e,["source"]);f!=null&&B3(f,t);const m=_(e,["config"]);return m!=null&&M3(m,t),t}function O3(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["prompt"]);r!=null&&y(t,["instances[0]","prompt"],r);const a=_(e,["image"]);a!=null&&y(t,["instances[0]","image"],Nr(a));const c=_(e,["video"]);c!=null&&y(t,["instances[0]","video"],x1(c));const f=_(e,["source"]);f!=null&&F3(f,t);const m=_(e,["config"]);return m!=null&&P3(m,t),t}function U3(n){const e={},t=_(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>H3(c))),y(e,["generatedVideos"],a)}const i=_(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=_(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function V3(n){const e={},t=_(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>q3(c))),y(e,["generatedVideos"],a)}const i=_(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=_(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function B3(n,e){const t={},i=_(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=_(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],kp(r));const a=_(n,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],v1(a)),t}function F3(n,e){const t={},i=_(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=_(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Nr(r));const a=_(n,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],x1(a)),t}function z3(n){const e={},t=_(n,["_self"]);t!=null&&y(e,["image"],X3(t));const i=_(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=_(n,["_self"]);return r!=null&&y(e,["safetyAttributes"],g1(r)),e}function Pp(n){const e={},t=_(n,["_self"]);t!=null&&y(e,["image"],p1(t));const i=_(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=_(n,["_self"]);r!=null&&y(e,["safetyAttributes"],_1(r));const a=_(n,["prompt"]);return a!=null&&y(e,["enhancedPrompt"],a),e}function j3(n){const e={},t=_(n,["_self"]);t!=null&&y(e,["mask"],p1(t));const i=_(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),y(e,["labels"],r)}return e}function H3(n){const e={},t=_(n,["video"]);return t!=null&&y(e,["video"],RU(t)),e}function q3(n){const e={},t=_(n,["_self"]);return t!=null&&y(e,["video"],MU(t)),e}function G3(n){const e={},t=_(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=_(n,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=_(n,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const a=_(n,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const c=_(n,["enableAffectiveDialog"]);c!=null&&y(e,["enableAffectiveDialog"],c);const f=_(n,["frequencyPenalty"]);f!=null&&y(e,["frequencyPenalty"],f);const m=_(n,["logprobs"]);m!=null&&y(e,["logprobs"],m);const p=_(n,["maxOutputTokens"]);p!=null&&y(e,["maxOutputTokens"],p);const x=_(n,["mediaResolution"]);x!=null&&y(e,["mediaResolution"],x);const T=_(n,["presencePenalty"]);T!=null&&y(e,["presencePenalty"],T);const S=_(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const N=_(n,["responseMimeType"]);N!=null&&y(e,["responseMimeType"],N);const O=_(n,["responseModalities"]);O!=null&&y(e,["responseModalities"],O);const V=_(n,["responseSchema"]);V!=null&&y(e,["responseSchema"],V);const P=_(n,["routingConfig"]);P!=null&&y(e,["routingConfig"],P);const Q=_(n,["seed"]);Q!=null&&y(e,["seed"],Q);const W=_(n,["speechConfig"]);W!=null&&y(e,["speechConfig"],W);const H=_(n,["stopSequences"]);H!=null&&y(e,["stopSequences"],H);const j=_(n,["temperature"]);j!=null&&y(e,["temperature"],j);const Z=_(n,["thinkingConfig"]);Z!=null&&y(e,["thinkingConfig"],Z);const Y=_(n,["topK"]);Y!=null&&y(e,["topK"],Y);const D=_(n,["topP"]);if(D!=null&&y(e,["topP"],D),_(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $3(n,e){const t={},i=_(e,["model"]);return i!=null&&y(t,["_url","name"],Bt(n,i)),t}function J3(n,e){const t={},i=_(e,["model"]);return i!=null&&y(t,["_url","name"],Bt(n,i)),t}function K3(n){const e={};if(_(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=_(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function Y3(n){const e={};if(_(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=_(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function W3(n){const e={},t=_(n,["aspectRatio"]);t!=null&&y(e,["aspectRatio"],t);const i=_(n,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),_(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(_(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Z3(n){const e={},t=_(n,["aspectRatio"]);t!=null&&y(e,["aspectRatio"],t);const i=_(n,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=_(n,["personGeneration"]);r!=null&&y(e,["personGeneration"],r);const a=_(n,["outputMimeType"]);a!=null&&y(e,["imageOutputOptions","mimeType"],a);const c=_(n,["outputCompressionQuality"]);return c!=null&&y(e,["imageOutputOptions","compressionQuality"],c),e}function X3(n){const e={},t=_(n,["bytesBase64Encoded"]);t!=null&&y(e,["imageBytes"],ol(t));const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function p1(n){const e={},t=_(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=_(n,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],ol(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function kp(n){const e={};if(_(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=_(n,["imageBytes"]);t!=null&&y(e,["bytesBase64Encoded"],ol(t));const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Nr(n){const e={},t=_(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=_(n,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ol(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Q3(n,e,t){const i={},r=_(e,["pageSize"]);t!==void 0&&r!=null&&y(t,["_query","pageSize"],r);const a=_(e,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const c=_(e,["filter"]);t!==void 0&&c!=null&&y(t,["_query","filter"],c);const f=_(e,["queryBase"]);return t!==void 0&&f!=null&&y(t,["_url","models_url"],l1(n,f)),i}function eU(n,e,t){const i={},r=_(e,["pageSize"]);t!==void 0&&r!=null&&y(t,["_query","pageSize"],r);const a=_(e,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const c=_(e,["filter"]);t!==void 0&&c!=null&&y(t,["_query","filter"],c);const f=_(e,["queryBase"]);return t!==void 0&&f!=null&&y(t,["_url","models_url"],l1(n,f)),i}function tU(n,e){const t={},i=_(e,["config"]);return i!=null&&Q3(n,i,t),t}function nU(n,e){const t={},i=_(e,["config"]);return i!=null&&eU(n,i,t),t}function iU(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["_self"]);if(r!=null){let a=u1(r);Array.isArray(a)&&(a=a.map(c=>By(c))),y(e,["models"],a)}return e}function sU(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["_self"]);if(r!=null){let a=u1(r);Array.isArray(a)&&(a=a.map(c=>Fy(c))),y(e,["models"],a)}return e}function rU(n){const e={},t=_(n,["maskMode"]);t!=null&&y(e,["maskMode"],t);const i=_(n,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=_(n,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function By(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["displayName"]);i!=null&&y(e,["displayName"],i);const r=_(n,["description"]);r!=null&&y(e,["description"],r);const a=_(n,["version"]);a!=null&&y(e,["version"],a);const c=_(n,["_self"]);c!=null&&y(e,["tunedModelInfo"],wU(c));const f=_(n,["inputTokenLimit"]);f!=null&&y(e,["inputTokenLimit"],f);const m=_(n,["outputTokenLimit"]);m!=null&&y(e,["outputTokenLimit"],m);const p=_(n,["supportedGenerationMethods"]);p!=null&&y(e,["supportedActions"],p);const x=_(n,["temperature"]);x!=null&&y(e,["temperature"],x);const T=_(n,["maxTemperature"]);T!=null&&y(e,["maxTemperature"],T);const S=_(n,["topP"]);S!=null&&y(e,["topP"],S);const N=_(n,["topK"]);N!=null&&y(e,["topK"],N);const O=_(n,["thinking"]);return O!=null&&y(e,["thinking"],O),e}function Fy(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["displayName"]);i!=null&&y(e,["displayName"],i);const r=_(n,["description"]);r!=null&&y(e,["description"],r);const a=_(n,["versionId"]);a!=null&&y(e,["version"],a);const c=_(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>y3(S))),y(e,["endpoints"],T)}const f=_(n,["labels"]);f!=null&&y(e,["labels"],f);const m=_(n,["_self"]);m!=null&&y(e,["tunedModelInfo"],bU(m));const p=_(n,["defaultCheckpointId"]);p!=null&&y(e,["defaultCheckpointId"],p);const x=_(n,["checkpoints"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["checkpoints"],T)}return e}function oU(n){const e={},t=_(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=_(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=_(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const a=_(n,["fileData"]);a!=null&&y(e,["fileData"],v3(a));const c=_(n,["functionCall"]);c!=null&&y(e,["functionCall"],x3(c));const f=_(n,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const m=_(n,["inlineData"]);m!=null&&y(e,["inlineData"],GO(m));const p=_(n,["text"]);p!=null&&y(e,["text"],p);const x=_(n,["thought"]);x!=null&&y(e,["thought"],x);const T=_(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const S=_(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function aU(n){const e={},t=_(n,["productImage"]);return t!=null&&y(e,["image"],Nr(t)),e}function lU(n,e){const t={},i=_(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=_(n,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const a=_(n,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const c=_(n,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const f=_(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const m=_(n,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const p=_(n,["addWatermark"]);e!==void 0&&p!=null&&y(e,["parameters","addWatermark"],p);const x=_(n,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const T=_(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T);const S=_(n,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const N=_(n,["labels"]);return e!==void 0&&N!=null&&y(e,["labels"],N),t}function uU(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["source"]);r!=null&&dU(r,t);const a=_(e,["config"]);return a!=null&&lU(a,t),t}function cU(n){const e={},t=_(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Pp(r))),y(e,["generatedImages"],i)}return e}function dU(n,e){const t={},i=_(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=_(n,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],Nr(r));const a=_(n,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>aU(f))),y(e,["instances[0]","productImages"],c)}return t}function hU(n){const e={},t=_(n,["referenceImage"]);t!=null&&y(e,["referenceImage"],Nr(t));const i=_(n,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=_(n,["referenceType"]);r!=null&&y(e,["referenceType"],r);const a=_(n,["maskImageConfig"]);a!=null&&y(e,["maskImageConfig"],rU(a));const c=_(n,["controlImageConfig"]);c!=null&&y(e,["controlImageConfig"],XO(c));const f=_(n,["styleImageConfig"]);f!=null&&y(e,["styleImageConfig"],f);const m=_(n,["subjectImageConfig"]);return m!=null&&y(e,["subjectImageConfig"],m),e}function g1(n){const e={},t=_(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=_(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=_(n,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function _1(n){const e={},t=_(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=_(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=_(n,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function fU(n){const e={},t=_(n,["category"]);if(t!=null&&y(e,["category"],t),_(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=_(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function mU(n){const e={},t=_(n,["image"]);return t!=null&&y(e,["image"],Nr(t)),e}function pU(n,e){const t={},i=_(n,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=_(n,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const a=_(n,["confidenceThreshold"]);e!==void 0&&a!=null&&y(e,["parameters","confidenceThreshold"],a);const c=_(n,["maskDilation"]);e!==void 0&&c!=null&&y(e,["parameters","maskDilation"],c);const f=_(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&y(e,["parameters","binaryColorThreshold"],f);const m=_(n,["labels"]);return e!==void 0&&m!=null&&y(e,["labels"],m),t}function gU(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["source"]);r!=null&&yU(r,t);const a=_(e,["config"]);return a!=null&&pU(a,t),t}function _U(n){const e={},t=_(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>j3(r))),y(e,["generatedMasks"],i)}return e}function yU(n,e){const t={},i=_(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=_(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Nr(r));const a=_(n,["scribbleImage"]);return e!==void 0&&a!=null&&y(e,["instances[0]","scribble"],mU(a)),t}function vU(n){const e={},t=_(n,["retrievalConfig"]);t!=null&&y(e,["retrievalConfig"],t);const i=_(n,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],w3(i)),e}function xU(n){const e={};if(_(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=_(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=_(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=_(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),_(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>T)),y(e,["functionDeclarations"],x)}const c=_(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],K3(c));const f=_(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],Y3(f));const m=_(n,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const p=_(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function y1(n){const e={},t=_(n,["retrieval"]);t!=null&&y(e,["retrieval"],t);const i=_(n,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),_(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=_(n,["codeExecution"]);r!=null&&y(e,["codeExecution"],r);const a=_(n,["enterpriseWebSearch"]);a!=null&&y(e,["enterpriseWebSearch"],a);const c=_(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>b3(S))),y(e,["functionDeclarations"],T)}const f=_(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=_(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const p=_(n,["googleSearchRetrieval"]);p!=null&&y(e,["googleSearchRetrieval"],p);const x=_(n,["urlContext"]);return x!=null&&y(e,["urlContext"],x),e}function wU(n){const e={},t=_(n,["baseModel"]);t!=null&&y(e,["baseModel"],t);const i=_(n,["createTime"]);i!=null&&y(e,["createTime"],i);const r=_(n,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function bU(n){const e={},t=_(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&y(e,["baseModel"],t);const i=_(n,["createTime"]);i!=null&&y(e,["createTime"],i);const r=_(n,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function TU(n,e){const t={},i=_(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=_(n,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const a=_(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),t}function EU(n,e){const t={},i=_(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=_(n,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const a=_(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),t}function SU(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","name"],Bt(n,i));const r=_(e,["config"]);return r!=null&&TU(r,t),t}function AU(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["config"]);return r!=null&&EU(r,t),t}function CU(n,e){const t={},i=_(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=_(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const a=_(n,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const c=_(n,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const f=_(n,["outputMimeType"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","mimeType"],f);const m=_(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&y(e,["parameters","outputOptions","compressionQuality"],m);const p=_(n,["enhanceInputImage"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],p);const x=_(n,["imagePreservationFactor"]);e!==void 0&&x!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],x);const T=_(n,["labels"]);e!==void 0&&T!=null&&y(e,["labels"],T);const S=_(n,["numberOfImages"]);e!==void 0&&S!=null&&y(e,["parameters","sampleCount"],S);const N=_(n,["mode"]);return e!==void 0&&N!=null&&y(e,["parameters","mode"],N),t}function NU(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["_url","model"],Bt(n,i));const r=_(e,["image"]);r!=null&&y(t,["instances[0]","image"],Nr(r));const a=_(e,["upscaleFactor"]);a!=null&&y(t,["parameters","upscaleConfig","upscaleFactor"],a);const c=_(e,["config"]);return c!=null&&CU(c,t),t}function IU(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Pp(a))),y(e,["generatedImages"],r)}return e}function RU(n){const e={},t=_(n,["uri"]);t!=null&&y(e,["uri"],t);const i=_(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],ol(i));const r=_(n,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function MU(n){const e={},t=_(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=_(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],ol(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function PU(n){const e={},t=_(n,["image"]);t!=null&&y(e,["_self"],Nr(t));const i=_(n,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function kU(n){const e={},t=_(n,["image"]);t!=null&&y(e,["image"],kp(t));const i=_(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function DU(n){const e={},t=_(n,["image"]);t!=null&&y(e,["image"],Nr(t));const i=_(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function v1(n){const e={},t=_(n,["uri"]);t!=null&&y(e,["uri"],t);const i=_(n,["videoBytes"]);i!=null&&y(e,["encodedVideo"],ol(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function x1(n){const e={},t=_(n,["uri"]);t!=null&&y(e,["gcsUri"],t);const i=_(n,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ol(i));const r=_(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LU(n,e){const t={},i=_(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),t}function OU(n){const e={},t=_(n,["config"]);return t!=null&&LU(t,e),e}function UU(n,e){const t={},i=_(n,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),t}function VU(n){const e={},t=_(n,["name"]);t!=null&&y(e,["_url","name"],t);const i=_(n,["config"]);return i!=null&&UU(i,e),e}function BU(n){const e={},t=_(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function FU(n,e){const t={},i=_(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["customMetadata"],a)}const r=_(n,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),t}function zU(n){const e={},t=_(n,["name"]);t!=null&&y(e,["name"],t);const i=_(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=_(n,["done"]);r!=null&&y(e,["done"],r);const a=_(n,["error"]);a!=null&&y(e,["error"],a);const c=_(n,["response"]);return c!=null&&y(e,["response"],HU(c)),e}function jU(n){const e={},t=_(n,["fileSearchStoreName"]);t!=null&&y(e,["_url","file_search_store_name"],t);const i=_(n,["fileName"]);i!=null&&y(e,["fileName"],i);const r=_(n,["config"]);return r!=null&&FU(r,e),e}function HU(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["parent"]);i!=null&&y(e,["parent"],i);const r=_(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function qU(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function GU(n){const e={},t=_(n,["config"]);return t!=null&&qU(t,e),e}function $U(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["fileSearchStores"],a)}return e}function w1(n,e){const t={},i=_(n,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=_(n,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const a=_(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>m)),y(e,["customMetadata"],f)}const c=_(n,["chunkingConfig"]);return e!==void 0&&c!=null&&y(e,["chunkingConfig"],c),t}function JU(n){const e={},t=_(n,["fileSearchStoreName"]);t!=null&&y(e,["_url","file_search_store_name"],t);const i=_(n,["config"]);return i!=null&&w1(i,e),e}function KU(n){const e={},t=_(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YU="Content-Type",WU="X-Server-Timeout",ZU="User-Agent",zy="x-goog-api-client",XU="1.38.0",QU=`google-genai-sdk/${XU}`,eV="v1beta1",tV="v1beta";class nV{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:eV}else{if(!this.clientOptions.apiKey)throw new yh({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:tV,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Ly.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,c=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=c}return t&&t.extraBody!==null&&iV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await WE(r),new Oy(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await WE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return xr(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:x}=yield ot(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(x,{stream:!0});try{const O=JSON.parse(T);if("error"in O){const V=JSON.parse(JSON.stringify(O.error)),P=V.status,Q=V.code,W=`got status: ${P}. ${JSON.stringify(O)}`;if(Q>=400&&Q<600)throw new yh({message:W,status:Q})}}catch(O){if(O.name==="ApiError")throw O}c+=T;let S=-1,N=0;for(;;){S=-1,N=0;for(const P of m){const Q=c.indexOf(P);Q!==-1&&(S===-1||Q<S)&&(S=Q,N=P.length)}if(S===-1)break;const O=c.substring(0,S);c=c.substring(S+N);const V=O.trim();if(V.startsWith(f)){const P=V.substring(f.length).trim();try{const Q=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ot(new Oy(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${P}. ${Q}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=QU+" "+this.clientOptions.userAgentExtra;return e[ZU]=t,e[zy]=t,e[YU]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(WU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),x=De("upload/v1beta/files",m._url),T=await this.fetchUploadUrl(x,r.sizeBytes,r.mimeType,p,m,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,c=await a.stat(t),f=String(c.size),m=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,x=this.getFileName(t),T={};i!=null&&w1(i,T);const S=await this.fetchUploadUrl(p,f,m,x,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function WE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new yh({message:r,status:t}):new Error(r)}}function iV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,c){const f=Object.assign({},a);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],x=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&x&&typeof x=="object"&&!Array.isArray(x)?f[m]=i(x,p):(x&&p&&typeof x!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof x}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sV="mcp_used/unknown";let rV=!1;function b1(n){for(const e of n)if(oV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return rV}function T1(n){var e;const t=(e=n[zy])!==null&&e!==void 0?e:"";n[zy]=(t+` ${sV}`).trimStart()}function oV(n){return n!==null&&typeof n=="object"&&n instanceof Q0}function aV(n){return xr(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const c=yield ot(t.listTools({cursor:r}));for(const f of c.tools)yield yield ot(f),a++;if(!c.nextCursor)break;r=c.nextCursor}})}class Q0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Q0(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const x of this.mcpClients)try{for(var f=!0,m=(t=void 0,wr(aV(x))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const T=r;c.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=x}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),V4(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lV(n,e,t){const i=new R4;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class uV{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=hV(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const x=new Promise(H=>{p=H}),T=e.callbacks,S=function(){p({})},N=this.apiClient,O={onopen:S,onmessage:H=>{lV(N,T.onmessage,H)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(H){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(H){}},V=this.webSocketFactory.create(m,dV(c),O);V.connect(),await x;const W={setup:{model:Bt(this.apiClient,e.model)}};return V.send(JSON.stringify(W)),new cV(V,this.apiClient)}}class cV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=LO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=DO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(fc.PLAY)}pause(){this.sendPlaybackControl(fc.PAUSE)}stop(){this.sendPlaybackControl(fc.STOP)}resetContext(){this.sendPlaybackControl(fc.RESET_CONTEXT)}close(){this.conn.close()}}function dV(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function hV(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mV(n,e,t){const i=new I4;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const c=VO(a);Object.assign(i,c)}else Object.assign(i,a);e(i)}class pV{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new uV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let x;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&b1(e.config.tools)&&T1(T);const S=vV(T);if(this.apiClient.isVertexAI()){const U=this.apiClient.getProject(),G=this.apiClient.getLocation(),$=this.apiClient.getApiKey(),te=!!U&&!!G||!!$;this.apiClient.getCustomBaseUrl()&&!te?x=m:(x=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,x))}else{const U=this.apiClient.getApiKey();let G="BidiGenerateContent",$="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),G="BidiGenerateContentConstrained",$="access_token"),x=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${G}?${$}=${U}`}let N=()=>{};const O=new Promise(U=>{N=U}),V=e.callbacks,P=function(){var U;(U=V==null?void 0:V.onopen)===null||U===void 0||U.call(V),N({})},Q=this.apiClient,W={onopen:P,onmessage:U=>{mV(Q,V.onmessage,U)},onerror:(t=V==null?void 0:V.onerror)!==null&&t!==void 0?t:function(U){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(U){}},H=this.webSocketFactory.create(x,yV(S),W);H.connect(),await O;let j=Bt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const U=this.apiClient.getProject(),G=this.apiClient.getLocation();U&&G&&(j=`projects/${U}/locations/${G}/`+j)}let Z={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qm.AUDIO]}:e.config.responseModalities=[qm.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],D=[];for(const U of Y)if(this.isCallableTool(U)){const G=U;D.push(await G.tool())}else D.push(U);D.length>0&&(e.config.tools=D);const k={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=kO(this.apiClient,k):Z=PO(this.apiClient,k),delete Z.config,H.send(JSON.stringify(Z)),new _V(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const gV={turnComplete:!0};class _V{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Js(t.turns),e.isVertexAI()||(i=i.map(r=>Mp(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(fV)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},gV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:UO(e)}:t={realtimeInput:OO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function yV(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function vV(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZE=10;function XE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(gc(c)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function gc(n){return"callTool"in n&&typeof n.callTool=="function"}function xV(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>gc(r)))!==null&&i!==void 0?i:!1}function QE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(gc(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function eS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wV=class extends Ko{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,c,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!xV(t)||XE(t.config))return await this.generateContentInternal(m);const p=QE(t);if(p.length>0){const V=p.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let x,T;const S=Js(m.contents),N=(a=(r=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:ZE;let O=0;for(;O<N&&(x=await this.generateContentInternal(m),!(!x.functionCalls||x.functionCalls.length===0));){const V=x.candidates[0].content,P=[];for(const Q of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(gc(Q)){const H=await Q.callTool(x.functionCalls);P.push(...H)}O++,T={role:"user",parts:P},m.contents=Js(m.contents),m.contents.push(V),m.contents.push(T),eS(m.config)&&(S.push(V),S.push(T))}return eS(m.config)&&(x.automaticFunctionCallingHistory=S),x},this.generateContentStream=async t=>{var i,r,a,c,f;if(this.maybeMoveToResponseJsonSchem(t),XE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const m=QE(t);if(m.length>0){const T=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,x=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!x)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:c.push(m);let f;return a?f={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new lu(jo.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,c,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const c=await Promise.all(a.map(async m=>gc(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&b1(e.config.tools)){const m=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),T1(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const c of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(gc(c)){const f=c,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,f)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:ZE;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,x,T){return xr(this,arguments,function*(){for(var S,N,O,V,P,Q;f<a;){c&&(f++,c=!1);const Z=yield ot(p.processParamsMaybeAddMcpUsage(T)),Y=yield ot(p.generateContentStreamInternal(Z)),D=[],k=[];try{for(var W=!0,H=(N=void 0,wr(Y)),j;j=yield ot(H.next()),S=j.done,!S;W=!0){V=j.value,W=!1;const U=V;if(yield yield ot(U),U.candidates&&(!((P=U.candidates[0])===null||P===void 0)&&P.content)){k.push(U.candidates[0].content);for(const G of(Q=U.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(f<a&&G.functionCall){if(!G.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(G.functionCall.name)){const $=yield ot(x.get(G.functionCall.name).callTool([G.functionCall]));D.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${G.functionCall.name}`)}}}}catch(U){N={error:U}}finally{try{!W&&!S&&(O=H.return)&&(yield ot(O.call(H)))}finally{if(N)throw N.error}}if(D.length>0){c=!0;const U=new Ud;U.candidates=[{content:{role:"user",parts:D}}],yield yield ot(U);const G=[];G.push(...k),G.push({role:"user",parts:D});const $=Js(T.contents).concat(G);T.contents=$}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=JE(this.apiClient,e);return f=De("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=YE(x),S=new Ud;return Object.assign(S,T),S})}else{const p=$E(this.apiClient,e);return f=De("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=KE(x),S=new Ud;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=JE(this.apiClient,e);return f=De("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(T){return xr(this,arguments,function*(){var S,N,O,V;try{for(var P=!0,Q=wr(T),W;W=yield ot(Q.next()),S=W.done,!S;P=!0){V=W.value,P=!1;const H=V,j=YE(yield ot(H.json()));j.sdkHttpResponse={headers:H.headers};const Z=new Ud;Object.assign(Z,j),yield yield ot(Z)}}catch(H){N={error:H}}finally{try{!P&&!S&&(O=Q.return)&&(yield ot(O.call(Q)))}finally{if(N)throw N.error}}})})}else{const p=$E(this.apiClient,e);return f=De("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(T){return xr(this,arguments,function*(){var S,N,O,V;try{for(var P=!0,Q=wr(T),W;W=yield ot(Q.next()),S=W.done,!S;P=!0){V=W.value,P=!1;const H=V,j=KE(yield ot(H.json()));j.sdkHttpResponse={headers:H.headers};const Z=new Ud;Object.assign(Z,j),yield yield ot(Z)}}catch(H){N={error:H}}finally{try{!P&&!S&&(O=Q.return)&&(yield ot(O.call(Q)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=p3(this.apiClient,e);return f=De("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=_3(x),S=new IE;return Object.assign(S,T),S})}else{const p=m3(this.apiClient,e);return f=De("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=g3(x),S=new IE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=N3(this.apiClient,e);return f=De("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=R3(x),S=new RE;return Object.assign(S,T),S})}else{const p=C3(this.apiClient,e);return f=De("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=I3(x),S=new RE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=c3(this.apiClient,e);return a=De("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>{const p=d3(m),x=new y4;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=NU(this.apiClient,e);return a=De("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>{const p=IU(m),x=new v4;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=uU(this.apiClient,e);return a=De("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=cU(m),x=new x4;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=gU(this.apiClient,e);return a=De("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=_U(m),x=new w4;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=J3(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>Fy(x))}else{const p=$3(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>By(x))}}async listInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=nU(this.apiClient,e);return f=De("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=sU(x),S=new ME;return Object.assign(S,T),S})}else{const p=tU(this.apiClient,e);return f=De("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=iU(x),S=new ME;return Object.assign(S,T),S})}}async update(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=AU(this.apiClient,e);return f=De("{model}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>Fy(x))}else{const p=SU(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>By(x))}}async delete(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=o3(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=l3(x),S=new PE;return Object.assign(S,T),S})}else{const p=r3(this.apiClient,e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=a3(x),S=new PE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=n3(this.apiClient,e);return f=De("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=s3(x),S=new kE;return Object.assign(S,T),S})}else{const p=t3(this.apiClient,e);return f=De("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=i3(x),S=new kE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=KO(this.apiClient,e);return a=De("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>{const p=YO(m),x=new b4;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=O3(this.apiClient,e);return f=De("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c.then(x=>{const T=D3(x),S=new Gm;return Object.assign(S,T),S})}else{const p=L3(this.apiClient,e);return f=De("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c.then(x=>{const T=k3(x),S=new Gm;return Object.assign(S,T),S})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bV extends Ko{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=h4(e);return f=De("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),c}else{const p=d4(e);return f=De("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),c}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=s4(e);return a=De("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n){const e={},t=_(n,["data"]);if(t!=null&&y(e,["data"],t),_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function EV(n){const e={},t=_(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>kV(a))),y(e,["parts"],r)}const i=_(n,["role"]);return i!=null&&y(e,["role"],i),e}function SV(n,e,t){const i={},r=_(e,["expireTime"]);t!==void 0&&r!=null&&y(t,["expireTime"],r);const a=_(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&y(t,["newSessionExpireTime"],a);const c=_(e,["uses"]);t!==void 0&&c!=null&&y(t,["uses"],c);const f=_(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&y(t,["bidiGenerateContentSetup"],PV(n,f));const m=_(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&y(t,["fieldMask"],m),i}function AV(n,e){const t={},i=_(e,["config"]);return i!=null&&y(t,["config"],SV(n,i,t)),t}function CV(n){const e={};if(_(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=_(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=_(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function NV(n){const e={},t=_(n,["id"]);t!=null&&y(e,["id"],t);const i=_(n,["args"]);i!=null&&y(e,["args"],i);const r=_(n,["name"]);if(r!=null&&y(e,["name"],r),_(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IV(n){const e={};if(_(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=_(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function RV(n){const e={};if(_(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=_(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function MV(n,e){const t={},i=_(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=_(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const a=_(n,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const c=_(n,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const f=_(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=_(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=_(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=_(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const T=_(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],X0(T));const S=_(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const N=_(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],N);const O=_(n,["systemInstruction"]);e!==void 0&&O!=null&&y(e,["setup","systemInstruction"],EV(wi(O)));const V=_(n,["tools"]);if(e!==void 0&&V!=null){let Y=Uc(V);Array.isArray(Y)&&(Y=Y.map(D=>LV(Oc(D)))),y(e,["setup","tools"],Y)}const P=_(n,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],DV(P));const Q=_(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&y(e,["setup","inputAudioTranscription"],Q);const W=_(n,["outputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","outputAudioTranscription"],W);const H=_(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&y(e,["setup","realtimeInputConfig"],H);const j=_(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const Z=_(n,["proactivity"]);if(e!==void 0&&Z!=null&&y(e,["setup","proactivity"],Z),_(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function PV(n,e){const t={},i=_(e,["model"]);i!=null&&y(t,["setup","model"],Bt(n,i));const r=_(e,["config"]);return r!=null&&y(t,["config"],MV(r,t)),t}function kV(n){const e={},t=_(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=_(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=_(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const a=_(n,["fileData"]);a!=null&&y(e,["fileData"],CV(a));const c=_(n,["functionCall"]);c!=null&&y(e,["functionCall"],NV(c));const f=_(n,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const m=_(n,["inlineData"]);m!=null&&y(e,["inlineData"],TV(m));const p=_(n,["text"]);p!=null&&y(e,["text"],p);const x=_(n,["thought"]);x!=null&&y(e,["thought"],x);const T=_(n,["thoughtSignature"]);T!=null&&y(e,["thoughtSignature"],T);const S=_(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function DV(n){const e={},t=_(n,["handle"]);if(t!=null&&y(e,["handle"],t),_(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LV(n){const e={};if(_(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=_(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=_(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=_(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),_(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=_(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>T)),y(e,["functionDeclarations"],x)}const c=_(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],IV(c));const f=_(n,["googleSearch"]);f!=null&&y(e,["googleSearch"],RV(f));const m=_(n,["googleSearchRetrieval"]);m!=null&&y(e,["googleSearchRetrieval"],m);const p=_(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OV(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function UV(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=OV(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class VV extends Ko{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=AV(this.apiClient,e);a=De("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=UV(f,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BV(n,e){const t={},i=_(n,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),t}function FV(n){const e={},t=_(n,["name"]);t!=null&&y(e,["_url","name"],t);const i=_(n,["config"]);return i!=null&&BV(i,e),e}function zV(n){const e={},t=_(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function jV(n,e){const t={},i=_(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=_(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function HV(n){const e={},t=_(n,["parent"]);t!=null&&y(e,["_url","parent"],t);const i=_(n,["config"]);return i!=null&&jV(i,e),e}function qV(n){const e={},t=_(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=_(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=_(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),y(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV extends Ko{constructor(e){super(),this.apiClient=e,this.list=async t=>new lu(jo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zV(e);return a=De("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=FV(e);r=De("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HV(e);return a=De("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=qV(m),x=new T4;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $V extends Ko{constructor(e,t=new GV(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new lu(jo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OU(e);return a=De("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=BU(e);return a=De("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=VU(e);r=De("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GU(e);return a=De("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=$U(m),x=new E4;return Object.assign(x,p),x})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=JU(e);return a=De("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=KU(m),x=new S4;return Object.assign(x,p),x})}}async importFile(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jU(e);return a=De("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>{const p=zU(m),x=new J0;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let E1=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return E1=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const JV=()=>E1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jy(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Hy=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys extends Error{}let Zs=class qy extends Ys{constructor(e,t,i,r){super(`${qy.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Dp({message:i,cause:Hy(t)});const a=t;return e===400?new A1(e,a,i,r):e===401?new C1(e,a,i,r):e===403?new N1(e,a,i,r):e===404?new I1(e,a,i,r):e===409?new R1(e,a,i,r):e===422?new M1(e,a,i,r):e===429?new P1(e,a,i,r):e>=500?new k1(e,a,i,r):new qy(e,a,i,r)}},Gy=class extends Zs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Dp=class extends Zs{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},S1=class extends Dp{constructor({message:e}={}){super({message:e??"Request timed out."})}},A1=class extends Zs{},C1=class extends Zs{},N1=class extends Zs{},I1=class extends Zs{},R1=class extends Zs{},M1=class extends Zs{},P1=class extends Zs{},k1=class extends Zs{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KV=/^[a-z][a-z0-9+.-]*:/i,YV=n=>KV.test(n);let $y=n=>($y=Array.isArray,$y(n));const WV=$y;let ZV=WV;const tS=ZV;function XV(n){if(!n)return!0;for(const e in n)return!1;return!0}function QV(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const e6=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ys(`${n} must be an integer`);if(e<0)throw new Ys(`${n} must be a positive integer`);return e},t6=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n6=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const s6=()=>{var n,e,t,i,r;const a=i6();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sc,"X-Stainless-OS":iS(Deno.build.os),"X-Stainless-Arch":nS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sc,"X-Stainless-OS":iS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":nS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=r6();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function r6(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,c=i[3]||0;return{browser:e,version:`${r}.${a}.${c}`}}}return null}const nS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",iS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Zf;const o6=()=>Zf??(Zf=s6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function D1(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function l6(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return D1({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function L1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function u6(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c6=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function oy(n,e,t){return O1(),new File(n,e??"unknown_file",t)}function d6(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const h6=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U1=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",f6=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&U1(n),m6=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function p6(n,e,t){if(O1(),n=await n,f6(n))return n instanceof File?n:oy([await n.arrayBuffer()],n.name);if(m6(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),oy(await Jy(r),e,t)}const i=await Jy(n);if(e||(e=d6(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return oy(i,e,t)}async function Jy(n){var e,t,i,r,a;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(U1(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(h6(n))try{for(var f=!0,m=wr(n),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const x=r;c.push(...await Jy(x))}}catch(x){t={error:x}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const x=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${x?`; constructor: ${x}`:""}${g6(n)}`)}return c}function g6(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let V1=class{constructor(e){this._client=e}};V1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const sS=Object.freeze(Object.create(null)),_6=(n=B1)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],c=t.reduce((x,T,S)=>{var N,O,V;/[?#]/.test(T)&&(r=!0);const P=i[S];let Q=(r?encodeURIComponent:n)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((V=Object.getPrototypeOf((O=Object.getPrototypeOf((N=P.hasOwnProperty)!==null&&N!==void 0?N:sS))!==null&&O!==void 0?O:sS))===null||V===void 0?void 0:V.toString))&&(Q=P+"",a.push({start:x.length+T.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),x+T+(S===i.length?"":Q)},""),f=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((x,T)=>x.start-T.start),a.length>0){let x=0;const T=a.reduce((S,N)=>{const O=" ".repeat(N.start-x),V="^".repeat(N.length);return x=N.start+N.length,S+O+V},"");throw new Ys(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${c}
${T}`)}return c}),Xf=_6(B1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1 extends V1{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=Jm(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Ys("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Ys("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xf`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Xf`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Xf`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:c=this._client.apiVersion}=a,f=Jm(a,["api_version"]);return this._client.get(Xf`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}F1._key=Object.freeze(["interactions"]);class z1 extends F1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y6(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let Qf;function ev(n){let e;return(Qf??(e=new globalThis.TextEncoder,Qf=e.encode.bind(e)))(n)}let em;function rS(n){let e;return(em??(e=new globalThis.TextDecoder,em=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lp=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ev(e):e;this.buffer=y6([this.buffer,t]);const i=[];let r;for(;(r=v6(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(rS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=rS(this.buffer.subarray(0,a));i.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};Lp.NEWLINE_CHARS=new Set([`
`,"\r"]);Lp.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function v6(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function x6(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Km={off:0,error:200,warn:300,info:400,debug:500},oS=(n,e,t)=>{if(n){if(QV(Km,n))return n;Pi(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Km))}`)}};function zd(){}function tm(n,e,t){return!e||Km[n]>Km[t]?zd:e[n].bind(e)}const w6={error:zd,warn:zd,info:zd,debug:zd};let aS=new WeakMap;function Pi(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return w6;const r=aS.get(t);if(r&&r[0]===i)return r[1];const a={error:tm("error",t,i),warn:tm("warn",t,i),info:tm("info",t,i),debug:tm("debug",t,i)};return aS.set(t,[i,a]),a}const ql=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let b6=class jd{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?Pi(i):console;function c(){return xr(this,arguments,function*(){var m,p,x,T;if(r)throw new Ys("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var N=!0,O=wr(T6(e,t)),V;V=yield ot(O.next()),m=V.done,!m;N=!0){T=V.value,N=!1;const P=T;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield ot(JSON.parse(P.data))}catch(Q){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),Q}}}catch(P){p={error:P}}finally{try{!N&&!m&&(x=O.return)&&(yield ot(x.call(O)))}finally{if(p)throw p.error}}S=!0}catch(P){if(jy(P))return yield ot(void 0);throw P}finally{S||t.abort()}})}return new jd(c,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return xr(this,arguments,function*(){var m,p,x,T;const S=new Lp,N=L1(e);try{for(var O=!0,V=wr(N),P;P=yield ot(V.next()),m=P.done,!m;O=!0){T=P.value,O=!1;const Q=T;for(const W of S.decode(Q))yield yield ot(W)}}catch(Q){p={error:Q}}finally{try{!O&&!m&&(x=V.return)&&(yield ot(x.call(V)))}finally{if(p)throw p.error}}for(const Q of S.flush())yield yield ot(Q)})}function c(){return xr(this,arguments,function*(){var m,p,x,T;if(r)throw new Ys("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var N=!0,O=wr(a()),V;V=yield ot(O.next()),m=V.done,!m;N=!0){T=V.value,N=!1;const P=T;S||P&&(yield yield ot(JSON.parse(P)))}}catch(P){p={error:P}}finally{try{!N&&!m&&(x=O.return)&&(yield ot(x.call(O)))}finally{if(p)throw p.error}}S=!0}catch(P){if(jy(P))return yield ot(void 0);throw P}finally{S||t.abort()}})}return new jd(c,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const c=i.next();e.push(c),t.push(c)}return a.shift()}});return[new jd(()=>r(e),this.controller,this.client),new jd(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return D1({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const c=ev(JSON.stringify(r)+`
`);i.enqueue(c)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function T6(n,e){return xr(this,arguments,function*(){var i,r,a,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ys("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ys("Attempted to iterate over a response with no body");const f=new S6,m=new Lp,p=L1(n.body);try{for(var x=!0,T=wr(E6(p)),S;S=yield ot(T.next()),i=S.done,!i;x=!0){c=S.value,x=!1;const N=c;for(const O of m.decode(N)){const V=f.decode(O);V&&(yield yield ot(V))}}}catch(N){r={error:N}}finally{try{!x&&!i&&(a=T.return)&&(yield ot(a.call(T)))}finally{if(r)throw r.error}}for(const N of m.flush()){const O=f.decode(N);O&&(yield yield ot(O))}})}function E6(n){return xr(this,arguments,function*(){var t,i,r,a;let c=new Uint8Array;try{for(var f=!0,m=wr(n),p;p=yield ot(m.next()),t=p.done,!t;f=!0){a=p.value,f=!1;const x=a;if(x==null)continue;const T=x instanceof ArrayBuffer?new Uint8Array(x):typeof x=="string"?ev(x):x;let S=new Uint8Array(c.length+T.length);S.set(c),S.set(T,c.length),c=S;let N;for(;(N=x6(c))!==-1;)yield yield ot(c.slice(0,N)),c=c.slice(N)}}catch(x){i={error:x}}finally{try{!f&&!t&&(r=m.return)&&(yield ot(r.call(m)))}finally{if(i)throw i.error}}c.length>0&&(yield yield ot(c))})}let S6=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=A6(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}};function A6(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function C6(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,c=await(async()=>{var f;if(e.options.stream)return Pi(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):b6.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return Pi(n).debug(`[${i}] response parsed`,ql({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let N6=class j1 extends Promise{constructor(e,t,i=C6){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new j1(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H1=Symbol("brand.privateNullableHeaders");function*I6(n){if(!n)return;if(H1 in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():tS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=tS(i[1])?i[1]:[i[1]];let c=!1;for(const f of a)f!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,f])}}const Vd=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,c]of I6(i)){const f=a.toLowerCase();r.has(f)||(e.delete(a),r.add(f)),c===null?(e.delete(a),t.add(f)):(e.append(a,c),t.delete(f))}}return{[H1]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ay=n=>{var e,t,i,r,a,c;if(typeof globalThis.process<"u")return(i=(t=(e=XL)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var q1;class Op{constructor(e){var t,i,r,a,c,f,m,{baseURL:p=ay("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:x=(t=ay("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Jm(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:x,apiVersion:T},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(i=N.timeout)!==null&&i!==void 0?i:Op.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const O="warn";this.logLevel=O,this.logLevel=(c=(a=oS(N.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:oS(ay("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:O,this.fetchOptions=N.fetchOptions,this.maxRetries=(f=N.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=N.fetch)!==null&&m!==void 0?m:a6(),this.encoder=c6,this._options=N,this.apiKey=x,this.apiVersion=T,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Vd([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Vd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Ys(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${sc}`}defaultIdempotencyKey(){return`stainless-node-retry-${JV()}`}makeStatusError(e,t,i,r){return Zs.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=YV(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return XV(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new N6(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,c;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=m),await this.prepareOptions(f);const{req:p,url:x,timeout:T}=await this.buildRequest(f,{retryCount:m-t});await this.prepareRequest(p,{url:x,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=i===void 0?"":`, retryOf: ${i}`,O=Date.now();if(Pi(this).debug(`[${S}] sending request`,ql({retryOfRequestLogID:i,method:f.method,url:x,options:f,headers:p.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Gy;const V=new AbortController,P=await this.fetchWithTimeout(x,p,T,V).catch(Hy),Q=Date.now();if(P instanceof globalThis.Error){const H=`retrying, ${t} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new Gy;const j=jy(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return Pi(this).info(`[${S}] connection ${j?"timed out":"failed"} - ${H}`),Pi(this).debug(`[${S}] connection ${j?"timed out":"failed"} (${H})`,ql({retryOfRequestLogID:i,url:x,durationMs:Q-O,message:P.message})),this.retryRequest(f,t,i??S);throw Pi(this).info(`[${S}] connection ${j?"timed out":"failed"} - error; no more retries left`),Pi(this).debug(`[${S}] connection ${j?"timed out":"failed"} (error; no more retries left)`,ql({retryOfRequestLogID:i,url:x,durationMs:Q-O,message:P.message})),j?new S1:new Dp({cause:P})}const W=`[${S}${N}] ${p.method} ${x} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${Q-O}ms`;if(!P.ok){const H=await this.shouldRetry(P);if(t&&H){const U=`retrying, ${t} attempts remaining`;return await u6(P.body),Pi(this).info(`${W} - ${U}`),Pi(this).debug(`[${S}] response error (${U})`,ql({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:Q-O})),this.retryRequest(f,t,i??S,P.headers)}const j=H?"error; no more retries left":"error; not retryable";Pi(this).info(`${W} - ${j}`);const Z=await P.text().catch(U=>Hy(U).message),Y=t6(Z),D=Y?void 0:Z;throw Pi(this).debug(`[${S}] response error (${j})`,ql({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:D,durationMs:Date.now()-O})),this.makeStatusError(P.status,Y,D,P.headers)}return Pi(this).info(W),Pi(this).debug(`[${S}] response start`,ql({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:Q-O})),{response:P,options:f,controller:V,requestLogID:S,retryOfRequestLogID:i,startTime:O}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:c,method:f}=a,m=Jm(a,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),i),x=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),m);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let c;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(c=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!c){const p=parseFloat(m);Number.isNaN(p)?c=Date.parse(m)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,p)}return await n6(c),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,c=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const c=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:x}=c,T=this.buildURL(m,p,x);"timeout"in c&&e6("timeout",c.timeout),c.timeout=(i=c.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:N}=this.buildBody({options:c}),O=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:O},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=Vd([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),o6()),this._options.defaultHeaders,i,e.headers,c]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Vd([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:l6(e)}:this.encoder({body:e,headers:i})}}Op.DEFAULT_TIMEOUT=6e4;class Qn extends Op{constructor(){super(...arguments),this.interactions=new z1(this)}}q1=Qn;Qn.GeminiNextGenAPIClient=q1;Qn.GeminiNextGenAPIClientError=Ys;Qn.APIError=Zs;Qn.APIConnectionError=Dp;Qn.APIConnectionTimeoutError=S1;Qn.APIUserAbortError=Gy;Qn.NotFoundError=I1;Qn.ConflictError=R1;Qn.RateLimitError=P1;Qn.BadRequestError=A1;Qn.AuthenticationError=C1;Qn.InternalServerError=k1;Qn.PermissionDeniedError=N1;Qn.UnprocessableEntityError=M1;Qn.toFile=p6;Qn.Interactions=z1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R6(n,e){const t={},i=_(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function M6(n,e){const t={},i=_(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function P6(n,e){const t={},i=_(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function k6(n,e){const t={},i=_(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function D6(n,e,t){const i={};if(_(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=_(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),_(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=_(n,["epochCount"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","epochCount"],a);const c=_(n,["learningRateMultiplier"]);if(c!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),_(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(_(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(_(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=_(n,["batchSize"]);e!==void 0&&f!=null&&y(e,["tuningTask","hyperparameters","batchSize"],f);const m=_(n,["learningRate"]);if(e!==void 0&&m!=null&&y(e,["tuningTask","hyperparameters","learningRate"],m),_(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(_(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function L6(n,e,t){const i={};let r=_(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const N=_(n,["validationDataset"]);e!==void 0&&N!=null&&y(e,["supervisedTuningSpec"],lS(N))}else if(r==="PREFERENCE_TUNING"){const N=_(n,["validationDataset"]);e!==void 0&&N!=null&&y(e,["preferenceOptimizationSpec"],lS(N))}const a=_(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&y(e,["tunedModelDisplayName"],a);const c=_(n,["description"]);e!==void 0&&c!=null&&y(e,["description"],c);let f=_(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=_(n,["epochCount"]);e!==void 0&&N!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(f==="PREFERENCE_TUNING"){const N=_(n,["epochCount"]);e!==void 0&&N!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let m=_(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=_(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="PREFERENCE_TUNING"){const N=_(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let p=_(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const N=_(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(p==="PREFERENCE_TUNING"){const N=_(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let x=_(t,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const N=_(n,["adapterSize"]);e!==void 0&&N!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(x==="PREFERENCE_TUNING"){const N=_(n,["adapterSize"]);e!==void 0&&N!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(_(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(_(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=_(n,["labels"]);e!==void 0&&T!=null&&y(e,["labels"],T);const S=_(n,["beta"]);return e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function O6(n,e){const t={},i=_(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const r=_(n,["preTunedModel"]);r!=null&&y(t,["preTunedModel"],r);const a=_(n,["trainingDataset"]);a!=null&&J6(a);const c=_(n,["config"]);return c!=null&&D6(c,t),t}function U6(n,e){const t={},i=_(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const r=_(n,["preTunedModel"]);r!=null&&y(t,["preTunedModel"],r);const a=_(n,["trainingDataset"]);a!=null&&K6(a,t,e);const c=_(n,["config"]);return c!=null&&L6(c,t,e),t}function V6(n,e){const t={},i=_(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function B6(n,e){const t={},i=_(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function F6(n,e,t){const i={},r=_(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const a=_(n,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const c=_(n,["filter"]);return e!==void 0&&c!=null&&y(e,["_query","filter"],c),i}function z6(n,e,t){const i={},r=_(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const a=_(n,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const c=_(n,["filter"]);return e!==void 0&&c!=null&&y(e,["_query","filter"],c),i}function j6(n,e){const t={},i=_(n,["config"]);return i!=null&&F6(i,t),t}function H6(n,e){const t={},i=_(n,["config"]);return i!=null&&z6(i,t),t}function q6(n,e){const t={},i=_(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=_(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const a=_(n,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>G1(f))),y(t,["tuningJobs"],c)}return t}function G6(n,e){const t={},i=_(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=_(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const a=_(n,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>Ky(f))),y(t,["tuningJobs"],c)}return t}function $6(n,e){const t={},i=_(n,["name"]);i!=null&&y(t,["model"],i);const r=_(n,["name"]);return r!=null&&y(t,["endpoint"],r),t}function J6(n,e){const t={};if(_(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=_(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),y(t,["examples","examples"],r)}return t}function K6(n,e,t){const i={};let r=_(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=_(n,["gcsUri"]);e!==void 0&&c!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=_(n,["gcsUri"]);e!==void 0&&c!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=_(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=_(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=_(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(_(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function G1(n,e){const t={},i=_(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=_(n,["name"]);r!=null&&y(t,["name"],r);const a=_(n,["state"]);a!=null&&y(t,["state"],o1(a));const c=_(n,["createTime"]);c!=null&&y(t,["createTime"],c);const f=_(n,["tuningTask","startTime"]);f!=null&&y(t,["startTime"],f);const m=_(n,["tuningTask","completeTime"]);m!=null&&y(t,["endTime"],m);const p=_(n,["updateTime"]);p!=null&&y(t,["updateTime"],p);const x=_(n,["description"]);x!=null&&y(t,["description"],x);const T=_(n,["baseModel"]);T!=null&&y(t,["baseModel"],T);const S=_(n,["_self"]);return S!=null&&y(t,["tunedModel"],$6(S)),t}function Ky(n,e){const t={},i=_(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=_(n,["name"]);r!=null&&y(t,["name"],r);const a=_(n,["state"]);a!=null&&y(t,["state"],o1(a));const c=_(n,["createTime"]);c!=null&&y(t,["createTime"],c);const f=_(n,["startTime"]);f!=null&&y(t,["startTime"],f);const m=_(n,["endTime"]);m!=null&&y(t,["endTime"],m);const p=_(n,["updateTime"]);p!=null&&y(t,["updateTime"],p);const x=_(n,["error"]);x!=null&&y(t,["error"],x);const T=_(n,["description"]);T!=null&&y(t,["description"],T);const S=_(n,["baseModel"]);S!=null&&y(t,["baseModel"],S);const N=_(n,["tunedModel"]);N!=null&&y(t,["tunedModel"],N);const O=_(n,["preTunedModel"]);O!=null&&y(t,["preTunedModel"],O);const V=_(n,["supervisedTuningSpec"]);V!=null&&y(t,["supervisedTuningSpec"],V);const P=_(n,["preferenceOptimizationSpec"]);P!=null&&y(t,["preferenceOptimizationSpec"],P);const Q=_(n,["tuningDataStats"]);Q!=null&&y(t,["tuningDataStats"],Q);const W=_(n,["encryptionSpec"]);W!=null&&y(t,["encryptionSpec"],W);const H=_(n,["partnerModelTuningSpec"]);H!=null&&y(t,["partnerModelTuningSpec"],H);const j=_(n,["customBaseModel"]);j!=null&&y(t,["customBaseModel"],j);const Z=_(n,["experiment"]);Z!=null&&y(t,["experiment"],Z);const Y=_(n,["labels"]);Y!=null&&y(t,["labels"],Y);const D=_(n,["outputUri"]);D!=null&&y(t,["outputUri"],D);const k=_(n,["pipelineJob"]);k!=null&&y(t,["pipelineJob"],k);const U=_(n,["serviceAccount"]);U!=null&&y(t,["serviceAccount"],U);const G=_(n,["tunedModelDisplayName"]);G!=null&&y(t,["tunedModelDisplayName"],G);const $=_(n,["veoTuningSpec"]);return $!=null&&y(t,["veoTuningSpec"],$),t}function Y6(n,e){const t={},i=_(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=_(n,["name"]);r!=null&&y(t,["name"],r);const a=_(n,["metadata"]);a!=null&&y(t,["metadata"],a);const c=_(n,["done"]);c!=null&&y(t,["done"],c);const f=_(n,["error"]);return f!=null&&y(t,["error"],f),t}function lS(n,e){const t={},i=_(n,["gcsUri"]);i!=null&&y(t,["validationDatasetUri"],i);const r=_(n,["vertexDatasetResource"]);return r!=null&&y(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W6 extends Ko{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(jo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:Dy.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=B6(e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>Ky(x))}else{const p=V6(e);return f=De("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>G1(x))}}async listInternal(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=H6(e);return f=De("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=G6(x),S=new DE;return Object.assign(S,T),S})}else{const p=j6(e);return f=De("tunedModels",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=q6(x),S=new DE;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,a;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=M6(e);return f=De("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=k6(x),S=new LE;return Object.assign(S,T),S})}else{const p=R6(e);return f=De("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:x.headers},S})),c.then(x=>{const T=P6(x),S=new LE;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI()){const f=U6(e,e);return a=De("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>Ky(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O6(e);return a=De("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),r.then(m=>Y6(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const X6=1024*1024*8,Q6=3,eB=1e3,tB=2,Ym="x-goog-upload-status";async function nB(n,e,t){var i;const r=await $1(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ym])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function iB(n,e,t){var i;const r=await $1(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ym])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=e1(a),f=new K0;return Object.assign(f,c),f}async function $1(n,e,t){var i,r;let a=0,c=0,f=new Oy(new Response),m="upload";for(a=n.size;c<a;){const p=Math.min(X6,a-c),x=n.slice(c,c+p);c+p>=a&&(m+=", finalize");let T=0,S=eB;for(;T<Q6&&(f=await t.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Ym]));)T++,await rB(S),S=S*tB;if(c+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Ym])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function sB(n){return{size:n.size,type:n.type}}function rB(n){return new Promise(e=>setTimeout(e,n))}class oB{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nB(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iB(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aB{create(e,t,i){return new lB(e,t,i)}}class lB{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uS="x-goog-api-key";class uB{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(uS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cB="gl-node/";class dB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Qn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=n4(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new uB(this.apiKey);this.apiClient=new nV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cB+"web",uploader:new oB,downloader:new Z6}),this.models=new wV(this.apiClient),this.live=new pV(this.apiClient,r,new aB),this.batches=new M5(this.apiClient),this.chats=new hO(this.models,this.apiClient),this.caches=new uO(this.apiClient),this.files=new bO(this.apiClient),this.operations=new bV(this.apiClient),this.authTokens=new VV(this.apiClient),this.tunings=new W6(this.apiClient),this.fileSearchStores=new $V(this.apiClient)}}function it(n,e,t,i,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function me(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}let J1=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return J1=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};function Yy(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Wy=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ye extends Error{}class li extends Ye{constructor(e,t,i,r){super(`${li.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Up({message:i,cause:Wy(t)});const a=t==null?void 0:t.error;return e===400?new K1(e,a,i,r):e===401?new Y1(e,a,i,r):e===403?new W1(e,a,i,r):e===404?new Z1(e,a,i,r):e===409?new X1(e,a,i,r):e===422?new Q1(e,a,i,r):e===429?new eN(e,a,i,r):e>=500?new tN(e,a,i,r):new li(e,a,i,r)}}class $s extends li{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Up extends li{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class tv extends Up{constructor({message:e}={}){super({message:e??"Request timed out."})}}class K1 extends li{}class Y1 extends li{}class W1 extends li{}class Z1 extends li{}class X1 extends li{}class Q1 extends li{}class eN extends li{}class tN extends li{}class nN extends Ye{constructor(){super("Could not parse response content as the length limit was reached")}}class iN extends Ye{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Hd extends Error{constructor(e){super(e)}}const hB=/^[a-z][a-z0-9+.-]*:/i,fB=n=>hB.test(n);let Xi=n=>(Xi=Array.isArray,Xi(n)),cS=Xi;function sN(n){return typeof n!="object"?{}:n??{}}function mB(n){if(!n)return!0;for(const e in n)return!1;return!0}function pB(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ly(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const gB=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ye(`${n} must be an integer`);if(e<0)throw new Ye(`${n} must be a positive integer`);return e},_B=n=>{try{return JSON.parse(n)}catch{return}},Mh=n=>new Promise(e=>setTimeout(e,n)),rc="6.16.0",yB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function vB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xB=()=>{var t;const n=vB();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":hS(Deno.build.os),"X-Stainless-Arch":dS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":hS(globalThis.process.platform??"unknown"),"X-Stainless-Arch":dS(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=wB();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wB(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,c=i[3]||0;return{browser:e,version:`${r}.${a}.${c}`}}}return null}const dS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",hS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let fS;const bB=()=>fS??(fS=xB());function TB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function rN(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function oN(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return rN({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function aN(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function EB(n){var i,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(i=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(i));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const SB=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),lN="RFC3986",uN=n=>String(n),mS={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:uN},AB="RFC1738";let Zy=(n,e)=>(Zy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Zy(n,e));const Kr=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),uy=1024,CB=(n,e,t,i,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});let c="";for(let f=0;f<a.length;f+=uy){const m=a.length>=uy?a.slice(f,f+uy):a,p=[];for(let x=0;x<m.length;++x){let T=m.charCodeAt(x);if(T===45||T===46||T===95||T===126||T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122||r===AB&&(T===40||T===41)){p[p.length]=m.charAt(x);continue}if(T<128){p[p.length]=Kr[T];continue}if(T<2048){p[p.length]=Kr[192|T>>6]+Kr[128|T&63];continue}if(T<55296||T>=57344){p[p.length]=Kr[224|T>>12]+Kr[128|T>>6&63]+Kr[128|T&63];continue}x+=1,T=65536+((T&1023)<<10|m.charCodeAt(x)&1023),p[p.length]=Kr[240|T>>18]+Kr[128|T>>12&63]+Kr[128|T>>6&63]+Kr[128|T&63]}c+=p.join("")}return c};function NB(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function pS(n,e){if(Xi(n)){const t=[];for(let i=0;i<n.length;i+=1)t.push(e(n[i]));return t}return e(n)}const cN={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},dN=function(n,e){Array.prototype.push.apply(n,Xi(e)?e:[e])};let gS;const Bn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:CB,encodeValuesOnly:!1,format:lN,formatter:uN,indices:!1,serializeDate(n){return(gS??(gS=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function IB(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const cy={};function hN(n,e,t,i,r,a,c,f,m,p,x,T,S,N,O,V,P,Q){let W=n,H=Q,j=0,Z=!1;for(;(H=H.get(cy))!==void 0&&!Z;){const G=H.get(n);if(j+=1,typeof G<"u"){if(G===j)throw new RangeError("Cyclic object value");Z=!0}typeof H.get(cy)>"u"&&(j=0)}if(typeof p=="function"?W=p(e,W):W instanceof Date?W=S==null?void 0:S(W):t==="comma"&&Xi(W)&&(W=pS(W,function(G){return G instanceof Date?S==null?void 0:S(G):G})),W===null){if(a)return m&&!V?m(e,Bn.encoder,P,"key",N):e;W=""}if(IB(W)||NB(W)){if(m){const G=V?e:m(e,Bn.encoder,P,"key",N);return[(O==null?void 0:O(G))+"="+(O==null?void 0:O(m(W,Bn.encoder,P,"value",N)))]}return[(O==null?void 0:O(e))+"="+(O==null?void 0:O(String(W)))]}const Y=[];if(typeof W>"u")return Y;let D;if(t==="comma"&&Xi(W))V&&m&&(W=pS(W,m)),D=[{value:W.length>0?W.join(",")||null:void 0}];else if(Xi(p))D=p;else{const G=Object.keys(W);D=x?G.sort(x):G}const k=f?String(e).replace(/\./g,"%2E"):String(e),U=i&&Xi(W)&&W.length===1?k+"[]":k;if(r&&Xi(W)&&W.length===0)return U+"[]";for(let G=0;G<D.length;++G){const $=D[G],te=typeof $=="object"&&typeof $.value<"u"?$.value:W[$];if(c&&te===null)continue;const K=T&&f?$.replace(/\./g,"%2E"):$,Le=Xi(W)?typeof t=="function"?t(U,K):U:U+(T?"."+K:"["+K+"]");Q.set(n,j);const rt=new WeakMap;rt.set(cy,Q),dN(Y,hN(te,Le,t,i,r,a,c,f,t==="comma"&&V&&Xi(W)?null:m,p,x,T,S,N,O,V,P,rt))}return Y}function RB(n=Bn){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Bn.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=lN;if(typeof n.format<"u"){if(!Zy(mS,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const i=mS[t];let r=Bn.filter;(typeof n.filter=="function"||Xi(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in cN?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=Bn.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Bn.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Bn.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Bn.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Bn.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Bn.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Bn.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Bn.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Bn.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Bn.encodeValuesOnly,filter:r,format:t,formatter:i,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Bn.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Bn.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Bn.strictNullHandling}}function MB(n,e={}){let t=n;const i=RB(e);let r,a;typeof i.filter=="function"?(a=i.filter,t=a("",t)):Xi(i.filter)&&(a=i.filter,r=a);const c=[];if(typeof t!="object"||t===null)return"";const f=cN[i.arrayFormat],m=f==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);const p=new WeakMap;for(let S=0;S<r.length;++S){const N=r[S];i.skipNulls&&t[N]===null||dN(c,hN(t[N],N,f,m,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,p))}const x=c.join(i.delimiter);let T=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?T+="utf8=%26%2310003%3B&":T+="utf8=%E2%9C%93&"),x.length>0?T+x:""}function PB(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let _S;function nv(n){let e;return(_S??(e=new globalThis.TextEncoder,_S=e.encode.bind(e)))(n)}let yS;function vS(n){let e;return(yS??(e=new globalThis.TextDecoder,yS=e.decode.bind(e)))(n)}var ys,vs;class Vp{constructor(){ys.set(this,void 0),vs.set(this,void 0),it(this,ys,new Uint8Array),it(this,vs,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?nv(e):e;it(this,ys,PB([me(this,ys,"f"),t]));const i=[];let r;for(;(r=kB(me(this,ys,"f"),me(this,vs,"f")))!=null;){if(r.carriage&&me(this,vs,"f")==null){it(this,vs,r.index);continue}if(me(this,vs,"f")!=null&&(r.index!==me(this,vs,"f")+1||r.carriage)){i.push(vS(me(this,ys,"f").subarray(0,me(this,vs,"f")-1))),it(this,ys,me(this,ys,"f").subarray(me(this,vs,"f"))),it(this,vs,null);continue}const a=me(this,vs,"f")!==null?r.preceding-1:r.preceding,c=vS(me(this,ys,"f").subarray(0,a));i.push(c),it(this,ys,me(this,ys,"f").subarray(r.index)),it(this,vs,null)}return i}flush(){return me(this,ys,"f").length?this.decode(`
`):[]}}ys=new WeakMap,vs=new WeakMap;Vp.NEWLINE_CHARS=new Set([`
`,"\r"]);Vp.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kB(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function DB(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}const Wm={off:0,error:200,warn:300,info:400,debug:500},xS=(n,e,t)=>{if(n){if(pB(Wm,n))return n;ii(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Wm))}`)}};function qd(){}function nm(n,e,t){return!e||Wm[n]>Wm[t]?qd:e[n].bind(e)}const LB={error:qd,warn:qd,info:qd,debug:qd};let wS=new WeakMap;function ii(n){const e=n.logger,t=n.logLevel??"off";if(!e)return LB;const i=wS.get(e);if(i&&i[0]===t)return i[1];const r={error:nm("error",e,t),warn:nm("warn",e,t),info:nm("info",e,t),debug:nm("debug",e,t)};return wS.set(e,[t,r]),r}const Gl=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Bd;class Zr{constructor(e,t,i){this.iterator=e,Bd.set(this,void 0),this.controller=t,it(this,Bd,i)}static fromSSEResponse(e,t,i){let r=!1;const a=i?ii(i):console;async function*c(){if(r)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let f=!1;try{for await(const m of OB(e,t))if(!f){if(m.data.startsWith("[DONE]")){f=!0;continue}if(m.event===null||!m.event.startsWith("thread.")){let p;try{p=JSON.parse(m.data)}catch(x){throw a.error("Could not parse message into JSON:",m.data),a.error("From chunk:",m.raw),x}if(p&&p.error)throw new li(void 0,p.error,void 0,e.headers);yield p}else{let p;try{p=JSON.parse(m.data)}catch(x){throw console.error("Could not parse message into JSON:",m.data),console.error("From chunk:",m.raw),x}if(m.event=="error")throw new li(void 0,p.error,p.message,void 0);yield{event:m.event,data:p}}}f=!0}catch(m){if(Yy(m))return;throw m}finally{f||t.abort()}}return new Zr(c,t,i)}static fromReadableStream(e,t,i){let r=!1;async function*a(){const f=new Vp,m=aN(e);for await(const p of m)for(const x of f.decode(p))yield x;for(const p of f.flush())yield p}async function*c(){if(r)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let f=!1;try{for await(const m of a())f||m&&(yield JSON.parse(m));f=!0}catch(m){if(Yy(m))return;throw m}finally{f||t.abort()}}return new Zr(c,t,i)}[(Bd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const c=i.next();e.push(c),t.push(c)}return a.shift()}});return[new Zr(()=>r(e),this.controller,me(this,Bd,"f")),new Zr(()=>r(t),this.controller,me(this,Bd,"f"))]}toReadableStream(){const e=this;let t;return rN({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const c=nv(JSON.stringify(r)+`
`);i.enqueue(c)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*OB(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ye("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ye("Attempted to iterate over a response with no body");const t=new VB,i=new Vp,r=aN(n.body);for await(const a of UB(r))for(const c of i.decode(a)){const f=t.decode(c);f&&(yield f)}for(const a of i.flush()){const c=t.decode(a);c&&(yield c)}}async function*UB(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const i=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?nv(t):t;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=DB(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class VB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=BB(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function BB(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function fN(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,c=await(async()=>{var T;if(e.options.stream)return ii(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Zr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),m=(T=f==null?void 0:f.split(";")[0])==null?void 0:T.trim();if((m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))){const S=await t.json();return mN(S,t)}return await t.text()})();return ii(n).debug(`[${i}] response parsed`,Gl({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-a})),c}function mN(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Gd;class Bp extends Promise{constructor(e,t,i=fN){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,Gd.set(this,void 0),it(this,Gd,e)}_thenUnwrap(e){return new Bp(me(this,Gd,"f"),this.responsePromise,async(t,i)=>mN(e(await this.parseResponse(t,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(me(this,Gd,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Gd=new WeakMap;var im;class iv{constructor(e,t,i,r){im.set(this,void 0),it(this,im,e),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ye("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await me(this,im,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(im=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class FB extends Bp{constructor(e,t,i){super(e,t,async(r,a)=>new i(r,a.response,await fN(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Fp extends iv{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Dn extends iv{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var i;const e=this.getPaginatedItems(),t=(i=e[e.length-1])==null?void 0:i.id;return t?{...this.options,query:{...sN(this.options.query),after:t}}:null}}class Zm extends iv{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...sN(this.options.query),after:e}}:null}}const pN=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ih(n,e,t){return pN(),new File(n,e??"unknown_file",t)}function wm(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const sv=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",bS=async(n,e)=>Xy(n.body)?{...n,body:await gN(n.body,e)}:n,tu=async(n,e)=>({...n,body:await gN(n.body,e)}),TS=new WeakMap;function zB(n){const e=typeof n=="function"?n:n.fetch,t=TS.get(e);if(t)return t;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return TS.set(e,i),i}const gN=async(n,e)=>{if(!await zB(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([i,r])=>Qy(t,i,r))),t},_N=n=>n instanceof Blob&&"name"in n,jB=n=>typeof n=="object"&&n!==null&&(n instanceof Response||sv(n)||_N(n)),Xy=n=>{if(jB(n))return!0;if(Array.isArray(n))return n.some(Xy);if(n&&typeof n=="object"){for(const e in n)if(Xy(n[e]))return!0}return!1},Qy=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,ih([await t.blob()],wm(t)));else if(sv(t))n.append(e,ih([await new Response(oN(t)).blob()],wm(t)));else if(_N(t))n.append(e,t,wm(t));else if(Array.isArray(t))await Promise.all(t.map(i=>Qy(n,e+"[]",i)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([i,r])=>Qy(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},yN=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",HB=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&yN(n),qB=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function GB(n,e,t){if(pN(),n=await n,HB(n))return n instanceof File?n:ih([await n.arrayBuffer()],n.name);if(qB(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ih(await e0(r),e,t)}const i=await e0(n);if(e||(e=wm(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return ih(i,e,t)}async function e0(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(yN(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(sv(n))for await(const i of n)e.push(...await e0(i));else{const i=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${i?`; constructor: ${i}`:""}${$B(n)}`)}return e}function $B(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Je{constructor(e){this._client=e}}function vN(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ES=Object.freeze(Object.create(null)),JB=(n=vN)=>function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],c=t.reduce((x,T,S)=>{var V;/[?#]/.test(T)&&(r=!0);const N=i[S];let O=(r?encodeURIComponent:n)(""+N);return S!==i.length&&(N==null||typeof N=="object"&&N.toString===((V=Object.getPrototypeOf(Object.getPrototypeOf(N.hasOwnProperty??ES)??ES))==null?void 0:V.toString))&&(O=N+"",a.push({start:x.length+T.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),x+T+(S===i.length?"":O)},""),f=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((x,T)=>x.start-T.start),a.length>0){let x=0;const T=a.reduce((S,N)=>{const O=" ".repeat(N.start-x),V="^".repeat(N.length);return x=N.start+N.length,S+O+V},"");throw new Ye(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${c}
${T}`)}return c},Re=JB(vN);let xN=class extends Je{list(e,t={},i){return this._client.getAPIList(Re`/chat/completions/${e}/messages`,Dn,{query:t,...i})}};function Xm(n){return n!==void 0&&"function"in n&&n.function!==void 0}function rv(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Ph(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function KB(n,e){return!e||!wN(e)?{...n,choices:n.choices.map(t=>(bN(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:ov(n,e)}function ov(n,e){const t=n.choices.map(i=>{var r;if(i.finish_reason==="length")throw new nN;if(i.finish_reason==="content_filter")throw new iN;return bN(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((r=i.message.tool_calls)==null?void 0:r.map(a=>WB(e,a)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?YB(e,i.message.content):null}}});return{...n,choices:t}}function YB(n,e){var t,i;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((i=n.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function WB(n,e){var i;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return Xm(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ph(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function ZB(n,e){var i;if(!n||!("tools"in n)||!n.tools)return!1;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return Xm(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return Xm(t)&&(Ph(t)||(t==null?void 0:t.function.strict)||!1)}function wN(n){var e;return rv(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Ph(t)||t.type==="function"&&t.function.strict===!0))??!1}function bN(n){for(const e of n||[])if(e.type!=="function")throw new Ye(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function XB(n){for(const e of n??[]){if(e.type!=="function")throw new Ye(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ye(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Qm=n=>(n==null?void 0:n.role)==="assistant",TN=n=>(n==null?void 0:n.role)==="tool";var t0,bm,Tm,$d,Jd,Em,Kd,Do,Yd,ep,tp,oc,EN;class av{constructor(){t0.add(this),this.controller=new AbortController,bm.set(this,void 0),Tm.set(this,()=>{}),$d.set(this,()=>{}),Jd.set(this,void 0),Em.set(this,()=>{}),Kd.set(this,()=>{}),Do.set(this,{}),Yd.set(this,!1),ep.set(this,!1),tp.set(this,!1),oc.set(this,!1),it(this,bm,new Promise((e,t)=>{it(this,Tm,e,"f"),it(this,$d,t,"f")})),it(this,Jd,new Promise((e,t)=>{it(this,Em,e,"f"),it(this,Kd,t,"f")})),me(this,bm,"f").catch(()=>{}),me(this,Jd,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},me(this,t0,"m",EN).bind(this))},0)}_connected(){this.ended||(me(this,Tm,"f").call(this),this._emit("connect"))}get ended(){return me(this,Yd,"f")}get errored(){return me(this,ep,"f")}get aborted(){return me(this,tp,"f")}abort(){this.controller.abort()}on(e,t){return(me(this,Do,"f")[e]||(me(this,Do,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=me(this,Do,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(me(this,Do,"f")[e]||(me(this,Do,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{it(this,oc,!0),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){it(this,oc,!0),await me(this,Jd,"f")}_emit(e,...t){if(me(this,Yd,"f"))return;e==="end"&&(it(this,Yd,!0),me(this,Em,"f").call(this));const i=me(this,Do,"f")[e];if(i&&(me(this,Do,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!me(this,oc,"f")&&!(i!=null&&i.length)&&Promise.reject(r),me(this,$d,"f").call(this,r),me(this,Kd,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!me(this,oc,"f")&&!(i!=null&&i.length)&&Promise.reject(r),me(this,$d,"f").call(this,r),me(this,Kd,"f").call(this,r),this._emit("end")}}_emitFinal(){}}bm=new WeakMap,Tm=new WeakMap,$d=new WeakMap,Jd=new WeakMap,Em=new WeakMap,Kd=new WeakMap,Do=new WeakMap,Yd=new WeakMap,ep=new WeakMap,tp=new WeakMap,oc=new WeakMap,t0=new WeakSet,EN=function(e){if(it(this,ep,!0),e instanceof Error&&e.name==="AbortError"&&(e=new $s),e instanceof $s)return it(this,tp,!0),this._emit("abort",e);if(e instanceof Ye)return this._emit("error",e);if(e instanceof Error){const t=new Ye(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ye(String(e)))};function QB(n){return typeof n.parse=="function"}var Mi,n0,np,i0,s0,r0,SN,AN;const eF=10;class CN extends av{constructor(){super(...arguments),Mi.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var i;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(i=e.choices[0])==null?void 0:i.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),TN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Qm(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),me(this,Mi,"m",n0).call(this)}async finalMessage(){return await this.done(),me(this,Mi,"m",np).call(this)}async finalFunctionToolCall(){return await this.done(),me(this,Mi,"m",i0).call(this)}async finalFunctionToolCallResult(){return await this.done(),me(this,Mi,"m",s0).call(this)}async totalUsage(){return await this.done(),me(this,Mi,"m",r0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=me(this,Mi,"m",np).call(this);t&&this._emit("finalMessage",t);const i=me(this,Mi,"m",n0).call(this);i&&this._emit("finalContent",i);const r=me(this,Mi,"m",i0).call(this);r&&this._emit("finalFunctionToolCall",r);const a=me(this,Mi,"m",s0).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",me(this,Mi,"m",r0).call(this))}async _createChatCompletion(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),me(this,Mi,"m",SN).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ov(a,t))}async _runChatCompletion(e,t,i){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,i)}async _runTools(e,t,i){var N,O,V;const r="tool",{tool_choice:a="auto",stream:c,...f}=t,m=typeof a!="string"&&a.type==="function"&&((N=a==null?void 0:a.function)==null?void 0:N.name),{maxChatCompletions:p=eF}=i||{},x=t.tools.map(P=>{if(Ph(P)){if(!P.$callback)throw new Ye("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:P.$callback,name:P.function.name,description:P.function.description||"",parameters:P.function.parameters,parse:P.$parseRaw,strict:!0}}}return P}),T={};for(const P of x)P.type==="function"&&(T[P.function.name||P.function.function.name]=P.function);const S="tools"in t?x.map(P=>P.type==="function"?{type:"function",function:{name:P.function.name||P.function.function.name,parameters:P.function.parameters,description:P.function.description,strict:P.function.strict}}:P):void 0;for(const P of t.messages)this._addMessage(P,!1);for(let P=0;P<p;++P){const W=(O=(await this._createChatCompletion(e,{...f,tool_choice:a,tools:S,messages:[...this.messages]},i)).choices[0])==null?void 0:O.message;if(!W)throw new Ye("missing message in ChatCompletion response");if(!((V=W.tool_calls)!=null&&V.length))return;for(const H of W.tool_calls){if(H.type!=="function")continue;const j=H.id,{name:Z,arguments:Y}=H.function,D=T[Z];if(D){if(m&&m!==Z){const $=`Invalid tool_call: ${JSON.stringify(Z)}. ${JSON.stringify(m)} requested. Please try again`;this._addMessage({role:r,tool_call_id:j,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(Z)}. Available options are: ${Object.keys(T).map(te=>JSON.stringify(te)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:j,content:$});continue}let k;try{k=QB(D)?await D.parse(Y):Y}catch($){const te=$ instanceof Error?$.message:String($);this._addMessage({role:r,tool_call_id:j,content:te});continue}const U=await D.function(k,this),G=me(this,Mi,"m",AN).call(this,U);if(this._addMessage({role:r,tool_call_id:j,content:G}),m)return}}}}Mi=new WeakSet,n0=function(){return me(this,Mi,"m",np).call(this).content??null},np=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Qm(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Ye("stream ended without producing a ChatCompletionMessage with role=assistant")},i0=function(){var e,t;for(let i=this.messages.length-1;i>=0;i--){const r=this.messages[i];if(Qm(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.filter(a=>a.type==="function").at(-1))==null?void 0:t.function}},s0=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(TN(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(i=>{var r;return i.role==="assistant"&&((r=i.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},r0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},SN=function(e){if(e.n!=null&&e.n>1)throw new Ye("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},AN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class lv extends CN{static runTools(e,t,i){const r=new lv,a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),Qm(e)&&e.content&&this._emit("content",e.content)}}const NN=1,IN=2,RN=4,MN=8,PN=16,kN=32,DN=64,LN=128,ON=256,UN=LN|ON,VN=PN|kN|UN|DN,BN=NN|IN|VN,FN=RN|MN,tF=BN|FN,Zn={STR:NN,NUM:IN,ARR:RN,OBJ:MN,NULL:PN,BOOL:kN,NAN:DN,INFINITY:LN,MINUS_INFINITY:ON,INF:UN,SPECIAL:VN,ATOM:BN,COLLECTION:FN,ALL:tF};class nF extends Error{}class iF extends Error{}function sF(n,e=Zn.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return rF(n.trim(),e)}const rF=(n,e)=>{const t=n.length;let i=0;const r=S=>{throw new nF(`${S} at position ${i}`)},a=S=>{throw new iF(`${S} at position ${i}`)},c=()=>(T(),i>=t&&r("Unexpected end of input"),n[i]==='"'?f():n[i]==="{"?m():n[i]==="["?p():n.substring(i,i+4)==="null"||Zn.NULL&e&&t-i<4&&"null".startsWith(n.substring(i))?(i+=4,null):n.substring(i,i+4)==="true"||Zn.BOOL&e&&t-i<4&&"true".startsWith(n.substring(i))?(i+=4,!0):n.substring(i,i+5)==="false"||Zn.BOOL&e&&t-i<5&&"false".startsWith(n.substring(i))?(i+=5,!1):n.substring(i,i+8)==="Infinity"||Zn.INFINITY&e&&t-i<8&&"Infinity".startsWith(n.substring(i))?(i+=8,1/0):n.substring(i,i+9)==="-Infinity"||Zn.MINUS_INFINITY&e&&1<t-i&&t-i<9&&"-Infinity".startsWith(n.substring(i))?(i+=9,-1/0):n.substring(i,i+3)==="NaN"||Zn.NAN&e&&t-i<3&&"NaN".startsWith(n.substring(i))?(i+=3,NaN):x()),f=()=>{const S=i;let N=!1;for(i++;i<t&&(n[i]!=='"'||N&&n[i-1]==="\\");)N=n[i]==="\\"?!N:!1,i++;if(n.charAt(i)=='"')try{return JSON.parse(n.substring(S,++i-Number(N)))}catch(O){a(String(O))}else if(Zn.STR&e)try{return JSON.parse(n.substring(S,i-Number(N))+'"')}catch{return JSON.parse(n.substring(S,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},m=()=>{i++,T();const S={};try{for(;n[i]!=="}";){if(T(),i>=t&&Zn.OBJ&e)return S;const N=f();T(),i++;try{const O=c();Object.defineProperty(S,N,{value:O,writable:!0,enumerable:!0,configurable:!0})}catch(O){if(Zn.OBJ&e)return S;throw O}T(),n[i]===","&&i++}}catch{if(Zn.OBJ&e)return S;r("Expected '}' at end of object")}return i++,S},p=()=>{i++;const S=[];try{for(;n[i]!=="]";)S.push(c()),T(),n[i]===","&&i++}catch{if(Zn.ARR&e)return S;r("Expected ']' at end of array")}return i++,S},x=()=>{if(i===0){n==="-"&&Zn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(N){if(Zn.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(N))}}const S=i;for(n[i]==="-"&&i++;n[i]&&!",]}".includes(n[i]);)i++;i==t&&!(Zn.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(S,i))}catch{n.substring(S,i)==="-"&&Zn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(S,n.lastIndexOf("e")))}catch(O){a(String(O))}}},T=()=>{for(;i<t&&` 
\r	`.includes(n[i]);)i++};return c()},SS=n=>sF(n,Zn.ALL^Zn.NUM);var Vn,ko,ec,Oa,dy,sm,hy,fy,my,rm,py,AS;class vh extends CN{constructor(e){super(),Vn.add(this),ko.set(this,void 0),ec.set(this,void 0),Oa.set(this,void 0),it(this,ko,e),it(this,ec,[])}get currentChatCompletionSnapshot(){return me(this,Oa,"f")}static fromReadableStream(e){const t=new vh(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){const r=new vh(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,i){var c;super._createChatCompletion;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),me(this,Vn,"m",dy).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const f of a)me(this,Vn,"m",hy).call(this,f);if((c=a.controller.signal)!=null&&c.aborted)throw new $s;return this._addChatCompletion(me(this,Vn,"m",rm).call(this))}async _fromReadableStream(e,t){var c;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),me(this,Vn,"m",dy).call(this),this._connected();const r=Zr.fromReadableStream(e,this.controller);let a;for await(const f of r)a&&a!==f.id&&this._addChatCompletion(me(this,Vn,"m",rm).call(this)),me(this,Vn,"m",hy).call(this,f),a=f.id;if((c=r.controller.signal)!=null&&c.aborted)throw new $s;return this._addChatCompletion(me(this,Vn,"m",rm).call(this))}[(ko=new WeakMap,ec=new WeakMap,Oa=new WeakMap,Vn=new WeakSet,dy=function(){this.ended||it(this,Oa,void 0)},sm=function(t){let i=me(this,ec,"f")[t.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},me(this,ec,"f")[t.index]=i,i)},hy=function(t){var r,a,c,f,m,p,x,T,S,N,O,V,P,Q,W;if(this.ended)return;const i=me(this,Vn,"m",AS).call(this,t);this._emit("chunk",t,i);for(const H of t.choices){const j=i.choices[H.index];H.delta.content!=null&&((r=j.message)==null?void 0:r.role)==="assistant"&&((a=j.message)!=null&&a.content)&&(this._emit("content",H.delta.content,j.message.content),this._emit("content.delta",{delta:H.delta.content,snapshot:j.message.content,parsed:j.message.parsed})),H.delta.refusal!=null&&((c=j.message)==null?void 0:c.role)==="assistant"&&((f=j.message)!=null&&f.refusal)&&this._emit("refusal.delta",{delta:H.delta.refusal,snapshot:j.message.refusal}),((m=H.logprobs)==null?void 0:m.content)!=null&&((p=j.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(x=H.logprobs)==null?void 0:x.content,snapshot:((T=j.logprobs)==null?void 0:T.content)??[]}),((S=H.logprobs)==null?void 0:S.refusal)!=null&&((N=j.message)==null?void 0:N.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(O=H.logprobs)==null?void 0:O.refusal,snapshot:((V=j.logprobs)==null?void 0:V.refusal)??[]});const Z=me(this,Vn,"m",sm).call(this,j);j.finish_reason&&(me(this,Vn,"m",my).call(this,j),Z.current_tool_call_index!=null&&me(this,Vn,"m",fy).call(this,j,Z.current_tool_call_index));for(const Y of H.delta.tool_calls??[])Z.current_tool_call_index!==Y.index&&(me(this,Vn,"m",my).call(this,j),Z.current_tool_call_index!=null&&me(this,Vn,"m",fy).call(this,j,Z.current_tool_call_index)),Z.current_tool_call_index=Y.index;for(const Y of H.delta.tool_calls??[]){const D=(P=j.message.tool_calls)==null?void 0:P[Y.index];D!=null&&D.type&&((D==null?void 0:D.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(Q=D.function)==null?void 0:Q.name,index:Y.index,arguments:D.function.arguments,parsed_arguments:D.function.parsed_arguments,arguments_delta:((W=Y.function)==null?void 0:W.arguments)??""}):(D==null||D.type,void 0))}}},fy=function(t,i){var c,f,m;if(me(this,Vn,"m",sm).call(this,t).done_tool_calls.has(i))return;const a=(c=t.message.tool_calls)==null?void 0:c[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const p=(m=(f=me(this,ko,"f"))==null?void 0:f.tools)==null?void 0:m.find(x=>Xm(x)&&x.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:Ph(p)?p.$parseRaw(a.function.arguments):p!=null&&p.function.strict?JSON.parse(a.function.arguments):null})}else a.type},my=function(t){var r,a;const i=me(this,Vn,"m",sm).call(this,t);if(t.message.content&&!i.content_done){i.content_done=!0;const c=me(this,Vn,"m",py).call(this);this._emit("content.done",{content:t.message.content,parsed:c?c.$parseRaw(t.message.content):null})}t.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},rm=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=me(this,Oa,"f");if(!t)throw new Ye("request ended without sending any chunks");return it(this,Oa,void 0),it(this,ec,[]),oF(t,me(this,ko,"f"))},py=function(){var i;const t=(i=me(this,ko,"f"))==null?void 0:i.response_format;return rv(t)?t:null},AS=function(t){var i,r,a,c;let f=me(this,Oa,"f");const{choices:m,...p}=t;f?Object.assign(f,p):f=it(this,Oa,{...p,choices:[]});for(const{delta:x,finish_reason:T,index:S,logprobs:N=null,...O}of t.choices){let V=f.choices[S];if(V||(V=f.choices[S]={finish_reason:T,index:S,message:{},logprobs:N,...O}),N)if(!V.logprobs)V.logprobs=Object.assign({},N);else{const{content:Y,refusal:D,...k}=N;Object.assign(V.logprobs,k),Y&&((i=V.logprobs).content??(i.content=[]),V.logprobs.content.push(...Y)),D&&((r=V.logprobs).refusal??(r.refusal=[]),V.logprobs.refusal.push(...D))}if(T&&(V.finish_reason=T,me(this,ko,"f")&&wN(me(this,ko,"f")))){if(T==="length")throw new nN;if(T==="content_filter")throw new iN}if(Object.assign(V,O),!x)continue;const{content:P,refusal:Q,function_call:W,role:H,tool_calls:j,...Z}=x;if(Object.assign(V.message,Z),Q&&(V.message.refusal=(V.message.refusal||"")+Q),H&&(V.message.role=H),W&&(V.message.function_call?(W.name&&(V.message.function_call.name=W.name),W.arguments&&((a=V.message.function_call).arguments??(a.arguments=""),V.message.function_call.arguments+=W.arguments)):V.message.function_call=W),P&&(V.message.content=(V.message.content||"")+P,!V.message.refusal&&me(this,Vn,"m",py).call(this)&&(V.message.parsed=SS(V.message.content))),j){V.message.tool_calls||(V.message.tool_calls=[]);for(const{index:Y,id:D,type:k,function:U,...G}of j){const $=(c=V.message.tool_calls)[Y]??(c[Y]={});Object.assign($,G),D&&($.id=D),k&&($.type=k),U&&($.function??($.function={name:U.name??"",arguments:""})),U!=null&&U.name&&($.function.name=U.name),U!=null&&U.arguments&&($.function.arguments+=U.arguments,ZB(me(this,ko,"f"),$)&&($.function.parsed_arguments=SS($.function.arguments)))}}}return f},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function oF(n,e){const{id:t,choices:i,created:r,model:a,system_fingerprint:c,...f}=n,m={...f,id:t,choices:i.map(({message:p,finish_reason:x,index:T,logprobs:S,...N})=>{if(!x)throw new Ye(`missing finish_reason for choice ${T}`);const{content:O=null,function_call:V,tool_calls:P,...Q}=p,W=p.role;if(!W)throw new Ye(`missing role for choice ${T}`);if(V){const{arguments:H,name:j}=V;if(H==null)throw new Ye(`missing function_call.arguments for choice ${T}`);if(!j)throw new Ye(`missing function_call.name for choice ${T}`);return{...N,message:{content:O,function_call:{arguments:H,name:j},role:W,refusal:p.refusal??null},finish_reason:x,index:T,logprobs:S}}return P?{...N,index:T,finish_reason:x,logprobs:S,message:{...Q,role:W,content:O,refusal:p.refusal??null,tool_calls:P.map((H,j)=>{const{function:Z,type:Y,id:D,...k}=H,{arguments:U,name:G,...$}=Z||{};if(D==null)throw new Ye(`missing choices[${T}].tool_calls[${j}].id
${om(n)}`);if(Y==null)throw new Ye(`missing choices[${T}].tool_calls[${j}].type
${om(n)}`);if(G==null)throw new Ye(`missing choices[${T}].tool_calls[${j}].function.name
${om(n)}`);if(U==null)throw new Ye(`missing choices[${T}].tool_calls[${j}].function.arguments
${om(n)}`);return{...k,id:D,type:Y,function:{...$,name:G,arguments:U}}})}}:{...N,message:{...Q,content:O,role:W,refusal:p.refusal??null},finish_reason:x,index:T,logprobs:S}}),created:r,model:a,object:"chat.completion",...c?{system_fingerprint:c}:{}};return KB(m,e)}function om(n){return JSON.stringify(n)}class ip extends vh{static fromReadableStream(e){const t=new ip(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,i){const r=new ip(t),a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let uv=class extends Je{constructor(){super(...arguments),this.messages=new xN(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(Re`/chat/completions/${e}`,t)}update(e,t,i){return this._client.post(Re`/chat/completions/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/chat/completions",Dn,{query:e,...t})}delete(e,t){return this._client.delete(Re`/chat/completions/${e}`,t)}parse(e,t){return XB(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>ov(i,e))}runTools(e,t){return e.stream?ip.runTools(this._client,e,t):lv.runTools(this._client,e,t)}stream(e,t){return vh.createChatCompletion(this._client,e,t)}};uv.Messages=xN;class cv extends Je{constructor(){super(...arguments),this.completions=new uv(this._client)}}cv.Completions=uv;const zN=Symbol("brand.privateNullableHeaders");function*aF(n){if(!n)return;if(zN in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():cS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=cS(i[1])?i[1]:[i[1]];let c=!1;for(const f of a)f!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,f])}}const qe=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,c]of aF(i)){const f=a.toLowerCase();r.has(f)||(e.delete(a),r.add(f)),c===null?(e.delete(a),t.add(f)):(e.append(a,c),t.delete(f))}}return{[zN]:!0,values:e,nulls:t}};class jN extends Je{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:qe([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class HN extends Je{create(e,t){return this._client.post("/audio/transcriptions",tu({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class qN extends Je{create(e,t){return this._client.post("/audio/translations",tu({body:e,...t,__metadata:{model:e.model}},this._client))}}class kh extends Je{constructor(){super(...arguments),this.transcriptions=new HN(this._client),this.translations=new qN(this._client),this.speech=new jN(this._client)}}kh.Transcriptions=HN;kh.Translations=qN;kh.Speech=jN;class GN extends Je{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(Re`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",Dn,{query:e,...t})}cancel(e,t){return this._client.post(Re`/batches/${e}/cancel`,t)}}class $N extends Je{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Re`/assistants/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(Re`/assistants/${e}`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/assistants",Dn,{query:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(Re`/assistants/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let JN=class extends Je{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};class KN extends Je{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let zp=class extends Je{constructor(){super(...arguments),this.sessions=new JN(this._client),this.transcriptionSessions=new KN(this._client)}};zp.Sessions=JN;zp.TranscriptionSessions=KN;class YN extends Je{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}cancel(e,t){return this._client.post(Re`/chatkit/sessions/${e}/cancel`,{...t,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}}let WN=class extends Je{retrieve(e,t){return this._client.get(Re`/chatkit/threads/${e}`,{...t,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",Zm,{query:e,...t,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(Re`/chatkit/threads/${e}`,{...t,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}listItems(e,t={},i){return this._client.getAPIList(Re`/chatkit/threads/${e}/items`,Zm,{query:t,...i,headers:qe([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}};class jp extends Je{constructor(){super(...arguments),this.sessions=new YN(this._client),this.threads=new WN(this._client)}}jp.Sessions=YN;jp.Threads=WN;class ZN extends Je{create(e,t,i){return this._client.post(Re`/threads/${e}/messages`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(Re`/threads/${r}/messages/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(Re`/threads/${r}/messages/${e}`,{body:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(Re`/threads/${e}/messages`,Dn,{query:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{thread_id:r}=t;return this._client.delete(Re`/threads/${r}/messages/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class XN extends Je{retrieve(e,t,i){const{thread_id:r,run_id:a,...c}=t;return this._client.get(Re`/threads/${r}/runs/${a}/steps/${e}`,{query:c,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t,i){const{thread_id:r,...a}=t;return this._client.getAPIList(Re`/threads/${r}/runs/${e}/steps`,Dn,{query:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}const lF=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var gy={};const tc=n=>{var e,t,i,r;if(typeof globalThis.process<"u")return((e=gy==null?void 0:gy[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(i=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:i.call(t,n))==null?void 0:r.trim()};var si,Kl,o0,Yr,Sm,pr,Yl,mc,Jl,sp,xs,Am,Cm,sh,Wd,Zd,CS,NS,IS,RS,MS,PS,kS;class rh extends av{constructor(){super(...arguments),si.add(this),o0.set(this,[]),Yr.set(this,{}),Sm.set(this,{}),pr.set(this,void 0),Yl.set(this,void 0),mc.set(this,void 0),Jl.set(this,void 0),sp.set(this,void 0),xs.set(this,void 0),Am.set(this,void 0),Cm.set(this,void 0),sh.set(this,void 0)}[(o0=new WeakMap,Yr=new WeakMap,Sm=new WeakMap,pr=new WeakMap,Yl=new WeakMap,mc=new WeakMap,Jl=new WeakMap,sp=new WeakMap,xs=new WeakMap,Am=new WeakMap,Cm=new WeakMap,sh=new WeakMap,si=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Kl;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Zr.fromReadableStream(e,this.controller);for await(const c of r)me(this,si,"m",Wd).call(this,c);if((a=r.controller.signal)!=null&&a.aborted)throw new $s;return this._addRun(me(this,si,"m",Zd).call(this))}toReadableStream(){return new Zr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r){const a=new Kl;return a._run(()=>a._runToolAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,i,r){var m;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...i,stream:!0},f=await e.submitToolOutputs(t,c,{...r,signal:this.controller.signal});this._connected();for await(const p of f)me(this,si,"m",Wd).call(this,p);if((m=f.controller.signal)!=null&&m.aborted)throw new $s;return this._addRun(me(this,si,"m",Zd).call(this))}static createThreadAssistantStream(e,t,i){const r=new Kl;return r._run(()=>r._threadAssistantStream(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,i,r){const a=new Kl;return a._run(()=>a._runAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return me(this,Am,"f")}currentRun(){return me(this,Cm,"f")}currentMessageSnapshot(){return me(this,pr,"f")}currentRunStepSnapshot(){return me(this,sh,"f")}async finalRunSteps(){return await this.done(),Object.values(me(this,Yr,"f"))}async finalMessages(){return await this.done(),Object.values(me(this,Sm,"f"))}async finalRun(){if(await this.done(),!me(this,Yl,"f"))throw Error("Final run was not received.");return me(this,Yl,"f")}async _createThreadAssistantStream(e,t,i){var f;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},c=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const m of c)me(this,si,"m",Wd).call(this,m);if((f=c.controller.signal)!=null&&f.aborted)throw new $s;return this._addRun(me(this,si,"m",Zd).call(this))}async _createAssistantStream(e,t,i,r){var m;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...i,stream:!0},f=await e.create(t,c,{...r,signal:this.controller.signal});this._connected();for await(const p of f)me(this,si,"m",Wd).call(this,p);if((m=f.controller.signal)!=null&&m.aborted)throw new $s;return this._addRun(me(this,si,"m",Zd).call(this))}static accumulateDelta(e,t){for(const[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(ly(a)&&ly(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(c=>typeof c=="string"||typeof c=="number")){a.push(...r);continue}for(const c of r){if(!ly(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const f=c.index;if(f==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof f!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${f}`);const m=a[f];m==null?a.push(c):a[f]=this.accumulateDelta(m,c)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,i){return await this._createThreadAssistantStream(t,e,i)}async _runAssistantStream(e,t,i,r){return await this._createAssistantStream(t,e,i,r)}async _runToolAssistantStream(e,t,i,r){return await this._createToolAssistantStream(t,e,i,r)}}Kl=rh,Wd=function(e){if(!this.ended)switch(it(this,Am,e),me(this,si,"m",IS).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":me(this,si,"m",kS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":me(this,si,"m",NS).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":me(this,si,"m",CS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Zd=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");if(!me(this,Yl,"f"))throw Error("Final run has not been received");return me(this,Yl,"f")},CS=function(e){const[t,i]=me(this,si,"m",MS).call(this,e,me(this,pr,"f"));it(this,pr,t),me(this,Sm,"f")[t.id]=t;for(const r of i){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,c=t.content[r.index];if(c&&c.type=="text")this._emit("textDelta",a,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=me(this,mc,"f")){if(me(this,Jl,"f"))switch(me(this,Jl,"f").type){case"text":this._emit("textDone",me(this,Jl,"f").text,me(this,pr,"f"));break;case"image_file":this._emit("imageFileDone",me(this,Jl,"f").image_file,me(this,pr,"f"));break}it(this,mc,r.index)}it(this,Jl,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(me(this,mc,"f")!==void 0){const r=e.data.content[me(this,mc,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,me(this,pr,"f"));break;case"text":this._emit("textDone",r.text,me(this,pr,"f"));break}}me(this,pr,"f")&&this._emit("messageDone",e.data),it(this,pr,void 0)}},NS=function(e){const t=me(this,si,"m",RS).call(this,e);switch(it(this,sh,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==me(this,sp,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(me(this,xs,"f")&&this._emit("toolCallDone",me(this,xs,"f")),it(this,sp,a.index),it(this,xs,t.step_details.tool_calls[a.index]),me(this,xs,"f")&&this._emit("toolCallCreated",me(this,xs,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":it(this,sh,void 0),e.data.step_details.type=="tool_calls"&&me(this,xs,"f")&&(this._emit("toolCallDone",me(this,xs,"f")),it(this,xs,void 0)),this._emit("runStepDone",e.data,t);break}},IS=function(e){me(this,o0,"f").push(e),this._emit("event",e)},RS=function(e){switch(e.event){case"thread.run.step.created":return me(this,Yr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=me(this,Yr,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Kl.accumulateDelta(t,i.delta);me(this,Yr,"f")[e.data.id]=r}return me(this,Yr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":me(this,Yr,"f")[e.data.id]=e.data;break}if(me(this,Yr,"f")[e.data.id])return me(this,Yr,"f")[e.data.id];throw new Error("No snapshot available")},MS=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let c=t.content[a.index];t.content[a.index]=me(this,si,"m",PS).call(this,a,c)}else t.content[a.index]=a,i.push(a);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},PS=function(e,t){return Kl.accumulateDelta(t,e)},kS=function(e){switch(it(this,Cm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":it(this,Yl,e.data),me(this,xs,"f")&&(this._emit("toolCallDone",me(this,xs,"f")),it(this,xs,void 0));break}};let dv=class extends Je{constructor(){super(...arguments),this.steps=new XN(this._client)}create(e,t,i){const{include:r,...a}=t;return this._client.post(Re`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(Re`/threads/${r}/runs/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(Re`/threads/${r}/runs/${e}`,{body:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(Re`/threads/${e}/runs`,Dn,{query:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{thread_id:r}=t;return this._client.post(Re`/threads/${r}/runs/${e}/cancel`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,t,i){return rh.createAssistantStream(e,this._client.beta.threads.runs,t,i)}async poll(e,t,i){var a;const r=qe([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:c,response:f}=await this.retrieve(e,t,{...i,headers:{...i==null?void 0:i.headers,...r}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let m=5e3;if(i!=null&&i.pollIntervalMs)m=i.pollIntervalMs;else{const p=f.headers.get("openai-poll-after-ms");if(p){const x=parseInt(p);isNaN(x)||(m=x)}}await Mh(m);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(e,t,i){return rh.createAssistantStream(e,this._client.beta.threads.runs,t,i)}submitToolOutputs(e,t,i){const{thread_id:r,...a}=t;return this._client.post(Re`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,i){const r=await this.submitToolOutputs(e,t,i);return await this.poll(r.id,t,i)}submitToolOutputsStream(e,t,i){return rh.createToolAssistantStream(e,this._client.beta.threads.runs,t,i)}};dv.Steps=XN;class Hp extends Je{constructor(){super(...arguments),this.runs=new dv(this._client),this.messages=new ZN(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Re`/threads/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(Re`/threads/${e}`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t){return this._client.delete(Re`/threads/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const i=await this.createAndRun(e,t);return await this.runs.poll(i.id,{thread_id:i.thread_id},t)}createAndRunStream(e,t){return rh.createThreadAssistantStream(e,this._client.beta.threads,t)}}Hp.Runs=dv;Hp.Messages=ZN;class Bc extends Je{constructor(){super(...arguments),this.realtime=new zp(this._client),this.chatkit=new jp(this._client),this.assistants=new $N(this._client),this.threads=new Hp(this._client)}}Bc.Realtime=zp;Bc.ChatKit=jp;Bc.Assistants=$N;Bc.Threads=Hp;class QN extends Je{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class eI extends Je{retrieve(e,t,i){const{container_id:r}=t;return this._client.get(Re`/containers/${r}/files/${e}/content`,{...i,headers:qe([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}}let hv=class extends Je{constructor(){super(...arguments),this.content=new eI(this._client)}create(e,t,i){return this._client.post(Re`/containers/${e}/files`,tu({body:t,...i},this._client))}retrieve(e,t,i){const{container_id:r}=t;return this._client.get(Re`/containers/${r}/files/${e}`,i)}list(e,t={},i){return this._client.getAPIList(Re`/containers/${e}/files`,Dn,{query:t,...i})}delete(e,t,i){const{container_id:r}=t;return this._client.delete(Re`/containers/${r}/files/${e}`,{...i,headers:qe([{Accept:"*/*"},i==null?void 0:i.headers])})}};hv.Content=eI;class fv extends Je{constructor(){super(...arguments),this.files=new hv(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(Re`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",Dn,{query:e,...t})}delete(e,t){return this._client.delete(Re`/containers/${e}`,{...t,headers:qe([{Accept:"*/*"},t==null?void 0:t.headers])})}}fv.Files=hv;class tI extends Je{create(e,t,i){const{include:r,...a}=t;return this._client.post(Re`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,t,i){const{conversation_id:r,...a}=t;return this._client.get(Re`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,t={},i){return this._client.getAPIList(Re`/conversations/${e}/items`,Zm,{query:t,...i})}delete(e,t,i){const{conversation_id:r}=t;return this._client.delete(Re`/conversations/${r}/items/${e}`,i)}}class mv extends Je{constructor(){super(...arguments),this.items=new tI(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(Re`/conversations/${e}`,t)}update(e,t,i){return this._client.post(Re`/conversations/${e}`,{body:t,...i})}delete(e,t){return this._client.delete(Re`/conversations/${e}`,t)}}mv.Items=tI;class nI extends Je{create(e,t){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&ii(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return i?a:(ii(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(c=>(c&&c.data&&c.data.forEach(f=>{const m=f.embedding;f.embedding=lF(m)}),c)))}}class iI extends Je{retrieve(e,t,i){const{eval_id:r,run_id:a}=t;return this._client.get(Re`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,t,i){const{eval_id:r,...a}=t;return this._client.getAPIList(Re`/evals/${r}/runs/${e}/output_items`,Dn,{query:a,...i})}}class pv extends Je{constructor(){super(...arguments),this.outputItems=new iI(this._client)}create(e,t,i){return this._client.post(Re`/evals/${e}/runs`,{body:t,...i})}retrieve(e,t,i){const{eval_id:r}=t;return this._client.get(Re`/evals/${r}/runs/${e}`,i)}list(e,t={},i){return this._client.getAPIList(Re`/evals/${e}/runs`,Dn,{query:t,...i})}delete(e,t,i){const{eval_id:r}=t;return this._client.delete(Re`/evals/${r}/runs/${e}`,i)}cancel(e,t,i){const{eval_id:r}=t;return this._client.post(Re`/evals/${r}/runs/${e}`,i)}}pv.OutputItems=iI;class gv extends Je{constructor(){super(...arguments),this.runs=new pv(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(Re`/evals/${e}`,t)}update(e,t,i){return this._client.post(Re`/evals/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/evals",Dn,{query:e,...t})}delete(e,t){return this._client.delete(Re`/evals/${e}`,t)}}gv.Runs=pv;let sI=class extends Je{create(e,t){return this._client.post("/files",tu({body:e,...t},this._client))}retrieve(e,t){return this._client.get(Re`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",Dn,{query:e,...t})}delete(e,t){return this._client.delete(Re`/files/${e}`,t)}content(e,t){return this._client.get(Re`/files/${e}/content`,{...t,headers:qe([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let c=await this.retrieve(e);for(;!c.status||!r.has(c.status);)if(await Mh(t),c=await this.retrieve(e),Date.now()-a>i)throw new tv({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return c}};class rI extends Je{}let oI=class extends Je{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class _v extends Je{constructor(){super(...arguments),this.graders=new oI(this._client)}}_v.Graders=oI;class aI extends Je{create(e,t,i){return this._client.getAPIList(Re`/fine_tuning/checkpoints/${e}/permissions`,Fp,{body:t,method:"post",...i})}retrieve(e,t={},i){return this._client.get(Re`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...i})}delete(e,t,i){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(Re`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let yv=class extends Je{constructor(){super(...arguments),this.permissions=new aI(this._client)}};yv.Permissions=aI;class lI extends Je{list(e,t={},i){return this._client.getAPIList(Re`/fine_tuning/jobs/${e}/checkpoints`,Dn,{query:t,...i})}}class vv extends Je{constructor(){super(...arguments),this.checkpoints=new lI(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(Re`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",Dn,{query:e,...t})}cancel(e,t){return this._client.post(Re`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},i){return this._client.getAPIList(Re`/fine_tuning/jobs/${e}/events`,Dn,{query:t,...i})}pause(e,t){return this._client.post(Re`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(Re`/fine_tuning/jobs/${e}/resume`,t)}}vv.Checkpoints=lI;class Fc extends Je{constructor(){super(...arguments),this.methods=new rI(this._client),this.jobs=new vv(this._client),this.checkpoints=new yv(this._client),this.alpha=new _v(this._client)}}Fc.Methods=rI;Fc.Jobs=vv;Fc.Checkpoints=yv;Fc.Alpha=_v;class uI extends Je{}class xv extends Je{constructor(){super(...arguments),this.graderModels=new uI(this._client)}}xv.GraderModels=uI;class cI extends Je{createVariation(e,t){return this._client.post("/images/variations",tu({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",tu({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class dI extends Je{retrieve(e,t){return this._client.get(Re`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Fp,e)}delete(e,t){return this._client.delete(Re`/models/${e}`,t)}}class hI extends Je{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class fI extends Je{accept(e,t,i){return this._client.post(Re`/realtime/calls/${e}/accept`,{body:t,...i,headers:qe([{Accept:"*/*"},i==null?void 0:i.headers])})}hangup(e,t){return this._client.post(Re`/realtime/calls/${e}/hangup`,{...t,headers:qe([{Accept:"*/*"},t==null?void 0:t.headers])})}refer(e,t,i){return this._client.post(Re`/realtime/calls/${e}/refer`,{body:t,...i,headers:qe([{Accept:"*/*"},i==null?void 0:i.headers])})}reject(e,t={},i){return this._client.post(Re`/realtime/calls/${e}/reject`,{body:t,...i,headers:qe([{Accept:"*/*"},i==null?void 0:i.headers])})}}class mI extends Je{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class qp extends Je{constructor(){super(...arguments),this.clientSecrets=new mI(this._client),this.calls=new fI(this._client)}}qp.ClientSecrets=mI;qp.Calls=fI;function uF(n,e){return!e||!dF(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(i=>({...i,parsed:null}))}:t)}:pI(n,e)}function pI(n,e){const t=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:mF(e,r)};if(r.type==="message"){const a=r.content.map(c=>c.type==="output_text"?{...c,parsed:cF(e,c.text)}:c);return{...r,content:a}}return r}),i=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||a0(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function cF(n,e){var t,i,r,a;return((i=(t=n.text)==null?void 0:t.format)==null?void 0:i.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function dF(n){var e;return!!rv((e=n.text)==null?void 0:e.format)}function hF(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function fF(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function mF(n,e){const t=fF(n.tools??[],e.name);return{...e,...e,parsed_arguments:hF(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function a0(n){const e=[];for(const t of n.output)if(t.type==="message")for(const i of t.content)i.type==="output_text"&&e.push(i.text);n.output_text=e.join("")}var nc,am,Ua,lm,DS,LS,OS,US;class wv extends av{constructor(e){super(),nc.add(this),am.set(this,void 0),Ua.set(this,void 0),lm.set(this,void 0),it(this,am,e)}static createResponse(e,t,i){const r=new wv(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,i){var f;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),me(this,nc,"m",DS).call(this);let a,c=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),c=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const m of a)me(this,nc,"m",LS).call(this,m,c);if((f=a.controller.signal)!=null&&f.aborted)throw new $s;return me(this,nc,"m",OS).call(this)}[(am=new WeakMap,Ua=new WeakMap,lm=new WeakMap,nc=new WeakSet,DS=function(){this.ended||it(this,Ua,void 0)},LS=function(t,i){if(this.ended)return;const r=(c,f)=>{(i==null||f.sequence_number>i)&&this._emit(c,f)},a=me(this,nc,"m",US).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const c=a.output[t.output_index];if(!c)throw new Ye(`missing output at index ${t.output_index}`);if(c.type==="message"){const f=c.content[t.content_index];if(!f)throw new Ye(`missing content at index ${t.content_index}`);if(f.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${f.type}`);r("response.output_text.delta",{...t,snapshot:f.text})}break}case"response.function_call_arguments.delta":{const c=a.output[t.output_index];if(!c)throw new Ye(`missing output at index ${t.output_index}`);c.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:c.arguments});break}default:r(t.type,t);break}},OS=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=me(this,Ua,"f");if(!t)throw new Ye("request ended without sending any events");it(this,Ua,void 0);const i=pF(t,me(this,am,"f"));return it(this,lm,i),i},US=function(t){var r;let i=me(this,Ua,"f");if(!i){if(t.type!=="response.created")throw new Ye(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return i=it(this,Ua,t.response),i}switch(t.type){case"response.output_item.added":{i.output.push(t.item);break}case"response.content_part.added":{const a=i.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);const c=a.type,f=t.part;c==="message"&&f.type!=="reasoning_text"?a.content.push(f):c==="reasoning"&&f.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(f));break}case"response.output_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);if(a.type==="message"){const c=a.content[t.content_index];if(!c)throw new Ye(`missing content at index ${t.content_index}`);if(c.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${c.type}`);c.text+=t.delta}break}case"response.function_call_arguments.delta":{const a=i.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);a.type==="function_call"&&(a.arguments+=t.delta);break}case"response.reasoning_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);if(a.type==="reasoning"){const c=(r=a.content)==null?void 0:r[t.content_index];if(!c)throw new Ye(`missing content at index ${t.content_index}`);if(c.type!=="reasoning_text")throw new Ye(`expected content to be 'reasoning_text', got ${c.type}`);c.text+=t.delta}break}case"response.completed":{it(this,Ua,t.response);break}}return i},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=me(this,lm,"f");if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}}function pF(n,e){return uF(n,e)}class gI extends Je{list(e,t={},i){return this._client.getAPIList(Re`/responses/${e}/input_items`,Dn,{query:t,...i})}}class _I extends Je{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class Gp extends Je{constructor(){super(...arguments),this.inputItems=new gI(this._client),this.inputTokens=new _I(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&a0(i),i))}retrieve(e,t={},i){return this._client.get(Re`/responses/${e}`,{query:t,...i,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&a0(r),r))}delete(e,t){return this._client.delete(Re`/responses/${e}`,{...t,headers:qe([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(i=>pI(i,e))}stream(e,t){return wv.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(Re`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}}Gp.InputItems=gI;Gp.InputTokens=_I;class yI extends Je{create(e,t,i){return this._client.post(Re`/uploads/${e}/parts`,tu({body:t,...i},this._client))}}class bv extends Je{constructor(){super(...arguments),this.parts=new yI(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(Re`/uploads/${e}/cancel`,t)}complete(e,t,i){return this._client.post(Re`/uploads/${e}/complete`,{body:t,...i})}}bv.Parts=yI;const gF=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class vI extends Je{create(e,t,i){return this._client.post(Re`/vector_stores/${e}/file_batches`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(Re`/vector_stores/${r}/file_batches/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{vector_store_id:r}=t;return this._client.post(Re`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t);return await this.poll(e,r.id,i)}listFiles(e,t,i){const{vector_store_id:r,...a}=t;return this._client.getAPIList(Re`/vector_stores/${r}/file_batches/${e}/files`,Dn,{query:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async poll(e,t,i){var a;const r=qe([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:c,response:f}=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse();switch(c.status){case"in_progress":let m=5e3;if(i!=null&&i.pollIntervalMs)m=i.pollIntervalMs;else{const p=f.headers.get("openai-poll-after-ms");if(p){const x=parseInt(p);isNaN(x)||(m=x)}}await Mh(m);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(e,{files:t,fileIds:i=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,c=Math.min(a,t.length),f=this._client,m=t.values(),p=[...i];async function x(S){for(let N of S){const O=await f.files.create({file:N,purpose:"assistants"},r);p.push(O.id)}}const T=Array(c).fill(m).map(x);return await gF(T),await this.createAndPoll(e,{file_ids:p})}}class xI extends Je{create(e,t,i){return this._client.post(Re`/vector_stores/${e}/files`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(Re`/vector_stores/${r}/files/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{vector_store_id:r,...a}=t;return this._client.post(Re`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(Re`/vector_stores/${e}/files`,Dn,{query:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{vector_store_id:r}=t;return this._client.delete(Re`/vector_stores/${r}/files/${e}`,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}async poll(e,t,i){var a;const r=qe([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const c=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse(),f=c.data;switch(f.status){case"in_progress":let m=5e3;if(i!=null&&i.pollIntervalMs)m=i.pollIntervalMs;else{const p=c.response.headers.get("openai-poll-after-ms");if(p){const x=parseInt(p);isNaN(x)||(m=x)}}await Mh(m);break;case"failed":case"completed":return f}}}async upload(e,t,i){const r=await this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,t,i){const r=await this.upload(e,t,i);return await this.poll(e,r.id,i)}content(e,t,i){const{vector_store_id:r}=t;return this._client.getAPIList(Re`/vector_stores/${r}/files/${e}/content`,Fp,{...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class $p extends Je{constructor(){super(...arguments),this.files=new xI(this._client),this.fileBatches=new vI(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Re`/vector_stores/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(Re`/vector_stores/${e}`,{body:t,...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",Dn,{query:e,...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(Re`/vector_stores/${e}`,{...t,headers:qe([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,i){return this._client.getAPIList(Re`/vector_stores/${e}/search`,Fp,{body:t,method:"post",...i,headers:qe([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}$p.Files=xI;$p.FileBatches=vI;class wI extends Je{create(e,t){return this._client.post("/videos",bS({body:e,...t},this._client))}retrieve(e,t){return this._client.get(Re`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",Zm,{query:e,...t})}delete(e,t){return this._client.delete(Re`/videos/${e}`,t)}downloadContent(e,t={},i){return this._client.get(Re`/videos/${e}/content`,{query:t,...i,headers:qe([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}remix(e,t,i){return this._client.post(Re`/videos/${e}/remix`,bS({body:t,...i},this._client))}}var ac,bI,Nm;class TI extends Je{constructor(){super(...arguments),ac.add(this)}async unwrap(e,t,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,i,r),JSON.parse(e)}async verifySignature(e,t,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");me(this,ac,"m",bI).call(this,i);const a=qe([t]).values,c=me(this,ac,"m",Nm).call(this,a,"webhook-signature"),f=me(this,ac,"m",Nm).call(this,a,"webhook-timestamp"),m=me(this,ac,"m",Nm).call(this,a,"webhook-id"),p=parseInt(f,10);if(isNaN(p))throw new Hd("Invalid webhook timestamp format");const x=Math.floor(Date.now()/1e3);if(x-p>r)throw new Hd("Webhook timestamp is too old");if(p>x+r)throw new Hd("Webhook timestamp is too new");const T=c.split(" ").map(V=>V.startsWith("v1,")?V.substring(3):V),S=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),N=m?`${m}.${f}.${e}`:`${f}.${e}`,O=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const V of T)try{const P=Buffer.from(V,"base64");if(await crypto.subtle.verify("HMAC",O,P,new TextEncoder().encode(N)))return}catch{continue}throw new Hd("The given webhook signature does not match the expected signature")}}ac=new WeakSet,bI=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Nm=function(e,t){if(!e)throw new Error("Headers are required");const i=e.get(t);if(i==null)throw new Error(`Missing required header: ${t}`);return i};var l0,Tv,Im,EI;class _t{constructor({baseURL:e=tc("OPENAI_BASE_URL"),apiKey:t=tc("OPENAI_API_KEY"),organization:i=tc("OPENAI_ORG_ID")??null,project:r=tc("OPENAI_PROJECT_ID")??null,webhookSecret:a=tc("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(l0.add(this),Im.set(this,void 0),this.completions=new QN(this),this.chat=new cv(this),this.embeddings=new nI(this),this.files=new sI(this),this.images=new cI(this),this.audio=new kh(this),this.moderations=new hI(this),this.models=new dI(this),this.fineTuning=new Fc(this),this.graders=new xv(this),this.vectorStores=new $p(this),this.webhooks=new TI(this),this.beta=new Bc(this),this.batches=new GN(this),this.uploads=new bv(this),this.responses=new Gp(this),this.realtime=new qp(this),this.conversations=new mv(this),this.evals=new gv(this),this.containers=new fv(this),this.videos=new wI(this),t===void 0)throw new Ye("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const f={apiKey:t,organization:i,project:r,webhookSecret:a,...c,baseURL:e||"https://api.openai.com/v1"};if(!f.dangerouslyAllowBrowser&&yB())throw new Ye(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=f.baseURL,this.timeout=f.timeout??Tv.DEFAULT_TIMEOUT,this.logger=f.logger??console;const m="warn";this.logLevel=m,this.logLevel=xS(f.logLevel,"ClientOptions.logLevel",this)??xS(tc("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??m,this.fetchOptions=f.fetchOptions,this.maxRetries=f.maxRetries??2,this.fetch=f.fetch??TB(),it(this,Im,SB),this._options=f,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return qe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return MB(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${rc}`}defaultIdempotencyKey(){return`stainless-node-retry-${J1()}`}makeStatusError(e,t,i,r){return li.generate(e,t,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(i){throw i instanceof Ye?i:new Ye(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof t!="string"||!t)throw new Ye(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,i){const r=!me(this,l0,"m",EI).call(this)&&i||this.baseURL,a=fB(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return mB(c)||(t={...c,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new Bp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var Q,W;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:c,url:f,timeout:m}=await this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(c,{url:f,options:r});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(ii(this).debug(`[${p}] sending request`,Gl({retryOfRequestLogID:i,method:r.method,url:f,options:r,headers:c.headers})),(Q=r.signal)!=null&&Q.aborted)throw new $s;const S=new AbortController,N=await this.fetchWithTimeout(f,c,m,S).catch(Wy),O=Date.now();if(N instanceof globalThis.Error){const H=`retrying, ${t} attempts remaining`;if((W=r.signal)!=null&&W.aborted)throw new $s;const j=Yy(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return ii(this).info(`[${p}] connection ${j?"timed out":"failed"} - ${H}`),ii(this).debug(`[${p}] connection ${j?"timed out":"failed"} (${H})`,Gl({retryOfRequestLogID:i,url:f,durationMs:O-T,message:N.message})),this.retryRequest(r,t,i??p);throw ii(this).info(`[${p}] connection ${j?"timed out":"failed"} - error; no more retries left`),ii(this).debug(`[${p}] connection ${j?"timed out":"failed"} (error; no more retries left)`,Gl({retryOfRequestLogID:i,url:f,durationMs:O-T,message:N.message})),j?new tv:new Up({cause:N})}const V=[...N.headers.entries()].filter(([H])=>H==="x-request-id").map(([H,j])=>", "+H+": "+JSON.stringify(j)).join(""),P=`[${p}${x}${V}] ${c.method} ${f} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${O-T}ms`;if(!N.ok){const H=await this.shouldRetry(N);if(t&&H){const U=`retrying, ${t} attempts remaining`;return await EB(N.body),ii(this).info(`${P} - ${U}`),ii(this).debug(`[${p}] response error (${U})`,Gl({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:O-T})),this.retryRequest(r,t,i??p,N.headers)}const j=H?"error; no more retries left":"error; not retryable";ii(this).info(`${P} - ${j}`);const Z=await N.text().catch(U=>Wy(U).message),Y=_B(Z),D=Y?void 0:Z;throw ii(this).debug(`[${p}] response error (${j})`,Gl({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,message:D,durationMs:Date.now()-T})),this.makeStatusError(N.status,Y,D,N.headers)}return ii(this).info(P),ii(this).debug(`[${p}] response start`,Gl({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:O-T})),{response:N,options:r,controller:S,requestLogID:p,retryOfRequestLogID:i,startTime:T}}getAPIList(e,t,i){return this.requestAPIList(t,{method:"get",path:e,...i})}requestAPIList(e,t){const i=this.makeRequest(t,null,void 0);return new FB(this,i,e)}async fetchWithTimeout(e,t,i,r){const{signal:a,method:c,...f}=t||{};a&&a.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),i),p=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,x={signal:r.signal,...p?{duplex:"half"}:{},method:"GET",...f};c&&(x.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){let a;const c=r==null?void 0:r.get("retry-after-ms");if(c){const m=parseFloat(c);Number.isNaN(m)||(a=m)}const f=r==null?void 0:r.get("retry-after");if(f&&!a){const m=parseFloat(f);Number.isNaN(m)?a=Date.parse(f)-Date.now():a=m*1e3}if(!(a&&0<=a&&a<60*1e3)){const m=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,m)}return await Mh(a),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,c=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){const i={...e},{method:r,path:a,query:c,defaultBaseURL:f}=i,m=this.buildURL(a,c,f);"timeout"in i&&gB("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:p,body:x}=this.buildBody({options:i}),T=await this.buildHeaders({options:e,method:r,bodyHeaders:p,retryCount:t});return{req:{method:r,headers:T,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"},...x&&{body:x},...this.fetchOptions??{},...i.fetchOptions??{}},url:m,timeout:i.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=qe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...bB(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=qe([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oN(e)}:me(this,Im,"f").call(this,{body:e,headers:i})}}Tv=_t,Im=new WeakMap,l0=new WeakSet,EI=function(){return this.baseURL!=="https://api.openai.com/v1"};_t.OpenAI=Tv;_t.DEFAULT_TIMEOUT=6e5;_t.OpenAIError=Ye;_t.APIError=li;_t.APIConnectionError=Up;_t.APIConnectionTimeoutError=tv;_t.APIUserAbortError=$s;_t.NotFoundError=Z1;_t.ConflictError=X1;_t.RateLimitError=eN;_t.BadRequestError=K1;_t.AuthenticationError=Y1;_t.InternalServerError=tN;_t.PermissionDeniedError=W1;_t.UnprocessableEntityError=Q1;_t.InvalidWebhookSignatureError=Hd;_t.toFile=GB;_t.Completions=QN;_t.Chat=cv;_t.Embeddings=nI;_t.Files=sI;_t.Images=cI;_t.Audio=kh;_t.Moderations=hI;_t.Models=dI;_t.FineTuning=Fc;_t.Graders=xv;_t.VectorStores=$p;_t.Webhooks=TI;_t.Beta=Bc;_t.Batches=GN;_t.Uploads=bv;_t.Responses=Gp;_t.Realtime=qp;_t.Conversations=mv;_t.Evals=gv;_t.Containers=fv;_t.Videos=wI;const Jp=`You are a skeptical researcher and expert in culinary arts and travel.

When providing recommendations:
- Cite professional sources (Michelin Guide, James Beard Foundation, Lonely Planet, Fodor's, etc.)
- Filter out viral trends without substance or quality backing
- Prioritize authenticity, quality, and genuine local experiences over popularity
- Be critical of tourist traps and overhyped locations
- Provide context about why a place is recommended (awards, chef credentials, historical significance, etc.)
- Consider value for money and realistic expectations
- Warn about common tourist pitfalls

Your goal is to provide trustworthy, well-researched recommendations that travelers can rely on.`,SI=["gemini-2.0-flash-exp","gemini-1.5-flash","gemini-1.5-pro"],_F=["perplexity/sonar-reasoning-70b","google/gemini-2.0-flash-exp:free","openai/gpt-4o-mini"];SI[0];let um=null,yF=null;const AI=()=>{if(um)return um;const n="AIzaSyCcxcpj0JvtjWlyrsmEC3ZGIpQL1VOJVk0";return um=new dB({apiKey:n}),um},Sr=AI,vF=()=>yF,Ar=async(n,e,t)=>{var f,m,p,x,T;let i=null;const r=AI();if(r)for(const S of SI)try{console.log(` [GoogleDirect] Trying model: ${S}`);let N=e;typeof e=="string"?N=e:Array.isArray(e);const O=await r.models.generateContent({model:S,contents:N,config:t});console.log(` [GoogleDirect] Success with ${S}`);const V=typeof O.text=="function"?O.text():O.text;return{...O,text:V}}catch(N){if(console.warn(` [GoogleDirect] Model ${S} failed:`,(f=N.message)==null?void 0:f.substring(0,100)),N.status===404||N.status===429||N.status===503||((m=N.message)==null?void 0:m.includes("404"))||((p=N.message)==null?void 0:p.includes("429")))continue;i=N}else console.warn(" No VITE_GEMINI_API_KEY found. Skipping Google Direct phase.");console.log(" All Google Direct models failed. Switching to OpenRouter Fallback...");const a=vF();if(!a)throw console.error(" No VITE_OPENROUTER_API_KEY found. Cannot use fallback."),i||new Error("All models failed and no OpenRouter key provided.");let c=[{role:"system",content:Jp}];typeof e=="string"?c.push({role:"user",content:e}):Array.isArray(e)&&e.forEach(S=>{if(S.role&&S.content)c.push(S);else if(S.parts){const N=S.parts.map(O=>O.text?{type:"text",text:O.text}:O.inlineData?{type:"image_url",image_url:{url:`data:${O.inlineData.mimeType};base64,${O.inlineData.data}`}}:null).filter(Boolean);c.push({role:S.role||"user",content:N})}});for(const S of _F)try{console.log(` [OpenRouter] Trying model: ${S}`);const N=await a.chat.completions.create({model:S,messages:c,temperature:(t==null?void 0:t.temperature)||.7,top_p:t==null?void 0:t.topP,referer:"https://travel-planner-pro.vercel.app",appName:"Travel Planner Pro"});console.log(` [OpenRouter] Success with ${S}`);const O=((T=(x=N.choices[0])==null?void 0:x.message)==null?void 0:T.content)||"";return{text:()=>O,candidates:[{content:{parts:[{text:O}]}}]}}catch(N){if(console.warn(` [OpenRouter] Model ${S} failed:`,N),i=N,N.status===401)break}throw i||new Error("All AI Providers failed.")},xF=({trip:n,onClose:e})=>{const[t,i]=X.useState([{role:"model",text:`!      ${n.destination}.   ? (: " ?", "  ?", " "  3?")`}]),[r,a]=X.useState(""),[c,f]=X.useState(!1),m=X.useRef(null),p=()=>{var T;(T=m.current)==null||T.scrollIntoView({behavior:"smooth"})};X.useEffect(p,[t]);const x=async()=>{if(!r.trim())return;const T=r;a(""),i(S=>[...S,{role:"user",text:T}]),f(!0);try{const S=Sr(),N=`${Jp}

You are a helpful travel assistant for a specific trip.
TRIP DATA: ${JSON.stringify(n)}

User Question: ${T}

Instructions:
1. Answer based ONLY on the Trip Data provided.
2. If the answer is found, be specific (dates, times, names).
3. If not found, suggest adding it or say you don't know.
4. Reply in Hebrew, friendly and concise.`,O=await Ar(S,N);i(V=>[...V,{role:"model",text:O.text||",     ."}])}catch(S){console.error(S),i(N=>[...N,{role:"model",text:",   ."}])}finally{f(!1)}};return g.jsxs("div",{className:"flex flex-col h-full bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:[g.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 p-4 flex justify-between items-center text-white",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-white/20 p-2 rounded-full backdrop-blur-sm",children:g.jsx(pD,{className:"w-6 h-6 text-white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg",children:"Travel Bot"}),g.jsxs("p",{className:"text-xs text-gray-300 flex items-center gap-1",children:[g.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"   "]})]})]}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4 bg-gray-50 custom-scrollbar",children:[t.map((T,S)=>g.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[80%] p-4 rounded-2xl text-sm leading-relaxed shadow-sm ${T.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:T.text})},S)),c&&g.jsx("div",{className:"flex justify-start",children:g.jsxs("div",{className:"bg-white p-4 rounded-2xl rounded-bl-none shadow-sm border border-gray-100 flex gap-2 items-center",children:[g.jsx(Ts,{className:"w-4 h-4 animate-spin text-blue-600"}),g.jsx("span",{className:"text-xs text-gray-400 font-bold",children:"..."})]})}),g.jsx("div",{ref:m})]}),g.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:g.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-2xl border border-gray-200 focus-within:border-blue-300 focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[g.jsx("input",{className:"flex-grow bg-transparent outline-none px-2 text-sm font-medium",placeholder:"    ...",value:r,onChange:T=>a(T.target.value),onKeyDown:T=>T.key==="Enter"&&x()}),g.jsx("button",{onClick:x,disabled:!r.trim()||c,className:"p-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md",children:g.jsx(ML,{className:"w-4 h-4"})})]})})]})},wF=({trip:n,onClose:e,onUpdateTrip:t})=>{var Q,W,H,j;const[i,r]=X.useState("cards"),[a,c]=X.useState({}),[f,m]=X.useState({title:"",value:"",category:"passport"}),[p,x]=X.useState(!1),[T,S]=X.useState(null),N=Z=>{c(Y=>({...Y,[Z]:!Y[Z]}))},O=Z=>{navigator.clipboard.writeText(Z)},V=()=>{if(!f.title||!f.value)return;const Z={id:`sec-${Date.now()}`,title:f.title||" ",value:f.value||"",category:f.category};t({...n,secureNotes:[...n.secureNotes||[],Z]}),m({title:"",value:"",category:"passport"}),x(!1)},P=Z=>{window.confirm("   ?")&&t({...n,secureNotes:(n.secureNotes||[]).filter(Y=>Y.id!==Z)})};return T?g.jsxs("div",{className:"fixed inset-0 z-[110] bg-white flex flex-col items-center justify-center p-6 text-center animate-scale-in",children:[g.jsx("button",{onClick:()=>S(null),className:"absolute top-6 right-6 bg-gray-100 p-4 rounded-full",children:g.jsx(bi,{className:"w-8 h-8 text-gray-800"})}),g.jsx("h3",{className:"text-gray-400 font-bold uppercase tracking-widest mb-6",children:" "}),g.jsx("p",{className:"text-4xl md:text-6xl font-black text-gray-900 leading-tight",dir:"auto",children:T})]}):g.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900/80 backdrop-blur-md flex items-end md:items-center justify-center animate-fade-in",children:g.jsxs("div",{className:"bg-slate-100 w-full md:max-w-md h-[90vh] md:h-[650px] rounded-t-[2rem] md:rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col relative",children:[g.jsxs("div",{className:"bg-slate-900 text-white p-6 pb-8 rounded-b-[2rem] shadow-lg relative z-10 flex-shrink-0",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black flex items-center gap-2",children:[g.jsx("span",{className:"bg-blue-600 p-1.5 rounded-lg",children:g.jsx(XC,{className:"w-5 h-5"})})," "]}),g.jsx("p",{className:"text-slate-400 text-xs mt-1 font-medium",children:"   "})]}),g.jsx("button",{onClick:e,className:"bg-white/10 p-2 rounded-full hover:bg-white/20 transition-colors",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex bg-slate-800/50 p-1 rounded-xl",children:[g.jsx("button",{onClick:()=>r("cards"),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${i==="cards"?"bg-white text-slate-900 shadow-md":"text-slate-400"}`,children:" "}),g.jsx("button",{onClick:()=>r("vault"),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${i==="vault"?"bg-white text-slate-900 shadow-md":"text-slate-400"}`,children:" "})]})]}),g.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4 custom-scrollbar bg-slate-100 -mt-4 pt-8 pb-10",children:[i==="cards"&&g.jsxs(g.Fragment,{children:[((W=(Q=n.flights)==null?void 0:Q.segments)==null?void 0:W.length)>0?g.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-slate-200 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-50 rounded-full -mr-10 -mt-10 transition-transform group-hover:scale-150"}),g.jsxs("div",{className:"relative z-10",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-blue-100 p-2 rounded-xl text-blue-600",children:g.jsx(bs,{className:"w-5 h-5"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),g.jsx("div",{className:"text-xl font-black text-slate-800",children:n.flights.segments[0].flightNumber})]})]}),g.jsxs("div",{className:"text-left bg-blue-50 px-3 py-1 rounded-lg",children:[g.jsx("div",{className:"text-[10px] text-blue-400 font-bold uppercase tracking-wider",children:"  (PNR)"}),g.jsx("div",{className:"text-2xl font-mono font-black text-blue-600 tracking-widest",children:n.flights.pnr})]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-xl border border-slate-100",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-black text-slate-800",children:n.flights.segments[0].fromCode}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:n.flights.segments[0].departureTime})]}),g.jsx("div",{className:"h-px bg-slate-300 w-10"}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-black text-slate-800",children:n.flights.segments[0].toCode}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:n.flights.segments[0].arrivalTime})]})]})]})]}):g.jsxs("div",{className:"text-center text-slate-400 py-4 bg-white rounded-2xl border border-dashed border-slate-200",children:[g.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),"  "]}),(H=n.hotels)==null?void 0:H.map((Z,Y)=>g.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-slate-200 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-50 rounded-full -mr-10 -mt-10 transition-transform group-hover:scale-150"}),g.jsxs("div",{className:"relative z-10",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-indigo-100 p-2 rounded-xl text-indigo-600",children:g.jsx(ws,{className:"w-5 h-5"})}),g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:""}),g.jsx("div",{className:"text-base font-black text-slate-800 leading-tight truncate w-40",children:Z.name})]})]}),Z.confirmationCode&&g.jsxs("div",{className:"text-left",children:[g.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),g.jsx("div",{className:"text-lg font-mono font-black text-indigo-600",children:Z.confirmationCode})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded-lg",children:[g.jsx(Xa,{className:"w-4 h-4 mt-0.5 text-slate-400 flex-shrink-0"}),g.jsx("span",{className:"leading-tight",children:Z.address})]}),g.jsxs("button",{onClick:()=>S(Z.address),className:"w-full py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[g.jsx(uL,{className:"w-4 h-4"}),"   ( )"]})]})]})]},Y)),(!n.hotels||n.hotels.length===0)&&g.jsxs("div",{className:"text-center text-slate-400 py-4 bg-white rounded-2xl border border-dashed border-slate-200",children:[g.jsx(ws,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"})," "]})]}),i==="vault"&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 p-3 rounded-xl flex items-start gap-2",children:[g.jsx(rL,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),g.jsx("p",{className:"text-[11px] text-yellow-800 leading-snug font-medium",children:"       .     ,     (, )."})]}),(j=n.secureNotes)==null?void 0:j.map(Z=>g.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("span",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[Z.category==="passport"&&"",Z.category==="insurance"&&"",Z.category==="credit_card"&&"",Z.title]}),g.jsx("button",{onClick:()=>P(Z.id),className:"text-slate-300 hover:text-red-500",children:g.jsx(Xr,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg border border-slate-100",children:[g.jsx("div",{className:"flex-grow font-mono text-lg font-bold tracking-wider text-slate-800",children:a[Z.id]?Z.value:""}),g.jsx("button",{onClick:()=>O(Z.value),className:"p-1.5 hover:bg-slate-200 rounded text-slate-400",children:g.jsx(VD,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>N(Z.id),className:"p-1.5 hover:bg-slate-200 rounded text-slate-400",children:a[Z.id]?g.jsx(qD,{className:"w-4 h-4"}):g.jsx($D,{className:"w-4 h-4"})})]})]},Z.id)),p?g.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 space-y-3 animate-fade-in",children:[g.jsxs("select",{className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-bold bg-white",value:f.category,onChange:Z=>m({...f,category:Z.target.value}),children:[g.jsx("option",{value:"passport",children:""}),g.jsx("option",{value:"insurance",children:""}),g.jsx("option",{value:"credit_card",children:" (4 )"}),g.jsx("option",{value:"other",children:""})]}),g.jsx("input",{className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-bold",placeholder:" (:  )",value:f.title,onChange:Z=>m({...f,title:Z.target.value})}),g.jsx("input",{className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-mono",placeholder:" ",value:f.value,onChange:Z=>m({...f,value:Z.target.value})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-2 text-slate-500 font-bold text-sm",children:""}),g.jsx("button",{onClick:V,className:"flex-1 py-2 bg-slate-800 text-white rounded-lg font-bold text-sm",children:""})]})]}):g.jsxs("button",{onClick:()=>x(!0),className:"w-full py-3 border-2 border-dashed border-slate-300 rounded-xl text-slate-400 font-bold text-sm flex items-center justify-center gap-2 hover:border-slate-400 hover:text-slate-500 transition-colors",children:[g.jsx(Er,{className:"w-4 h-4"}),"   "]})]})]})]})})},bF=()=>{};var VS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},TF=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],c=n[t++],f=n[t++],m=((r&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,f=c?n[r+1]:0,m=r+2<n.length,p=m?n[r+2]:0,x=a>>2,T=(a&3)<<4|f>>4;let S=(f&15)<<2|p>>6,N=p&63;m||(N=64,c||(S=64)),i.push(t[x],t[T],t[S],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||f==null||p==null||T==null)throw new EF;const S=a<<2|f>>4;if(i.push(S),p!==64){const N=f<<4&240|p>>2;if(i.push(N),T!==64){const O=p<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SF=function(n){const e=CI(n);return NI.encodeByteArray(e,!0)},rp=function(n){return SF(n).replace(/\./g,"")},II=function(n){try{return NI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=()=>AF().__FIREBASE_DEFAULTS__,NF=()=>{if(typeof process>"u"||typeof VS>"u")return;const n=VS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&II(n[1]);return e&&JSON.parse(e)},Kp=()=>{try{return bF()||CF()||NF()||IF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RI=n=>{var e,t;return(t=(e=Kp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},RF=n=>{const e=RI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},MI=()=>{var n;return(n=Kp())==null?void 0:n.config},PI=n=>{var e;return(e=Kp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rp(JSON.stringify(t)),rp(JSON.stringify(c)),""].join(".")}const oh={};function kF(){const n={prod:[],emulator:[]};for(const e of Object.keys(oh))oh[e]?n.emulator.push(e):n.prod.push(e);return n}function DF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let BS=!1;function DI(n,e){if(typeof window>"u"||typeof document>"u"||!zc(window.location.host)||oh[n]===e||oh[n]||BS)return;oh[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=kF().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{BS=!0,c()},S}function x(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=DF(i),N=t("text"),O=document.getElementById(N)||document.createElement("span"),V=t("learnmore"),P=document.getElementById(V)||document.createElement("a"),Q=t("preprendIcon"),W=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const H=S.element;f(H),x(P,V);const j=p();m(W,Q),H.append(W,O,P,j),document.body.appendChild(H)}a?(O.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ti())}function OF(){var e;const n=(e=Kp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VF(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FF(){const n=Ti();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zF(){return!OF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jF(){try{return typeof indexedDB=="object"}catch{return!1}}function HF(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="FirebaseError";class Wo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=qF,Object.setPrototypeOf(this,Wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dh.prototype.create)}}class Dh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?GF(a,i):"Error",f=`${this.serviceName}: ${c} (${r}).`;return new Wo(r,f,i)}}function GF(n,e){return n.replace($F,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const $F=/\{\$([^}]+)}/g;function JF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nu(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],c=e[r];if(FS(a)&&FS(c)){if(!nu(a,c))return!1}else if(a!==c)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function FS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function KF(n,e){const t=new YF(n,e);return t.subscribe.bind(t)}class YF{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");WF(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=_y),r.error===void 0&&(r.error=_y),r.complete===void 0&&(r.complete=_y);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WF(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _y(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n){return n&&n._delegate?n._delegate:n}class iu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new MF;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QF(e))try{this.getOrInitializeService({instanceIdentifier:$l})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=$l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$l){return this.instances.has(e)}getOptions(e=$l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&c.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XF(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$l){return this.component?this.component.multipleInstances?e:$l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XF(n){return n===$l?void 0:n}function QF(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZF(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ct||(Ct={}));const t9={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},n9=Ct.INFO,i9={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},s9=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=i9[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ev{constructor(e){this.name=e,this._logLevel=n9,this._logHandler=s9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const r9=(n,e)=>e.some(t=>n instanceof t);let zS,jS;function o9(){return zS||(zS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a9(){return jS||(jS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LI=new WeakMap,u0=new WeakMap,OI=new WeakMap,yy=new WeakMap,Sv=new WeakMap;function l9(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ga(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&LI.set(t,n)}).catch(()=>{}),Sv.set(e,n),e}function u9(n){if(u0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});u0.set(n,e)}let c0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return u0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ga(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c9(n){c0=n(c0)}function d9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(vy(this),e,...t);return OI.set(i,e.sort?e.sort():[e]),Ga(i)}:a9().includes(n)?function(...e){return n.apply(vy(this),e),Ga(LI.get(this))}:function(...e){return Ga(n.apply(vy(this),e))}}function h9(n){return typeof n=="function"?d9(n):(n instanceof IDBTransaction&&u9(n),r9(n,o9())?new Proxy(n,c0):n)}function Ga(n){if(n instanceof IDBRequest)return l9(n);if(yy.has(n))return yy.get(n);const e=h9(n);return e!==n&&(yy.set(n,e),Sv.set(e,n)),e}const vy=n=>Sv.get(n);function f9(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const c=indexedDB.open(n,e),f=Ga(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ga(c.result),m.oldVersion,m.newVersion,Ga(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const m9=["get","getKey","getAll","getAllKeys","count"],p9=["put","add","delete","clear"],xy=new Map;function HS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xy.get(e))return xy.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=p9.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||m9.includes(t)))return;const a=async function(c,...f){const m=this.transaction(c,r?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),r&&m.done]))[0]};return xy.set(e,a),a}c9(n=>({...n,get:(e,t,i)=>HS(e,t)||n.get(e,t,i),has:(e,t)=>!!HS(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_9(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function _9(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d0="@firebase/app",qS="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Ev("@firebase/app"),y9="@firebase/app-compat",v9="@firebase/analytics-compat",x9="@firebase/analytics",w9="@firebase/app-check-compat",b9="@firebase/app-check",T9="@firebase/auth",E9="@firebase/auth-compat",S9="@firebase/database",A9="@firebase/data-connect",C9="@firebase/database-compat",N9="@firebase/functions",I9="@firebase/functions-compat",R9="@firebase/installations",M9="@firebase/installations-compat",P9="@firebase/messaging",k9="@firebase/messaging-compat",D9="@firebase/performance",L9="@firebase/performance-compat",O9="@firebase/remote-config",U9="@firebase/remote-config-compat",V9="@firebase/storage",B9="@firebase/storage-compat",F9="@firebase/firestore",z9="@firebase/ai",j9="@firebase/firestore-compat",H9="firebase",q9="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="[DEFAULT]",G9={[d0]:"fire-core",[y9]:"fire-core-compat",[x9]:"fire-analytics",[v9]:"fire-analytics-compat",[b9]:"fire-app-check",[w9]:"fire-app-check-compat",[T9]:"fire-auth",[E9]:"fire-auth-compat",[S9]:"fire-rtdb",[A9]:"fire-data-connect",[C9]:"fire-rtdb-compat",[N9]:"fire-fn",[I9]:"fire-fn-compat",[R9]:"fire-iid",[M9]:"fire-iid-compat",[P9]:"fire-fcm",[k9]:"fire-fcm-compat",[D9]:"fire-perf",[L9]:"fire-perf-compat",[O9]:"fire-rc",[U9]:"fire-rc-compat",[V9]:"fire-gcs",[B9]:"fire-gcs-compat",[F9]:"fire-fst",[j9]:"fire-fst-compat",[z9]:"fire-vertex","fire-js":"fire-js",[H9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Map,$9=new Map,f0=new Map;function GS(n,e){try{n.container.addComponent(e)}catch(t){Ho.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sc(n){const e=n.name;if(f0.has(e))return Ho.debug(`There were multiple attempts to register component ${e}.`),!1;f0.set(e,n);for(const t of op.values())GS(t,n);for(const t of $9.values())GS(t,n);return!0}function Av(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _r(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$a=new Dh("app","Firebase",J9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $a.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=q9;function UI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:h0,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw $a.create("bad-app-name",{appName:String(r)});if(t||(t=MI()),!t)throw $a.create("no-options");const a=op.get(r);if(a){if(nu(t,a.options)&&nu(i,a.config))return a;throw $a.create("duplicate-app",{appName:r})}const c=new e9(r);for(const m of f0.values())c.addComponent(m);const f=new K9(t,i,c);return op.set(r,f),f}function VI(n=h0){const e=op.get(n);if(!e&&n===h0&&MI())return UI();if(!e)throw $a.create("no-app",{appName:n});return e}function Ja(n,e,t){let i=G9[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const c=[`Unable to register library "${i}" with version "${e}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ho.warn(c.join(" "));return}Sc(new iu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="firebase-heartbeat-database",W9=1,xh="firebase-heartbeat-store";let wy=null;function BI(){return wy||(wy=f9(Y9,W9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xh)}catch(t){console.warn(t)}}}}).catch(n=>{throw $a.create("idb-open",{originalErrorMessage:n.message})})),wy}async function Z9(n){try{const t=(await BI()).transaction(xh),i=await t.objectStore(xh).get(FI(n));return await t.done,i}catch(e){if(e instanceof Wo)Ho.warn(e.message);else{const t=$a.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ho.warn(t.message)}}}async function $S(n,e){try{const i=(await BI()).transaction(xh,"readwrite");await i.objectStore(xh).put(e,FI(n)),await i.done}catch(t){if(t instanceof Wo)Ho.warn(t.message);else{const i=$a.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ho.warn(i.message)}}}function FI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=1024,Q9=30;class ez{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nz(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=JS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Q9){const c=iz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ho.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=JS(),{heartbeatsToSend:i,unsentEntries:r}=tz(this._heartbeatsCache.heartbeats),a=rp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ho.warn(t),""}}}function JS(){return new Date().toISOString().substring(0,10)}function tz(n,e=X9){const t=[];let i=n.slice();for(const r of n){const a=t.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),KS(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),KS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class nz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jF()?HF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Z9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $S(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $S(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function KS(n){return rp(JSON.stringify({version:2,heartbeats:n})).length}function iz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(n){Sc(new iu("platform-logger",e=>new g9(e),"PRIVATE")),Sc(new iu("heartbeat",e=>new ez(e),"PRIVATE")),Ja(d0,qS,n),Ja(d0,qS,"esm2020"),Ja("fire-js","")}sz("");function zI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rz=zI,jI=new Dh("auth","Firebase",zI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=new Ev("@firebase/auth");function oz(n,...e){ap.logLevel<=Ct.WARN&&ap.warn(`Auth (${jc}): ${n}`,...e)}function Rm(n,...e){ap.logLevel<=Ct.ERROR&&ap.error(`Auth (${jc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n,...e){throw Nv(n,...e)}function br(n,...e){return Nv(n,...e)}function Cv(n,e,t){const i={...rz(),[e]:t};return new Dh("auth","Firebase",i).create(e,{appName:n.name})}function Ql(n){return Cv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function az(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&so(n,"argument-error"),Cv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return jI.create(n,...e)}function st(n,e,...t){if(!n)throw Nv(e,...t)}function Vo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rm(e),new Error(e)}function qo(n,e){n||Vo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function lz(){return YS()==="http:"||YS()==="https:"}function YS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lz()||VF()||"connection"in navigator)?navigator.onLine:!0}function cz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.shortDelay=e,this.longDelay=t,qo(t>e,"Short delay should be less than long delay!"),this.isMobile=LF()||BF()}get(){return uz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n,e){qo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fz=new Oh(3e4,6e4);function Rv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Hc(n,e,t,i,r={}){return qI(n,r,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const f=Lh({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...a};return UF()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&zc(n.emulatorConfig.host)&&(p.credentials="include"),HI.fetch()(await GI(n,n.config.apiHost,t,f),p)})}async function qI(n,e,t){n._canInitEmulator=!1;const i={...dz,...e};try{const r=new pz(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw cm(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw cm(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw cm(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw cm(n,"user-disabled",c);const x=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Cv(n,x,p);so(n,x)}}catch(r){if(r instanceof Wo)throw r;so(n,"network-request-failed",{message:String(r)})}}async function mz(n,e,t,i,r={}){const a=await Hc(n,e,t,i,r);return"mfaPendingCredential"in a&&so(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function GI(n,e,t,i){const r=`${e}${t}?${i}`,a=n,c=a.config.emulator?Iv(n.config,r):`${n.config.apiScheme}://${r}`;return hz.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class pz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(br(this.auth,"network-request-failed")),fz.get())})}}function cm(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=br(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(n,e){return Hc(n,"POST","/v1/accounts:delete",e)}async function lp(n,e){return Hc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _z(n,e=!1){const t=Qi(n),i=await t.getIdToken(e),r=Mv(i);st(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:ah(by(r.auth_time)),issuedAtTime:ah(by(r.iat)),expirationTime:ah(by(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function by(n){return Number(n)*1e3}function Mv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Rm("JWT malformed, contained fewer than 3 sections"),null;try{const r=II(t);return r?JSON.parse(r):(Rm("Failed to decode base64 JWT payload"),null)}catch(r){return Rm("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function WS(n){const e=Mv(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Wo&&yz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function yz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(n){var T;const e=n.auth,t=await n.getIdToken(),i=await wh(n,lp(e,{idToken:t}));st(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?$I(r.providerUserInfo):[],c=wz(n.providerData,a),f=n.isAnonymous,m=!(n.email&&r.passwordHash)&&!(c!=null&&c.length),p=f?m:!1,x={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new p0(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(n,x)}async function xz(n){const e=Qi(n);await up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wz(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $I(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(n,e){const t=await qI(n,{},async()=>{const i=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,c=await GI(n,r,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&zc(n.emulatorConfig.host)&&(m.credentials="include"),HI.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Tz(n,e){return Hc(n,"POST","/v2/accounts:revokeToken",Rv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=WS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await bz(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,c=new _c;return i&&(st(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),r&&(st(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(st(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return Vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n,e){st(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yr{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new vz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new p0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await wh(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _z(this,e)}reload(){return xz(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await up(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Ql(this.auth));const e=await this.getIdToken();return await wh(this,gz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:N,providerData:O,stsTokenManager:V}=t;st(T&&V,e,"internal-error");const P=_c.fromJSON(this.name,V);st(typeof T=="string",e,"internal-error"),Va(i,e.name),Va(r,e.name),st(typeof S=="boolean",e,"internal-error"),st(typeof N=="boolean",e,"internal-error"),Va(a,e.name),Va(c,e.name),Va(f,e.name),Va(m,e.name),Va(p,e.name),Va(x,e.name);const Q=new yr({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:a,tenantId:f,stsTokenManager:P,createdAt:p,lastLoginAt:x});return O&&Array.isArray(O)&&(Q.providerData=O.map(W=>({...W}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,t,i=!1){const r=new _c;r.updateFromServerResponse(t);const a=new yr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await up(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];st(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?$I(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),f=new _c;f.updateFromIdToken(i);const m=new yr({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new p0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new Map;function Bo(n){qo(n instanceof Function,"Expected a class definition");let e=ZS.get(n);return e?(qo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ZS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JI.type="NONE";const XS=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n,e,t){return`firebase:${n}:${e}:${t}`}class yc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Mm(this.userKey,r.apiKey,a),this.fullPersistenceKey=Mm("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lp(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new yc(Bo(XS),e,i);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||Bo(XS);const c=Mm(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const x=await p._get(c);if(x){let T;if(typeof x=="string"){const S=await lp(e,{idToken:x}).catch(()=>{});if(!S)break;T=await yr._fromGetAccountInfoResponse(e,S,x)}else T=yr._fromJSON(e,x);p!==a&&(f=T),a=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new yc(a,e,i):(a=m[0],f&&await a._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new yc(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QI(e))return"Blackberry";if(eR(e))return"Webos";if(YI(e))return"Safari";if((e.includes("chrome/")||WI(e))&&!e.includes("edge/"))return"Chrome";if(XI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function KI(n=Ti()){return/firefox\//i.test(n)}function YI(n=Ti()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WI(n=Ti()){return/crios\//i.test(n)}function ZI(n=Ti()){return/iemobile/i.test(n)}function XI(n=Ti()){return/android/i.test(n)}function QI(n=Ti()){return/blackberry/i.test(n)}function eR(n=Ti()){return/webos/i.test(n)}function Pv(n=Ti()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ez(n=Ti()){var e;return Pv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Sz(){return FF()&&document.documentMode===10}function tR(n=Ti()){return Pv(n)||XI(n)||eR(n)||QI(n)||/windows phone/i.test(n)||ZI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e=[]){let t;switch(n){case"Browser":t=QS(Ti());break;case"Worker":t=`${QS(Ti())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,f)=>{try{const m=e(a);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(n,e={}){return Hc(n,"GET","/v2/passwordPolicy",Rv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=6;class Iz{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Nz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eA(this),this.idTokenSubscription=new eA(this),this.beforeStateQueue=new Az(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bo(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await yc.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lp(this,{idToken:e}),i=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(_r(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(i=m.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await up(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Ql(this));const t=e?Qi(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Ql(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Ql(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cz(this),t=new Iz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Tz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bo(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[Bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,r);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&oz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yp(n){return Qi(n)}class eA{constructor(e){this.auth=e,this.observer=null,this.addObserver=KF(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(n){kv=n}function Pz(n){return kv.loadJS(n)}function kz(){return kv.gapiScript}function Dz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(n,e){const t=Av(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(nu(a,e??{}))return r;so(r,"already-initialized")}return t.initialize({options:e})}function Oz(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Bo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Uz(n,e,t){const i=Yp(n);st(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=iR(e),{host:c,port:f}=Vz(e),m=f===null?"":`:${f}`,p={url:`${a}//${c}${m}/`},x=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){st(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),st(nu(p,i.config.emulator)&&nu(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,zc(c)?(kI(`${a}//${c}${m}`),DI("Auth",!0)):Bz()}function iR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Vz(n){const e=iR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:tA(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:tA(c)}}}function tA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Bz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vo("not implemented")}_getIdTokenResponse(e){return Vo("not implemented")}_linkToIdToken(e,t){return Vo("not implemented")}_getReauthenticationResolver(e){return Vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n,e){return mz(n,"POST","/v1/accounts:signInWithIdp",Rv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz="http://localhost";class su extends sR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new su(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):so("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const c=new su(i,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return vc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vc(e,t)}buildRequest(){const e={requestUri:Fz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends Dv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Uh{constructor(){super("facebook.com")}static credential(e){return su._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return su._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Oo.credential(t,i)}catch{return null}}}Oo.GOOGLE_SIGN_IN_METHOD="google.com";Oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Uh{constructor(){super("github.com")}static credential(e){return su._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return za.credential(e.oauthAccessToken)}catch{return null}}}za.GITHUB_SIGN_IN_METHOD="github.com";za.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Uh{constructor(){super("twitter.com")}static credential(e,t){return su._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ja.credential(t,i)}catch{return null}}}ja.TWITTER_SIGN_IN_METHOD="twitter.com";ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await yr._fromIdTokenResponse(e,i,r),c=nA(i);return new Ac({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=nA(i);return new Ac({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function nA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends Wo{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new cp(e,t,i,r)}}function rR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cp._fromErrorAndOperation(n,a,e,i):a})}async function zz(n,e,t=!1){const i=await wh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ac._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(n,e,t=!1){const{auth:i}=n;if(_r(i.app))return Promise.reject(Ql(i));const r="reauthenticate";try{const a=await wh(n,rR(i,r,e,n),t);st(a.idToken,i,"internal-error");const c=Mv(a.idToken);st(c,i,"internal-error");const{sub:f}=c;return st(n.uid===f,i,"user-mismatch"),Ac._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&so(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hz(n,e,t=!1){if(_r(n.app))return Promise.reject(Ql(n));const i="signIn",r=await rR(n,i,e),a=await Ac._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function qz(n,e,t,i){return Qi(n).onIdTokenChanged(e,t,i)}function Gz(n,e,t){return Qi(n).beforeAuthStateChanged(e,t)}function $z(n,e,t,i){return Qi(n).onAuthStateChanged(e,t,i)}function Jz(n){return Qi(n).signOut()}const dp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dp,"1"),this.storage.removeItem(dp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=1e3,Yz=10;class aR extends oR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);Sz()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Yz):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aR.type="LOCAL";const Wz=aR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR extends oR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lR.type="SESSION";const uR=lR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Wp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(c).map(async p=>p(t.origin,a)),m=await Zz(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((f,m)=>{const p=Lv("",20);r.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(x),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(S.data.response);break;default:clearTimeout(x),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function Qz(n){Qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function e8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function n8(){return cR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebaseLocalStorageDb",i8=1,hp="firebaseLocalStorage",hR="fbase_key";class Vh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zp(n,e){return n.transaction([hp],e?"readwrite":"readonly").objectStore(hp)}function s8(){const n=indexedDB.deleteDatabase(dR);return new Vh(n).toPromise()}function g0(){const n=indexedDB.open(dR,i8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(hp,{keyPath:hR})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(hp)?e(i):(i.close(),await s8(),e(await g0()))})})}async function iA(n,e,t){const i=Zp(n,!0).put({[hR]:e,value:t});return new Vh(i).toPromise()}async function r8(n,e){const t=Zp(n,!1).get(e),i=await new Vh(t).toPromise();return i===void 0?null:i.value}function sA(n,e){const t=Zp(n,!0).delete(e);return new Vh(t).toPromise()}const o8=800,a8=3;class fR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>a8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wp._getInstance(n8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await e8(),!this.activeServiceWorker)return;this.sender=new Xz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await g0();return await iA(e,dp,"1"),await sA(e,dp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iA(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>r8(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Zp(r,!1).getAll();return new Vh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fR.type="LOCAL";const l8=fR;new Oh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(n,e){return e?Bo(e):(st(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends sR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function u8(n){return Hz(n.auth,new Ov(n),n.bypassAuthState)}function c8(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),jz(t,new Ov(n),n.bypassAuthState)}async function d8(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),zz(t,new Ov(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u8;case"linkViaPopup":case"linkViaRedirect":return d8;case"reauthViaPopup":case"reauthViaRedirect":return c8;default:so(this.auth,"internal-error")}}resolve(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=new Oh(2e3,1e4);async function f8(n,e,t){if(_r(n.app))return Promise.reject(br(n,"operation-not-supported-in-this-environment"));const i=Yp(n);az(n,e,Dv);const r=mR(i,t);return new Wl(i,"signInViaPopup",e,r).executeNotNull()}class Wl extends pR{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Wl.currentPopupAction&&Wl.currentPopupAction.cancel(),Wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){qo(this.filter.length===1,"Popup operations only handle one event");const e=Lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h8.get())};e()}}Wl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="pendingRedirect",Pm=new Map;class p8 extends pR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Pm.get(this.auth._key());if(!e){try{const i=await g8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Pm.set(this.auth._key(),e)}return this.bypassAuthState||Pm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g8(n,e){const t=v8(e),i=y8(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function _8(n,e){Pm.set(n._key(),e)}function y8(n){return Bo(n._redirectPersistence)}function v8(n){return Mm(m8,n.config.apiKey,n.name)}async function x8(n,e,t=!1){if(_r(n.app))return Promise.reject(Ql(n));const i=Yp(n),r=mR(i,e),c=await new p8(i,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=600*1e3;class b8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gR(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(br(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w8&&this.cachedEventUids.clear(),this.cachedEventUids.has(rA(e))}saveEventToCache(e){this.cachedEventUids.add(rA(e)),this.lastProcessedEventTime=Date.now()}}function rA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function T8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(n,e={}){return Hc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A8=/^https?/;async function C8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await E8(n);for(const t of e)try{if(N8(t))return}catch{}so(n,"unauthorized-domain")}function N8(n){const e=m0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!A8.test(t))return!1;if(S8.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new Oh(3e4,6e4);function oA(){const n=Qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R8(n){return new Promise((e,t)=>{var r,a,c;function i(){oA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oA(),t(br(n,"network-request-failed"))},timeout:I8.get()})}if((a=(r=Qr().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Qr().gapi)!=null&&c.load)i();else{const f=Dz("iframefcb");return Qr()[f]=()=>{gapi.load?i():t(br(n,"network-request-failed"))},Pz(`${kz()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw km=null,e})}let km=null;function M8(n){return km=km||R8(n),km}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=new Oh(5e3,15e3),k8="__/auth/iframe",D8="emulator/auth/iframe",L8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U8(n){const e=n.config;st(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Iv(e,D8):`https://${n.config.authDomain}/${k8}`,i={apiKey:e.apiKey,appName:n.name,v:jc},r=O8.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Lh(i).slice(1)}`}async function V8(n){const e=await M8(n),t=Qr().gapi;return st(t,n,"internal-error"),e.open({where:document.body,url:U8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L8,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const c=br(n,"network-request-failed"),f=Qr().setTimeout(()=>{a(c)},P8.get());function m(){Qr().clearTimeout(f),r(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F8=500,z8=600,j8="_blank",H8="http://localhost";class aA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q8(n,e,t,i=F8,r=z8){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...B8,width:i.toString(),height:r.toString(),top:a,left:c},p=Ti().toLowerCase();t&&(f=WI(p)?j8:t),KI(p)&&(e=e||H8,m.scrollbars="yes");const x=Object.entries(m).reduce((S,[N,O])=>`${S}${N}=${O},`,"");if(Ez(p)&&f!=="_self")return G8(e||"",f),new aA(null);const T=window.open(e||"",f,x);st(T,n,"popup-blocked");try{T.focus()}catch{}return new aA(T)}function G8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8="__/auth/handler",J8="emulator/auth/handler",K8=encodeURIComponent("fac");async function lA(n,e,t,i,r,a){st(n.config.authDomain,n,"auth-domain-config-required"),st(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:jc,eventId:r};if(e instanceof Dv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",JF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,T]of Object.entries({}))c[x]=T}if(e instanceof Uh){const x=e.getScopes().filter(T=>T!=="");x.length>0&&(c.scopes=x.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const x of Object.keys(f))f[x]===void 0&&delete f[x];const m=await n._getAppCheckToken(),p=m?`#${K8}=${encodeURIComponent(m)}`:"";return`${Y8(n)}?${Lh(f).slice(1)}${p}`}function Y8({config:n}){return n.emulator?Iv(n,J8):`https://${n.authDomain}/${$8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="webStorageSupport";class W8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uR,this._completeRedirectFn=x8,this._overrideRedirectResult=_8}async _openPopup(e,t,i,r){var c;qo((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await lA(e,t,i,m0(),r);return q8(e,a,Lv())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await lA(e,t,i,m0(),r);return Qz(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(qo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await V8(e),i=new b8(e);return t.register("authEvent",r=>(st(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ty,{type:Ty},r=>{var c;const a=(c=r==null?void 0:r[0])==null?void 0:c[Ty];a!==void 0&&t(!!a),so(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tR()||YI()||Pv()}}const Z8=W8;var uA="@firebase/auth",cA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ej(n){Sc(new iu("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;st(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nR(n)},p=new Rz(i,r,a,m);return Oz(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Sc(new iu("auth-internal",e=>{const t=Yp(e.getProvider("auth").getImmediate());return(i=>new X8(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ja(uA,cA,Q8(n)),Ja(uA,cA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=300,nj=PI("authIdTokenMaxAge")||tj;let dA=null;const ij=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nj)return;const r=t==null?void 0:t.token;dA!==r&&(dA=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function sj(n=VI()){const e=Av(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Lz(n,{popupRedirectResolver:Z8,persistence:[l8,Wz,uR]}),i=PI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=ij(a.toString());Gz(t,c,()=>c(t.currentUser)),qz(t,f=>c(f))}}const r=RI("auth");return r&&Uz(t,`http://${r}`),t}function rj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Mz({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=br("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",rj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ej("Browser");var oj="firebase",aj="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ja(oj,aj,"app");var hA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ka,_R;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,k){function U(){}U.prototype=k.prototype,D.F=k.prototype,D.prototype=new U,D.prototype.constructor=D,D.D=function(G,$,te){for(var K=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)K[Le-2]=arguments[Le];return k.prototype[$].apply(G,K)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,k,U){U||(U=0);const G=Array(16);if(typeof k=="string")for(var $=0;$<16;++$)G[$]=k.charCodeAt(U++)|k.charCodeAt(U++)<<8|k.charCodeAt(U++)<<16|k.charCodeAt(U++)<<24;else for($=0;$<16;++$)G[$]=k[U++]|k[U++]<<8|k[U++]<<16|k[U++]<<24;k=D.g[0],U=D.g[1],$=D.g[2];let te=D.g[3],K;K=k+(te^U&($^te))+G[0]+3614090360&4294967295,k=U+(K<<7&4294967295|K>>>25),K=te+($^k&(U^$))+G[1]+3905402710&4294967295,te=k+(K<<12&4294967295|K>>>20),K=$+(U^te&(k^U))+G[2]+606105819&4294967295,$=te+(K<<17&4294967295|K>>>15),K=U+(k^$&(te^k))+G[3]+3250441966&4294967295,U=$+(K<<22&4294967295|K>>>10),K=k+(te^U&($^te))+G[4]+4118548399&4294967295,k=U+(K<<7&4294967295|K>>>25),K=te+($^k&(U^$))+G[5]+1200080426&4294967295,te=k+(K<<12&4294967295|K>>>20),K=$+(U^te&(k^U))+G[6]+2821735955&4294967295,$=te+(K<<17&4294967295|K>>>15),K=U+(k^$&(te^k))+G[7]+4249261313&4294967295,U=$+(K<<22&4294967295|K>>>10),K=k+(te^U&($^te))+G[8]+1770035416&4294967295,k=U+(K<<7&4294967295|K>>>25),K=te+($^k&(U^$))+G[9]+2336552879&4294967295,te=k+(K<<12&4294967295|K>>>20),K=$+(U^te&(k^U))+G[10]+4294925233&4294967295,$=te+(K<<17&4294967295|K>>>15),K=U+(k^$&(te^k))+G[11]+2304563134&4294967295,U=$+(K<<22&4294967295|K>>>10),K=k+(te^U&($^te))+G[12]+1804603682&4294967295,k=U+(K<<7&4294967295|K>>>25),K=te+($^k&(U^$))+G[13]+4254626195&4294967295,te=k+(K<<12&4294967295|K>>>20),K=$+(U^te&(k^U))+G[14]+2792965006&4294967295,$=te+(K<<17&4294967295|K>>>15),K=U+(k^$&(te^k))+G[15]+1236535329&4294967295,U=$+(K<<22&4294967295|K>>>10),K=k+($^te&(U^$))+G[1]+4129170786&4294967295,k=U+(K<<5&4294967295|K>>>27),K=te+(U^$&(k^U))+G[6]+3225465664&4294967295,te=k+(K<<9&4294967295|K>>>23),K=$+(k^U&(te^k))+G[11]+643717713&4294967295,$=te+(K<<14&4294967295|K>>>18),K=U+(te^k&($^te))+G[0]+3921069994&4294967295,U=$+(K<<20&4294967295|K>>>12),K=k+($^te&(U^$))+G[5]+3593408605&4294967295,k=U+(K<<5&4294967295|K>>>27),K=te+(U^$&(k^U))+G[10]+38016083&4294967295,te=k+(K<<9&4294967295|K>>>23),K=$+(k^U&(te^k))+G[15]+3634488961&4294967295,$=te+(K<<14&4294967295|K>>>18),K=U+(te^k&($^te))+G[4]+3889429448&4294967295,U=$+(K<<20&4294967295|K>>>12),K=k+($^te&(U^$))+G[9]+568446438&4294967295,k=U+(K<<5&4294967295|K>>>27),K=te+(U^$&(k^U))+G[14]+3275163606&4294967295,te=k+(K<<9&4294967295|K>>>23),K=$+(k^U&(te^k))+G[3]+4107603335&4294967295,$=te+(K<<14&4294967295|K>>>18),K=U+(te^k&($^te))+G[8]+1163531501&4294967295,U=$+(K<<20&4294967295|K>>>12),K=k+($^te&(U^$))+G[13]+2850285829&4294967295,k=U+(K<<5&4294967295|K>>>27),K=te+(U^$&(k^U))+G[2]+4243563512&4294967295,te=k+(K<<9&4294967295|K>>>23),K=$+(k^U&(te^k))+G[7]+1735328473&4294967295,$=te+(K<<14&4294967295|K>>>18),K=U+(te^k&($^te))+G[12]+2368359562&4294967295,U=$+(K<<20&4294967295|K>>>12),K=k+(U^$^te)+G[5]+4294588738&4294967295,k=U+(K<<4&4294967295|K>>>28),K=te+(k^U^$)+G[8]+2272392833&4294967295,te=k+(K<<11&4294967295|K>>>21),K=$+(te^k^U)+G[11]+1839030562&4294967295,$=te+(K<<16&4294967295|K>>>16),K=U+($^te^k)+G[14]+4259657740&4294967295,U=$+(K<<23&4294967295|K>>>9),K=k+(U^$^te)+G[1]+2763975236&4294967295,k=U+(K<<4&4294967295|K>>>28),K=te+(k^U^$)+G[4]+1272893353&4294967295,te=k+(K<<11&4294967295|K>>>21),K=$+(te^k^U)+G[7]+4139469664&4294967295,$=te+(K<<16&4294967295|K>>>16),K=U+($^te^k)+G[10]+3200236656&4294967295,U=$+(K<<23&4294967295|K>>>9),K=k+(U^$^te)+G[13]+681279174&4294967295,k=U+(K<<4&4294967295|K>>>28),K=te+(k^U^$)+G[0]+3936430074&4294967295,te=k+(K<<11&4294967295|K>>>21),K=$+(te^k^U)+G[3]+3572445317&4294967295,$=te+(K<<16&4294967295|K>>>16),K=U+($^te^k)+G[6]+76029189&4294967295,U=$+(K<<23&4294967295|K>>>9),K=k+(U^$^te)+G[9]+3654602809&4294967295,k=U+(K<<4&4294967295|K>>>28),K=te+(k^U^$)+G[12]+3873151461&4294967295,te=k+(K<<11&4294967295|K>>>21),K=$+(te^k^U)+G[15]+530742520&4294967295,$=te+(K<<16&4294967295|K>>>16),K=U+($^te^k)+G[2]+3299628645&4294967295,U=$+(K<<23&4294967295|K>>>9),K=k+($^(U|~te))+G[0]+4096336452&4294967295,k=U+(K<<6&4294967295|K>>>26),K=te+(U^(k|~$))+G[7]+1126891415&4294967295,te=k+(K<<10&4294967295|K>>>22),K=$+(k^(te|~U))+G[14]+2878612391&4294967295,$=te+(K<<15&4294967295|K>>>17),K=U+(te^($|~k))+G[5]+4237533241&4294967295,U=$+(K<<21&4294967295|K>>>11),K=k+($^(U|~te))+G[12]+1700485571&4294967295,k=U+(K<<6&4294967295|K>>>26),K=te+(U^(k|~$))+G[3]+2399980690&4294967295,te=k+(K<<10&4294967295|K>>>22),K=$+(k^(te|~U))+G[10]+4293915773&4294967295,$=te+(K<<15&4294967295|K>>>17),K=U+(te^($|~k))+G[1]+2240044497&4294967295,U=$+(K<<21&4294967295|K>>>11),K=k+($^(U|~te))+G[8]+1873313359&4294967295,k=U+(K<<6&4294967295|K>>>26),K=te+(U^(k|~$))+G[15]+4264355552&4294967295,te=k+(K<<10&4294967295|K>>>22),K=$+(k^(te|~U))+G[6]+2734768916&4294967295,$=te+(K<<15&4294967295|K>>>17),K=U+(te^($|~k))+G[13]+1309151649&4294967295,U=$+(K<<21&4294967295|K>>>11),K=k+($^(U|~te))+G[4]+4149444226&4294967295,k=U+(K<<6&4294967295|K>>>26),K=te+(U^(k|~$))+G[11]+3174756917&4294967295,te=k+(K<<10&4294967295|K>>>22),K=$+(k^(te|~U))+G[2]+718787259&4294967295,$=te+(K<<15&4294967295|K>>>17),K=U+(te^($|~k))+G[9]+3951481745&4294967295,D.g[0]=D.g[0]+k&4294967295,D.g[1]=D.g[1]+($+(K<<21&4294967295|K>>>11))&4294967295,D.g[2]=D.g[2]+$&4294967295,D.g[3]=D.g[3]+te&4294967295}i.prototype.v=function(D,k){k===void 0&&(k=D.length);const U=k-this.blockSize,G=this.C;let $=this.h,te=0;for(;te<k;){if($==0)for(;te<=U;)r(this,D,te),te+=this.blockSize;if(typeof D=="string"){for(;te<k;)if(G[$++]=D.charCodeAt(te++),$==this.blockSize){r(this,G),$=0;break}}else for(;te<k;)if(G[$++]=D[te++],$==this.blockSize){r(this,G),$=0;break}}this.h=$,this.o+=k},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var k=1;k<D.length-8;++k)D[k]=0;k=this.o*8;for(var U=D.length-8;U<D.length;++U)D[U]=k&255,k/=256;for(this.v(D),D=Array(16),k=0,U=0;U<4;++U)for(let G=0;G<32;G+=8)D[k++]=this.g[U]>>>G&255;return D};function a(D,k){var U=f;return Object.prototype.hasOwnProperty.call(U,D)?U[D]:U[D]=k(D)}function c(D,k){this.h=k;const U=[];let G=!0;for(let $=D.length-1;$>=0;$--){const te=D[$]|0;G&&te==k||(U[$]=te,G=!1)}this.g=U}var f={};function m(D){return-128<=D&&D<128?a(D,function(k){return new c([k|0],k<0?-1:0)}):new c([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return P(p(-D));const k=[];let U=1;for(let G=0;D>=U;G++)k[G]=D/U|0,U*=4294967296;return new c(k,0)}function x(D,k){if(D.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(D.charAt(0)=="-")return P(x(D.substring(1),k));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=p(Math.pow(k,8));let G=T;for(let te=0;te<D.length;te+=8){var $=Math.min(8,D.length-te);const K=parseInt(D.substring(te,te+$),k);$<8?($=p(Math.pow(k,$)),G=G.j($).add(p(K))):(G=G.j(U),G=G.add(p(K)))}return G}var T=m(0),S=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(V(this))return-P(this).m();let D=0,k=1;for(let U=0;U<this.g.length;U++){const G=this.i(U);D+=(G>=0?G:4294967296+G)*k,k*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O(this))return"0";if(V(this))return"-"+P(this).toString(D);const k=p(Math.pow(D,6));var U=this;let G="";for(;;){const $=j(U,k).g;U=Q(U,$.j(k));let te=((U.g.length>0?U.g[0]:U.h)>>>0).toString(D);if(U=$,O(U))return te+G;for(;te.length<6;)te="0"+te;G=te+G}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function O(D){if(D.h!=0)return!1;for(let k=0;k<D.g.length;k++)if(D.g[k]!=0)return!1;return!0}function V(D){return D.h==-1}n.l=function(D){return D=Q(this,D),V(D)?-1:O(D)?0:1};function P(D){const k=D.g.length,U=[];for(let G=0;G<k;G++)U[G]=~D.g[G];return new c(U,~D.h).add(S)}n.abs=function(){return V(this)?P(this):this},n.add=function(D){const k=Math.max(this.g.length,D.g.length),U=[];let G=0;for(let $=0;$<=k;$++){let te=G+(this.i($)&65535)+(D.i($)&65535),K=(te>>>16)+(this.i($)>>>16)+(D.i($)>>>16);G=K>>>16,te&=65535,K&=65535,U[$]=K<<16|te}return new c(U,U[U.length-1]&-2147483648?-1:0)};function Q(D,k){return D.add(P(k))}n.j=function(D){if(O(this)||O(D))return T;if(V(this))return V(D)?P(this).j(P(D)):P(P(this).j(D));if(V(D))return P(this.j(P(D)));if(this.l(N)<0&&D.l(N)<0)return p(this.m()*D.m());const k=this.g.length+D.g.length,U=[];for(var G=0;G<2*k;G++)U[G]=0;for(G=0;G<this.g.length;G++)for(let $=0;$<D.g.length;$++){const te=this.i(G)>>>16,K=this.i(G)&65535,Le=D.i($)>>>16,rt=D.i($)&65535;U[2*G+2*$]+=K*rt,W(U,2*G+2*$),U[2*G+2*$+1]+=te*rt,W(U,2*G+2*$+1),U[2*G+2*$+1]+=K*Le,W(U,2*G+2*$+1),U[2*G+2*$+2]+=te*Le,W(U,2*G+2*$+2)}for(D=0;D<k;D++)U[D]=U[2*D+1]<<16|U[2*D];for(D=k;D<2*k;D++)U[D]=0;return new c(U,0)};function W(D,k){for(;(D[k]&65535)!=D[k];)D[k+1]+=D[k]>>>16,D[k]&=65535,k++}function H(D,k){this.g=D,this.h=k}function j(D,k){if(O(k))throw Error("division by zero");if(O(D))return new H(T,T);if(V(D))return k=j(P(D),k),new H(P(k.g),P(k.h));if(V(k))return k=j(D,P(k)),new H(P(k.g),k.h);if(D.g.length>30){if(V(D)||V(k))throw Error("slowDivide_ only works with positive integers.");for(var U=S,G=k;G.l(D)<=0;)U=Z(U),G=Z(G);var $=Y(U,1),te=Y(G,1);for(G=Y(G,2),U=Y(U,2);!O(G);){var K=te.add(G);K.l(D)<=0&&($=$.add(U),te=K),G=Y(G,1),U=Y(U,1)}return k=Q(D,$.j(k)),new H($,k)}for($=T;D.l(k)>=0;){for(U=Math.max(1,Math.floor(D.m()/k.m())),G=Math.ceil(Math.log(U)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),te=p(U),K=te.j(k);V(K)||K.l(D)>0;)U-=G,te=p(U),K=te.j(k);O(te)&&(te=S),$=$.add(te),D=Q(D,K)}return new H($,D)}n.B=function(D){return j(this,D).h},n.and=function(D){const k=Math.max(this.g.length,D.g.length),U=[];for(let G=0;G<k;G++)U[G]=this.i(G)&D.i(G);return new c(U,this.h&D.h)},n.or=function(D){const k=Math.max(this.g.length,D.g.length),U=[];for(let G=0;G<k;G++)U[G]=this.i(G)|D.i(G);return new c(U,this.h|D.h)},n.xor=function(D){const k=Math.max(this.g.length,D.g.length),U=[];for(let G=0;G<k;G++)U[G]=this.i(G)^D.i(G);return new c(U,this.h^D.h)};function Z(D){const k=D.g.length+1,U=[];for(let G=0;G<k;G++)U[G]=D.i(G)<<1|D.i(G-1)>>>31;return new c(U,D.h)}function Y(D,k){const U=k>>5;k%=32;const G=D.g.length-U,$=[];for(let te=0;te<G;te++)$[te]=k>0?D.i(te+U)>>>k|D.i(te+U+1)<<32-k:D.i(te+U);return new c($,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_R=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=x,Ka=c}).apply(typeof hA<"u"?hA:typeof self<"u"?self:typeof window<"u"?window:{});var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yR,Xd,vR,Dm,_0,xR,wR,bR;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof dm=="object"&&dm];for(var C=0;C<v.length;++C){var M=v[C];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var i=t(this);function r(v,C){if(C)e:{var M=i;v=v.split(".");for(var q=0;q<v.length-1;q++){var ue=v[q];if(!(ue in M))break e;M=M[ue]}v=v[v.length-1],q=M[v],C=C(q),C!=q&&C!=null&&e(M,v,{configurable:!0,writable:!0,value:C})}}r("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(v){return v||function(C){var M=[],q;for(q in C)Object.prototype.hasOwnProperty.call(C,q)&&M.push([q,C[q]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function f(v){var C=typeof v;return C=="object"&&v!=null||C=="function"}function m(v,C,M){return v.call.apply(v.bind,arguments)}function p(v,C,M){return p=m,p.apply(null,arguments)}function x(v,C){var M=Array.prototype.slice.call(arguments,1);return function(){var q=M.slice();return q.push.apply(q,arguments),v.apply(this,q)}}function T(v,C){function M(){}M.prototype=C.prototype,v.Z=C.prototype,v.prototype=new M,v.prototype.constructor=v,v.Ob=function(q,ue,ye){for(var Pe=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Pe[nt-2]=arguments[nt];return C.prototype[ue].apply(q,Pe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function N(v){const C=v.length;if(C>0){const M=Array(C);for(let q=0;q<C;q++)M[q]=v[q];return M}return[]}function O(v,C){for(let q=1;q<arguments.length;q++){const ue=arguments[q];var M=typeof ue;if(M=M!="object"?M:ue?Array.isArray(ue)?"array":M:"null",M=="array"||M=="object"&&typeof ue.length=="number"){M=v.length||0;const ye=ue.length||0;v.length=M+ye;for(let Pe=0;Pe<ye;Pe++)v[M+Pe]=ue[Pe]}else v.push(ue)}}class V{constructor(C,M){this.i=C,this.j=M,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function P(v){c.setTimeout(()=>{throw v},0)}function Q(){var v=D;let C=null;return v.g&&(C=v.g,v.g=v.g.next,v.g||(v.h=null),C.next=null),C}class W{constructor(){this.h=this.g=null}add(C,M){const q=H.get();q.set(C,M),this.h?this.h.next=q:this.g=q,this.h=q}}var H=new V(()=>new j,v=>v.reset());class j{constructor(){this.next=this.g=this.h=null}set(C,M){this.h=C,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,D=new W,k=()=>{const v=Promise.resolve(void 0);Z=()=>{v.then(U)}};function U(){for(var v;v=Q();){try{v.h.call(v.g)}catch(M){P(M)}var C=H;C.j(v),C.h<100&&(C.h++,v.next=C.g,C.g=v)}Y=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(v,C){this.type=v,this.g=this.target=C,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var te=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,C=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const M=()=>{};c.addEventListener("test",M,C),c.removeEventListener("test",M,C)}catch{}return v})();function K(v){return/^[\s\xa0]*$/.test(v)}function Le(v,C){$.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,C)}T(Le,$),Le.prototype.init=function(v,C){const M=this.type=v.type,q=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=C,C=v.relatedTarget,C||(M=="mouseover"?C=v.fromElement:M=="mouseout"&&(C=v.toElement)),this.relatedTarget=C,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Ie(v,C,M,q,ue){this.listener=v,this.proxy=null,this.src=C,this.type=M,this.capture=!!q,this.ha=ue,this.key=++fe,this.da=this.fa=!1}function Ee(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Qe(v,C,M){for(const q in v)C.call(M,v[q],q,v)}function pe(v,C){for(const M in v)C.call(void 0,v[M],M,v)}function J(v){const C={};for(const M in v)C[M]=v[M];return C}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(v,C){let M,q;for(let ue=1;ue<arguments.length;ue++){q=arguments[ue];for(M in q)v[M]=q[M];for(let ye=0;ye<ce.length;ye++)M=ce[ye],Object.prototype.hasOwnProperty.call(q,M)&&(v[M]=q[M])}}function re(v){this.src=v,this.g={},this.h=0}re.prototype.add=function(v,C,M,q,ue){const ye=v.toString();v=this.g[ye],v||(v=this.g[ye]=[],this.h++);const Pe=z(v,C,q,ue);return Pe>-1?(C=v[Pe],M||(C.fa=!1)):(C=new Ie(C,this.src,ye,!!q,ue),C.fa=M,v.push(C)),C};function ve(v,C){const M=C.type;if(M in v.g){var q=v.g[M],ue=Array.prototype.indexOf.call(q,C,void 0),ye;(ye=ue>=0)&&Array.prototype.splice.call(q,ue,1),ye&&(Ee(C),v.g[M].length==0&&(delete v.g[M],v.h--))}}function z(v,C,M,q){for(let ue=0;ue<v.length;++ue){const ye=v[ue];if(!ye.da&&ye.listener==C&&ye.capture==!!M&&ye.ha==q)return ue}return-1}var se="closure_lm_"+(Math.random()*1e6|0),oe={};function Me(v,C,M,q,ue){if(Array.isArray(C)){for(let ye=0;ye<C.length;ye++)Me(v,C[ye],M,q,ue);return null}return M=vt(M),v&&v[rt]?v.J(C,M,f(q)?!!q.capture:!1,ue):Fe(v,C,M,!1,q,ue)}function Fe(v,C,M,q,ue,ye){if(!C)throw Error("Invalid event type");const Pe=f(ue)?!!ue.capture:!!ue;let nt=tt(v);if(nt||(v[se]=nt=new re(v)),M=nt.add(C,M,q,Pe,ye),M.proxy)return M;if(q=yt(),M.proxy=q,q.src=v,q.listener=M,v.addEventListener)te||(ue=Pe),ue===void 0&&(ue=!1),v.addEventListener(C.toString(),q,ue);else if(v.attachEvent)v.attachEvent(kt(C.toString()),q);else if(v.addListener&&v.removeListener)v.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return M}function yt(){function v(M){return C.call(v.src,v.listener,M)}const C=mn;return v}function dt(v,C,M,q,ue){if(Array.isArray(C))for(var ye=0;ye<C.length;ye++)dt(v,C[ye],M,q,ue);else q=f(q)?!!q.capture:!!q,M=vt(M),v&&v[rt]?(v=v.i,ye=String(C).toString(),ye in v.g&&(C=v.g[ye],M=z(C,M,q,ue),M>-1&&(Ee(C[M]),Array.prototype.splice.call(C,M,1),C.length==0&&(delete v.g[ye],v.h--)))):v&&(v=tt(v))&&(C=v.g[C.toString()],v=-1,C&&(v=z(C,M,q,ue)),(M=v>-1?C[v]:null)&&Ft(M))}function Ft(v){if(typeof v!="number"&&v&&!v.da){var C=v.src;if(C&&C[rt])ve(C.i,v);else{var M=v.type,q=v.proxy;C.removeEventListener?C.removeEventListener(M,q,v.capture):C.detachEvent?C.detachEvent(kt(M),q):C.addListener&&C.removeListener&&C.removeListener(q),(M=tt(C))?(ve(M,v),M.h==0&&(M.src=null,C[se]=null)):Ee(v)}}}function kt(v){return v in oe?oe[v]:oe[v]="on"+v}function mn(v,C){if(v.da)v=!0;else{C=new Le(C,this);const M=v.listener,q=v.ha||v.src;v.fa&&Ft(v),v=M.call(q,C)}return v}function tt(v){return v=v[se],v instanceof re?v:null}var qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function vt(v){return typeof v=="function"?v:(v[qt]||(v[qt]=function(C){return v.handleEvent(C)}),v[qt])}function mt(){G.call(this),this.i=new re(this),this.M=this,this.G=null}T(mt,G),mt.prototype[rt]=!0,mt.prototype.removeEventListener=function(v,C,M,q){dt(this,v,C,M,q)};function zt(v,C){var M,q=v.G;if(q)for(M=[];q;q=q.G)M.push(q);if(v=v.M,q=C.type||C,typeof C=="string")C=new $(C,v);else if(C instanceof $)C.target=C.target||v;else{var ue=C;C=new $(q,v),be(C,ue)}ue=!0;let ye,Pe;if(M)for(Pe=M.length-1;Pe>=0;Pe--)ye=C.g=M[Pe],ue=En(ye,q,!0,C)&&ue;if(ye=C.g=v,ue=En(ye,q,!0,C)&&ue,ue=En(ye,q,!1,C)&&ue,M)for(Pe=0;Pe<M.length;Pe++)ye=C.g=M[Pe],ue=En(ye,q,!1,C)&&ue}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var v=this.i;for(const C in v.g){const M=v.g[C];for(let q=0;q<M.length;q++)Ee(M[q]);delete v.g[C],v.h--}}this.G=null},mt.prototype.J=function(v,C,M,q){return this.i.add(String(v),C,!1,M,q)},mt.prototype.K=function(v,C,M,q){return this.i.add(String(v),C,!0,M,q)};function En(v,C,M,q){if(C=v.i.g[String(C)],!C)return!0;C=C.concat();let ue=!0;for(let ye=0;ye<C.length;++ye){const Pe=C[ye];if(Pe&&!Pe.da&&Pe.capture==M){const nt=Pe.listener,Rt=Pe.ha||Pe.src;Pe.fa&&ve(v.i,Pe),ue=nt.call(Rt,q)!==!1&&ue}}return ue&&!q.defaultPrevented}function ci(v,C){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=p(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:c.setTimeout(v,C||0)}function oo(v){v.g=ci(()=>{v.g=null,v.i&&(v.i=!1,oo(v))},v.l);const C=v.h;v.h=null,v.m.apply(null,C)}class Ln extends G{constructor(C,M){super(),this.m=C,this.l=M,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:oo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(v){G.call(this),this.h=v,this.g={}}T(Xs,G);var ao=[];function Zo(v){Qe(v.g,function(C,M){this.g.hasOwnProperty(M)&&Ft(C)},v),v.g={}}Xs.prototype.N=function(){Xs.Z.N.call(this),Zo(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=c.JSON.stringify,Yc=c.JSON.parse,al=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function ll(){}function mu(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xn(){$.call(this,"d")}T(xn,$);function Ei(){$.call(this,"c")}T(Ei,$);var un={},Ir=null;function Xo(){return Ir=Ir||new mt}un.Ia="serverreachability";function pu(v){$.call(this,un.Ia,v)}T(pu,$);function es(v){const C=Xo();zt(C,new pu(C))}un.STAT_EVENT="statevent";function Rr(v,C){$.call(this,un.STAT_EVENT,v),this.stat=C}T(Rr,$);function cn(v){const C=Xo();zt(C,new Rr(C,v))}un.Ja="timingevent";function Es(v,C){$.call(this,un.Ja,v),this.size=C}T(Es,$);function Ss(v,C){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},C)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function Wc(v,C,M,q,ue,ye){v.info(function(){if(v.g)if(ye){var Pe="",nt=ye.split("&");for(let Mt=0;Mt<nt.length;Mt++){var Rt=nt[Mt].split("=");if(Rt.length>1){const Qt=Rt[0];Rt=Rt[1];const zi=Qt.split("_");Pe=zi.length>=2&&zi[1]=="type"?Pe+(Qt+"="+Rt+"&"):Pe+(Qt+"=redacted&")}}}else Pe=null;else Pe=ye;return"XMLHTTP REQ ("+q+") [attempt "+ue+"]: "+C+`
`+M+`
`+Pe})}function gu(v,C,M,q,ue,ye,Pe){v.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+ue+"]: "+C+`
`+M+`
`+ye+" "+Pe})}function As(v,C,M,q){v.info(function(){return"XMLHTTP TEXT ("+C+"): "+Zc(v,M)+(q?" "+q:"")})}function er(v,C){v.info(function(){return"TIMEOUT: "+C})}ts.prototype.info=function(){};function Zc(v,C){if(!v.g)return C;if(!C)return null;try{const ye=JSON.parse(C);if(ye){for(v=0;v<ye.length;v++)if(Array.isArray(ye[v])){var M=ye[v];if(!(M.length<2)){var q=M[1];if(Array.isArray(q)&&!(q.length<1)){var ue=q[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(let Pe=1;Pe<q.length;Pe++)q[Pe]=""}}}}return Qs(ye)}catch{return C}}var lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cl;function Hn(){}T(Hn,ll),Hn.prototype.g=function(){return new XMLHttpRequest},cl=new Hn;function ze(v){return encodeURIComponent(String(v))}function dl(v){var C=1;v=v.split(":");const M=[];for(;C>0&&v.length;)M.push(v.shift()),C--;return v.length&&M.push(v.join(":")),M}function Di(v,C,M,q){this.j=v,this.i=C,this.l=M,this.S=q||1,this.V=new Xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Li}function Li(){this.i=null,this.g="",this.h=!1}var dn={},pn={};function ns(v,C,M){v.M=1,v.A=Gt(sn(C)),v.u=M,v.R=!0,is(v,null)}function is(v,C){v.F=Date.now(),Cs(v),v.B=sn(v.A);var M=v.B,q=v.S;Array.isArray(q)||(q=[String(q)]),Pr(M.i,"t",q),v.C=0,M=v.j.L,v.h=new Li,v.g=yl(v.j,M?C:null,!v.u),v.P>0&&(v.O=new Ln(p(v.Y,v,v.g),v.P)),C=v.V,M=v.g,q=v.ba;var ue="readystatechange";Array.isArray(ue)||(ue&&(ao[0]=ue.toString()),ue=ao);for(let ye=0;ye<ue.length;ye++){const Pe=Me(M,ue[ye],q||C.handleEvent,!1,C.h||C);if(!Pe)break;C.g[Pe.key]=Pe}C=v.J?J(v.J):{},v.u?(v.v||(v.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,C)):(v.v="GET",v.g.ea(v.B,v.v,null,C)),es(),Wc(v.i,v.v,v.B,v.l,v.S,v.u)}Di.prototype.ba=function(v){v=v.target;const C=this.O;C&&as(v)==3?C.j():this.Y(v)},Di.prototype.Y=function(v){try{if(v==this.g)e:{const nt=as(this.g),Rt=this.g.ya(),Mt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||nt!=4||Rt==7||(Rt==8||Mt<=0?es(3):es(2)),ss(this);var C=this.g.ca();this.X=C;var M=_u(this);if(this.o=C==200,gu(this.i,this.v,this.B,this.l,this.S,nt,C),this.o){if(this.U&&!this.L){t:{if(this.g){var q,ue=this.g;if((q=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(q)){var ye=q;break t}}ye=null}if(v=ye)As(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ns(this,v);else{this.o=!1,this.m=3,cn(12),qn(this),Oi(this);break e}}if(this.R){v=!0;let Qt;for(;!this.K&&this.C<M.length;)if(Qt=vu(this,M),Qt==pn){nt==4&&(this.m=4,cn(14),v=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==dn){this.m=4,cn(15),As(this.i,this.l,M,"[Invalid Chunk]"),v=!1;break}else As(this.i,this.l,Qt,null),Ns(this,Qt);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||M.length!=0||this.h.h||(this.m=1,cn(16),v=!1),this.o=this.o&&v,!v)As(this.i,this.l,M,"[Invalid Chunked Response]"),qn(this),Oi(this);else if(M.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),gl(Pe),Pe.P=!0,cn(11))}}else As(this.i,this.l,M,null),Ns(this,M);nt==4&&qn(this),this.o&&!this.K&&(nt==4?Ci(this.j,this):(this.o=!1,Cs(this)))}else ls(this.g),C==400&&M.indexOf("Unknown SID")>0?(this.m=3,cn(12)):(this.m=0,cn(13)),qn(this),Oi(this)}}}catch{}finally{}};function _u(v){if(!yu(v))return v.g.la();const C=An(v.g);if(C==="")return"";let M="";const q=C.length,ue=as(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return qn(v),Oi(v),"";v.h.i=new c.TextDecoder}for(let ye=0;ye<q;ye++)v.h.h=!0,M+=v.h.i.decode(C[ye],{stream:!(ue&&ye==q-1)});return C.length=0,v.h.g+=M,v.C=0,v.h.g}function yu(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function vu(v,C){var M=v.C,q=C.indexOf(`
`,M);return q==-1?pn:(M=Number(C.substring(M,q)),isNaN(M)?dn:(q+=1,q+M>C.length?pn:(C=C.slice(q,q+M),v.C=q+M,C)))}Di.prototype.cancel=function(){this.K=!0,qn(this)};function Cs(v){v.T=Date.now()+v.H,Qo(v,v.H)}function Qo(v,C){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Ss(p(v.aa,v),C)}function ss(v){v.D&&(c.clearTimeout(v.D),v.D=null)}Di.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(er(this.i,this.B),this.M!=2&&(es(),cn(17)),qn(this),this.m=2,Oi(this)):Qo(this,this.T-v)};function Oi(v){v.j.I==0||v.K||Ci(v.j,v)}function qn(v){ss(v);var C=v.O;C&&typeof C.dispose=="function"&&C.dispose(),v.O=null,Zo(v.V),v.g&&(C=v.g,v.g=null,C.abort(),C.dispose())}function Ns(v,C){try{var M=v.j;if(M.I!=0&&(M.g==v||Ui(M.h,v))){if(!v.L&&Ui(M.h,v)&&M.I==3){try{var q=M.Ba.g.parse(C)}catch{q=null}if(Array.isArray(q)&&q.length==3){var ue=q;if(ue[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<v.F)oa(M),Or(M);else break e;po(M),cn(18)}}else M.xa=ue[1],0<M.xa-M.K&&ue[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Ss(p(M.Va,M),6e3));Is(M.h)<=1&&M.ta&&(M.ta=void 0)}else us(M,11)}else if((v.L||M.g==v)&&oa(M),!K(C))for(ue=M.Ba.g.parse(C),C=0;C<ue.length;C++){let Mt=ue[C];const Qt=Mt[0];if(!(Qt<=M.K))if(M.K=Qt,Mt=Mt[1],M.I==2)if(Mt[0]=="c"){M.M=Mt[1],M.ba=Mt[2];const zi=Mt[3];zi!=null&&(M.ka=zi,M.j.info("VER="+M.ka));const ji=Mt[4];ji!=null&&(M.za=ji,M.j.info("SVER="+M.za));const Ni=Mt[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(q=1.5*Ni,M.O=q,M.j.info("backChannelRequestTimeoutMs_="+q)),q=M;const ds=v.g;if(ds){const go=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var ye=q.h;ye.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(tr(ye,ye.h),ye.h=null))}if(q.G){const _o=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(q.wa=_o,Oe(q.J,q.G,_o))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-v.F,M.j.info("Handshake RTT: "+M.T+"ms")),q=M;var Pe=v;if(q.na=_l(q,q.L?q.ba:null,q.W),Pe.L){ea(q.h,Pe);var nt=Pe,Rt=q.O;Rt&&(nt.H=Rt),nt.D&&(ss(nt),Cs(nt)),q.g=Pe}else pl(q);M.i.length>0&&mi(M)}else Mt[0]!="stop"&&Mt[0]!="close"||us(M,7);else M.I==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?us(M,7):pt(M):Mt[0]!="noop"&&M.l&&M.l.qa(Mt),M.A=0)}}es(4)}catch{}}var gn=class{constructor(v,C){this.g=v,this.map=C}};function hl(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fl(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Is(v){return v.h?1:v.g?v.g.size:0}function Ui(v,C){return v.h?v.h==C:v.g?v.g.has(C):!1}function tr(v,C){v.g?v.g.add(C):v.h=C}function ea(v,C){v.h&&v.h==C?v.h=null:v.g&&v.g.has(C)&&v.g.delete(C)}hl.prototype.cancel=function(){if(this.i=ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function ta(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let C=v.i;for(const M of v.g.values())C=C.concat(M.G);return C}return N(v.i)}var Mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(v,C){if(v){v=v.split("&");for(let M=0;M<v.length;M++){const q=v[M].indexOf("=");let ue,ye=null;q>=0?(ue=v[M].substring(0,q),ye=v[M].substring(q+1)):ue=v[M],C(ue,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function xt(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;v instanceof xt?(this.l=v.l,rn(this,v.j),this.o=v.o,this.g=v.g,Si(this,v.u),this.h=v.h,uo(this,fo(v.i)),this.m=v.m):v&&(C=String(v).match(Mr))?(this.l=!1,rn(this,C[1]||"",!0),this.o=Vi(C[2]||""),this.g=Vi(C[3]||"",!0),Si(this,C[4]),this.h=Vi(C[5]||"",!0),uo(this,C[6]||"",!0),this.m=Vi(C[7]||"")):(this.l=!1,this.i=new Bi(null,this.l))}xt.prototype.toString=function(){const v=[];var C=this.j;C&&v.push(Rs(C,na,!0),":");var M=this.g;return(M||C=="file")&&(v.push("//"),(C=this.o)&&v.push(Rs(C,na,!0),"@"),v.push(ze(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&v.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&v.push("/"),v.push(Rs(M,M.charAt(0)=="/"?rs:co,!0))),(M=this.i.toString())&&v.push("?",M),(M=this.m)&&v.push("#",Rs(M,Ms)),v.join("")},xt.prototype.resolve=function(v){const C=sn(this);let M=!!v.j;M?rn(C,v.j):M=!!v.o,M?C.o=v.o:M=!!v.g,M?C.g=v.g:M=v.u!=null;var q=v.h;if(M)Si(C,v.u);else if(M=!!v.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var ue=C.h.lastIndexOf("/");ue!=-1&&(q=C.h.slice(0,ue+1)+q)}if(ue=q,ue==".."||ue==".")q="";else if(ue.indexOf("./")!=-1||ue.indexOf("/.")!=-1){q=ue.lastIndexOf("/",0)==0,ue=ue.split("/");const ye=[];for(let Pe=0;Pe<ue.length;){const nt=ue[Pe++];nt=="."?q&&Pe==ue.length&&ye.push(""):nt==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),q&&Pe==ue.length&&ye.push("")):(ye.push(nt),q=!0)}q=ye.join("/")}else q=ue}return M?C.h=q:M=v.i.toString()!=="",M?uo(C,fo(v.i)):M=!!v.m,M&&(C.m=v.m),C};function sn(v){return new xt(v)}function rn(v,C,M){v.j=M?Vi(C,!0):C,v.j&&(v.j=v.j.replace(/:$/,""))}function Si(v,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);v.u=C}else v.u=null}function uo(v,C,M){C instanceof Bi?(v.i=C,kr(v.i,v.l)):(M||(C=Rs(C,$t)),v.i=new Bi(C,v.l))}function Oe(v,C,M){v.i.set(C,M)}function Gt(v){return Oe(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Vi(v,C){return v?C?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Rs(v,C,M){return typeof v=="string"?(v=encodeURI(v).replace(C,Xt),M&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Xt(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var na=/[#\/\?@]/g,co=/[#\?:]/g,rs=/[#\?]/g,$t=/[#\?@]/g,Ms=/#/g;function Bi(v,C){this.h=this.g=null,this.i=v||null,this.j=!!C}function Sn(v){v.g||(v.g=new Map,v.h=0,v.i&&gt(v.i,function(C,M){v.add(decodeURIComponent(C.replace(/\+/g," ")),M)}))}n=Bi.prototype,n.add=function(v,C){Sn(this),this.i=null,v=Ps(this,v);let M=this.g.get(v);return M||this.g.set(v,M=[]),M.push(C),this.h+=1,this};function ia(v,C){Sn(v),C=Ps(v,C),v.g.has(C)&&(v.i=null,v.h-=v.g.get(C).length,v.g.delete(C))}function nr(v,C){return Sn(v),C=Ps(v,C),v.g.has(C)}n.forEach=function(v,C){Sn(this),this.g.forEach(function(M,q){M.forEach(function(ue){v.call(C,ue,q,this)},this)},this)};function ho(v,C){Sn(v);let M=[];if(typeof C=="string")nr(v,C)&&(M=M.concat(v.g.get(Ps(v,C))));else for(v=Array.from(v.g.values()),C=0;C<v.length;C++)M=M.concat(v[C]);return M}n.set=function(v,C){return Sn(this),this.i=null,v=Ps(this,v),nr(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[C]),this.h+=1,this},n.get=function(v,C){return v?(v=ho(this,v),v.length>0?String(v[0]):C):C};function Pr(v,C,M){ia(v,C),M.length>0&&(v.i=null,v.g.set(Ps(v,C),N(M)),v.h+=M.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],C=Array.from(this.g.keys());for(let q=0;q<C.length;q++){var M=C[q];const ue=ze(M);M=ho(this,M);for(let ye=0;ye<M.length;ye++){let Pe=ue;M[ye]!==""&&(Pe+="="+ze(M[ye])),v.push(Pe)}}return this.i=v.join("&")};function fo(v){const C=new Bi;return C.i=v.i,v.g&&(C.g=new Map(v.g),C.h=v.h),C}function Ps(v,C){return C=String(C),v.j&&(C=C.toLowerCase()),C}function kr(v,C){C&&!v.j&&(Sn(v),v.i=null,v.g.forEach(function(M,q){const ue=q.toLowerCase();q!=ue&&(ia(this,q),Pr(this,ue,M))},v)),v.j=C}function di(v,C){const M=new ts;if(c.Image){const q=new Image;q.onload=x(hi,M,"TestLoadImage: loaded",!0,C,q),q.onerror=x(hi,M,"TestLoadImage: error",!1,C,q),q.onabort=x(hi,M,"TestLoadImage: abort",!1,C,q),q.ontimeout=x(hi,M,"TestLoadImage: timeout",!1,C,q),c.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=v}else C(!1)}function sa(v,C){const M=new ts,q=new AbortController,ue=setTimeout(()=>{q.abort(),hi(M,"TestPingServer: timeout",!1,C)},1e4);fetch(v,{signal:q.signal}).then(ye=>{clearTimeout(ue),ye.ok?hi(M,"TestPingServer: ok",!0,C):hi(M,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ue),hi(M,"TestPingServer: error",!1,C)})}function hi(v,C,M,q,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),q(M)}catch{}}function Dr(){this.g=new al}function Ze(v){this.i=v.Sb||null,this.h=v.ab||!1}T(Ze,ll),Ze.prototype.g=function(){return new Gn(this.i,this.h)};function Gn(v,C){mt.call(this),this.H=v,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Gn,mt),n=Gn.prototype,n.open=function(v,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=C,this.readyState=1,Ai(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(C.body=v),(this.H||c).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dt(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dt(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var C=v.value?v.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!v.done}))&&(this.response=this.responseText+=C)}v.done?ir(this):Ai(this),this.readyState==3&&Dt(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,ir(this))},n.Na=function(v){this.g&&(this.response=v,ir(this))},n.ga=function(){this.g&&ir(this)};function ir(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Ai(v)}n.setRequestHeader=function(v,C){this.A.append(v,C)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],C=this.h.entries();for(var M=C.next();!M.done;)M=M.value,v.push(M[0]+": "+M[1]),M=C.next();return v.join(`\r
`)};function Ai(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Gn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function fi(v){let C="";return Qe(v,function(M,q){C+=q,C+=":",C+=M,C+=`\r
`}),C}function sr(v,C,M){e:{for(q in M){var q=!1;break e}q=!0}q||(M=fi(M),typeof v=="string"?M!=null&&ze(M):Oe(v,C,M))}function Et(v){mt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Et,mt);var Fi=/^https?$/i,rr=["POST","PUT"];n=Et.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,C,M,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);C=C?C.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cl.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(C,String(v),!0),this.B=!1}catch(ye){on(this,ye);return}if(v=M||"",M=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var ue in q)M.set(ue,q[ue]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const ye of q.keys())M.set(ye,q.get(ye));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(M.keys()).find(ye=>ye.toLowerCase()=="content-type"),ue=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(rr,C,void 0)>=0)||q||ue||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Pe]of M)this.g.setRequestHeader(ye,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ye){on(this,ye)}};function on(v,C){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=C,v.o=5,os(v),ks(v)}function os(v){v.A||(v.A=!0,zt(v,"complete"),zt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,zt(this,"complete"),zt(this,"abort"),ks(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},n.Xa=function(){Lr(this)};function Lr(v){if(v.h&&typeof a<"u"){if(v.v&&as(v)==4)setTimeout(v.Ca.bind(v),0);else if(zt(v,"readystatechange"),as(v)==4){v.h=!1;try{const ye=v.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var M;if(!(M=C)){var q;if(q=ye===0){let Pe=String(v.D).match(Mr)[1]||null;!Pe&&c.self&&c.self.location&&(Pe=c.self.location.protocol.slice(0,-1)),q=!Fi.test(Pe?Pe.toLowerCase():"")}M=q}if(M)zt(v,"complete"),zt(v,"success");else{v.o=6;try{var ue=as(v)>2?v.g.statusText:""}catch{ue=""}v.l=ue+" ["+v.ca()+"]",os(v)}}finally{ks(v)}}}}function ks(v,C){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const M=v.g;v.g=null,C||zt(v,"ready");try{M.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function as(v){return v.g?v.g.readyState:0}n.ca=function(){try{return as(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var C=this.g.responseText;return v&&C.indexOf(v)==0&&(C=C.substring(v.length)),Yc(C)}};function An(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(v){const C={};v=(v.g&&as(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<v.length;q++){if(K(v[q]))continue;var M=dl(v[q]);const ue=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const ye=C[ue]||[];C[ue]=ye,ye.push(M)}pe(C,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(v,C,M){return M&&M.internalChannelParams&&M.internalChannelParams[v]||C}function or(v){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ds("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ds("baseRetryDelayMs",5e3,v),this.Za=Ds("retryDelaySeedMs",1e4,v),this.Ta=Ds("forwardChannelMaxRetries",2,v),this.va=Ds("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new hl(v&&v.concurrentRequestLimit),this.Ba=new Dr,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=or.prototype,n.ka=8,n.I=1,n.connect=function(v,C,M,q){cn(0),this.W=v,this.H=C||{},M&&q!==void 0&&(this.H.OSID=M,this.H.OAID=q),this.F=this.X,this.J=_l(this,null,this.W),mi(this)};function pt(v){if($n(v),v.I==3){var C=v.V++,M=sn(v.J);if(Oe(M,"SID",v.M),Oe(M,"RID",C),Oe(M,"TYPE","terminate"),ar(v,M),C=new Di(v,v.j,C),C.M=2,C.A=Gt(sn(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(C.A.toString(),"")}catch{}!M&&c.Image&&(new Image().src=C.A,M=!0),M||(C.g=yl(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Cs(C)}cs(v)}function Or(v){v.g&&(gl(v),v.g.cancel(),v.g=null)}function $n(v){Or(v),v.v&&(c.clearTimeout(v.v),v.v=null),oa(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function mi(v){if(!fl(v.h)&&!v.m){v.m=!0;var C=v.Ea;Z||k(),Y||(Z(),Y=!0),D.add(C,v),v.D=0}}function mo(v,C){return Is(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=C.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Ss(p(v.Ea,v,C),wu(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ue=new Di(this,this.j,v);let ye=this.o;if(this.U&&(ye?(ye=J(ye),be(ye,this.U)):ye=this.U),this.u!==null||this.R||(ue.J=ye,ye=null),this.S)e:{for(var C=0,M=0;M<this.i.length;M++){t:{var q=this.i[M];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(C+=q,C>4096){C=M;break e}if(C===4096||M===this.i.length-1){C=M+1;break e}}C=1e3}else C=1e3;C=xu(this,ue,C),M=sn(this.J),Oe(M,"RID",v),Oe(M,"CVER",22),this.G&&Oe(M,"X-HTTP-Session-Id",this.G),ar(this,M),ye&&(this.R?C="headers="+ze(fi(ye))+"&"+C:this.u&&sr(M,this.u,ye)),tr(this.h,ue),this.Ra&&Oe(M,"TYPE","init"),this.S?(Oe(M,"$req",C),Oe(M,"SID","null"),ue.U=!0,ns(ue,M,null)):ns(ue,M,C),this.I=2}}else this.I==3&&(v?ml(this,v):this.i.length==0||fl(this.h)||ml(this))};function ml(v,C){var M;C?M=C.l:M=v.V++;const q=sn(v.J);Oe(q,"SID",v.M),Oe(q,"RID",M),Oe(q,"AID",v.K),ar(v,q),v.u&&v.o&&sr(q,v.u,v.o),M=new Di(v,v.j,M,v.D+1),v.u===null&&(M.J=v.o),C&&(v.i=C.G.concat(v.i)),C=xu(v,M,1e3),M.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),tr(v.h,M),ns(M,q,C)}function ar(v,C){v.H&&Qe(v.H,function(M,q){Oe(C,q,M)}),v.l&&Qe({},function(M,q){Oe(C,q,M)})}function xu(v,C,M){M=Math.min(v.i.length,M);const q=v.l?p(v.l.Ka,v.l,v):null;e:{var ue=v.i;let nt=-1;for(;;){const Rt=["count="+M];nt==-1?M>0?(nt=ue[0].g,Rt.push("ofs="+nt)):nt=0:Rt.push("ofs="+nt);let Mt=!0;for(let Qt=0;Qt<M;Qt++){var ye=ue[Qt].g;const zi=ue[Qt].map;if(ye-=nt,ye<0)nt=Math.max(0,ue[Qt].g-100),Mt=!1;else try{ye="req"+ye+"_"||"";try{var Pe=zi instanceof Map?zi:Object.entries(zi);for(const[ji,Ni]of Pe){let ds=Ni;f(Ni)&&(ds=Qs(Ni)),Rt.push(ye+ji+"="+encodeURIComponent(ds))}}catch(ji){throw Rt.push(ye+"type="+encodeURIComponent("_badmap")),ji}}catch{q&&q(zi)}}if(Mt){Pe=Rt.join("&");break e}}Pe=void 0}return v=v.i.splice(0,M),C.G=v,Pe}function pl(v){if(!v.g&&!v.v){v.Y=1;var C=v.Da;Z||k(),Y||(Z(),Y=!0),D.add(C,v),v.A=0}}function po(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Ss(p(v.Da,v),wu(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,ra(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Ss(p(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cn(10),Or(this),ra(this))};function gl(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function ra(v){v.g=new Di(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var C=sn(v.na);Oe(C,"RID","rpc"),Oe(C,"SID",v.M),Oe(C,"AID",v.K),Oe(C,"CI",v.F?"0":"1"),!v.F&&v.ia&&Oe(C,"TO",v.ia),Oe(C,"TYPE","xmlhttp"),ar(v,C),v.u&&v.o&&sr(C,v.u,v.o),v.O&&(v.g.H=v.O);var M=v.g;v=v.ba,M.M=1,M.A=Gt(sn(C)),M.u=null,M.R=!0,is(M,v)}n.Va=function(){this.C!=null&&(this.C=null,Or(this),po(this),cn(19))};function oa(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function Ci(v,C){var M=null;if(v.g==C){oa(v),gl(v),v.g=null;var q=2}else if(Ui(v.h,C))M=C.G,ea(v.h,C),q=1;else return;if(v.I!=0){if(C.o)if(q==1){M=C.u?C.u.length:0,C=Date.now()-C.F;var ue=v.D;q=Xo(),zt(q,new Es(q,M)),mi(v)}else pl(v);else if(ue=C.m,ue==3||ue==0&&C.X>0||!(q==1&&mo(v,C)||q==2&&po(v)))switch(M&&M.length>0&&(C=v.h,C.i=C.i.concat(M)),ue){case 1:us(v,5);break;case 4:us(v,10);break;case 3:us(v,6);break;default:us(v,2)}}}function wu(v,C){let M=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(M*=2),M*C}function us(v,C){if(v.j.info("Error code "+C),C==2){var M=p(v.bb,v),q=v.Ua;const ue=!q;q=new xt(q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rn(q,"https"),Gt(q),ue?di(q.toString(),M):sa(q.toString(),M)}else cn(2);v.I=0,v.l&&v.l.pa(C),cs(v),$n(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function cs(v){if(v.I=0,v.ja=[],v.l){const C=ta(v.h);(C.length!=0||v.i.length!=0)&&(O(v.ja,C),O(v.ja,v.i),v.h.i.length=0,N(v.i),v.i.length=0),v.l.oa()}}function _l(v,C,M){var q=M instanceof xt?sn(M):new xt(M);if(q.g!="")C&&(q.g=C+"."+q.g),Si(q,q.u);else{var ue=c.location;q=ue.protocol,C=C?C+"."+ue.hostname:ue.hostname,ue=+ue.port;const ye=new xt(null);q&&rn(ye,q),C&&(ye.g=C),ue&&Si(ye,ue),M&&(ye.h=M),q=ye}return M=v.G,C=v.wa,M&&C&&Oe(q,M,C),Oe(q,"VER",v.ka),ar(v,q),q}function yl(v,C,M){if(C&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=v.Aa&&!v.ma?new Et(new Ze({ab:M})):new Et(v.ma),C.Fa(v.L),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function aa(){}n=aa.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ur(){}Ur.prototype.g=function(v,C){return new Jn(v,C)};function Jn(v,C){mt.call(this),this.g=new or(C),this.l=v,this.h=C&&C.messageUrlParams||null,v=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(v?v["X-WebChannel-Content-Type"]=C.messageContentType:v={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(v?v["X-WebChannel-Client-Profile"]=C.sa:v={"X-WebChannel-Client-Profile":C.sa}),this.g.U=v,(v=C&&C.Qb)&&!K(v)&&(this.g.u=v),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!K(C)&&(this.g.G=C,v=this.h,v!==null&&C in v&&(v=this.h,C in v&&delete v[C])),this.j=new lr(this)}T(Jn,mt),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){pt(this.g)},Jn.prototype.o=function(v){var C=this.g;if(typeof v=="string"){var M={};M.__data__=v,v=M}else this.v&&(M={},M.__data__=Qs(v),v=M);C.i.push(new gn(C.Ya++,v)),C.I==3&&mi(C)},Jn.prototype.N=function(){this.g.l=null,delete this.j,pt(this.g),delete this.g,Jn.Z.N.call(this)};function vl(v){xn.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var C=v.__sm__;if(C){e:{for(const M in C){v=M;break e}v=void 0}(this.i=v)&&(v=this.i,C=C!==null&&v in C?C[v]:void 0),this.data=C}else this.data=v}T(vl,xn);function bu(){Ei.call(this),this.status=1}T(bu,Ei);function lr(v){this.g=v}T(lr,aa),lr.prototype.ra=function(){zt(this.g,"a")},lr.prototype.qa=function(v){zt(this.g,new vl(v))},lr.prototype.pa=function(v){zt(this.g,new bu)},lr.prototype.oa=function(){zt(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,bR=function(){return new Ur},wR=function(){return Xo()},xR=un,_0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,Dm=lo,ul.COMPLETE="complete",vR=ul,mu.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Xd=mu,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,yR=Et}).apply(typeof dm<"u"?dm:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc="12.8.0";function lj(n){qc=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Ev("@firebase/firestore");function lc(){return ru.logLevel}function Ve(n,...e){if(ru.logLevel<=Ct.DEBUG){const t=e.map(Uv);ru.debug(`Firestore (${qc}): ${n}`,...t)}}function Go(n,...e){if(ru.logLevel<=Ct.ERROR){const t=e.map(Uv);ru.error(`Firestore (${qc}): ${n}`,...t)}}function Cc(n,...e){if(ru.logLevel<=Ct.WARN){const t=e.map(Uv);ru.warn(`Firestore (${qc}): ${n}`,...t)}}function Uv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,TR(n,i,t)}function TR(n,e,t){let i=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Go(i),new Error(i)}function Ht(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||TR(e,r,i)}function ut(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Wo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vi.UNAUTHENTICATED)))}shutdown(){}}class cj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dj{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ht(this.o===void 0,42304);let i=this.i;const r=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new Ya;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ya,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await r(this.currentUser)}))},f=m=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ya)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ht(typeof i.accessToken=="string",31837,{l:i}),new ER(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ht(e===null||typeof e=="string",2055,{h:e}),new vi(e)}}class hj{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fj{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new hj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ht(this.o===void 0,3512);const i=a=>{a.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=pj(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Nt(n,e){return n<e?-1:n>e?1:0}function y0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return Ey(r)===Ey(a)?Nt(r,a):Ey(r)?1:-1}return Nt(n.length,e.length)}const gj=55296,_j=57343;function Ey(n){const e=n.charCodeAt(0);return e>=gj&&e<=_j}function Nc(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="__name__";class Wr{constructor(e,t,i){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&et(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Wr.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Nt(e.length,t.length)}static compareSegments(e,t){const i=Wr.isNumericId(e),r=Wr.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Wr.extractNumericId(e).compare(Wr.extractNumericId(t)):y0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ka.fromString(e.substring(4,e.length-2))}}class tn extends Wr{construct(e,t,i){return new tn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new tn(t)}static emptyPath(){return new tn([])}}const yj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oi extends Wr{construct(e,t,i){return new oi(e,t,i)}static isValidIdentifier(e){return yj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mA}static keyField(){return new oi([mA])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Ue(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ue(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else f==="`"?(c=!c,r++):f!=="."||c?(i+=f,r++):(a(),r++)}if(a(),c)throw new Ue(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oi(t)}static emptyPath(){return new oi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.path=e}static fromPath(e){return new We(tn.fromString(e))}static fromName(e){return new We(tn.fromString(e).popFirst(5))}static empty(){return new We(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n,e,t){if(!t)throw new Ue(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vj(n,e,t,i){if(e===!0&&i===!0)throw new Ue(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pA(n){if(!We.isDocumentKey(n))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gA(n){if(We.isDocumentKey(n))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":et(12329,{type:typeof n})}function Ic(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(n);throw new Ue(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Bh(n,e){if(!AR(n))throw new Ue(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Ue(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=-62135596800,yA=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*yA);return new nn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_A)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yA}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bh(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_A;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:kn("string",nn._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new nn(0,0))}static max(){return new at(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=-1;function xj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=at.fromTimestamp(i===1e9?new nn(t+1,0):new nn(t,i));return new Qa(r,We.empty(),e)}function wj(n){return new Qa(n.readTime,n.key,bh)}class Qa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Qa(at.min(),We.empty(),bh)}static max(){return new Qa(at.max(),We.empty(),bh)}}function bj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=We.comparator(n.documentKey,e.documentKey),t!==0?t:Nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ej{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==Tj)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.reject(t)}static resolve(e){return new Ne(((t,i)=>{t(e)}))}static reject(e){return new Ne(((t,i)=>{i(e)}))}static waitFor(e){return new Ne(((t,i)=>{let r=0,a=0,c=!1;e.forEach((f=>{++r,f.next((()=>{++a,c&&a===r&&t()}),(m=>i(m)))})),c=!0,a===r&&t()}))}static or(e){let t=Ne.resolve(!1);for(const i of e)t=t.next((r=>r?Ne.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new Ne(((i,r)=>{const a=e.length,c=new Array(a);let f=0;for(let m=0;m<a;m++){const p=m;t(e[p]).next((x=>{c[p]=x,++f,f===a&&i(c)}),(x=>r(x)))}}))}static doWhile(e,t){return new Ne(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Sj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $c(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=-1;function eg(n){return n==null}function fp(n){return n===0&&1/n==-1/0}function Aj(n){return typeof n=="number"&&Number.isInteger(n)&&!fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="";function Cj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vA(e)),e=Nj(n.get(t),e);return vA(e)}function Nj(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case CR:t+="";break;default:t+=a}}return t}function vA(n){return n+CR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hm(this.root,e,this.comparator,!1)}getReverseIterator(){return new hm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hm(this.root,e,this.comparator,!0)}}class hm{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??ri.RED,this.left=r??ri.EMPTY,this.right=a??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new ri(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ri.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1;ri.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new ri(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wA(this.data.getIterator())}getIteratorFrom(e){return new wA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class wA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.fields=e,e.sort(oi.comparator)}static empty(){return new vr([])}unionWith(e){let t=new jn(oi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IR("Invalid base64 string: "+a):a}})(e);return new ui(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a})(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const Ij=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function el(n){if(Ht(!!n,39018),typeof n=="string"){let e=0;const t=Ij.exec(n);if(Ht(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tn(n.seconds),nanos:Tn(n.nanos)}}function Tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tl(n){return typeof n=="string"?ui.fromBase64String(n):ui.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="server_timestamp",MR="__type__",PR="__previous_value__",kR="__local_write_time__";function Fv(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MR])==null?void 0:i.stringValue)===RR}function tg(n){const e=n.mapValue.fields[PR];return Fv(e)?tg(e):e}function Th(n){const e=el(n.mapValue.fields[kR].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t,i,r,a,c,f,m,p,x,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=x,this.apiKey=T}}const mp="(default)";class Eh{constructor(e,t){this.projectId=e,this.database=t||mp}static empty(){return new Eh("","")}get isDefaultDatabase(){return this.database===mp}isEqual(e){return e instanceof Eh&&e.projectId===this.projectId&&e.database===this.database}}function Mj(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ue(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="__type__",Pj="__max__",fm={mapValue:{}},LR="__vector__",pp="value";function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fv(n)?4:Dj(n)?9007199254740991:kj(n)?10:11:et(28295,{value:n})}function ro(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Th(n).isEqual(Th(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=el(r.timestampValue),f=el(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return tl(r.bytesValue).isEqual(tl(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Tn(r.geoPointValue.latitude)===Tn(a.geoPointValue.latitude)&&Tn(r.geoPointValue.longitude)===Tn(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Tn(r.integerValue)===Tn(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Tn(r.doubleValue),f=Tn(a.doubleValue);return c===f?fp(c)===fp(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Nc(n.arrayValue.values||[],e.arrayValue.values||[],ro);case 10:case 11:return(function(r,a){const c=r.mapValue.fields||{},f=a.mapValue.fields||{};if(xA(c)!==xA(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!ro(c[m],f[m])))return!1;return!0})(n,e);default:return et(52216,{left:n})}}function Sh(n,e){return(n.values||[]).find((t=>ro(t,e)))!==void 0}function Rc(n,e){if(n===e)return 0;const t=nl(n),i=nl(e);if(t!==i)return Nt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const f=Tn(a.integerValue||a.doubleValue),m=Tn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return bA(n.timestampValue,e.timestampValue);case 4:return bA(Th(n),Th(e));case 5:return y0(n.stringValue,e.stringValue);case 6:return(function(a,c){const f=tl(a),m=tl(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const f=a.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const x=Nt(f[p],m[p]);if(x!==0)return x}return Nt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const f=Nt(Tn(a.latitude),Tn(c.latitude));return f!==0?f:Nt(Tn(a.longitude),Tn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return TA(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var S,N,O,V;const f=a.fields||{},m=c.fields||{},p=(S=f[pp])==null?void 0:S.arrayValue,x=(N=m[pp])==null?void 0:N.arrayValue,T=Nt(((O=p==null?void 0:p.values)==null?void 0:O.length)||0,((V=x==null?void 0:x.values)==null?void 0:V.length)||0);return T!==0?T:TA(p,x)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===fm.mapValue&&c===fm.mapValue)return 0;if(a===fm.mapValue)return 1;if(c===fm.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),p=c.fields||{},x=Object.keys(p);m.sort(),x.sort();for(let T=0;T<m.length&&T<x.length;++T){const S=y0(m[T],x[T]);if(S!==0)return S;const N=Rc(f[m[T]],p[x[T]]);if(N!==0)return N}return Nt(m.length,x.length)})(n.mapValue,e.mapValue);default:throw et(23264,{he:t})}}function bA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Nt(n,e);const t=el(n),i=el(e),r=Nt(t.seconds,i.seconds);return r!==0?r:Nt(t.nanos,i.nanos)}function TA(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Rc(t[r],i[r]);if(a)return a}return Nt(t.length,i.length)}function Mc(n){return v0(n)}function v0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=el(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return tl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return We.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=v0(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const c of i)a?a=!1:r+=",",r+=`${c}:${v0(t.fields[c])}`;return r+"}"})(n.mapValue):et(61005,{value:n})}function Lm(n){switch(nl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(n);return e?16+Lm(e):16;case 5:return 2*n.stringValue.length;case 6:return tl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Lm(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return uu(i.fields,((a,c)=>{r+=a.length+Lm(c)})),r})(n.mapValue);default:throw et(13486,{value:n})}}function EA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function x0(n){return!!n&&"integerValue"in n}function zv(n){return!!n&&"arrayValue"in n}function SA(n){return!!n&&"nullValue"in n}function AA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Om(n){return!!n&&"mapValue"in n}function kj(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[DR])==null?void 0:i.stringValue)===LR}function lh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return uu(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=lh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return{...n}}function Dj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Pj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=oi.emptyPath(),i={},r=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,r),i={},r=[],t=f.popLast()}c?i[f.lastSegment()]=lh(c):r.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Om(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){uu(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new qs(lh(this.value))}}function OR(n){const e=[];return uu(n.fields,((t,i)=>{const r=new oi([t]);if(Om(i)){const a=OR(i.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)})),new vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,i,r,a,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new xi(e,0,at.min(),at.min(),at.min(),qs.empty(),0)}static newFoundDocument(e,t,i,r){return new xi(e,1,t,at.min(),i,r,0)}static newNoDocument(e,t){return new xi(e,2,t,at.min(),at.min(),qs.empty(),0)}static newUnknownDocument(e,t){return new xi(e,3,t,at.min(),at.min(),qs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.position=e,this.inclusive=t}}function CA(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],c=n.position[r];if(a.field.isKeyField()?i=We.comparator(We.fromName(c.referenceValue),t.key):i=Rc(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function NA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ro(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{}class Pn extends UR{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Uj(e,t,i):t==="array-contains"?new Fj(e,i):t==="in"?new zj(e,i):t==="not-in"?new jj(e,i):t==="array-contains-any"?new Hj(e,i):new Pn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Vj(e,i):new Bj(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rc(t,this.value)):t!==null&&nl(this.value)===nl(t)&&this.matchesComparison(Rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends UR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cr(e,t)}matches(e){return VR(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VR(n){return n.op==="and"}function BR(n){return Oj(n)&&VR(n)}function Oj(n){for(const e of n.filters)if(e instanceof Cr)return!1;return!0}function w0(n){if(n instanceof Pn)return n.field.canonicalString()+n.op.toString()+Mc(n.value);if(BR(n))return n.filters.map((e=>w0(e))).join(",");{const e=n.filters.map((t=>w0(t))).join(",");return`${n.op}(${e})`}}function FR(n,e){return n instanceof Pn?(function(i,r){return r instanceof Pn&&i.op===r.op&&i.field.isEqual(r.field)&&ro(i.value,r.value)})(n,e):n instanceof Cr?(function(i,r){return r instanceof Cr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,c,f)=>a&&FR(c,r.filters[f])),!0):!1})(n,e):void et(19439)}function zR(n){return n instanceof Pn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mc(t.value)}`})(n):n instanceof Cr?(function(t){return t.op.toString()+" {"+t.getFilters().map(zR).join(" ,")+"}"})(n):"Filter"}class Uj extends Pn{constructor(e,t,i){super(e,t,i),this.key=We.fromName(i.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vj extends Pn{constructor(e,t){super(e,"in",t),this.keys=jR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Bj extends Pn{constructor(e,t){super(e,"not-in",t),this.keys=jR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>We.fromName(i.referenceValue)))}class Fj extends Pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zv(t)&&Sh(t.arrayValue,this.value)}}class zj extends Pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sh(this.value.arrayValue,t)}}class jj extends Pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sh(this.value.arrayValue,t)}}class Hj extends Pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Sh(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,t=null,i=[],r=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=c,this.endAt=f,this.Te=null}}function IA(n,e=null,t=[],i=[],r=null,a=null,c=null){return new qj(n,e,t,i,r,a,c)}function jv(n){const e=ut(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>w0(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Mc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Mc(i))).join(",")),e.Te=t}return e.Te}function Hv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Lj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NA(n.startAt,e.startAt)&&NA(n.endAt,e.endAt)}function b0(n){return We.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t=null,i=[],r=[],a=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Gj(n,e,t,i,r,a,c,f){return new Jc(n,e,t,i,r,a,c,f)}function HR(n){return new Jc(n)}function RA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $j(n){return We.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qR(n){return n.collectionGroup!==null}function uh(n){const e=ut(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new jn(oi.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ah(a,i))})),t.has(oi.keyField().canonicalString())||e.Ie.push(new Ah(oi.keyField(),i))}return e.Ie}function eo(n){const e=ut(n);return e.Ee||(e.Ee=Jj(e,uh(n))),e.Ee}function Jj(n,e){if(n.limitType==="F")return IA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ah(r.field,a)}));const t=n.endAt?new gp(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new gp(n.startAt.position,n.startAt.inclusive):null;return IA(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function T0(n,e){const t=n.filters.concat([e]);return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kj(n,e){const t=n.explicitOrderBy.concat([e]);return new Jc(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function E0(n,e,t){return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ng(n,e){return Hv(eo(n),eo(e))&&n.limitType===e.limitType}function GR(n){return`${jv(eo(n))}|lt:${n.limitType}`}function uc(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>zR(r))).join(", ")}]`),eg(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Mc(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Mc(r))).join(",")),`Target(${i})`})(eo(n))}; limitType=${n.limitType})`}function ig(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):We.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of uh(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(c,f,m){const p=CA(c,f,m);return c.inclusive?p<=0:p<0})(i.startAt,uh(i),r)||i.endAt&&!(function(c,f,m){const p=CA(c,f,m);return c.inclusive?p>=0:p>0})(i.endAt,uh(i),r))})(n,e)}function Yj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $R(n){return(e,t)=>{let i=!1;for(const r of uh(n)){const a=Wj(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function Wj(n,e,t){const i=n.field.isKeyField()?We.comparator(e.key,t.key):(function(a,c,f){const m=c.data.field(a),p=f.data.field(a);return m!==null&&p!==null?Rc(m,p):et(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){uu(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return NR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new fn(We.comparator);function $o(){return Zj}const JR=new fn(We.comparator);function Qd(...n){let e=JR;for(const t of n)e=e.insert(t.key,t);return e}function KR(n){let e=JR;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Zl(){return ch()}function YR(){return ch()}function ch(){return new cu((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Xj=new fn(We.comparator),Qj=new jn(We.comparator);function It(...n){let e=Qj;for(const t of n)e=e.add(t);return e}const eH=new jn(Nt);function tH(){return eH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fp(e)?"-0":e}}function WR(n){return{integerValue:""+n}}function nH(n,e){return Aj(e)?WR(e):qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this._=void 0}}function iH(n,e,t){return n instanceof _p?(function(r,a){const c={fields:{[MR]:{stringValue:RR},[kR]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Fv(a)&&(a=tg(a)),a&&(c.fields[PR]=a),{mapValue:c}})(t,e):n instanceof Ch?XR(n,e):n instanceof Nh?QR(n,e):(function(r,a){const c=ZR(r,a),f=MA(c)+MA(r.Ae);return x0(c)&&x0(r.Ae)?WR(f):qv(r.serializer,f)})(n,e)}function sH(n,e,t){return n instanceof Ch?XR(n,e):n instanceof Nh?QR(n,e):t}function ZR(n,e){return n instanceof yp?(function(i){return x0(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class _p extends sg{}class Ch extends sg{constructor(e){super(),this.elements=e}}function XR(n,e){const t=e2(e);for(const i of n.elements)t.some((r=>ro(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Nh extends sg{constructor(e){super(),this.elements=e}}function QR(n,e){let t=e2(e);for(const i of n.elements)t=t.filter((r=>!ro(r,i)));return{arrayValue:{values:t}}}class yp extends sg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MA(n){return Tn(n.integerValue||n.doubleValue)}function e2(n){return zv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rH(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Ch&&r instanceof Ch||i instanceof Nh&&r instanceof Nh?Nc(i.elements,r.elements,ro):i instanceof yp&&r instanceof yp?ro(i.Ae,r.Ae):i instanceof _p&&r instanceof _p})(n.transform,e.transform)}class oH{constructor(e,t){this.version=e,this.transformResults=t}}class to{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new to}static exists(e){return new to(void 0,e)}static updateTime(e){return new to(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Um(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rg{}function t2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gv(n.key,to.none()):new Fh(n.key,n.data,to.none());{const t=n.data,i=qs.empty();let r=new jn(oi.comparator);for(let a of e.fields)if(!r.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),r=r.add(a)}return new du(n.key,i,new vr(r.toArray()),to.none())}}function aH(n,e,t){n instanceof Fh?(function(r,a,c){const f=r.value.clone(),m=kA(r.fieldTransforms,a,c.transformResults);f.setAll(m),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof du?(function(r,a,c){if(!Um(r.precondition,a))return void a.convertToUnknownDocument(c.version);const f=kA(r.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(n2(r)),m.setAll(f),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function dh(n,e,t,i){return n instanceof Fh?(function(a,c,f,m){if(!Um(a.precondition,c))return f;const p=a.value.clone(),x=DA(a.fieldTransforms,m,c);return p.setAll(x),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof du?(function(a,c,f,m){if(!Um(a.precondition,c))return f;const p=DA(a.fieldTransforms,m,c),x=c.data;return x.setAll(n2(a)),x.setAll(p),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,c,f){return Um(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function lH(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=ZR(i.transform,r||null);a!=null&&(t===null&&(t=qs.empty()),t.set(i.field,a))}return t||null}function PA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Nc(i,r,((a,c)=>rH(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fh extends rg{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class du extends rg{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function n2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function kA(n,e,t){const i=new Map;Ht(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],c=a.transform,f=e.data.field(a.field);i.set(a.field,sH(c,f,t[r]))}return i}function DA(n,e,t){const i=new Map;for(const r of n){const a=r.transform,c=t.data.field(r.field);i.set(r.field,iH(a,c,e))}return i}class Gv extends rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uH extends rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&aH(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=dh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=dh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=YR();return this.mutations.forEach((r=>{const a=e.get(r.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(r.key)?null:f;const m=t2(c,f);m!==null&&i.set(r.key,m),c.isValidDocument()||c.convertToNoDocument(at.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),It())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,((t,i)=>PA(t,i)))&&Nc(this.baseMutations,e.baseMutations,((t,i)=>PA(t,i)))}}class $v{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ht(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Xj})();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,i[c].version);return new $v(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,Pt;function fH(n){switch(n){case Ce.OK:return et(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return et(15467,{code:n})}}function i2(n){if(n===void 0)return Go("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Mn.OK:return Ce.OK;case Mn.CANCELLED:return Ce.CANCELLED;case Mn.UNKNOWN:return Ce.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return Ce.INTERNAL;case Mn.UNAVAILABLE:return Ce.UNAVAILABLE;case Mn.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Mn.NOT_FOUND:return Ce.NOT_FOUND;case Mn.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Mn.ABORTED:return Ce.ABORTED;case Mn.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Mn.DATA_LOSS:return Ce.DATA_LOSS;default:return et(39323,{code:n})}}(Pt=Mn||(Mn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=new Ka([4294967295,4294967295],0);function LA(n){const e=mH().encode(n),t=new _R;return t.update(e),new Uint8Array(t.digest())}function OA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ka([t,i],0),new Ka([r,a],0)]}class Jv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new eh(`Invalid padding: ${t}`);if(i<0)throw new eh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new eh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ka.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Ka.fromNumber(i)));return r.compare(pH)===1&&(r=new Ka([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=LA(e),[i,r]=OA(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(i,r,a);if(!this.we(c))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Jv(a,r,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=LA(e),[i,r]=OA(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(i,r,a);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class eh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,zh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new og(at.min(),r,new fn(Nt),$o(),It())}}class zh{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new zh(i,t,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class s2{constructor(e,t){this.targetId=e,this.Ce=t}}class r2{constructor(e,t,i=ui.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class UA{constructor(){this.ve=0,this.Fe=VA(),this.Me=ui.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=It(),t=It(),i=It();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:et(38017,{changeType:a})}})),new zh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=VA()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gH{constructor(e){this.Ge=e,this.ze=new Map,this.je=$o(),this.He=mm(),this.Je=mm(),this.Ze=new fn(Nt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:et(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(b0(a))if(i===0){const c=new We(a.path);this.et(t,c,xi.newNoDocument(c,at.min()))}else Ht(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let c,f;try{c=tl(i).toUint8Array()}catch(m){if(m instanceof IR)return Cc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Jv(c,r,a)}catch(m){return Cc(m instanceof eh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const f=this.ot(c);if(f){if(a.current&&b0(f.target)){const m=new We(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,xi.newNoDocument(m,e))}a.Be&&(t.set(c,a.ke()),a.Ke())}}));let i=It();this.Je.forEach(((a,c)=>{let f=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const r=new og(e,t,this.Ze,this.je,i);return this.je=$o(),this.He=mm(),this.Je=mm(),this.Ze=new fn(Nt),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new UA,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new jn(Nt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new jn(Nt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UA),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mm(){return new fn(We.comparator)}function VA(){return new fn(We.comparator)}const _H={asc:"ASCENDING",desc:"DESCENDING"},yH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vH={and:"AND",or:"OR"};class xH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function S0(n,e){return n.useProto3Json||eg(e)?e:{value:e}}function vp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wH(n,e){return vp(n,e.toTimestamp())}function no(n){return Ht(!!n,49232),at.fromTimestamp((function(t){const i=el(t);return new nn(i.seconds,i.nanos)})(n))}function Kv(n,e){return A0(n,e).canonicalString()}function A0(n,e){const t=(function(r){return new tn(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function a2(n){const e=tn.fromString(n);return Ht(h2(e),10190,{key:e.toString()}),e}function C0(n,e){return Kv(n.databaseId,e.path)}function Sy(n,e){const t=a2(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(u2(t))}function l2(n,e){return Kv(n.databaseId,e)}function bH(n){const e=a2(n);return e.length===4?tn.emptyPath():u2(e)}function N0(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u2(n){return Ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BA(n,e,t){return{name:C0(n,e),fields:t.value.mapValue.fields}}function TH(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:et(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(p,x){return p.useProto3Json?(Ht(x===void 0||typeof x=="string",58123),ui.fromBase64String(x||"")):(Ht(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),ui.fromUint8Array(x||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const x=p.code===void 0?Ce.UNKNOWN:i2(p.code);return new Ue(x,p.message||"")})(c);t=new r2(i,r,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Sy(n,i.document.name),a=no(i.document.updateTime),c=i.document.createTime?no(i.document.createTime):at.min(),f=new qs({mapValue:{fields:i.document.fields}}),m=xi.newFoundDocument(r,a,c,f),p=i.targetIds||[],x=i.removedTargetIds||[];t=new Vm(p,x,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Sy(n,i.document),a=i.readTime?no(i.readTime):at.min(),c=xi.newNoDocument(r,a),f=i.removedTargetIds||[];t=new Vm([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Sy(n,i.document),a=i.removedTargetIds||[];t=new Vm([],a,r,null)}else{if(!("filter"in e))return et(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,c=new hH(r,a),f=i.targetId;t=new s2(f,c)}}return t}function EH(n,e){let t;if(e instanceof Fh)t={update:BA(n,e.key,e.value)};else if(e instanceof Gv)t={delete:C0(n,e.key)};else if(e instanceof du)t={update:BA(n,e.key,e.data),updateMask:kH(e.fieldMask)};else{if(!(e instanceof uH))return et(16599,{dt:e.type});t={verify:C0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,c){const f=c.transform;if(f instanceof _p)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ch)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Nh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yp)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw et(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:wH(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:et(27497)})(n,e.precondition)),t}function SH(n,e){return n&&n.length>0?(Ht(e!==void 0,14353),n.map((t=>(function(r,a){let c=r.updateTime?no(r.updateTime):no(a);return c.isEqual(at.min())&&(c=no(a)),new oH(c,r.transformResults||[])})(t,e)))):[]}function AH(n,e){return{documents:[l2(n,e.path)]}}function CH(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=l2(n,r);const a=(function(p){if(p.length!==0)return d2(Cr.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(p){if(p.length!==0)return p.map((x=>(function(S){return{field:cc(S.field),direction:RH(S.dir)}})(x)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=S0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function NH(n){let e=bH(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ht(i===1,65062);const x=t.from[0];x.allDescendants?r=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=(function(T){const S=c2(T);return S instanceof Cr&&BR(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(O){return new Ah(dc(O.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,eg(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(T){const S=!!T.before,N=T.values||[];return new gp(N,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,N=T.values||[];return new gp(N,S)})(t.endAt)),Gj(e,r,c,a,f,"F",m,p)}function IH(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=dc(t.unaryFilter.field);return Pn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=dc(t.unaryFilter.field);return Pn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=dc(t.unaryFilter.field);return Pn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=dc(t.unaryFilter.field);return Pn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pn.create(dc(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Cr.create(t.compositeFilter.filters.map((i=>c2(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return et(1026)}})(t.compositeFilter.op))})(n):et(30097,{filter:n})}function RH(n){return _H[n]}function MH(n){return yH[n]}function PH(n){return vH[n]}function cc(n){return{fieldPath:n.canonicalString()}}function dc(n){return oi.fromServerFormat(n.fieldPath)}function d2(n){return n instanceof Pn?(function(t){if(t.op==="=="){if(AA(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NAN"}};if(SA(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AA(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NAN"}};if(SA(t.value))return{unaryFilter:{field:cc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cc(t.field),op:MH(t.op),value:t.value}}})(n):n instanceof Cr?(function(t){const i=t.getFilters().map((r=>d2(r)));return i.length===1?i[0]:{compositeFilter:{op:PH(t.op),filters:i}}})(n):et(54877,{filter:n})}function kH(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function f2(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t,i,r,a=at.min(),c=at.min(),f=ui.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e){this.yt=e}}function LH(n){const e=NH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?E0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(){this.Sn=new UH}addToCollectionParentIndex(e,t){return this.Sn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(Qa.min())}updateCollectionGroup(e,t,i){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class UH{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new jn(tn.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new jn(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m2=41943040;class Zi{static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(m2,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Pc(0)}static ar(){return new Pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="LruGarbageCollector",VH=1048576;function jA([n,e],[t,i]){const r=Nt(n,t);return r===0?Nt(e,i):r}class BH{constructor(e){this.Pr=e,this.buffer=new jn(jA),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();jA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FH{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ve(zA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$c(t)?Ve(zA,"Ignoring IndexedDB error during garbage collection: ",t):await Gc(t)}await this.Ar(3e5)}))}}class zH{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Qp.ce);const i=new BH(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(FA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FA):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,c,f,m,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),lc()<=Ct.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${r} in `+(f-c)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-x}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function jH(n,e){return new zH(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(){this.changes=new cu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&dh(i.mutation,r,vr.empty(),nn.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,It()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=It()){const r=Zl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let c=Qd();return a.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Zl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,It())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,r){let a=$o();const c=ch(),f=(function(){return ch()})();return t.forEach(((m,p)=>{const x=i.get(p.key);r.has(p.key)&&(x===void 0||x.mutation instanceof du)?a=a.insert(p.key,p):x!==void 0?(c.set(p.key,x.mutation.getFieldMask()),dh(x.mutation,p,x.mutation.getFieldMask(),nn.now())):c.set(p.key,vr.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((p,x)=>c.set(p,x))),t.forEach(((p,x)=>f.set(p,new qH(x,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=ch();let r=new fn(((c,f)=>c-f)),a=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let x=i.get(m)||vr.empty();x=f.applyToLocalView(p,x),i.set(m,x);const T=(r.get(f.batchId)||It()).add(m);r=r.insert(f.batchId,T)}))})).next((()=>{const c=[],f=r.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,x=m.value,T=YR();x.forEach((S=>{if(!a.has(S)){const N=t2(t.get(S),i.get(S));N!==null&&T.set(S,N),a=a.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return Ne.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return $j(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):Ne.resolve(Zl());let f=bh,m=a;return c.next((p=>Ne.forEach(p,((x,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(x)?Ne.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{m=m.insert(x,S)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,m,p,It()))).next((x=>({batchId:f,changes:KR(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next((i=>{let r=Qd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let c=Qd();return this.indexManager.getCollectionParents(e,a).next((f=>Ne.forEach(f,(m=>{const p=(function(T,S){return new Jc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,r).next((x=>{x.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((c=>{a.forEach(((m,p)=>{const x=p.getKey();c.get(x)===null&&(c=c.insert(x,xi.newInvalidDocument(x)))}));let f=Qd();return c.forEach(((m,p)=>{const x=a.get(m);x!==void 0&&dh(x.mutation,p,vr.empty(),nn.now()),ig(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:no(r.createTime)}})(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:LH(r.bundledQuery),readTime:no(r.readTime)}})(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(){this.overlays=new fn(We.comparator),this.Lr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Zl();return Ne.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),Ne.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),Ne.resolve()}getOverlaysForCollection(e,t,i){const r=Zl(),a=t.length+1,c=new We(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return Ne.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new fn(((p,x)=>p-x));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let x=a.get(p.largestBatchId);x===null&&(x=Zl(),a=a.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const f=Zl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,x)=>f.set(p,x))),!(f.size()>=r)););return Ne.resolve(f)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new dH(t,i));let a=this.Lr.get(t);a===void 0&&(a=It(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.kr=new jn(Xn.Kr),this.qr=new jn(Xn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Xn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Xn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new We(new tn([])),i=new Xn(t,e),r=new Xn(t,e+1),a=[];return this.qr.forEachInRange([i,r],(c=>{this.Wr(c),a.push(c.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new We(new tn([])),i=new Xn(t,e),r=new Xn(t,e+1);let a=It();return this.qr.forEachInRange([i,r],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Xn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return We.comparator(e.key,t.key)||Nt(e.Hr,t.Hr)}static Ur(e,t){return Nt(e.Hr,t.Hr)||We.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new jn(Xn.Kr)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new cH(a,t,i,r);this.mutationQueue.push(c);for(const f of r)this.Jr=this.Jr.add(new Xn(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ne.resolve(c)}lookupMutationBatch(e,t){return Ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return Ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?Bv:this.Yn-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xn(t,0),r=new Xn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(c=>{const f=this.Zr(c.Hr);a.push(f)})),Ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new jn(Nt);return t.forEach((r=>{const a=new Xn(r,0),c=new Xn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,c],(f=>{i=i.add(f.Hr)}))})),Ne.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;We.isDocumentKey(a)||(a=a.child(""));const c=new Xn(new We(a),0);let f=new jn(Nt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(f=f.add(m.Hr)),!0)}),c),Ne.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ne.forEach(t.mutations,(r=>{const a=new Xn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Xn(t,0),r=this.Jr.firstAfterOrEqual(i);return Ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e){this.ti=e,this.docs=(function(){return new fn(We.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ne.resolve(i?i.document.mutableCopy():xi.newInvalidDocument(t))}getEntries(e,t){let i=$o();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():xi.newInvalidDocument(r))})),Ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=$o();const c=t.path,f=new We(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:x}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||bj(wj(x),i)<=0||(r.has(x.key)||ig(t,x))&&(a=a.insert(x.key,x.mutableCopy()))}return Ne.resolve(a)}getAllFromCollectionGroup(e,t,i,r){et(9500)}ni(e,t){return Ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ZH(this)}getSize(e){return Ne.resolve(this.size)}}class ZH extends HH{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),Ne.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.persistence=e,this.ri=new cu((t=>jv(t)),Hv),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.ii=0,this.si=new Yv,this.targetCount=0,this.oi=Pc._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Ne.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Pc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.lr(t),Ne.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),Ne.waitFor(a).next((()=>r))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Ne.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Ne.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((c=>{a.push(r.markPotentiallyOrphaned(e,c))})),Ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Ne.resolve(i)}containsKey(e,t){return Ne.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this._i={},this.overlays={},this.ai=new Qp(0),this.ui=!1,this.ui=!0,this.ci=new KH,this.referenceDelegate=e(this),this.li=new XH(this),this.indexManager=new OH,this.remoteDocumentCache=(function(r){return new WH(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new DH(t),this.Pi=new $H(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new YH(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ve("MemoryPersistence","Starting transaction:",e);const r=new QH(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return Ne.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class QH extends Ej{constructor(e){super(),this.currentSequenceNumber=e}}class Wv{constructor(e){this.persistence=e,this.Ri=new Yv,this.Ai=null}static Vi(e){return new Wv(e)}get di(){if(this.Ai)return this.Ai;throw et(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Ne.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.di,(i=>{const r=We.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,at.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xp{constructor(e,t){this.persistence=e,this.fi=new cu((i=>Cj(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=jH(this,t)}static Vi(e,t){return new xp(e,t)}Ti(){}Ii(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Ne.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?Ne.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,a.removeEntry(c,at.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Ne.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lm(e.data.value)),t}wr(e,t,i){return Ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return Ne.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=It(),r=It();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Zv(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return zF()?8:Sj(Ti())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new eq;return this.ys(e,t,c).next((f=>{if(a.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(lc()<=Ct.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",uc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ne.resolve()):(lc()<=Ct.DEBUG&&Ve("QueryEngine","Query:",uc(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(lc()<=Ct.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",uc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eo(t))):Ne.resolve())}gs(e,t){if(RA(t))return Ne.resolve(null);let i=eo(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=E0(t,null,"F"),i=eo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const c=It(...a);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,c,m.readTime)?this.gs(e,E0(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,r){return RA(t)||r.isEqual(at.min())?Ne.resolve(null):this.fs.getDocuments(e,i).next((a=>{const c=this.bs(t,a);return this.Ss(t,c,i,r)?Ne.resolve(null):(lc()<=Ct.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uc(t)),this.Ds(e,c,t,xj(r,bh)).next((f=>f)))}))}bs(e,t){let i=new jn($R(e));return t.forEach(((r,a)=>{ig(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return lc()<=Ct.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",uc(t)),this.fs.getDocumentsMatchingQuery(e,t,Qa.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LocalStore",nq=3e8;class iq{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new fn(Nt),this.Fs=new cu((a=>jv(a)),Hv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GH(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function sq(n,e,t,i){return new iq(n,e,t,i)}async function g2(n,e){const t=ut(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const c=[],f=[];let m=It();for(const p of r){c.push(p.batchId);for(const x of p.mutations)m=m.add(x.key)}for(const p of a){f.push(p.batchId);for(const x of p.mutations)m=m.add(x.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function rq(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,x){const T=p.batch,S=T.keys();let N=Ne.resolve();return S.forEach((O=>{N=N.next((()=>x.getEntry(m,O))).next((V=>{const P=p.docVersions.get(O);Ht(P!==null,48541),V.version.compareTo(P)<0&&(T.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),x.addEntry(V)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=It();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function _2(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function oq(n,e){const t=ut(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const f=[];e.targetChanges.forEach(((x,T)=>{const S=r.get(T);if(!S)return;f.push(t.li.removeMatchingKeys(a,x.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,x.addedDocuments,T))));let N=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(ui.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,i)),r=r.insert(T,N),(function(V,P,Q){return V.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=nq?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,N,x)&&f.push(t.li.updateTargetData(a,N))}));let m=$o(),p=It();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,x))})),f.push(aq(a,c,e.documentUpdates).next((x=>{m=x.Bs,p=x.Ls}))),!i.isEqual(at.min())){const x=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(x)}return Ne.waitFor(f).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,p))).next((()=>m))})).then((a=>(t.vs=r,a)))}function aq(n,e,t){let i=It(),r=It();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let c=$o();return t.forEach(((f,m)=>{const p=a.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),m.isNoDocument()&&m.version.isEqual(at.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Ve(Xv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:c,Ls:r}}))}function lq(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Bv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function uq(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,Ne.resolve(r)):t.li.allocateTargetId(i).next((c=>(r=new Ha(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function I0(n,e,t){const i=ut(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!$c(c))throw c;Ve(Xv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function HA(n,e,t){const i=ut(n);let r=at.min(),a=It();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,x){const T=ut(m),S=T.Fs.get(x);return S!==void 0?Ne.resolve(T.vs.get(S)):T.li.getTargetData(p,x)})(i,c,eo(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{a=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?r:at.min(),t?a:It()))).next((f=>(cq(i,Yj(e),f),{documents:f,ks:a})))))}function cq(n,e,t){let i=n.Ms.get(e)||at.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class qA{constructor(){this.activeTargetIds=tH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dq{constructor(){this.vo=new qA,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new qA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="ConnectivityMonitor";class $A{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ve(GA,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ve(GA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm=null;function R0(){return pm===null?pm=(function(){return 268435456+Math.round(2147483648*Math.random())})():pm++,"0x"+pm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="RestConnection",fq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mq{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===mp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const c=R0(),f=this.Qo(e,t.toUriEncodedString());Ve(Ay,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,r,a);const{host:p}=new URL(f),x=zc(p);return this.zo(e,f,m,i,x).then((T=>(Ve(Ay,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Cc(Ay,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",i),T}))}jo(e,t,i,r,a,c){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=fq[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="WebChannelConnection",Fd=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class xc extends mq{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xc.c_){const e=wR();Fd(e,xR.STAT_EVENT,(t=>{t.stat===_0.PROXY?Ve(yi,"STAT_EVENT: detected buffering proxy"):t.stat===_0.NOPROXY&&Ve(yi,"STAT_EVENT: detected no buffering proxy")})),xc.c_=!0}}zo(e,t,i,r,a){const c=R0();return new Promise(((f,m)=>{const p=new yR;p.setWithCredentials(!0),p.listenOnce(vR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Dm.NO_ERROR:const T=p.getResponseJson();Ve(yi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case Dm.TIMEOUT:Ve(yi,`RPC '${e}' ${c} timed out`),m(new Ue(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Dm.HTTP_ERROR:const S=p.getStatus();if(Ve(yi,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=N==null?void 0:N.error;if(O&&O.status&&O.message){const V=(function(Q){const W=Q.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(W)>=0?W:Ce.UNKNOWN})(O.status);m(new Ue(V,O.message))}else m(new Ue(Ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ue(Ce.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ve(yi,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(r);Ve(yi,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",x,i,15)}))}T_(e,t,i){const r=R0(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=a.join("");Ve(yi,`Creating RPC '${e}' stream ${r}: ${p}`,f);const x=c.createWebChannel(p,f);this.I_(x);let T=!1,S=!1;const N=new pq({Ho:O=>{S?Ve(yi,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(T||(Ve(yi,`Opening RPC '${e}' stream ${r} transport.`),x.open(),T=!0),Ve(yi,`RPC '${e}' stream ${r} sending:`,O),x.send(O))},Jo:()=>x.close()});return Fd(x,Xd.EventType.OPEN,(()=>{S||(Ve(yi,`RPC '${e}' stream ${r} transport opened.`),N.i_())})),Fd(x,Xd.EventType.CLOSE,(()=>{S||(S=!0,Ve(yi,`RPC '${e}' stream ${r} transport closed`),N.o_(),this.E_(x))})),Fd(x,Xd.EventType.ERROR,(O=>{S||(S=!0,Cc(yi,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),N.o_(new Ue(Ce.UNAVAILABLE,"The operation could not be completed")))})),Fd(x,Xd.EventType.MESSAGE,(O=>{var V;if(!S){const P=O.data[0];Ht(!!P,16349);const Q=P,W=(Q==null?void 0:Q.error)||((V=Q[0])==null?void 0:V.error);if(W){Ve(yi,`RPC '${e}' stream ${r} received error:`,W);const H=W.status;let j=(function(D){const k=Mn[D];if(k!==void 0)return i2(k)})(H),Z=W.message;j===void 0&&(j=Ce.INTERNAL,Z="Unknown error status: "+H+" with message "+W.message),S=!0,N.o_(new Ue(j,Z)),x.close()}else Ve(yi,`RPC '${e}' stream ${r} received:`,P),N.__(P)}})),xc.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bR()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(n){return new xc(n)}function Cy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n){return new xH(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xc.c_=!1;class y2{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="PersistentStream";class v2{constructor(e,t,i,r,a,c,f,m){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Go(t.toString()),Go("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Ue(Ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ve(JA,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ve(JA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _q extends v2{constructor(e,t,i,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TH(this.serializer,e),i=(function(a){if(!("targetChange"in a))return at.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?at.min():c.readTime?no(c.readTime):at.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=N0(this.serializer),t.addTarget=(function(a,c){let f;const m=c.target;if(f=b0(m)?{documents:AH(a,m)}:{query:CH(a,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=o2(a,c.resumeToken);const p=S0(a,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(at.min())>0){f.readTime=vp(a,c.snapshotVersion.toTimestamp());const p=S0(a,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=IH(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=N0(this.serializer),t.removeTarget=e,this.K_(t)}}class yq extends v2{constructor(e,t,i,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SH(e.writeResults,e.commitTime),i=no(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=N0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>EH(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{}class xq extends vq{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ue(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Wo(e,A0(t,i),r,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(Ce.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,A0(t,i),r,c,f,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ue(Ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function wq(n,e,t,i){return new xq(n,e,t,i)}class bq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Go(t),this.aa=!1):Ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="RemoteStore";class Tq{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{hu(this)&&(Ve(ou,"Restarting streams for network reachability change."),await(async function(m){const p=ut(m);p.Ea.add(4),await jh(p),p.Va.set("Unknown"),p.Ea.delete(4),await lg(p)})(this))}))})),this.Va=new bq(i,r)}}async function lg(n){if(hu(n))for(const e of n.Ra)await e(!0)}async function jh(n){for(const e of n.Ra)await e(!1)}function x2(n,e){const t=ut(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),nx(t)?tx(t):Kc(t).O_()&&ex(t,e))}function Qv(n,e){const t=ut(n),i=Kc(t);t.Ia.delete(e),i.O_()&&w2(t,e),t.Ia.size===0&&(i.O_()?i.L_():hu(t)&&t.Va.set("Unknown"))}function ex(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kc(n).Z_(e)}function w2(n,e){n.da.$e(e),Kc(n).X_(e)}function tx(n){n.da=new gH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Kc(n).start(),n.Va.ua()}function nx(n){return hu(n)&&!Kc(n).x_()&&n.Ia.size>0}function hu(n){return ut(n).Ea.size===0}function b2(n){n.da=void 0}async function Eq(n){n.Va.set("Online")}async function Sq(n){n.Ia.forEach(((e,t)=>{ex(n,e)}))}async function Aq(n,e){b2(n),nx(n)?(n.Va.ha(e),tx(n)):n.Va.set("Unknown")}async function Cq(n,e,t){if(n.Va.set("Online"),e instanceof r2&&e.state===2&&e.cause)try{await(async function(r,a){const c=a.cause;for(const f of a.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,c),r.Ia.delete(f),r.da.removeTarget(f))})(n,e)}catch(i){Ve(ou,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wp(n,i)}else if(e instanceof Vm?n.da.Xe(e):e instanceof s2?n.da.st(e):n.da.tt(e),!t.isEqual(at.min()))try{const i=await _2(n.localStore);t.compareTo(i)>=0&&await(function(a,c){const f=a.da.Tt(c);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const x=a.Ia.get(p);x&&a.Ia.set(p,x.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,p)=>{const x=a.Ia.get(m);if(!x)return;a.Ia.set(m,x.withResumeToken(ui.EMPTY_BYTE_STRING,x.snapshotVersion)),w2(a,m);const T=new Ha(x.target,m,p,x.sequenceNumber);ex(a,T)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Ve(ou,"Failed to raise snapshot:",i),await wp(n,i)}}async function wp(n,e,t){if(!$c(e))throw e;n.Ea.add(1),await jh(n),n.Va.set("Offline"),t||(t=()=>_2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ve(ou,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await lg(n)}))}function T2(n,e){return e().catch((t=>wp(n,t,e)))}async function ug(n){const e=ut(n),t=il(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bv;for(;Nq(e);)try{const r=await lq(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,Iq(e,r)}catch(r){await wp(e,r)}E2(e)&&S2(e)}function Nq(n){return hu(n)&&n.Ta.length<10}function Iq(n,e){n.Ta.push(e);const t=il(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function E2(n){return hu(n)&&!il(n).x_()&&n.Ta.length>0}function S2(n){il(n).start()}async function Rq(n){il(n).ra()}async function Mq(n){const e=il(n);for(const t of n.Ta)e.ea(t.mutations)}async function Pq(n,e,t){const i=n.Ta.shift(),r=$v.from(i,e,t);await T2(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await ug(n)}async function kq(n,e){e&&il(n).Y_&&await(async function(i,r){if((function(c){return fH(c)&&c!==Ce.ABORTED})(r.code)){const a=i.Ta.shift();il(i).B_(),await T2(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await ug(i)}})(n,e),E2(n)&&S2(n)}async function KA(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),Ve(ou,"RemoteStore received new credentials");const i=hu(t);t.Ea.add(3),await jh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lg(t)}async function Dq(n,e){const t=ut(n);e?(t.Ea.delete(2),await lg(t)):e||(t.Ea.add(2),await jh(t),t.Va.set("Unknown"))}function Kc(n){return n.ma||(n.ma=(function(t,i,r){const a=ut(t);return a.sa(),new _q(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Eq.bind(null,n),Yo:Sq.bind(null,n),t_:Aq.bind(null,n),J_:Cq.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),nx(n)?tx(n):n.Va.set("Unknown")):(await n.ma.stop(),b2(n))}))),n.ma}function il(n){return n.fa||(n.fa=(function(t,i,r){const a=ut(t);return a.sa(),new yq(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Rq.bind(null,n),t_:kq.bind(null,n),ta:Mq.bind(null,n),na:Pq.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ug(n)):(await n.fa.stop(),n.Ta.length>0&&(Ve(ou,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const c=Date.now()+i,f=new ix(e,t,c,r,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sx(n,e){if(Go("AsyncQueue",`${e}: ${n}`),$c(n))return new Ue(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{static emptySet(e){return new wc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||We.comparator(t.key,i.key):(t,i)=>We.comparator(t.key,i.key),this.keyedMap=Qd(),this.sortedSet=new fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.ga=new fn(We.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):et(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class kc{constructor(e,t,i,r,a,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,r,a){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new kc(e,t,wc.emptySet(t),c,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Oq{constructor(){this.queries=WA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=ut(t),a=r.queries;r.queries=WA(),a.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Ue(Ce.ABORTED,"Firestore shutting down"))}}function WA(){return new cu((n=>GR(n)),ng)}async function Uq(n,e){const t=ut(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new Lq,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const f=sx(c,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&rx(t)}async function Vq(n,e){const t=ut(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const c=a.ba.indexOf(e);c>=0&&(a.ba.splice(c,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Bq(n,e){const t=ut(n);let i=!1;for(const r of e){const a=r.query,c=t.queries.get(a);if(c){for(const f of c.ba)f.Fa(r)&&(i=!0);c.wa=r}}i&&rx(t)}function Fq(n,e,t){const i=ut(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function rx(n){n.Ca.forEach((e=>{e.next()}))}var M0,ZA;(ZA=M0||(M0={})).Ma="default",ZA.Cache="cache";class zq{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new kc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==M0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.key=e}}class C2{constructor(e){this.key=e}}class jq{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=It(),this.mutatedKeys=It(),this.eu=$R(e),this.tu=new wc(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new YA,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=r,f=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((x,T)=>{const S=r.get(x),N=ig(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let P=!1;S&&N?S.data.isEqual(N.data)?O!==V&&(i.track({type:3,doc:N}),P=!0):this.su(S,N)||(i.track({type:2,doc:N}),P=!0,(m&&this.eu(N,m)>0||p&&this.eu(N,p)<0)&&(f=!0)):!S&&N?(i.track({type:0,doc:N}),P=!0):S&&!N&&(i.track({type:1,doc:S}),P=!0,(m||p)&&(f=!0)),P&&(N?(c=c.add(N),a=V?a.add(x):a.delete(x)):(c=c.delete(x),a=a.delete(x)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),a=a.delete(x.key),i.track({type:1,doc:x})}return{tu:c,iu:i,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((x,T)=>(function(N,O){const V=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Vt:P})}};return V(N)-V(O)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],m=this.Ya.size===0&&this.current&&!r?1:0,p=m!==this.Xa;return this.Xa=m,c.length!==0||p?{snapshot:new kc(this.query,e.tu,a,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YA,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=It(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new C2(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new A2(i))})),t}cu(e){this.Za=e.ks,this.Ya=It();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return kc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ox="SyncEngine";class Hq{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qq{constructor(e){this.key=e,this.hu=!1}}class Gq{constructor(e,t,i,r,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new cu((f=>GR(f)),ng),this.Iu=new Map,this.Eu=new Set,this.Ru=new fn(We.comparator),this.Au=new Map,this.Vu=new Yv,this.du={},this.mu=new Map,this.fu=Pc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $q(n,e,t=!0){const i=k2(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await N2(i,e,t,!0),r}async function Jq(n,e){const t=k2(n);await N2(t,e,!0,!1)}async function N2(n,e,t,i){const r=await uq(n.localStore,eo(e)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await Kq(n,e,a,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&x2(n.remoteStore,r),f}async function Kq(n,e,t,i,r){n.pu=(T,S,N)=>(async function(V,P,Q,W){let H=P.view.ru(Q);H.Ss&&(H=await HA(V.localStore,P.query,!1).then((({documents:D})=>P.view.ru(D,H))));const j=W&&W.targetChanges.get(P.targetId),Z=W&&W.targetMismatches.get(P.targetId)!=null,Y=P.view.applyChanges(H,V.isPrimaryClient,j,Z);return QA(V,P.targetId,Y.au),Y.snapshot})(n,T,S,N);const a=await HA(n.localStore,e,!0),c=new jq(e,a.ks),f=c.ru(a.documents),m=zh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),p=c.applyChanges(f,n.isPrimaryClient,m);QA(n,t,p.au);const x=new Hq(e,t,c);return n.Tu.set(e,x),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function Yq(n,e,t){const i=ut(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((c=>!ng(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await I0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Qv(i.remoteStore,r.targetId),P0(i,r.targetId)})).catch(Gc)):(P0(i,r.targetId),await I0(i.localStore,r.targetId,!0))}async function Wq(n,e){const t=ut(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Qv(t.remoteStore,i.targetId))}async function Zq(n,e,t){const i=s7(n);try{const r=await(function(c,f){const m=ut(c),p=nn.now(),x=f.reduce(((N,O)=>N.add(O.key)),It());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let O=$o(),V=It();return m.xs.getEntries(N,x).next((P=>{O=P,O.forEach(((Q,W)=>{W.isValidDocument()||(V=V.add(Q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,O))).next((P=>{T=P;const Q=[];for(const W of f){const H=lH(W,T.get(W.key).overlayedDocument);H!=null&&Q.push(new du(W.key,H,OR(H.value.mapValue),to.exists(!0)))}return m.mutationQueue.addMutationBatch(N,p,Q,f)})).next((P=>{S=P;const Q=P.applyToLocalDocumentSet(T,V);return m.documentOverlayCache.saveOverlays(N,P.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:KR(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(c,f,m){let p=c.du[c.currentUser.toKey()];p||(p=new fn(Nt)),p=p.insert(f,m),c.du[c.currentUser.toKey()]=p})(i,r.batchId,t),await Hh(i,r.changes),await ug(i.remoteStore)}catch(r){const a=sx(r,"Failed to persist write");t.reject(a)}}async function I2(n,e){const t=ut(n);try{const i=await oq(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const c=t.Au.get(a);c&&(Ht(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Ht(c.hu,14607):r.removedDocuments.size>0&&(Ht(c.hu,42227),c.hu=!1))})),await Hh(t,i,e)}catch(i){await Gc(i)}}function XA(n,e,t){const i=ut(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,c)=>{const f=c.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(c,f){const m=ut(c);m.onlineState=f;let p=!1;m.queries.forEach(((x,T)=>{for(const S of T.ba)S.va(f)&&(p=!0)})),p&&rx(m)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Xq(n,e,t){const i=ut(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let c=new fn(We.comparator);c=c.insert(a,xi.newNoDocument(a,at.min()));const f=It().add(a),m=new og(at.min(),new Map,new fn(Nt),c,f);await I2(i,m),i.Ru=i.Ru.remove(a),i.Au.delete(e),ax(i)}else await I0(i.localStore,e,!1).then((()=>P0(i,e,t))).catch(Gc)}async function Qq(n,e){const t=ut(n),i=e.batch.batchId;try{const r=await rq(t.localStore,e);M2(t,i,null),R2(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hh(t,r)}catch(r){await Gc(r)}}async function e7(n,e,t){const i=ut(n);try{const r=await(function(c,f){const m=ut(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let x;return m.mutationQueue.lookupMutationBatch(p,f).next((T=>(Ht(T!==null,37113),x=T.keys(),m.mutationQueue.removeMutationBatch(p,T)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,x,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x))).next((()=>m.localDocuments.getDocuments(p,x)))}))})(i.localStore,e);M2(i,e,t),R2(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hh(i,r)}catch(r){await Gc(r)}}function R2(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function M2(n,e,t){const i=ut(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function P0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||P2(n,i)}))}function P2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Qv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),ax(n))}function QA(n,e,t){for(const i of t)i instanceof A2?(n.Vu.addReference(i.key,e),t7(n,i)):i instanceof C2?(Ve(ox,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||P2(n,i.key)):et(19791,{wu:i})}function t7(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ve(ox,"New document in limbo: "+t),n.Eu.add(i),ax(n))}function ax(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new We(tn.fromString(e)),i=n.fu.next();n.Au.set(i,new qq(t)),n.Ru=n.Ru.insert(t,i),x2(n.remoteStore,new Ha(eo(HR(t.path)),i,"TargetPurposeLimboResolution",Qp.ce))}}async function Hh(n,e,t){const i=ut(n),r=[],a=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,e,t).then((p=>{var x;if((p||t)&&i.isPrimaryClient){const T=p?!p.fromCache:(x=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:x.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){r.push(p);const T=Zv.Es(m.targetId,p);a.push(T)}})))})),await Promise.all(c),i.Pu.J_(r),await(async function(m,p){const x=ut(m);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Ne.forEach(p,(S=>Ne.forEach(S.Ts,(N=>x.persistence.referenceDelegate.addReference(T,S.targetId,N))).next((()=>Ne.forEach(S.Is,(N=>x.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))))))}catch(T){if(!$c(T))throw T;Ve(Xv,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const N=x.vs.get(S),O=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(O);x.vs=x.vs.insert(S,V)}}})(i.localStore,a))}async function n7(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){Ve(ox,"User change. New user:",e.toKey());const i=await g2(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new Ue(Ce.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hh(t,i.Ns)}}function i7(n,e){const t=ut(n),i=t.Au.get(e);if(i&&i.hu)return It().add(i.key);{let r=It();const a=t.Iu.get(e);if(!a)return r;for(const c of a){const f=t.Tu.get(c);r=r.unionWith(f.view.nu)}return r}}function k2(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xq.bind(null,e),e.Pu.J_=Bq.bind(null,e.eventManager),e.Pu.yu=Fq.bind(null,e.eventManager),e}function s7(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e7.bind(null,e),e}class bp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ag(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sq(this.persistence,new tq,e.initialUser,this.serializer)}Cu(e){return new p2(Wv.Vi,this.serializer)}Du(e){return new dq}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bp.provider={build:()=>new bp};class r7 extends bp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ht(this.persistence.referenceDelegate instanceof xp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new FH(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new p2((i=>xp.Vi(i,t)),this.serializer)}}class k0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=n7.bind(null,this.syncEngine),await Dq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Oq})()}createDatastore(e){const t=ag(e.databaseInfo.databaseId),i=gq(e.databaseInfo);return wq(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,c,f){return new Tq(i,r,a,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>XA(this.syncEngine,t,0)),(function(){return $A.v()?new $A:new hq})())}createSyncEngine(e,t){return(function(r,a,c,f,m,p,x){const T=new Gq(r,a,c,f,m,p);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=ut(r);Ve(ou,"RemoteStore shutting down."),a.Ea.add(5),await jh(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}k0.provider={build:()=>new k0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Go("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="FirestoreClient";class a7{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=vi.UNAUTHENTICATED,this.clientId=Vv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async c=>{Ve(sl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Ve(sl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sx(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ny(n,e){n.asyncQueue.verifyOperationInProgress(),Ve(sl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await g2(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function eC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await l7(n);Ve(sl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>KA(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>KA(e.remoteStore,r))),n._onlineComponents=e}async function l7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve(sl,"Using user provided OfflineComponentProvider");try{await Ny(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Ce.FAILED_PRECONDITION||r.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Cc("Error using user provided cache. Falling back to memory cache: "+t),await Ny(n,new bp)}}else Ve(sl,"Using default OfflineComponentProvider"),await Ny(n,new r7(void 0));return n._offlineComponents}async function D2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve(sl,"Using user provided OnlineComponentProvider"),await eC(n,n._uninitializedComponentsProvider._online)):(Ve(sl,"Using default OnlineComponentProvider"),await eC(n,new k0))),n._onlineComponents}function u7(n){return D2(n).then((e=>e.syncEngine))}async function c7(n){const e=await D2(n),t=e.eventManager;return t.onListen=$q.bind(null,e.syncEngine),t.onUnlisten=Yq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Jq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wq.bind(null,e.syncEngine),t}function d7(n,e,t={}){const i=new Ya;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,f,m,p){const x=new o7({next:S=>{x.Nu(),c.enqueueAndForget((()=>Vq(a,T))),S.fromCache&&m.source==="server"?p.reject(new Ue(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new zq(f,x,{includeMetadataChanges:!0,Ka:!0});return Uq(a,T)})(await c7(n),n.asyncQueue,e,t,i))),i.promise}function h7(n,e){const t=new Ya;return n.asyncQueue.enqueueAndForget((async()=>Zq(await u7(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7="ComponentProvider",tC=new Map;function m7(n,e,t,i,r){return new Rj(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,L2(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="firestore.googleapis.com",nC=!0;class iC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=O2,this.ssl=nC}else this.host=e.host,this.ssl=e.ssl??nC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VH)throw new Ue(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L2(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uj;switch(i.type){case"firstParty":return new fj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=tC.get(t);i&&(Ve(f7,"Removing Datastore"),tC.delete(t),i.terminate())})(this),Promise.resolve()}}function p7(n,e,t,i={}){var p;n=Ic(n,cg);const r=zc(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(kI(`https://${f}`),DI("Firestore",!0)),a.host!==O2&&a.host!==f&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:r,emulatorOptions:i};if(!nu(m,c)&&(n._setSettings(m),i.mockUserToken)){let x,T;if(typeof i.mockUserToken=="string")x=i.mockUserToken,T=vi.MOCK_USER;else{x=PF(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ue(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new vi(S)}n._authCredentials=new cj(new ER(x,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fu(this.firestore,e,this._query)}}class Fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}toJSON(){return{type:Fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Bh(t,Fn._jsonSchema))return new Fn(e,i||null,new We(tn.fromString(t.referencePath)))}}Fn._jsonSchemaVersion="firestore/documentReference/1.0",Fn._jsonSchema={type:kn("string",Fn._jsonSchemaVersion),referencePath:kn("string")};class Wa extends fu{constructor(e,t,i){super(e,t,HR(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new We(e))}withConverter(e){return new Wa(this.firestore,e,this._path)}}function g7(n,e,...t){if(n=Qi(n),SR("collection","path",e),n instanceof cg){const i=tn.fromString(e,...t);return gA(i),new Wa(n,null,i)}{if(!(n instanceof Fn||n instanceof Wa))throw new Ue(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tn.fromString(e,...t));return gA(i),new Wa(n.firestore,null,i)}}function U2(n,e,...t){if(n=Qi(n),arguments.length===1&&(e=Vv.newId()),SR("doc","path",e),n instanceof cg){const i=tn.fromString(e,...t);return pA(i),new Fn(n,null,new We(i))}{if(!(n instanceof Fn||n instanceof Wa))throw new Ue(Ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tn.fromString(e,...t));return pA(i),new Fn(n.firestore,n instanceof Wa?n.converter:null,new We(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="AsyncQueue";class rC{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y2(this,"async_queue_retry"),this._c=()=>{const i=Cy();i&&Ve(sC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Cy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ya;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!$c(e))throw e;Ve(sC,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Go("INTERNAL UNHANDLED ERROR: ",oC(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ix.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&et(47125,{Pc:oC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function oC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class dg extends cg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new rC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rC(e),this._firestoreClient=void 0,await e}}}function _7(n,e){const t=typeof n=="object"?n:VI(),i=typeof n=="string"?n:mp,r=Av(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=RF("firestore");a&&p7(r,...a)}return r}function V2(n){if(n._terminated)throw new Ue(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||y7(n),n._firestoreClient}function y7(n){var i,r,a,c;const e=n._freezeSettings(),t=m7(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new a7(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gs(ui.fromBase64String(e))}catch(t){throw new Ue(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gs(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bh(e,Gs._jsonSchema))return Gs.fromBase64String(e.bytes)}}Gs._jsonSchemaVersion="firestore/bytes/1.0",Gs._jsonSchema={type:kn("string",Gs._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:io._jsonSchemaVersion}}static fromJSON(e){if(Bh(e,io._jsonSchema))return new io(e.latitude,e.longitude)}}io._jsonSchemaVersion="firestore/geoPoint/1.0",io._jsonSchema={type:kn("string",io._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bh(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Tr(e.vectorValues);throw new Ue(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:kn("string",Tr._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=/^__.*__$/;class x7{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new du(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fh(e,this.data,t,this.fieldTransforms)}}function z2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{dataSource:n})}}class lx{constructor(e,t,i,r,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Tp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(z2(this.dataSource)&&v7.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class w7{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ag(e)}createContext(e,t,i,r=!1){return new lx({dataSource:e,methodName:t,targetDoc:i,path:oi.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j2(n){const e=n._freezeSettings(),t=ag(n._databaseId);return new w7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function b7(n,e,t,i,r,a={}){const c=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);G2("Data must be an object, but it was:",c,i);const f=H2(i,c);let m,p;if(a.merge)m=new vr(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const x=[];for(const T of a.mergeFields){const S=hg(e,T,t);if(!c.contains(S))throw new Ue(Ce.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);A7(x,S)||x.push(S)}m=new vr(x),p=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,p=c.fieldTransforms;return new x7(new qs(f),m,p)}function T7(n,e,t,i=!1){return ux(t,n.createContext(i?4:3,e))}function ux(n,e){if(q2(n=Qi(n)))return G2("Unsupported field value:",e,n),H2(n,e);if(n instanceof F2)return(function(i,r){if(!z2(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let c=0;for(const f of i){let m=ux(f,r.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Qi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nH(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=nn.fromDate(i);return{timestampValue:vp(r.serializer,a)}}if(i instanceof nn){const a=new nn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vp(r.serializer,a)}}if(i instanceof io)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gs)return{bytesValue:o2(r.serializer,i._byteString)};if(i instanceof Fn){const a=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw r.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Kv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Tr)return(function(c,f){const m=c instanceof Tr?c.toArray():c;return{mapValue:{fields:{[DR]:{stringValue:LR},[pp]:{arrayValue:{values:m.map((x=>{if(typeof x!="number")throw f.createError("VectorValues must only contain numeric values.");return qv(f.serializer,x)}))}}}}}})(i,r);if(f2(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Xp(i)}`)})(n,e)}function H2(n,e){const t={};return NR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uu(n,((i,r)=>{const a=ux(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function q2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nn||n instanceof io||n instanceof Gs||n instanceof Fn||n instanceof F2||n instanceof Tr||f2(n))}function G2(n,e,t){if(!q2(t)||!AR(t)){const i=Xp(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function hg(n,e,t){if((e=Qi(e))instanceof B2)return e._internalPath;if(typeof e=="string")return S7(n,e);throw Tp("Field path arguments must be of type string or ",n,!1,void 0,t)}const E7=new RegExp("[~\\*/\\[\\]]");function S7(n,e,t){if(e.search(E7)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new B2(...e.split("."))._internalPath}catch{throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tp(n,e,t,i,r){const a=i&&!i.isEmpty(),c=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${r}`),m+=")"),new Ue(Ce.INVALID_ARGUMENT,f+n+m)}function A7(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return uu(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[pp].arrayValue)==null?void 0:r.values)==null?void 0:a.map((c=>Tn(c.doubleValue)));return new Tr(t)}convertGeoPoint(e){return new io(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Th(e));default:return null}}convertTimestamp(e){const t=el(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tn.fromString(e);Ht(h2(i),9688,{name:e});const r=new Eh(i.get(1),i.get(3)),a=new We(i.popFirst(5));return r.isEqual(t)||Go(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7 extends C7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}const aC="@firebase/firestore",lC="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(hg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I7 extends $2{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ue(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cx{}class J2 extends cx{}function M7(n,e,...t){let i=[];e instanceof cx&&i.push(e),i=i.concat(t),(function(a){const c=a.filter((m=>m instanceof hx)).length,f=a.filter((m=>m instanceof dx)).length;if(c>1||c>0&&f>0)throw new Ue(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class dx extends J2{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new dx(e,t,i)}_apply(e){const t=this._parse(e);return K2(e._query,t),new fu(e.firestore,e.converter,T0(e._query,t))}_parse(e){const t=j2(e.firestore);return(function(a,c,f,m,p,x,T){let S;if(p.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ue(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){cC(T,x);const O=[];for(const V of T)O.push(uC(m,a,V));S={arrayValue:{values:O}}}else S=uC(m,a,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||cC(T,x),S=T7(f,c,T,x==="in"||x==="not-in");return Pn.create(p,x,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class hx extends cx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hx(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let c=r;const f=a.getFlattenedFilters();for(const m of f)K2(c,m),c=T0(c,m)})(e._query,t),new fu(e.firestore,e.converter,T0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fx extends J2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fx(e,t)}_apply(e){const t=(function(r,a,c){if(r.startAt!==null)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ah(a,c)})(e._query,this._field,this._direction);return new fu(e.firestore,e.converter,Kj(e._query,t))}}function P7(n,e="asc"){const t=e,i=hg("orderBy",n);return fx._create(i,t)}function uC(n,e,t){if(typeof(t=Qi(t))=="string"){if(t==="")throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qR(e)&&t.indexOf("/")!==-1)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tn.fromString(t));if(!We.isDocumentKey(i))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return EA(n,new We(i))}if(t instanceof Fn)return EA(n,t._key);throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function cC(n,e){if(!Array.isArray(n)||n.length===0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K2(n,e){const t=(function(r,a){for(const c of r)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ue(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function k7(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class gm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bc extends $2{constructor(e,t,i,r,a,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(hg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bc._jsonSchemaVersion="firestore/documentSnapshot/1.0",bc._jsonSchema={type:kn("string",bc._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class Bm extends bc{data(e={}){return super.data(e)}}class Tc{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bm(this._firestore,this._userDataWriter,i.key,i,new gm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((f=>{const m=new Bm(r._firestore,r._userDataWriter,f.doc.key,f.doc,new gm(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new Bm(r._firestore,r._userDataWriter,f.doc.key,f.doc,new gm(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,x=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),x=c.indexOf(f.doc.key)),{type:D7(f.type),doc:m,oldIndex:p,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function D7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tc._jsonSchemaVersion="firestore/querySnapshot/1.0",Tc._jsonSchema={type:kn("string",Tc._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};function Y2(n){n=Ic(n,fu);const e=Ic(n.firestore,dg),t=V2(e),i=new N7(e);return R7(n._query),d7(t,n._query).then((r=>new Tc(e,i,n,r)))}function L7(n,e,t){n=Ic(n,Fn);const i=Ic(n.firestore,dg),r=k7(n.converter,e),a=j2(i);return W2(i,[b7(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,to.none())])}function O7(n){return W2(Ic(n.firestore,dg),[new Gv(n._key,to.none())])}function W2(n,e){const t=V2(n);return h7(t,e)}(function(e,t=!0){lj(jc),Sc(new iu("firestore",((i,{instanceIdentifier:r,options:a})=>{const c=i.getProvider("app").getImmediate(),f=new dg(new dj(i.getProvider("auth-internal")),new mj(c,i.getProvider("app-check-internal")),Mj(c,r),c);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Ja(aC,lC,e),Ja(aC,lC,"esm2020")})();const U7={apiKey:"AIzaSyDgg54IU-y4WMtR2sdJhk8Kbgygk0yucnE",authDomain:"travelplannerai-ffc6d.firebaseapp.com",projectId:"travelplannerai-ffc6d",storageBucket:"travelplannerai-ffc6d.firebasestorage.app",messagingSenderId:"725267591870",appId:"1:725267591870:web:0b7217e5bbb6f53b95a4ef"};let Iy,Fm,fg;try{Iy=UI(U7),Fm=sj(Iy),fg=_7(Iy)}catch(n){throw console.error("Firebase initialization error:",n),n}const Z2=X.createContext(void 0),V7=new Oo,B7=({children:n})=>{const[e,t]=X.useState(null),[i,r]=X.useState(!0),[a,c]=X.useState(null);X.useEffect(()=>{const x=$z(Fm,T=>{t(T),r(!1)},T=>{console.error("Auth state change error:",T),c(T.message),r(!1)});return()=>x()},[]);const p={user:e,loading:i,error:a,signInWithGoogle:async()=>{try{c(null),r(!0),await f8(Fm,V7)}catch(x){throw console.error("Sign in error:",x),c(x.message||"Failed to sign in with Google"),x}finally{r(!1)}},signOut:async()=>{try{c(null),await Jz(Fm)}catch(x){throw console.error("Sign out error:",x),c(x.message||"Failed to sign out"),x}}};return g.jsx(Z2.Provider,{value:p,children:n})},X2=()=>{const n=X.useContext(Z2);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},F7=()=>{const{user:n,loading:e,error:t,signInWithGoogle:i,signOut:r}=X2();return e?g.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[g.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("span",{className:"text-sm",children:"..."})]}):n?g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[n.photoURL&&g.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-blue-400"}),g.jsx("span",{className:"text-sm text-gray-700 hidden sm:block",children:n.displayName||n.email})]}),g.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:""})]}):g.jsxs("div",{className:"flex flex-col items-end gap-1",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 hover:shadow transition-all",children:[g.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[g.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"  Google"})]}),t&&g.jsx("span",{className:"text-xs text-red-500",children:t})]})},z7=({children:n,activeTrip:e,trips:t,onSwitchTrip:i,currentTab:r,onSwitchTab:a,onOpenAdmin:c,onUpdateTrip:f,onDeleteTrip:m})=>{const[p,x]=X.useState(!1),[T,S]=X.useState(!1),[N,O]=X.useState(!1),V=[{id:"itinerary",label:"",icon:rl},{id:"flights",label:"",icon:bs},{id:"hotels",label:"",icon:ws},{id:"restaurants",label:"",icon:qa},{id:"attractions",label:"",icon:Uo},{id:"budget",label:"",icon:nh},{id:"map_full",label:"",icon:Xa},{id:"shopping",label:"",icon:Lo}];return g.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 text-slate-900 font-rubik pb-24 md:pb-0 selection:bg-blue-100 selection:text-blue-900",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 glass-effect border-b border-white/20 shadow-sm transition-all duration-300",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between items-center py-3",children:[g.jsxs("div",{className:"flex items-center gap-3 select-none cursor-pointer group",children:[g.jsx("div",{className:"bg-gradient-to-tr from-sky-500 to-blue-600 text-white p-2.5 rounded-2xl shadow-lg shadow-sky-500/30 transform transition-transform group-hover:scale-110 group-hover:rotate-3",children:g.jsx(bs,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"font-black text-xl leading-none text-slate-800 tracking-tight",children:"Travel Planner AI"}),g.jsx("span",{className:"text-[9px] font-bold text-sky-600 uppercase tracking-widest leading-none mt-0.5 opacity-80",children:"Smart Edition"})]})]}),g.jsx("div",{className:"hidden lg:flex items-center gap-1 bg-slate-100/50 p-1 rounded-2xl",children:V.map(P=>g.jsxs("button",{onClick:()=>a(P.id),className:`flex items-center px-4 py-2 rounded-xl text-sm font-bold transition-all duration-200 ${r===P.id?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[g.jsx(P.icon,{className:`w-4 h-4 ml-2 ${r===P.id?"text-blue-500":"text-slate-400"}`}),P.label]},P.id))}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>S(!0),className:"bg-slate-900 text-white px-3 py-2 rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-slate-300 hover:scale-105 transition-transform",children:[g.jsx(nh,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden md:inline",children:""})]}),g.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),g.jsxs("div",{className:"relative group",children:[g.jsxs("button",{onClick:()=>O(!N),onBlur:()=>setTimeout(()=>O(!1),200),className:"flex items-center gap-2 text-slate-700 font-bold hover:text-blue-700 transition-all bg-white hover:bg-blue-50 px-3 md:px-4 py-2 rounded-xl border border-slate-200 hover:border-blue-200 text-sm shadow-sm",children:[g.jsx("span",{className:"truncate max-w-[80px] md:max-w-[100px]",children:e.name}),g.jsx(CD,{className:`w-3 h-3 text-slate-400 transition-transform ${N?"rotate-180":""}`})]}),N&&g.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden z-[60] animate-fade-in origin-top-left",children:[g.jsx("div",{className:"max-h-60 overflow-y-auto",children:t.map(P=>g.jsxs("button",{onClick:()=>{i(P.id),O(!1)},className:`w-full text-right px-4 py-3 text-sm font-bold flex items-center justify-between hover:bg-slate-50 ${e.id===P.id?"text-blue-600 bg-blue-50":"text-slate-600"}`,children:[g.jsx("span",{className:"truncate",children:P.name}),e.id===P.id&&g.jsx(SD,{className:"w-4 h-4 text-blue-500"})]},P.id))}),g.jsx("div",{className:"border-t border-slate-100 p-2",children:g.jsxs("button",{onClick:()=>{c(),O(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[g.jsx(Er,{className:"w-3 h-3"}),"  "]})})]})]}),g.jsx("button",{onClick:c,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all",title:" ",children:g.jsx(ai,{className:"w-5 h-5"})}),g.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1 hidden md:block"}),g.jsx("div",{className:"hidden md:block",children:g.jsx(F7,{})})]})]})})}),g.jsx("div",{className:"h-[70px] md:h-[80px]"}),g.jsx("main",{className:"flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 relative z-10",children:n}),g.jsx("div",{className:"md:hidden fixed bottom-4 left-2 right-2 bg-white/95 backdrop-blur-xl border border-white/40 z-50 rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.12)] p-1.5 pb-2 overflow-x-auto scrollbar-hide",children:g.jsx("nav",{className:"flex justify-between px-2 min-w-max gap-4",children:V.map(P=>g.jsxs("button",{onClick:()=>a(P.id),className:`flex flex-col items-center justify-center py-1.5 min-w-[3.5rem] rounded-xl transition-all ${r===P.id?"bg-blue-50 text-blue-600":"text-slate-400 hover:bg-slate-50"}`,children:[g.jsx(P.icon,{className:`w-5 h-5 mb-0.5 ${r===P.id?"fill-current":""}`,strokeWidth:r===P.id?2.5:2}),g.jsx("span",{className:`text-[9px] font-bold leading-none ${r===P.id?"text-blue-700":"text-slate-400"}`,children:P.label})]},P.id))})}),g.jsx("div",{className:"fixed bottom-24 md:bottom-10 left-6 z-[60]",children:g.jsx("button",{onClick:()=>x(!p),className:`p-4 rounded-full shadow-2xl shadow-blue-500/30 transition-all hover:scale-110 flex items-center justify-center ${p?"bg-slate-800 text-white rotate-90":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white"}`,children:p?g.jsx(bi,{className:"w-6 h-6"}):g.jsx(dL,{className:"w-6 h-6"})})}),p&&g.jsx("div",{className:"fixed bottom-40 md:bottom-28 left-6 right-6 md:right-auto md:w-96 h-[500px] max-h-[60vh] z-[60] animate-scale-in origin-bottom-left",children:g.jsx(xF,{trip:e,onClose:()=>x(!1)})}),T&&f&&g.jsx(wF,{trip:e,onClose:()=>S(!1),onUpdateTrip:f})]})},j7=({trip:n,onUpdateTrip:e})=>{const{flights:t,documents:i}=n,r=X.useRef(null),a=f=>{if(f.target.files&&e){const m=Array.from(f.target.files).map(x=>x.name),p={...n,documents:[...n.documents||[],...m]};e(p)}},c=(f,m)=>g.jsxs("div",{className:"border-b border-dashed border-gray-300 last:border-0 pb-6 mb-6 last:pb-0 last:mb-0 relative",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-sm text-gray-500",children:f.date}),g.jsx("div",{className:"font-bold text-lg text-blue-800 flex items-center gap-2",children:f.airline}),g.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:f.flightNumber})]}),g.jsxs("div",{className:"text-left flex flex-col items-end gap-1",children:[g.jsxs("span",{className:"text-sm text-gray-500 block",children:[": ",f.duration]}),f.baggage&&g.jsxs("div",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded flex items-center gap-1 font-bold",children:[g.jsx(yD,{className:"w-3 h-3"}),f.baggage]})]})]}),g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:f.fromCode}),g.jsx("div",{className:"text-sm text-gray-600",children:f.fromCity}),g.jsx("div",{className:"text-xl font-medium mt-1",children:f.departureTime})]}),g.jsxs("div",{className:"flex-1 flex flex-col items-center px-4",children:[g.jsx("div",{className:"w-full h-px bg-gray-300 relative top-3"}),g.jsx(bs,{className:"w-6 h-6 text-blue-500 transform rotate-180 bg-white z-10 p-1"})]}),g.jsxs("div",{className:"flex-1 text-left",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:f.toCode}),g.jsx("div",{className:"text-sm text-gray-600",children:f.toCity}),g.jsx("div",{className:"text-xl font-medium mt-1",children:f.arrivalTime})]})]}),(f.terminal||f.gate)&&g.jsxs("div",{className:"flex gap-4 bg-gray-50 p-3 rounded-lg border border-gray-200 text-sm",children:[f.terminal&&g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:""}),g.jsx("span",{className:"font-mono font-bold text-gray-800",children:f.terminal})]}),f.gate&&g.jsxs("div",{className:"flex flex-col border-r border-gray-300 pr-4 mr-4",children:[g.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:""}),g.jsx("span",{className:"font-mono font-bold text-gray-800",children:f.gate})]})]})]},m);return g.jsxs("div",{className:"space-y-12 animate-fade-in",children:[g.jsxs("section",{className:"space-y-6",children:[g.jsxs("h2",{className:"text-2xl font-black text-gray-800 flex items-center gap-2",children:[g.jsx(bs,{className:"w-6 h-6 text-blue-600"}),"  "]}),t.segments.length>0?g.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[g.jsxs("div",{className:"bg-blue-900 px-6 py-4 flex justify-between items-center text-white",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm opacity-80",children:" "}),g.jsx("div",{className:"font-bold text-lg",children:t.passengerName})]}),g.jsxs("div",{className:"text-left",children:[g.jsx("div",{className:"text-sm opacity-80",children:" "}),g.jsx("div",{className:"font-mono text-xl tracking-widest",children:t.pnr})]})]}),g.jsx("div",{className:"p-8",children:t.segments.map((f,m)=>c(f,m))})]}):g.jsx("div",{className:"text-center p-12 bg-white rounded-lg shadow border border-gray-200 text-gray-500",children:"     ."})]}),g.jsxs("section",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h2",{className:"text-2xl font-black text-gray-800 flex items-center gap-2",children:[g.jsx(_h,{className:"w-6 h-6 text-purple-600"}),"  "]}),e&&g.jsxs("button",{onClick:()=>{var f;return(f=r.current)==null?void 0:f.click()},className:"text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 hover:bg-purple-100 transition-colors",children:[g.jsx(eu,{className:"w-4 h-4"}),"  "]}),g.jsx("input",{type:"file",ref:r,className:"hidden",multiple:!0,onChange:a})]}),i&&i.length>0?g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:i.map((f,m)=>{const p=f.toLowerCase().endsWith(".pdf"),x=f.match(/\.(jpg|jpeg|png|webp)$/i);return g.jsxs("div",{className:"group relative bg-white border border-gray-200 rounded-2xl p-2 hover:shadow-lg transition-all cursor-pointer aspect-square flex flex-col items-center justify-center text-center overflow-hidden",children:[x?g.jsx("div",{className:"absolute inset-0 bg-gray-100",children:g.jsx("img",{src:"https://via.placeholder.com/150?text=Image",alt:f,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}):g.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mb-2 ${p?"bg-red-50 text-red-500":"bg-blue-50 text-blue-500"}`,children:p?g.jsx(_h,{className:"w-8 h-8"}):g.jsx(KD,{className:"w-8 h-8"})}),g.jsx("div",{className:"relative z-10 w-full px-2",children:!x&&g.jsx("div",{className:"text-xs font-bold text-gray-700 truncate w-full",children:f})}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-[1px]",children:g.jsx("button",{className:"bg-white text-gray-900 rounded-full p-2 shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform",children:g.jsx(JC,{className:"w-5 h-5"})})})]},m)})}):g.jsxs("div",{onClick:()=>{var f;return(f=r.current)==null?void 0:f.click()},className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-2xl p-10 text-center text-gray-400 font-medium cursor-pointer hover:bg-gray-100 transition-colors",children:[g.jsx(eu,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),"     "]})]})]})};var th={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var H7=th.exports,dC;function q7(){return dC||(dC=1,(function(n,e){(function(t,i){i(e)})(H7,(function(t){var i="1.9.4";function r(l){var d,w,A,I;for(w=1,A=arguments.length;w<A;w++){I=arguments[w];for(d in I)l[d]=I[d]}return l}var a=Object.create||(function(){function l(){}return function(d){return l.prototype=d,new l}})();function c(l,d){var w=Array.prototype.slice;if(l.bind)return l.bind.apply(l,w.call(arguments,1));var A=w.call(arguments,2);return function(){return l.apply(d,A.length?A.concat(w.call(arguments)):arguments)}}var f=0;function m(l){return"_leaflet_id"in l||(l._leaflet_id=++f),l._leaflet_id}function p(l,d,w){var A,I,B,ee;return ee=function(){A=!1,I&&(B.apply(w,I),I=!1)},B=function(){A?I=arguments:(l.apply(w,arguments),setTimeout(ee,d),A=!0)},B}function x(l,d,w){var A=d[1],I=d[0],B=A-I;return l===A&&w?l:((l-I)%B+B)%B+I}function T(){return!1}function S(l,d){if(d===!1)return l;var w=Math.pow(10,d===void 0?6:d);return Math.round(l*w)/w}function N(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function O(l){return N(l).split(/\s+/)}function V(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var w in d)l.options[w]=d[w];return l.options}function P(l,d,w){var A=[];for(var I in l)A.push(encodeURIComponent(w?I.toUpperCase():I)+"="+encodeURIComponent(l[I]));return(!d||d.indexOf("?")===-1?"?":"&")+A.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function W(l,d){return l.replace(Q,function(w,A){var I=d[A];if(I===void 0)throw new Error("No value provided for variable "+w);return typeof I=="function"&&(I=I(d)),I})}var H=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function j(l,d){for(var w=0;w<l.length;w++)if(l[w]===d)return w;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var D=0;function k(l){var d=+new Date,w=Math.max(0,16-(d-D));return D=d+w,window.setTimeout(l,w)}var U=window.requestAnimationFrame||Y("RequestAnimationFrame")||k,G=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function $(l,d,w){if(w&&U===k)l.call(d);else return U.call(window,c(l,d))}function te(l){l&&G.call(window,l)}var K={__proto__:null,extend:r,create:a,bind:c,get lastId(){return f},stamp:m,throttle:p,wrapNum:x,falseFn:T,formatNum:S,trim:N,splitWords:O,setOptions:V,getParamString:P,template:W,isArray:H,indexOf:j,emptyImageUrl:Z,requestFn:U,cancelFn:G,requestAnimFrame:$,cancelAnimFrame:te};function Le(){}Le.extend=function(l){var d=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=d.__super__=this.prototype,A=a(w);A.constructor=d,d.prototype=A;for(var I in this)Object.prototype.hasOwnProperty.call(this,I)&&I!=="prototype"&&I!=="__super__"&&(d[I]=this[I]);return l.statics&&r(d,l.statics),l.includes&&(rt(l.includes),r.apply(null,[A].concat(l.includes))),r(A,l),delete A.statics,delete A.includes,A.options&&(A.options=w.options?a(w.options):{},r(A.options,l.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,ee=A._initHooks.length;B<ee;B++)A._initHooks[B].call(this)}},d},Le.include=function(l){var d=this.prototype.options;return r(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},Le.mergeOptions=function(l){return r(this.prototype.options,l),this},Le.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),w=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function rt(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=H(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(l,d,w){if(typeof l=="object")for(var A in l)this._on(A,l[A],d);else{l=O(l);for(var I=0,B=l.length;I<B;I++)this._on(l[I],d,w)}return this},off:function(l,d,w){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var A in l)this._off(A,l[A],d);else{l=O(l);for(var I=arguments.length===1,B=0,ee=l.length;B<ee;B++)I?this._off(l[B]):this._off(l[B],d,w)}return this},_on:function(l,d,w,A){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,w)===!1){w===this&&(w=void 0);var I={fn:d,ctx:w};A&&(I.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(I)}},_off:function(l,d,w){var A,I,B;if(this._events&&(A=this._events[l],!!A)){if(arguments.length===1){if(this._firingCount)for(I=0,B=A.length;I<B;I++)A[I].fn=T;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var ee=this._listens(l,d,w);if(ee!==!1){var le=A[ee];this._firingCount&&(le.fn=T,this._events[l]=A=A.slice()),A.splice(ee,1)}}},fire:function(l,d,w){if(!this.listens(l,w))return this;var A=r({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var I=this._events[l];if(I){this._firingCount=this._firingCount+1||1;for(var B=0,ee=I.length;B<ee;B++){var le=I[B],ge=le.fn;le.once&&this.off(l,ge,le.ctx),ge.call(le.ctx||this,A)}this._firingCount--}}return w&&this._propagateEvent(A),this},listens:function(l,d,w,A){typeof l!="string"&&console.warn('"string" type argument expected');var I=d;typeof d!="function"&&(A=!!d,I=void 0,w=void 0);var B=this._events&&this._events[l];if(B&&B.length&&this._listens(l,I,w)!==!1)return!0;if(A){for(var ee in this._eventParents)if(this._eventParents[ee].listens(l,d,w,A))return!0}return!1},_listens:function(l,d,w){if(!this._events)return!1;var A=this._events[l]||[];if(!d)return!!A.length;w===this&&(w=void 0);for(var I=0,B=A.length;I<B;I++)if(A[I].fn===d&&A[I].ctx===w)return I;return!1},once:function(l,d,w){if(typeof l=="object")for(var A in l)this._on(A,l[A],d,!0);else{l=O(l);for(var I=0,B=l.length;I<B;I++)this._on(l[I],d,w,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[m(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[m(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,r({layer:l.target,propagatedFrom:l.target},l),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var Ie=Le.extend(fe);function Ee(l,d,w){this.x=w?Math.round(l):l,this.y=w?Math.round(d):d}var Qe=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(l){return this.clone()._add(pe(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(pe(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new Ee(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new Ee(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Qe(this.x),this.y=Qe(this.y),this},distanceTo:function(l){l=pe(l);var d=l.x-this.x,w=l.y-this.y;return Math.sqrt(d*d+w*w)},equals:function(l){return l=pe(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=pe(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function pe(l,d,w){return l instanceof Ee?l:H(l)?new Ee(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new Ee(l.x,l.y):new Ee(l,d,w)}function J(l,d){if(l)for(var w=d?[l,d]:l,A=0,I=w.length;A<I;A++)this.extend(w[A])}J.prototype={extend:function(l){var d,w;if(!l)return this;if(l instanceof Ee||typeof l[0]=="number"||"x"in l)d=w=pe(l);else if(l=ce(l),d=l.min,w=l.max,!d||!w)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=w.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(l){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,w;return typeof l[0]=="number"||l instanceof Ee?l=pe(l):l=ce(l),l instanceof J?(d=l.min,w=l.max):d=w=l,d.x>=this.min.x&&w.x<=this.max.x&&d.y>=this.min.y&&w.y<=this.max.y},intersects:function(l){l=ce(l);var d=this.min,w=this.max,A=l.min,I=l.max,B=I.x>=d.x&&A.x<=w.x,ee=I.y>=d.y&&A.y<=w.y;return B&&ee},overlaps:function(l){l=ce(l);var d=this.min,w=this.max,A=l.min,I=l.max,B=I.x>d.x&&A.x<w.x,ee=I.y>d.y&&A.y<w.y;return B&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,w=this.max,A=Math.abs(d.x-w.x)*l,I=Math.abs(d.y-w.y)*l;return ce(pe(d.x-A,d.y-I),pe(w.x+A,w.y+I))},equals:function(l){return l?(l=ce(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function ce(l,d){return!l||l instanceof J?l:new J(l,d)}function be(l,d){if(l)for(var w=d?[l,d]:l,A=0,I=w.length;A<I;A++)this.extend(w[A])}be.prototype={extend:function(l){var d=this._southWest,w=this._northEast,A,I;if(l instanceof ve)A=l,I=l;else if(l instanceof be){if(A=l._southWest,I=l._northEast,!A||!I)return this}else return l?this.extend(z(l)||re(l)):this;return!d&&!w?(this._southWest=new ve(A.lat,A.lng),this._northEast=new ve(I.lat,I.lng)):(d.lat=Math.min(A.lat,d.lat),d.lng=Math.min(A.lng,d.lng),w.lat=Math.max(I.lat,w.lat),w.lng=Math.max(I.lng,w.lng)),this},pad:function(l){var d=this._southWest,w=this._northEast,A=Math.abs(d.lat-w.lat)*l,I=Math.abs(d.lng-w.lng)*l;return new be(new ve(d.lat-A,d.lng-I),new ve(w.lat+A,w.lng+I))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof ve||"lat"in l?l=z(l):l=re(l);var d=this._southWest,w=this._northEast,A,I;return l instanceof be?(A=l.getSouthWest(),I=l.getNorthEast()):A=I=l,A.lat>=d.lat&&I.lat<=w.lat&&A.lng>=d.lng&&I.lng<=w.lng},intersects:function(l){l=re(l);var d=this._southWest,w=this._northEast,A=l.getSouthWest(),I=l.getNorthEast(),B=I.lat>=d.lat&&A.lat<=w.lat,ee=I.lng>=d.lng&&A.lng<=w.lng;return B&&ee},overlaps:function(l){l=re(l);var d=this._southWest,w=this._northEast,A=l.getSouthWest(),I=l.getNorthEast(),B=I.lat>d.lat&&A.lat<w.lat,ee=I.lng>d.lng&&A.lng<w.lng;return B&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=re(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(l,d){return l instanceof be?l:new be(l,d)}function ve(l,d,w){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,w!==void 0&&(this.alt=+w)}ve.prototype={equals:function(l,d){if(!l)return!1;l=z(l);var w=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return w<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+S(this.lat,l)+", "+S(this.lng,l)+")"},distanceTo:function(l){return oe.distance(this,z(l))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,w=d/Math.cos(Math.PI/180*this.lat);return re([this.lat-d,this.lng-w],[this.lat+d,this.lng+w])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function z(l,d,w){return l instanceof ve?l:H(l)&&typeof l[0]!="object"?l.length===3?new ve(l[0],l[1],l[2]):l.length===2?new ve(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new ve(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new ve(l,d,w)}var se={latLngToPoint:function(l,d){var w=this.projection.project(l),A=this.scale(d);return this.transformation._transform(w,A)},pointToLatLng:function(l,d){var w=this.scale(d),A=this.transformation.untransform(l,w);return this.projection.unproject(A)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,w=this.scale(l),A=this.transformation.transform(d.min,w),I=this.transformation.transform(d.max,w);return new J(A,I)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?x(l.lng,this.wrapLng,!0):l.lng,w=this.wrapLat?x(l.lat,this.wrapLat,!0):l.lat,A=l.alt;return new ve(w,d,A)},wrapLatLngBounds:function(l){var d=l.getCenter(),w=this.wrapLatLng(d),A=d.lat-w.lat,I=d.lng-w.lng;if(A===0&&I===0)return l;var B=l.getSouthWest(),ee=l.getNorthEast(),le=new ve(B.lat-A,B.lng-I),ge=new ve(ee.lat-A,ee.lng-I);return new be(le,ge)}},oe=r({},se,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var w=Math.PI/180,A=l.lat*w,I=d.lat*w,B=Math.sin((d.lat-l.lat)*w/2),ee=Math.sin((d.lng-l.lng)*w/2),le=B*B+Math.cos(A)*Math.cos(I)*ee*ee,ge=2*Math.atan2(Math.sqrt(le),Math.sqrt(1-le));return this.R*ge}}),Me=6378137,Fe={R:Me,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,w=this.MAX_LATITUDE,A=Math.max(Math.min(w,l.lat),-w),I=Math.sin(A*d);return new Ee(this.R*l.lng*d,this.R*Math.log((1+I)/(1-I))/2)},unproject:function(l){var d=180/Math.PI;return new ve((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:(function(){var l=Me*Math.PI;return new J([-l,-l],[l,l])})()};function yt(l,d,w,A){if(H(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=w,this._d=A}yt.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new Ee((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function dt(l,d,w,A){return new yt(l,d,w,A)}var Ft=r({},oe,{code:"EPSG:3857",projection:Fe,transformation:(function(){var l=.5/(Math.PI*Fe.R);return dt(l,.5,-l,.5)})()}),kt=r({},Ft,{code:"EPSG:900913"});function mn(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function tt(l,d){var w="",A,I,B,ee,le,ge;for(A=0,B=l.length;A<B;A++){for(le=l[A],I=0,ee=le.length;I<ee;I++)ge=le[I],w+=(I?"L":"M")+ge.x+" "+ge.y;w+=d?ze.svg?"z":"x":""}return w||"M0 0"}var qt=document.documentElement.style,vt="ActiveXObject"in window,mt=vt&&!document.addEventListener,zt="msLaunchUri"in navigator&&!("documentMode"in document),En=Hn("webkit"),ci=Hn("android"),oo=Hn("android 2")||Hn("android 3"),Ln=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xs=ci&&Hn("Google")&&Ln<537&&!("AudioNode"in window),ao=!!window.opera,Zo=!zt&&Hn("chrome"),Qs=Hn("gecko")&&!En&&!ao&&!vt,Yc=!Zo&&Hn("safari"),al=Hn("phantom"),ll="OTransition"in qt,mu=navigator.platform.indexOf("Win")===0,ki=vt&&"transition"in qt,xn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oo,Ei="MozPerspective"in qt,un=!window.L_DISABLE_3D&&(ki||xn||Ei)&&!ll&&!al,Ir=typeof orientation<"u"||Hn("mobile"),Xo=Ir&&En,pu=Ir&&xn,es=!window.PointerEvent&&window.MSPointerEvent,Rr=!!(window.PointerEvent||es),cn="ontouchstart"in window||!!window.TouchEvent,Es=!window.L_NO_TOUCH&&(cn||Rr),Ss=Ir&&ao,ts=Ir&&Qs,Wc=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,gu=(function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",T,d),window.removeEventListener("testPassiveEventSupport",T,d)}catch{}return l})(),As=(function(){return!!document.createElement("canvas").getContext})(),er=!!(document.createElementNS&&mn("svg").createSVGRect),Zc=!!er&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),lo=!er&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),ul=navigator.platform.indexOf("Mac")===0,cl=navigator.platform.indexOf("Linux")===0;function Hn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var ze={ie:vt,ielt9:mt,edge:zt,webkit:En,android:ci,android23:oo,androidStock:Xs,opera:ao,chrome:Zo,gecko:Qs,safari:Yc,phantom:al,opera12:ll,win:mu,ie3d:ki,webkit3d:xn,gecko3d:Ei,any3d:un,mobile:Ir,mobileWebkit:Xo,mobileWebkit3d:pu,msPointer:es,pointer:Rr,touch:Es,touchNative:cn,mobileOpera:Ss,mobileGecko:ts,retina:Wc,passiveEvents:gu,canvas:As,svg:er,vml:lo,inlineSvg:Zc,mac:ul,linux:cl},dl=ze.msPointer?"MSPointerDown":"pointerdown",Di=ze.msPointer?"MSPointerMove":"pointermove",Li=ze.msPointer?"MSPointerUp":"pointerup",dn=ze.msPointer?"MSPointerCancel":"pointercancel",pn={touchstart:dl,touchmove:Di,touchend:Li,touchcancel:dn},ns={touchstart:Ns,touchmove:qn,touchend:qn,touchcancel:qn},is={},_u=!1;function yu(l,d,w){return d==="touchstart"&&Oi(),ns[d]?(w=ns[d].bind(this,w),l.addEventListener(pn[d],w,!1),w):(console.warn("wrong event specified:",d),T)}function vu(l,d,w){if(!pn[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(pn[d],w,!1)}function Cs(l){is[l.pointerId]=l}function Qo(l){is[l.pointerId]&&(is[l.pointerId]=l)}function ss(l){delete is[l.pointerId]}function Oi(){_u||(document.addEventListener(dl,Cs,!0),document.addEventListener(Di,Qo,!0),document.addEventListener(Li,ss,!0),document.addEventListener(dn,ss,!0),_u=!0)}function qn(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var w in is)d.touches.push(is[w]);d.changedTouches=[d],l(d)}}function Ns(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&on(d),qn(l,d)}function gn(l){var d={},w,A;for(A in l)w=l[A],d[A]=w&&w.bind?w.bind(l):w;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var hl=200;function fl(l,d){l.addEventListener("dblclick",d);var w=0,A;function I(B){if(B.detail!==1){A=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var ee=Lr(B);if(!(ee.some(function(ge){return ge instanceof HTMLLabelElement&&ge.attributes.for})&&!ee.some(function(ge){return ge instanceof HTMLInputElement||ge instanceof HTMLSelectElement}))){var le=Date.now();le-w<=hl?(A++,A===2&&d(gn(B))):A=1,w=le}}}return l.addEventListener("click",I),{dblclick:d,simDblclick:I}}function Is(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var Ui=co(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tr=co(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ea=tr==="webkitTransition"||tr==="OTransition"?tr+"End":"transitionend";function ta(l){return typeof l=="string"?document.getElementById(l):l}function Mr(l,d){var w=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!w||w==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(l,null);w=A?A[d]:null}return w==="auto"?null:w}function gt(l,d,w){var A=document.createElement(l);return A.className=d||"",w&&w.appendChild(A),A}function xt(l){var d=l.parentNode;d&&d.removeChild(l)}function sn(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function rn(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function Si(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function uo(l,d){if(l.classList!==void 0)return l.classList.contains(d);var w=Rs(l);return w.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(w)}function Oe(l,d){if(l.classList!==void 0)for(var w=O(d),A=0,I=w.length;A<I;A++)l.classList.add(w[A]);else if(!uo(l,d)){var B=Rs(l);Vi(l,(B?B+" ":"")+d)}}function Gt(l,d){l.classList!==void 0?l.classList.remove(d):Vi(l,N((" "+Rs(l)+" ").replace(" "+d+" "," ")))}function Vi(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function Rs(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Xt(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&na(l,d)}function na(l,d){var w=!1,A="DXImageTransform.Microsoft.Alpha";try{w=l.filters.item(A)}catch{if(d===1)return}d=Math.round(d*100),w?(w.Enabled=d!==100,w.Opacity=d):l.style.filter+=" progid:"+A+"(opacity="+d+")"}function co(l){for(var d=document.documentElement.style,w=0;w<l.length;w++)if(l[w]in d)return l[w];return!1}function rs(l,d,w){var A=d||new Ee(0,0);l.style[Ui]=(ze.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(w?" scale("+w+")":"")}function $t(l,d){l._leaflet_pos=d,ze.any3d?rs(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function Ms(l){return l._leaflet_pos||new Ee(0,0)}var Bi,Sn,ia;if("onselectstart"in document)Bi=function(){Ze(window,"selectstart",on)},Sn=function(){Dt(window,"selectstart",on)};else{var nr=co(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bi=function(){if(nr){var l=document.documentElement.style;ia=l[nr],l[nr]="none"}},Sn=function(){nr&&(document.documentElement.style[nr]=ia,ia=void 0)}}function ho(){Ze(window,"dragstart",on)}function Pr(){Dt(window,"dragstart",on)}var fo,Ps;function kr(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(di(),fo=l,Ps=l.style.outlineStyle,l.style.outlineStyle="none",Ze(window,"keydown",di))}function di(){fo&&(fo.style.outlineStyle=Ps,fo=void 0,Ps=void 0,Dt(window,"keydown",di))}function sa(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function hi(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var Dr={__proto__:null,TRANSFORM:Ui,TRANSITION:tr,TRANSITION_END:ea,get:ta,getStyle:Mr,create:gt,remove:xt,empty:sn,toFront:rn,toBack:Si,hasClass:uo,addClass:Oe,removeClass:Gt,setClass:Vi,getClass:Rs,setOpacity:Xt,testProp:co,setTransform:rs,setPosition:$t,getPosition:Ms,get disableTextSelection(){return Bi},get enableTextSelection(){return Sn},disableImageDrag:ho,enableImageDrag:Pr,preventOutline:kr,restoreOutline:di,getSizedParentNode:sa,getScale:hi};function Ze(l,d,w,A){if(d&&typeof d=="object")for(var I in d)fi(l,I,d[I],w);else{d=O(d);for(var B=0,ee=d.length;B<ee;B++)fi(l,d[B],w,A)}return this}var Gn="_leaflet_events";function Dt(l,d,w,A){if(arguments.length===1)ir(l),delete l[Gn];else if(d&&typeof d=="object")for(var I in d)sr(l,I,d[I],w);else if(d=O(d),arguments.length===2)ir(l,function(le){return j(d,le)!==-1});else for(var B=0,ee=d.length;B<ee;B++)sr(l,d[B],w,A);return this}function ir(l,d){for(var w in l[Gn]){var A=w.split(/\d/)[0];(!d||d(A))&&sr(l,A,null,null,w)}}var Ai={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fi(l,d,w,A){var I=d+m(w)+(A?"_"+m(A):"");if(l[Gn]&&l[Gn][I])return this;var B=function(le){return w.call(A||l,le||window.event)},ee=B;!ze.touchNative&&ze.pointer&&d.indexOf("touch")===0?B=yu(l,d,B):ze.touch&&d==="dblclick"?B=fl(l,B):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(Ai[d]||d,B,ze.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(B=function(le){le=le||window.event,ls(l,le)&&ee(le)},l.addEventListener(Ai[d],B,!1)):l.addEventListener(d,ee,!1):l.attachEvent("on"+d,B),l[Gn]=l[Gn]||{},l[Gn][I]=B}function sr(l,d,w,A,I){I=I||d+m(w)+(A?"_"+m(A):"");var B=l[Gn]&&l[Gn][I];if(!B)return this;!ze.touchNative&&ze.pointer&&d.indexOf("touch")===0?vu(l,d,B):ze.touch&&d==="dblclick"?Is(l,B):"removeEventListener"in l?l.removeEventListener(Ai[d]||d,B,!1):l.detachEvent("on"+d,B),l[Gn][I]=null}function Et(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Fi(l){return fi(l,"wheel",Et),this}function rr(l){return Ze(l,"mousedown touchstart dblclick contextmenu",Et),l._leaflet_disable_click=!0,this}function on(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function os(l){return on(l),Et(l),this}function Lr(l){if(l.composedPath)return l.composedPath();for(var d=[],w=l.target;w;)d.push(w),w=w.parentNode;return d}function ks(l,d){if(!d)return new Ee(l.clientX,l.clientY);var w=hi(d),A=w.boundingClientRect;return new Ee((l.clientX-A.left)/w.x-d.clientLeft,(l.clientY-A.top)/w.y-d.clientTop)}var as=ze.linux&&ze.chrome?window.devicePixelRatio:ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function An(l){return ze.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/as:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function ls(l,d){var w=d.relatedTarget;if(!w)return!0;try{for(;w&&w!==l;)w=w.parentNode}catch{return!1}return w!==l}var Ds={__proto__:null,on:Ze,off:Dt,stopPropagation:Et,disableScrollPropagation:Fi,disableClickPropagation:rr,preventDefault:on,stop:os,getPropagationPath:Lr,getMousePosition:ks,getWheelDelta:An,isExternalTarget:ls,addListener:Ze,removeListener:Dt},or=Ie.extend({run:function(l,d,w,A){this.stop(),this._el=l,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=Ms(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,w=this._duration*1e3;d<w?this._runFrame(this._easeOut(d/w),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var w=this._startPos.add(this._offset.multiplyBy(l));d&&w._round(),$t(this._el,w),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),pt=Ie.extend({options:{crs:Ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=V(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(z(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tr&&ze.any3d&&!ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ze(this._proxy,ea,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,w){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(z(l),d,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=r({animate:w.animate},w.zoom),w.pan=r({animate:w.animate,duration:w.duration},w.pan));var A=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,w.zoom):this._tryAnimatedPan(l,w.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,w.pan&&w.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,w){var A=this.getZoomScale(d),I=this.getSize().divideBy(2),B=l instanceof Ee?l:this.latLngToContainerPoint(l),ee=B.subtract(I).multiplyBy(1-1/A),le=this.containerPointToLatLng(I.add(ee));return this.setView(le,d,{zoom:w})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():re(l);var w=pe(d.paddingTopLeft||d.padding||[0,0]),A=pe(d.paddingBottomRight||d.padding||[0,0]),I=this.getBoundsZoom(l,!1,w.add(A));if(I=typeof d.maxZoom=="number"?Math.min(d.maxZoom,I):I,I===1/0)return{center:l.getCenter(),zoom:I};var B=A.subtract(w).divideBy(2),ee=this.project(l.getSouthWest(),I),le=this.project(l.getNorthEast(),I),ge=this.unproject(ee.add(le).divideBy(2).add(B),I);return{center:ge,zoom:I}},fitBounds:function(l,d){if(l=re(l),!l.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(l,d);return this.setView(w.center,w.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=pe(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new or,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Oe(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,w,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,w){if(w=w||{},w.animate===!1||!ze.any3d)return this.setView(l,d,w);this._stop();var A=this.project(this.getCenter()),I=this.project(l),B=this.getSize(),ee=this._zoom;l=z(l),d=d===void 0?ee:d;var le=Math.max(B.x,B.y),ge=le*this.getZoomScale(ee,d),Se=I.distanceTo(A)||1,ke=1.42,$e=ke*ke;function ht(hn){var dr=hn?-1:1,xo=hn?ge:le,id=ge*ge-le*le+dr*$e*$e*Se*Se,kl=2*xo*$e*Se,Dl=id/kl,Gr=Math.sqrt(Dl*Dl+1)-Dl,hr=Gr<1e-9?-18:Math.log(Gr);return hr}function On(hn){return(Math.exp(hn)-Math.exp(-hn))/2}function _n(hn){return(Math.exp(hn)+Math.exp(-hn))/2}function Ii(hn){return On(hn)/_n(hn)}var Lt=ht(0);function Ot(hn){return le*(_n(Lt)/_n(Lt+ke*hn))}function wt(hn){return le*(_n(Lt)*Ii(Lt+ke*hn)-On(Lt))/$e}function Hr(hn){return 1-Math.pow(1-hn,1.5)}var Gi=Date.now(),Pu=(ht(1)-Lt)/ke,qr=w.duration?1e3*w.duration:1e3*Pu*.8;function nd(){var hn=(Date.now()-Gi)/qr,dr=Hr(hn)*Pu;hn<=1?(this._flyToFrame=$(nd,this),this._move(this.unproject(A.add(I.subtract(A).multiplyBy(wt(dr)/Se)),ee),this.getScaleZoom(le/Ot(dr),ee),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),nd.call(this),this},flyToBounds:function(l,d){var w=this._getBoundsCenterZoom(l,d);return this.flyTo(w.center,w.zoom,d)},setMaxBounds:function(l){return l=re(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var w=this.getCenter(),A=this._limitCenter(w,this._zoom,re(l));return w.equals(A)||this.panTo(A,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var w=pe(d.paddingTopLeft||d.padding||[0,0]),A=pe(d.paddingBottomRight||d.padding||[0,0]),I=this.project(this.getCenter()),B=this.project(l),ee=this.getPixelBounds(),le=ce([ee.min.add(w),ee.max.subtract(A)]),ge=le.getSize();if(!le.contains(B)){this._enforcingBounds=!0;var Se=B.subtract(le.getCenter()),ke=le.extend(B).getSize().subtract(ge);I.x+=Se.x<0?-ke.x:ke.x,I.y+=Se.y<0?-ke.y:ke.y,this.panTo(this.unproject(I),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=r({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),A=d.divideBy(2).round(),I=w.divideBy(2).round(),B=A.subtract(I);return!B.x&&!B.y?this:(l.animate&&l.pan?this.panBy(B):(l.pan&&this._rawPanBy(B),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=r({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=c(this._handleGeolocationResponse,this),w=c(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,w,l):navigator.geolocation.getCurrentPosition(d,w,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,w=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,w=l.coords.longitude,A=new ve(d,w),I=A.toBounds(l.coords.accuracy*2),B=this._locateOptions;if(B.setView){var ee=this.getBoundsZoom(I);this.setView(A,B.maxZoom?Math.min(ee,B.maxZoom):ee)}var le={latlng:A,bounds:I,timestamp:l.timestamp};for(var ge in l.coords)typeof l.coords[ge]=="number"&&(le[ge]=l.coords[ge]);this.fire("locationfound",le)}},addHandler:function(l,d){if(!d)return this;var w=this[l]=new d(this);return this._handlers.push(w),this.options[l]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)xt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var w="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),A=gt("div",w,d||this._mapPane);return l&&(this._panes[l]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),w=this.unproject(l.getTopRight());return new be(d,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,w){l=re(l),w=pe(w||[0,0]);var A=this.getZoom()||0,I=this.getMinZoom(),B=this.getMaxZoom(),ee=l.getNorthWest(),le=l.getSouthEast(),ge=this.getSize().subtract(w),Se=ce(this.project(le,A),this.project(ee,A)).getSize(),ke=ze.any3d?this.options.zoomSnap:1,$e=ge.x/Se.x,ht=ge.y/Se.y,On=d?Math.max($e,ht):Math.min($e,ht);return A=this.getScaleZoom(On,A),ke&&(A=Math.round(A/(ke/100))*(ke/100),A=d?Math.ceil(A/ke)*ke:Math.floor(A/ke)*ke),Math.max(I,Math.min(B,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var w=this._getTopLeftPoint(l,d);return new J(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var w=this.options.crs;return d=d===void 0?this._zoom:d,w.scale(l)/w.scale(d)},getScaleZoom:function(l,d){var w=this.options.crs;d=d===void 0?this._zoom:d;var A=w.zoom(l*w.scale(d));return isNaN(A)?1/0:A},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(z(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(pe(l),d)},layerPointToLatLng:function(l){var d=pe(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(z(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(z(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(re(l))},distance:function(l,d){return this.options.crs.distance(z(l),z(d))},containerPointToLayerPoint:function(l){return pe(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return pe(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(pe(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(l)))},mouseEventToContainerPoint:function(l){return ks(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=ta(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ze(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&ze.any3d,Oe(l,"leaflet-container"+(ze.touch?" leaflet-touch":"")+(ze.retina?" leaflet-retina":"")+(ze.ielt9?" leaflet-oldie":"")+(ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Mr(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$t(this._mapPane,new Ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Oe(l.markerPane,"leaflet-zoom-hide"),Oe(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,w){$t(this._mapPane,new Ee(0,0));var A=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var I=this._zoom!==d;this._moveStart(I,w)._move(l,d)._moveEnd(I),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,w,A){d===void 0&&(d=this._zoom);var I=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),A?w&&w.pinch&&this.fire("zoom",w):((I||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){$t(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[m(this._container)]=this;var d=l?Dt:Ze;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),ze.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var w=[],A,I=d==="mouseout"||d==="mouseover",B=l.target||l.srcElement,ee=!1;B;){if(A=this._targets[m(B)],A&&(d==="click"||d==="preclick")&&this._draggableMoved(A)){ee=!0;break}if(A&&A.listens(d,!0)&&(I&&!ls(B,l)||(w.push(A),I))||B===this._container)break;B=B.parentNode}return!w.length&&!ee&&!I&&this.listens(d,!0)&&(w=[this]),w},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var w=l.type;w==="mousedown"&&kr(d),this._fireDOMEvent(l,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,w){if(l.type==="click"){var A=r({},l);A.type="preclick",this._fireDOMEvent(A,A.type,w)}var I=this._findEventTargets(l,d);if(w){for(var B=[],ee=0;ee<w.length;ee++)w[ee].listens(d,!0)&&B.push(w[ee]);I=B.concat(I)}if(I.length){d==="contextmenu"&&on(l);var le=I[0],ge={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Se=le.getLatLng&&(!le._radius||le._radius<=10);ge.containerPoint=Se?this.latLngToContainerPoint(le.getLatLng()):this.mouseEventToContainerPoint(l),ge.layerPoint=this.containerPointToLayerPoint(ge.containerPoint),ge.latlng=Se?le.getLatLng():this.layerPointToLatLng(ge.layerPoint)}for(ee=0;ee<I.length;ee++)if(I[ee].fire(d,ge,!0),ge.originalEvent._stopped||I[ee].options.bubblingMouseEvents===!1&&j(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return Ms(this._mapPane)||new Ee(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var w=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var w=this.getSize()._divideBy(2);return this.project(l,d)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,w){var A=this._getNewPixelOrigin(w,d);return this.project(l,d)._subtract(A)},_latLngBoundsToNewLayerBounds:function(l,d,w){var A=this._getNewPixelOrigin(w,d);return ce([this.project(l.getSouthWest(),d)._subtract(A),this.project(l.getNorthWest(),d)._subtract(A),this.project(l.getSouthEast(),d)._subtract(A),this.project(l.getNorthEast(),d)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,w){if(!w)return l;var A=this.project(l,d),I=this.getSize().divideBy(2),B=new J(A.subtract(I),A.add(I)),ee=this._getBoundsOffset(B,w,d);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?l:this.unproject(A.add(ee),d)},_limitOffset:function(l,d){if(!d)return l;var w=this.getPixelBounds(),A=new J(w.min.add(l),w.max.add(l));return l.add(this._getBoundsOffset(A,d))},_getBoundsOffset:function(l,d,w){var A=ce(this.project(d.getNorthEast(),w),this.project(d.getSouthWest(),w)),I=A.min.subtract(l.min),B=A.max.subtract(l.max),ee=this._rebound(I.x,-B.x),le=this._rebound(I.y,-B.y);return new Ee(ee,le)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),w=this.getMaxZoom(),A=ze.any3d?this.options.zoomSnap:1;return A&&(l=Math.round(l/A)*A),Math.max(d,Math.min(w,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var w=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,d),!0)},_createAnimProxy:function(){var l=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var w=Ui,A=this._proxy.style[w];rs(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),A===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();rs(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(d),I=this._getCenterOffset(l)._divideBy(1-1/A);return w.animate!==!0&&!this.getSize().contains(I)?!1:($(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,w,A){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,Oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Or(l,d){return new pt(l,d)}var $n=Le.extend({options:{position:"topright"},initialize:function(l){V(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),w=this.getPosition(),A=l._controlCorners[w];return Oe(d,"leaflet-control"),w.indexOf("bottom")!==-1?A.insertBefore(d,A.firstChild):A.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),mi=function(l){return new $n(l)};pt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",w=this._controlContainer=gt("div",d+"control-container",this._container);function A(I,B){var ee=d+I+" "+d+B;l[I+B]=gt("div",ee,w)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)xt(this._controlCorners[l]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mo=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,w,A){return w<A?-1:A<w?1:0}},initialize:function(l,d,w){V(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in l)this._addLayer(l[A],A);for(A in d)this._addLayer(d[A],A,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return $n.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=gt("div",l),w=this.options.collapsed;d.setAttribute("aria-haspopup",!0),rr(d),Fi(d);var A=this._section=gt("section",l+"-list");w&&(this._map.on("click",this.collapse,this),Ze(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var I=this._layersLink=gt("a",l+"-toggle",d);I.href="#",I.title="Layers",I.setAttribute("role","button"),Ze(I,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){on(B),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=gt("div",l+"-base",A),this._separator=gt("div",l+"-separator",A),this._overlaysList=gt("div",l+"-overlays",A),d.appendChild(A)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,w){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:w}),this.options.sortLayers&&this._layers.sort(c(function(A,I){return this.options.sortFunction(A.layer,I.layer,A.name,I.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sn(this._baseLayersList),sn(this._overlaysList),this._layerControlInputs=[];var l,d,w,A,I=0;for(w=0;w<this._layers.length;w++)A=this._layers[w],this._addItem(A),d=d||A.overlay,l=l||!A.overlay,I+=A.overlay?0:1;return this.options.hideSingleBase&&(l=l&&I>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(m(l.target)),w=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;w&&this._map.fire(w,d)},_createRadioElement:function(l,d){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=w,A.firstChild},_addItem:function(l){var d=document.createElement("label"),w=this._map.hasLayer(l.layer),A;l.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=w):A=this._createRadioElement("leaflet-base-layers_"+m(this),w),this._layerControlInputs.push(A),A.layerId=m(l.layer),Ze(A,"click",this._onInputClick,this);var I=document.createElement("span");I.innerHTML=" "+l.name;var B=document.createElement("span");d.appendChild(B),B.appendChild(A),B.appendChild(I);var ee=l.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,w,A=[],I=[];this._handlingClick=!0;for(var B=l.length-1;B>=0;B--)d=l[B],w=this._getLayer(d.layerId).layer,d.checked?A.push(w):d.checked||I.push(w);for(B=0;B<I.length;B++)this._map.hasLayer(I[B])&&this._map.removeLayer(I[B]);for(B=0;B<A.length;B++)this._map.hasLayer(A[B])||this._map.addLayer(A[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,w,A=this._map.getZoom(),I=l.length-1;I>=0;I--)d=l[I],w=this._getLayer(d.layerId).layer,d.disabled=w.options.minZoom!==void 0&&A<w.options.minZoom||w.options.maxZoom!==void 0&&A>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Ze(l,"click",on),this.expand();var d=this;setTimeout(function(){Dt(l,"click",on),d._preventClick=!1})}}),ml=function(l,d,w){return new mo(l,d,w)},ar=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",w=gt("div",d+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,d+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,d+"-out",w,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,w,A,I){var B=gt("a",w,A);return B.innerHTML=l,B.href="#",B.title=d,B.setAttribute("role","button"),B.setAttribute("aria-label",d),rr(B),Ze(B,"click",os),Ze(B,"click",I,this),Ze(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";Gt(this._zoomInButton,d),Gt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Oe(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Oe(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});pt.mergeOptions({zoomControl:!0}),pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ar,this.addControl(this.zoomControl))});var xu=function(l){return new ar(l)},pl=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",w=gt("div",d),A=this.options;return this._addScales(A,d+"-line",w),l.on(A.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),w},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,w){l.metric&&(this._mScale=gt("div",d,w)),l.imperial&&(this._iScale=gt("div",d,w))},_update:function(){var l=this._map,d=l.getSize().y/2,w=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(w)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),w=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,w,d/l)},_updateImperial:function(l){var d=l*3.2808399,w,A,I;d>5280?(w=d/5280,A=this._getRoundNum(w),this._updateScale(this._iScale,A+" mi",A/w)):(I=this._getRoundNum(d),this._updateScale(this._iScale,I+" ft",I/d))},_updateScale:function(l,d,w){l.style.width=Math.round(this.options.maxWidth*w)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),w=l/d;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,d*w}}),po=function(l){return new pl(l)},gl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ra=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ze.inlineSvg?gl+" ":"")+"Leaflet</a>"},initialize:function(l){V(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),rr(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var w=[];this.options.prefix&&w.push(this.options.prefix),l.length&&w.push(l.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});pt.mergeOptions({attributionControl:!0}),pt.addInitHook(function(){this.options.attributionControl&&new ra().addTo(this)});var oa=function(l){return new ra(l)};$n.Layers=mo,$n.Zoom=ar,$n.Scale=pl,$n.Attribution=ra,mi.layers=ml,mi.zoom=xu,mi.scale=po,mi.attribution=oa;var Ci=Le.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ci.addTo=function(l,d){return l.addHandler(d,this),this};var wu={Events:fe},us=ze.touch?"touchstart mousedown":"mousedown",cs=Ie.extend({options:{clickTolerance:3},initialize:function(l,d,w,A){V(this,A),this._element=l,this._dragStartTarget=d||l,this._preventOutline=w},enable:function(){this._enabled||(Ze(this._dragStartTarget,us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cs._dragging===this&&this.finishDrag(!0),Dt(this._dragStartTarget,us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!uo(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){cs._dragging===this&&this.finishDrag();return}if(!(cs._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(cs._dragging=this,this._preventOutline&&kr(this._element),ho(),Bi(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,w=sa(this._element);this._startPoint=new Ee(d.clientX,d.clientY),this._startPos=Ms(this._element),this._parentScale=hi(w);var A=l.type==="mousedown";Ze(document,A?"mousemove":"touchmove",this._onMove,this),Ze(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,w=new Ee(d.clientX,d.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,on(l),this._moved||(this.fire("dragstart"),this._moved=!0,Oe(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),$t(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Gt(document.body,"leaflet-dragging"),this._lastTarget&&(Gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dt(document,"mousemove touchmove",this._onMove,this),Dt(document,"mouseup touchend touchcancel",this._onUp,this),Pr(),Sn();var d=this._moved&&this._moving;this._moving=!1,cs._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function _l(l,d,w){var A,I=[1,4,2,8],B,ee,le,ge,Se,ke,$e,ht;for(B=0,ke=l.length;B<ke;B++)l[B]._code=ye(l[B],d);for(le=0;le<4;le++){for($e=I[le],A=[],B=0,ke=l.length,ee=ke-1;B<ke;ee=B++)ge=l[B],Se=l[ee],ge._code&$e?Se._code&$e||(ht=ue(Se,ge,$e,d,w),ht._code=ye(ht,d),A.push(ht)):(Se._code&$e&&(ht=ue(Se,ge,$e,d,w),ht._code=ye(ht,d),A.push(ht)),A.push(ge));l=A}return l}function yl(l,d){var w,A,I,B,ee,le,ge,Se,ke;if(!l||l.length===0)throw new Error("latlngs not passed");Rt(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var $e=z([0,0]),ht=re(l),On=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());On<1700&&($e=aa(l));var _n=l.length,Ii=[];for(w=0;w<_n;w++){var Lt=z(l[w]);Ii.push(d.project(z([Lt.lat-$e.lat,Lt.lng-$e.lng])))}for(le=ge=Se=0,w=0,A=_n-1;w<_n;A=w++)I=Ii[w],B=Ii[A],ee=I.y*B.x-B.y*I.x,ge+=(I.x+B.x)*ee,Se+=(I.y+B.y)*ee,le+=ee*3;le===0?ke=Ii[0]:ke=[ge/le,Se/le];var Ot=d.unproject(pe(ke));return z([Ot.lat+$e.lat,Ot.lng+$e.lng])}function aa(l){for(var d=0,w=0,A=0,I=0;I<l.length;I++){var B=z(l[I]);d+=B.lat,w+=B.lng,A++}return z([d/A,w/A])}var Ur={__proto__:null,clipPolygon:_l,polygonCenter:yl,centroid:aa};function Jn(l,d){if(!d||!l.length)return l.slice();var w=d*d;return l=C(l,w),l=lr(l,w),l}function vl(l,d,w){return Math.sqrt(nt(l,d,w,!0))}function bu(l,d,w){return nt(l,d,w)}function lr(l,d){var w=l.length,A=typeof Uint8Array<"u"?Uint8Array:Array,I=new A(w);I[0]=I[w-1]=1,v(l,I,d,0,w-1);var B,ee=[];for(B=0;B<w;B++)I[B]&&ee.push(l[B]);return ee}function v(l,d,w,A,I){var B=0,ee,le,ge;for(le=A+1;le<=I-1;le++)ge=nt(l[le],l[A],l[I],!0),ge>B&&(ee=le,B=ge);B>w&&(d[ee]=1,v(l,d,w,A,ee),v(l,d,w,ee,I))}function C(l,d){for(var w=[l[0]],A=1,I=0,B=l.length;A<B;A++)Pe(l[A],l[I])>d&&(w.push(l[A]),I=A);return I<B-1&&w.push(l[B-1]),w}var M;function q(l,d,w,A,I){var B=A?M:ye(l,w),ee=ye(d,w),le,ge,Se;for(M=ee;;){if(!(B|ee))return[l,d];if(B&ee)return!1;le=B||ee,ge=ue(l,d,le,w,I),Se=ye(ge,w),le===B?(l=ge,B=Se):(d=ge,ee=Se)}}function ue(l,d,w,A,I){var B=d.x-l.x,ee=d.y-l.y,le=A.min,ge=A.max,Se,ke;return w&8?(Se=l.x+B*(ge.y-l.y)/ee,ke=ge.y):w&4?(Se=l.x+B*(le.y-l.y)/ee,ke=le.y):w&2?(Se=ge.x,ke=l.y+ee*(ge.x-l.x)/B):w&1&&(Se=le.x,ke=l.y+ee*(le.x-l.x)/B),new Ee(Se,ke,I)}function ye(l,d){var w=0;return l.x<d.min.x?w|=1:l.x>d.max.x&&(w|=2),l.y<d.min.y?w|=4:l.y>d.max.y&&(w|=8),w}function Pe(l,d){var w=d.x-l.x,A=d.y-l.y;return w*w+A*A}function nt(l,d,w,A){var I=d.x,B=d.y,ee=w.x-I,le=w.y-B,ge=ee*ee+le*le,Se;return ge>0&&(Se=((l.x-I)*ee+(l.y-B)*le)/ge,Se>1?(I=w.x,B=w.y):Se>0&&(I+=ee*Se,B+=le*Se)),ee=l.x-I,le=l.y-B,A?ee*ee+le*le:new Ee(I,B)}function Rt(l){return!H(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Mt(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rt(l)}function Qt(l,d){var w,A,I,B,ee,le,ge,Se;if(!l||l.length===0)throw new Error("latlngs not passed");Rt(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ke=z([0,0]),$e=re(l),ht=$e.getNorthWest().distanceTo($e.getSouthWest())*$e.getNorthEast().distanceTo($e.getNorthWest());ht<1700&&(ke=aa(l));var On=l.length,_n=[];for(w=0;w<On;w++){var Ii=z(l[w]);_n.push(d.project(z([Ii.lat-ke.lat,Ii.lng-ke.lng])))}for(w=0,A=0;w<On-1;w++)A+=_n[w].distanceTo(_n[w+1])/2;if(A===0)Se=_n[0];else for(w=0,B=0;w<On-1;w++)if(ee=_n[w],le=_n[w+1],I=ee.distanceTo(le),B+=I,B>A){ge=(B-A)/I,Se=[le.x-ge*(le.x-ee.x),le.y-ge*(le.y-ee.y)];break}var Lt=d.unproject(pe(Se));return z([Lt.lat+ke.lat,Lt.lng+ke.lng])}var zi={__proto__:null,simplify:Jn,pointToSegmentDistance:vl,closestPointOnSegment:bu,clipSegment:q,_getEdgeIntersection:ue,_getBitCode:ye,_sqClosestPointOnSegment:nt,isFlat:Rt,_flat:Mt,polylineCenter:Qt},ji={project:function(l){return new Ee(l.lng,l.lat)},unproject:function(l){return new ve(l.y,l.x)},bounds:new J([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,w=this.R,A=l.lat*d,I=this.R_MINOR/w,B=Math.sqrt(1-I*I),ee=B*Math.sin(A),le=Math.tan(Math.PI/4-A/2)/Math.pow((1-ee)/(1+ee),B/2);return A=-w*Math.log(Math.max(le,1e-10)),new Ee(l.lng*d*w,A)},unproject:function(l){for(var d=180/Math.PI,w=this.R,A=this.R_MINOR/w,I=Math.sqrt(1-A*A),B=Math.exp(-l.y/w),ee=Math.PI/2-2*Math.atan(B),le=0,ge=.1,Se;le<15&&Math.abs(ge)>1e-7;le++)Se=I*Math.sin(ee),Se=Math.pow((1-Se)/(1+Se),I/2),ge=Math.PI/2-2*Math.atan(B*Se)-ee,ee+=ge;return new ve(ee*d,l.x*d/w)}},ds={__proto__:null,LonLat:ji,Mercator:Ni,SphericalMercator:Fe},go=r({},oe,{code:"EPSG:3395",projection:Ni,transformation:(function(){var l=.5/(Math.PI*Ni.R);return dt(l,.5,-l,.5)})()}),_o=r({},oe,{code:"EPSG:4326",projection:ji,transformation:dt(1/180,1,-1/180,.5)}),la=r({},se,{projection:ji,transformation:dt(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var w=d.lng-l.lng,A=d.lat-l.lat;return Math.sqrt(w*w+A*A)},infinite:!0});se.Earth=oe,se.EPSG3395=go,se.EPSG3857=Ft,se.EPSG900913=kt,se.EPSG4326=_o,se.Simple=la;var hs=Ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[m(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[m(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var w=this.getEvents();d.on(w,this),this.once("remove",function(){d.off(w,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});pt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=m(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return m(l)in this._layers},eachLayer:function(l,d){for(var w in this._layers)l.call(d,this._layers[w]);return this},_addLayers:function(l){l=l?H(l)?l:[l]:[];for(var d=0,w=l.length;d<w;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[m(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=m(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,w=this._getZoomSpan();for(var A in this._zoomBoundLayers){var I=this._zoomBoundLayers[A].options;l=I.minZoom===void 0?l:Math.min(l,I.minZoom),d=I.maxZoom===void 0?d:Math.max(d,I.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ua=hs.extend({initialize:function(l,d){V(this,d),this._layers={};var w,A;if(l)for(w=0,A=l.length;w<A;w++)this.addLayer(l[w])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),w,A;for(w in this._layers)A=this._layers[w],A[l]&&A[l].apply(A,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var w in this._layers)l.call(d,this._layers[w]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return m(l)}}),mg=function(l,d){return new ua(l,d)},Ls=ua.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ua.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ua.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new be;for(var d in this._layers){var w=this._layers[d];l.extend(w.getBounds?w.getBounds():w.getLatLng())}return l}}),qh=function(l,d){return new Ls(l,d)},Os=Le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){V(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var w=this._getIconUrl(l);if(!w){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(w,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(A,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(l,d){var w=this.options,A=w[d+"Size"];typeof A=="number"&&(A=[A,A]);var I=pe(A),B=pe(d==="shadow"&&w.shadowAnchor||w.iconAnchor||I&&I.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(w.className||""),B&&(l.style.marginLeft=-B.x+"px",l.style.marginTop=-B.y+"px"),I&&(l.style.width=I.x+"px",l.style.height=I.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return ze.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function xl(l){return new Os(l)}var wl=Os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+Os.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(w,A,I){var B=A.exec(w);return B&&B[I]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=gt("div","leaflet-default-icon-path",document.body),d=Mr(l,"background-image")||Mr(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),bl=Ci.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new cs(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Oe(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,w=d._map,A=this._marker.options.autoPanSpeed,I=this._marker.options.autoPanPadding,B=Ms(d._icon),ee=w.getPixelBounds(),le=w.getPixelOrigin(),ge=ce(ee.min._subtract(le).add(I),ee.max._subtract(le).subtract(I));if(!ge.contains(B)){var Se=pe((Math.max(ge.max.x,B.x)-ge.max.x)/(ee.max.x-ge.max.x)-(Math.min(ge.min.x,B.x)-ge.min.x)/(ee.min.x-ge.min.x),(Math.max(ge.max.y,B.y)-ge.max.y)/(ee.max.y-ge.max.y)-(Math.min(ge.min.y,B.y)-ge.min.y)/(ee.min.y-ge.min.y)).multiplyBy(A);w.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),$t(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=$(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,w=d._shadow,A=Ms(d._icon),I=d._map.layerPointToLatLng(A);w&&$t(w,A),d._latlng=I,l.latlng=I,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Tl=hs.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){V(this,d),this._latlng=z(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=z(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=l.icon.createIcon(this._icon),A=!1;w!==this._icon&&(this._icon&&this._removeIcon(),A=!0,l.title&&(w.title=l.title),w.tagName==="IMG"&&(w.alt=l.alt||"")),Oe(w,d),l.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(w,"focus",this._panOnFocus,this);var I=l.icon.createShadow(this._shadow),B=!1;I!==this._shadow&&(this._removeShadow(),B=!0),I&&(Oe(I,d),I.alt=""),this._shadow=I,l.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),I&&B&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&$t(this._icon,l),this._shadow&&$t(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bl)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bl(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Xt(this._icon,l),this._shadow&&Xt(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,w=d.iconSize?pe(d.iconSize):pe(0,0),A=d.iconAnchor?pe(d.iconAnchor):pe(0,0);l.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:w.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Gh(l,d){return new Tl(l,d)}var Us=hs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return V(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ca=Us.extend({options:{fill:!0,radius:10},initialize:function(l,d){V(this,d),this._latlng=z(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=z(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return Us.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,w=this._clickTolerance(),A=[l+w,d+w];this._pxBounds=new J(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $h(l,d){return new ca(l,d)}var Tu=ca.extend({initialize:function(l,d,w){if(typeof d=="number"&&(d=r({},w,{radius:d})),V(this,d),this._latlng=z(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new be(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Us.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,w=this._map,A=w.options.crs;if(A.distance===oe.distance){var I=Math.PI/180,B=this._mRadius/oe.R/I,ee=w.project([d+B,l]),le=w.project([d-B,l]),ge=ee.add(le).divideBy(2),Se=w.unproject(ge).lat,ke=Math.acos((Math.cos(B*I)-Math.sin(d*I)*Math.sin(Se*I))/(Math.cos(d*I)*Math.cos(Se*I)))/I;(isNaN(ke)||ke===0)&&(ke=B/Math.cos(Math.PI/180*d)),this._point=ge.subtract(w.getPixelOrigin()),this._radius=isNaN(ke)?0:ge.x-w.project([Se,l-ke]).x,this._radiusY=ge.y-ee.y}else{var $e=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint($e).x}this._updateBounds()}});function Jh(l,d,w){return new Tu(l,d,w)}var ur=Us.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){V(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,w=null,A=nt,I,B,ee=0,le=this._parts.length;ee<le;ee++)for(var ge=this._parts[ee],Se=1,ke=ge.length;Se<ke;Se++){I=ge[Se-1],B=ge[Se];var $e=A(l,I,B,!0);$e<d&&(d=$e,w=A(l,I,B))}return w&&(w.distance=Math.sqrt(d)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=z(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new be,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Rt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],w=Rt(l),A=0,I=l.length;A<I;A++)w?(d[A]=z(l[A]),this._bounds.extend(d[A])):d[A]=this._convertLatLngs(l[A]);return d},_project:function(){var l=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new Ee(l,l);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,w){var A=l[0]instanceof ve,I=l.length,B,ee;if(A){for(ee=[],B=0;B<I;B++)ee[B]=this._map.latLngToLayerPoint(l[B]),w.extend(ee[B]);d.push(ee)}else for(B=0;B<I;B++)this._projectLatlngs(l[B],d,w)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,w,A,I,B,ee,le,ge;for(w=0,I=0,B=this._rings.length;w<B;w++)for(ge=this._rings[w],A=0,ee=ge.length;A<ee-1;A++)le=q(ge[A],ge[A+1],l,A,!0),le&&(d[I]=d[I]||[],d[I].push(le[0]),(le[1]!==ge[A+1]||A===ee-2)&&(d[I].push(le[1]),I++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,w=0,A=l.length;w<A;w++)l[w]=Jn(l[w],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var w,A,I,B,ee,le,ge=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(w=0,B=this._parts.length;w<B;w++)for(le=this._parts[w],A=0,ee=le.length,I=ee-1;A<ee;I=A++)if(!(!d&&A===0)&&vl(l,le[I],le[A])<=ge)return!0;return!1}});function pg(l,d){return new ur(l,d)}ur._flat=Mt;var da=ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=ur.prototype._convertLatLngs.call(this,l),w=d.length;return w>=2&&d[0]instanceof ve&&d[0].equals(d[w-1])&&d.pop(),d},_setLatLngs:function(l){ur.prototype._setLatLngs.call(this,l),Rt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,w=new Ee(d,d);if(l=new J(l.min.subtract(w),l.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,I=this._rings.length,B;A<I;A++)B=_l(this._rings[A],l,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,w,A,I,B,ee,le,ge,Se;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(B=0,ge=this._parts.length;B<ge;B++)for(w=this._parts[B],ee=0,Se=w.length,le=Se-1;ee<Se;le=ee++)A=w[ee],I=w[le],A.y>l.y!=I.y>l.y&&l.x<(I.x-A.x)*(l.y-A.y)/(I.y-A.y)+A.x&&(d=!d);return d||ur.prototype._containsPoint.call(this,l,!0)}});function gg(l,d){return new da(l,d)}var cr=Ls.extend({initialize:function(l,d){V(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=H(l)?l:l.features,w,A,I;if(d){for(w=0,A=d.length;w<A;w++)I=d[w],(I.geometries||I.geometry||I.features||I.coordinates)&&this.addData(I);return this}var B=this.options;if(B.filter&&!B.filter(l))return this;var ee=Kn(l,B);return ee?(ee.feature=Au(l),ee.defaultOptions=ee.options,this.resetStyle(ee),B.onEachFeature&&B.onEachFeature(l,ee),this.addLayer(ee)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=r({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function Kn(l,d){var w=l.type==="Feature"?l.geometry:l,A=w?w.coordinates:null,I=[],B=d&&d.pointToLayer,ee=d&&d.coordsToLatLng||Eu,le,ge,Se,ke;if(!A&&!w)return null;switch(w.type){case"Point":return le=ee(A),ha(B,l,le,d);case"MultiPoint":for(Se=0,ke=A.length;Se<ke;Se++)le=ee(A[Se]),I.push(ha(B,l,le,d));return new Ls(I);case"LineString":case"MultiLineString":return ge=El(A,w.type==="LineString"?0:1,ee),new ur(ge,d);case"Polygon":case"MultiPolygon":return ge=El(A,w.type==="Polygon"?1:2,ee),new da(ge,d);case"GeometryCollection":for(Se=0,ke=w.geometries.length;Se<ke;Se++){var $e=Kn({geometry:w.geometries[Se],type:"Feature",properties:l.properties},d);$e&&I.push($e)}return new Ls(I);case"FeatureCollection":for(Se=0,ke=w.features.length;Se<ke;Se++){var ht=Kn(w.features[Se],d);ht&&I.push(ht)}return new Ls(I);default:throw new Error("Invalid GeoJSON object.")}}function ha(l,d,w,A){return l?l(d,w):new Tl(w,A&&A.markersInheritOptions&&A)}function Eu(l){return new ve(l[1],l[0],l[2])}function El(l,d,w){for(var A=[],I=0,B=l.length,ee;I<B;I++)ee=d?El(l[I],d-1,w):(w||Eu)(l[I]),A.push(ee);return A}function Su(l,d){return l=z(l),l.alt!==void 0?[S(l.lng,d),S(l.lat,d),S(l.alt,d)]:[S(l.lng,d),S(l.lat,d)]}function Sl(l,d,w,A){for(var I=[],B=0,ee=l.length;B<ee;B++)I.push(d?Sl(l[B],Rt(l[B])?0:d-1,w,A):Su(l[B],A));return!d&&w&&I.length>0&&I.push(I[0].slice()),I}function Vr(l,d){return l.feature?r({},l.feature,{geometry:d}):Au(d)}function Au(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Br={toGeoJSON:function(l){return Vr(this,{type:"Point",coordinates:Su(this.getLatLng(),l)})}};Tl.include(Br),Tu.include(Br),ca.include(Br),ur.include({toGeoJSON:function(l){var d=!Rt(this._latlngs),w=Sl(this._latlngs,d?1:0,!1,l);return Vr(this,{type:(d?"Multi":"")+"LineString",coordinates:w})}}),da.include({toGeoJSON:function(l){var d=!Rt(this._latlngs),w=d&&!Rt(this._latlngs[0]),A=Sl(this._latlngs,w?2:d?1:0,!0,l);return d||(A=[A]),Vr(this,{type:(w?"Multi":"")+"Polygon",coordinates:A})}}),ua.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(w){d.push(w.toGeoJSON(l).geometry.coordinates)}),Vr(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var w=d==="GeometryCollection",A=[];return this.eachLayer(function(I){if(I.toGeoJSON){var B=I.toGeoJSON(l);if(w)A.push(B.geometry);else{var ee=Au(B);ee.type==="FeatureCollection"?A.push.apply(A,ee.features):A.push(ee)}}}),w?Vr(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function Cu(l,d){return new cr(l,d)}var Al=Cu,fa=hs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,w){this._url=l,this._bounds=re(d),V(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&rn(this._image),this},bringToBack:function(){return this._map&&Si(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=re(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:gt("img");if(Oe(d,"leaflet-image-layer"),this._zoomAnimated&&Oe(d,"leaflet-zoom-animated"),this.options.className&&Oe(d,this.options.className),d.onselectstart=T,d.onmousemove=T,d.onload=c(this.fire,this,"load"),d.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;rs(this._image,w,d)},_reset:function(){var l=this._image,d=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=d.getSize();$t(l,d.min),l.style.width=w.x+"px",l.style.height=w.y+"px"},_updateOpacity:function(){Xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Kh=function(l,d,w){return new fa(l,d,w)},Fr=fa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:gt("video");if(Oe(d,"leaflet-image-layer"),this._zoomAnimated&&Oe(d,"leaflet-zoom-animated"),this.options.className&&Oe(d,this.options.className),d.onselectstart=T,d.onmousemove=T,d.onloadeddata=c(this.fire,this,"load"),l){for(var w=d.getElementsByTagName("source"),A=[],I=0;I<w.length;I++)A.push(w[I].src);this._url=w.length>0?A:[d.src];return}H(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var ee=gt("source");ee.src=this._url[B],d.appendChild(ee)}}});function ma(l,d,w){return new Fr(l,d,w)}var Nu=fa.extend({_initImage:function(){var l=this._image=this._url;Oe(l,"leaflet-image-layer"),this._zoomAnimated&&Oe(l,"leaflet-zoom-animated"),this.options.className&&Oe(l,this.options.className),l.onselectstart=T,l.onmousemove=T}});function Yh(l,d,w){return new Nu(l,d,w)}var Yn=hs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof ve||H(l))?(this._latlng=z(l),V(this,d)):(V(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Xt(this._container,1),this.bringToFront(),this.options.interactive&&(Oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Xt(this._container,0),this._removeTimeout=setTimeout(c(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=z(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rn(this._container),this},bringToBack:function(){return this._map&&Si(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof Ls){d=null;var w=this._source._layers;for(var A in w)if(w[A]._map){d=w[A];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=pe(this.options.offset),w=this._getAnchor();this._zoomAnimated?$t(this._container,l.add(w)):d=d.add(l).add(w);var A=this._containerBottom=-d.y,I=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=A+"px",this._container.style.left=I+"px"}},_getAnchor:function(){return[0,0]}});pt.include({_initOverlay:function(l,d,w,A){var I=d;return I instanceof l||(I=new l(A).setContent(d)),w&&I.setLatLng(w),I}}),hs.include({_initOverlay:function(l,d,w,A){var I=w;return I instanceof l?(V(I,A),I._source=this):(I=d&&!A?d:new l(A,this),I.setContent(w)),I}});var Cl=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Yn.prototype.openOn.call(this,l)},onAdd:function(l){Yn.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Us||this._source.on("preclick",Et))},onRemove:function(l){Yn.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Us||this._source.off("preclick",Et))},getEvents:function(){var l=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=gt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=gt("div",l+"-content-wrapper",d);if(this._contentNode=gt("div",l+"-content",w),rr(d),Fi(this._contentNode),Ze(d,"contextmenu",Et),this._tipContainer=gt("div",l+"-tip-container",d),this._tip=gt("div",l+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=gt("a",l+"-close-button",d);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',Ze(A,"click",function(I){on(I),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var w=l.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),d.width=w+1+"px",d.whiteSpace="",d.height="";var A=l.offsetHeight,I=this.options.maxHeight,B="leaflet-popup-scrolled";I&&A>I?(d.height=I+"px",Oe(l,B)):Gt(l,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),w=this._getAnchor();$t(this._container,d.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(Mr(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+d,A=this._containerWidth,I=new Ee(this._containerLeft,-w-this._containerBottom);I._add(Ms(this._container));var B=l.layerPointToContainerPoint(I),ee=pe(this.options.autoPanPadding),le=pe(this.options.autoPanPaddingTopLeft||ee),ge=pe(this.options.autoPanPaddingBottomRight||ee),Se=l.getSize(),ke=0,$e=0;B.x+A+ge.x>Se.x&&(ke=B.x+A-Se.x+ge.x),B.x-ke-le.x<0&&(ke=B.x-le.x),B.y+w+ge.y>Se.y&&($e=B.y+w-Se.y+ge.y),B.y-$e-le.y<0&&($e=B.y-le.y),(ke||$e)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([ke,$e]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Wh=function(l,d){return new Cl(l,d)};pt.mergeOptions({closePopupOnClick:!0}),pt.include({openPopup:function(l,d,w){return this._initOverlay(Cl,l,d,w).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),hs.include({bindPopup:function(l,d){return this._popup=this._initOverlay(Cl,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Ls||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){os(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof Us)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Nl=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Yn.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Yn.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Yn.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,w,A=this._map,I=this._container,B=A.latLngToContainerPoint(A.getCenter()),ee=A.layerPointToContainerPoint(l),le=this.options.direction,ge=I.offsetWidth,Se=I.offsetHeight,ke=pe(this.options.offset),$e=this._getAnchor();le==="top"?(d=ge/2,w=Se):le==="bottom"?(d=ge/2,w=0):le==="center"?(d=ge/2,w=Se/2):le==="right"?(d=0,w=Se/2):le==="left"?(d=ge,w=Se/2):ee.x<B.x?(le="right",d=0,w=Se/2):(le="left",d=ge+(ke.x+$e.x)*2,w=Se/2),l=l.subtract(pe(d,w,!0)).add(ke).add($e),Gt(I,"leaflet-tooltip-right"),Gt(I,"leaflet-tooltip-left"),Gt(I,"leaflet-tooltip-top"),Gt(I,"leaflet-tooltip-bottom"),Oe(I,"leaflet-tooltip-"+le),$t(I,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Xt(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_g=function(l,d){return new Nl(l,d)};pt.include({openTooltip:function(l,d,w){return this._initOverlay(Nl,l,d,w).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),hs.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nl,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[d](w),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Ls||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(Ze(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Ze(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,w,A;this._tooltip.options.sticky&&l.originalEvent&&(w=this._map.mouseEventToContainerPoint(l.originalEvent),A=this._map.containerPointToLayerPoint(w),d=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(d)}});var Zh=Os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),w=this.options;if(w.html instanceof Element?(sn(d),d.appendChild(w.html)):d.innerHTML=w.html!==!1?w.html:"",w.bgPos){var A=pe(w.bgPos);d.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function yg(l){return new Zh(l)}Os.Default=wl;var pa=hs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){V(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),xt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Si(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof Ee?l:new Ee(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,w=-l(-1/0,1/0),A=0,I=d.length,B;A<I;A++)B=d[A].style.zIndex,d[A]!==this._container&&B&&(w=l(w,+B));isFinite(w)&&(this.options.zIndex=w+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ze.ielt9){Xt(this._container,this.options.opacity);var l=+new Date,d=!1,w=!1;for(var A in this._tiles){var I=this._tiles[A];if(!(!I.current||!I.loaded)){var B=Math.min(1,(l-I.loaded)/200);Xt(I.el,B),B<1?d=!0:(I.active?w=!0:this._onOpaqueTile(I),I.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),d&&(te(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===l?(this._levels[w].el.style.zIndex=d-Math.abs(l-w),this._onUpdateLevel(w)):(xt(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var A=this._levels[l],I=this._map;return A||(A=this._levels[l]={},A.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=d,A.origin=I.project(I.unproject(I.getPixelOrigin()),l).round(),A.zoom=l,this._setZoomTransform(A,I.getCenter(),I.getZoom()),T(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var l,d,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var A=d.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)xt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,w,A){var I=Math.floor(l/2),B=Math.floor(d/2),ee=w-1,le=new Ee(+I,+B);le.z=+ee;var ge=this._tileCoordsToKey(le),Se=this._tiles[ge];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),ee>A?this._retainParent(I,B,ee,A):!1)},_retainChildren:function(l,d,w,A){for(var I=2*l;I<2*l+2;I++)for(var B=2*d;B<2*d+2;B++){var ee=new Ee(I,B);ee.z=w+1;var le=this._tileCoordsToKey(ee),ge=this._tiles[le];if(ge&&ge.active){ge.retain=!0;continue}else ge&&ge.loaded&&(ge.retain=!0);w+1<A&&this._retainChildren(I,B,w+1,A)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,w,A){var I=Math.round(d);this.options.maxZoom!==void 0&&I>this.options.maxZoom||this.options.minZoom!==void 0&&I<this.options.minZoom?I=void 0:I=this._clampZoom(I);var B=this.options.updateWhenZooming&&I!==this._tileZoom;(!A||B)&&(this._tileZoom=I,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),I!==void 0&&this._update(l),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var w in this._levels)this._setZoomTransform(this._levels[w],l,d)},_setZoomTransform:function(l,d,w){var A=this._map.getZoomScale(w,l.zoom),I=l.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(d,w)).round();ze.any3d?rs(l.el,I,A):$t(l.el,I)},_resetGrid:function(){var l=this._map,d=l.options.crs,w=this._tileSize=this.getTileSize(),A=this._tileZoom,I=this._map.getPixelWorldBounds(this._tileZoom);I&&(this._globalTileRange=this._pxBoundsToTileRange(I)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],A).x/w.x),Math.ceil(l.project([0,d.wrapLng[1]],A).x/w.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],A).y/w.x),Math.ceil(l.project([d.wrapLat[1],0],A).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,w=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),A=d.getZoomScale(w,this._tileZoom),I=d.project(l,this._tileZoom).floor(),B=d.getSize().divideBy(A*2);return new J(I.subtract(B),I.add(B))},_update:function(l){var d=this._map;if(d){var w=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(l),I=this._pxBoundsToTileRange(A),B=I.getCenter(),ee=[],le=this.options.keepBuffer,ge=new J(I.getBottomLeft().subtract([le,-le]),I.getTopRight().add([le,-le]));if(!(isFinite(I.min.x)&&isFinite(I.min.y)&&isFinite(I.max.x)&&isFinite(I.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var ke=this._tiles[Se].coords;(ke.z!==this._tileZoom||!ge.contains(new Ee(ke.x,ke.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(l,w);return}for(var $e=I.min.y;$e<=I.max.y;$e++)for(var ht=I.min.x;ht<=I.max.x;ht++){var On=new Ee(ht,$e);if(On.z=this._tileZoom,!!this._isValidTile(On)){var _n=this._tiles[this._tileCoordsToKey(On)];_n?_n.current=!0:ee.push(On)}}if(ee.sort(function(Lt,Ot){return Lt.distanceTo(B)-Ot.distanceTo(B)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ii=document.createDocumentFragment();for(ht=0;ht<ee.length;ht++)this._addTile(ee[ht],Ii);this._level.el.appendChild(Ii)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var w=this._globalTileRange;if(!d.wrapLng&&(l.x<w.min.x||l.x>w.max.x)||!d.wrapLat&&(l.y<w.min.y||l.y>w.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(l);return re(this.options.bounds).overlaps(A)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,w=this.getTileSize(),A=l.scaleBy(w),I=A.add(w),B=d.unproject(A,l.z),ee=d.unproject(I,l.z);return[B,ee]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),w=new be(d[0],d[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),w=new Ee(+d[0],+d[1]);return w.z=+d[2],w},_removeTile:function(l){var d=this._tiles[l];d&&(xt(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Oe(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=T,l.onmousemove=T,ze.ielt9&&this.options.opacity<1&&Xt(l,this.options.opacity)},_addTile:function(l,d){var w=this._getTilePos(l),A=this._tileCoordsToKey(l),I=this.createTile(this._wrapCoords(l),c(this._tileReady,this,l));this._initTile(I),this.createTile.length<2&&$(c(this._tileReady,this,l,null,I)),$t(I,w),this._tiles[A]={el:I,coords:l,current:!0},d.appendChild(I),this.fire("tileloadstart",{tile:I,coords:l})},_tileReady:function(l,d,w){d&&this.fire("tileerror",{error:d,tile:w,coords:l});var A=this._tileCoordsToKey(l);w=this._tiles[A],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Xt(w.el,0),te(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),d||(Oe(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ze.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new Ee(this._wrapX?x(l.x,this._wrapX):l.x,this._wrapY?x(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new J(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Xh(l){return new pa(l)}var zr=pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=V(this,d),d.detectRetina&&ze.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var w=document.createElement("img");return Ze(w,"load",c(this._tileOnLoad,this,d,w)),Ze(w,"error",c(this._tileOnError,this,d,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(l),w},getTileUrl:function(l){var d={r:ze.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=w),d["-y"]=w}return W(this._url,r(d,this.options))},_tileOnLoad:function(l,d){ze.ielt9?setTimeout(c(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,w){var A=this.options.errorTileUrl;A&&d.getAttribute("src")!==A&&(d.src=A),l(w,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,w=this.options.zoomReverse,A=this.options.zoomOffset;return w&&(l=d-l),l+A},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=T,d.onerror=T,!d.complete)){d.src=Z;var w=this._tiles[l].coords;xt(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:w})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",Z),pa.prototype._removeTile.call(this,l)},_tileReady:function(l,d,w){if(!(!this._map||w&&w.getAttribute("src")===Z))return pa.prototype._tileReady.call(this,l,d,w)}});function Hi(l,d){return new zr(l,d)}var Il=zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var w=r({},this.defaultWmsParams);for(var A in d)A in this.options||(w[A]=d[A]);d=V(this,d);var I=d.detectRetina&&ze.retina?2:1,B=this.getTileSize();w.width=B.x*I,w.height=B.y*I,this.wmsParams=w},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,zr.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),w=this._crs,A=ce(w.project(d[0]),w.project(d[1])),I=A.min,B=A.max,ee=(this._wmsVersion>=1.3&&this._crs===_o?[I.y,I.x,B.y,B.x]:[I.x,I.y,B.x,B.y]).join(","),le=zr.prototype.getTileUrl.call(this,l);return le+P(this.wmsParams,le,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(l,d){return r(this.wmsParams,l),d||this.redraw(),this}});function qi(l,d){return new Il(l,d)}zr.WMS=Il,Hi.wms=qi;var pi=hs.extend({options:{padding:.1},initialize:function(l){V(this,l),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var w=this._map.getZoomScale(d,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),I=this._map.project(this._center,d),B=A.multiplyBy(-w).add(I).subtract(this._map._getNewPixelOrigin(l,d));ze.any3d?rs(this._container,B,w):$t(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),w=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new J(w,w.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Iu=pi.extend({options:{tolerance:0},getEvents:function(){var l=pi.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Ze(l,"mousemove",this._onMouseMove,this),Ze(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ze(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,xt(this._container),Dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var l=this._bounds,d=this._container,w=l.getSize(),A=ze.retina?2:1;$t(d,l.min),d.width=A*w.x,d.height=A*w.y,d.style.width=w.x+"px",d.style.height=w.y+"px",ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[m(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,w=d.next,A=d.prev;w?w.prev=A:this._drawLast=A,A?A.next=w:this._drawFirst=w,delete l._order,delete this._layers[m(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),w=[],A,I;for(I=0;I<d.length;I++){if(A=Number(d[I]),isNaN(A))return;w.push(A)}l.options._dashArray=w}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var w=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)l=A.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var w,A,I,B,ee=l._parts,le=ee.length,ge=this._ctx;if(le){for(ge.beginPath(),w=0;w<le;w++){for(A=0,I=ee[w].length;A<I;A++)B=ee[w][A],ge[A?"lineTo":"moveTo"](B.x,B.y);d&&ge.closePath()}this._fillStroke(ge,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,w=this._ctx,A=Math.max(Math.round(l._radius),1),I=(Math.max(Math.round(l._radiusY),1)||A)/A;I!==1&&(w.save(),w.scale(1,I)),w.beginPath(),w.arc(d.x,d.y/I,A,0,Math.PI*2,!1),I!==1&&w.restore(),this._fillStroke(w,l)}},_fillStroke:function(l,d){var w=d.options;w.fill&&(l.globalAlpha=w.fillOpacity,l.fillStyle=w.fillColor||w.color,l.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=w.opacity,l.lineWidth=w.weight,l.strokeStyle=w.color,l.lineCap=w.lineCap,l.lineJoin=w.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),w,A,I=this._drawFirst;I;I=I.next)w=I.layer,w.options.interactive&&w._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(w))&&(A=w);this._fireEvent(A?[A]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var w,A,I=this._drawFirst;I;I=I.next)w=I.layer,w.options.interactive&&w._containsPoint(d)&&(A=w);A!==this._hoveredLayer&&(this._handleMouseOut(l),A&&(Oe(this._container,"leaflet-interactive"),this._fireEvent([A],l,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,w){this._map._fireDOMEvent(d,w||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var w=d.next,A=d.prev;if(w)w.prev=A;else return;A?A.next=w:w&&(this._drawFirst=w),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var w=d.next,A=d.prev;if(A)A.next=w;else return;w?w.prev=A:A&&(this._drawLast=A),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function Rl(l){return ze.canvas?new Iu(l):null}var jr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Xc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=jr("shape");Oe(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=jr("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[m(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;xt(d),l.removeInteractiveTarget(d),delete this._layers[m(l)]},_updateStyle:function(l){var d=l._stroke,w=l._fill,A=l.options,I=l._container;I.stroked=!!A.stroke,I.filled=!!A.fill,A.stroke?(d||(d=l._stroke=jr("stroke")),I.appendChild(d),d.weight=A.weight+"px",d.color=A.color,d.opacity=A.opacity,A.dashArray?d.dashStyle=H(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=A.lineCap.replace("butt","flat"),d.joinstyle=A.lineJoin):d&&(I.removeChild(d),l._stroke=null),A.fill?(w||(w=l._fill=jr("fill")),I.appendChild(w),w.color=A.fillColor||A.color,w.opacity=A.fillOpacity):w&&(I.removeChild(w),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),w=Math.round(l._radius),A=Math.round(l._radiusY||w);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+w+","+A+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){rn(l._container)},_bringToBack:function(l){Si(l._container)}},Vs=ze.vml?jr:mn,ga=pi.extend({_initContainer:function(){this._container=Vs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),Dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var l=this._bounds,d=l.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,w.setAttribute("width",d.x),w.setAttribute("height",d.y)),$t(w,l.min),w.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=Vs("path");l.options.className&&Oe(d,l.options.className),l.options.interactive&&Oe(d,"leaflet-interactive"),this._updateStyle(l),this._layers[m(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){xt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[m(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,w=l.options;d&&(w.stroke?(d.setAttribute("stroke",w.color),d.setAttribute("stroke-opacity",w.opacity),d.setAttribute("stroke-width",w.weight),d.setAttribute("stroke-linecap",w.lineCap),d.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?d.setAttribute("stroke-dasharray",w.dashArray):d.removeAttribute("stroke-dasharray"),w.dashOffset?d.setAttribute("stroke-dashoffset",w.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),w.fill?(d.setAttribute("fill",w.fillColor||w.color),d.setAttribute("fill-opacity",w.fillOpacity),d.setAttribute("fill-rule",w.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,tt(l._parts,d))},_updateCircle:function(l){var d=l._point,w=Math.max(Math.round(l._radius),1),A=Math.max(Math.round(l._radiusY),1)||w,I="a"+w+","+A+" 0 1,0 ",B=l._empty()?"M0 0":"M"+(d.x-w)+","+d.y+I+w*2+",0 "+I+-w*2+",0 ";this._setPath(l,B)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){rn(l._path)},_bringToBack:function(l){Si(l._path)}});ze.vml&&ga.include(Xc);function Ml(l){return ze.svg||ze.vml?new ga(l):null}pt.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&Rl(l)||Ml(l)}});var yo=da.extend({initialize:function(l,d){da.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=re(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function vg(l,d){return new yo(l,d)}ga.create=Vs,ga.pointsToPath=tt,cr.geometryToLayer=Kn,cr.coordsToLatLng=Eu,cr.coordsToLatLngs=El,cr.latLngToCoords=Su,cr.latLngsToCoords=Sl,cr.getFeature=Vr,cr.asFeature=Au,pt.mergeOptions({boxZoom:!0});var gi=Ci.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bi(),ho(),this._startPoint=this._map.mouseEventToContainerPoint(l),Ze(document,{contextmenu:os,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),Oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new J(this._point,this._startPoint),w=d.getSize();$t(this._box,d.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(xt(this._box),Gt(this._container,"leaflet-crosshair")),Sn(),Pr(),Dt(document,{contextmenu:os,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var d=new be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pt.addInitHook("addHandler","boxZoom",gi),pt.mergeOptions({doubleClickZoom:!0});var Ru=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,w=d.getZoom(),A=d.options.zoomDelta,I=l.originalEvent.shiftKey?w-A:w+A;d.options.doubleClickZoom==="center"?d.setZoom(I):d.setZoomAround(l.containerPoint,I)}});pt.addInitHook("addHandler","doubleClickZoom",Ru),pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bs=Ci.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new cs(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gt(this._map._container,"leaflet-grab"),Gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=re(this._map.options.maxBounds);this._offsetLimit=ce(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),w=this._initialWorldOffset,A=this._draggable._newPos.x,I=(A-d+w)%l+d-w,B=(A+d+w)%l-d-w,ee=Math.abs(I+w)<Math.abs(B+w)?I:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(l){var d=this._map,w=d.options,A=!w.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),A)d.fire("moveend");else{this._prunePositions(+new Date);var I=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,ee=w.easeLinearity,le=I.multiplyBy(ee/B),ge=le.distanceTo([0,0]),Se=Math.min(w.inertiaMaxSpeed,ge),ke=le.multiplyBy(Se/ge),$e=Se/(w.inertiaDeceleration*ee),ht=ke.multiplyBy(-$e/2).round();!ht.x&&!ht.y?d.fire("moveend"):(ht=d._limitOffset(ht,d.options.maxBounds),$(function(){d.panBy(ht,{duration:$e,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});pt.addInitHook("addHandler","dragging",Bs),pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qc=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Ze(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,w=l.scrollTop||d.scrollTop,A=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(A,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},w=this.keyCodes,A,I;for(A=0,I=w.left.length;A<I;A++)d[w.left[A]]=[-1*l,0];for(A=0,I=w.right.length;A<I;A++)d[w.right[A]]=[l,0];for(A=0,I=w.down.length;A<I;A++)d[w.down[A]]=[0,l];for(A=0,I=w.up.length;A<I;A++)d[w.up[A]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},w=this.keyCodes,A,I;for(A=0,I=w.zoomIn.length;A<I;A++)d[w.zoomIn[A]]=l;for(A=0,I=w.zoomOut.length;A<I;A++)d[w.zoomOut[A]]=-l},_addHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,w=this._map,A;if(d in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(A=this._panKeys[d],l.shiftKey&&(A=pe(A).multiplyBy(3)),w.options.maxBounds&&(A=w._limitOffset(pe(A),w.options.maxBounds)),w.options.worldCopyJump){var I=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(A)));w.panTo(I)}else w.panBy(A)}else if(d in this._zoomKeys)w.setZoom(w.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;os(l)}}});pt.addInitHook("addHandler","keyboard",Qc),pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Pl=Ci.extend({addHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=An(l),w=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var A=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),A),os(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),w=this._map.options.zoomSnap||0;l._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),I=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,B=w?Math.ceil(I/w)*w:I,ee=l._limitZoom(d+(this._delta>0?B:-B))-d;this._delta=0,this._startTime=null,ee&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+ee):l.setZoomAround(this._lastMousePos,d+ee))}});pt.addInitHook("addHandler","scrollWheelZoom",Pl);var vo=600;pt.mergeOptions({tapHold:ze.touchNative&&ze.safari&&ze.mobile,tapTolerance:15});var Mu=Ci.extend({addHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new Ee(d.clientX,d.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Ze(document,"touchend",on),Ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),vo),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Dt(document,"touchend",on),Dt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new Ee(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var w=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});w._simulated=!0,d.target.dispatchEvent(w)}});pt.addInitHook("addHandler","tapHold",Mu),pt.mergeOptions({touchZoom:ze.touch,bounceAtZoomLimits:!0});var ed=Ci.extend({addHooks:function(){Oe(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var w=d.mouseEventToContainerPoint(l.touches[0]),A=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(w.add(A)._divideBy(2))),this._startDist=w.distanceTo(A),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),on(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,w=d.mouseEventToContainerPoint(l.touches[0]),A=d.mouseEventToContainerPoint(l.touches[1]),I=w.distanceTo(A)/this._startDist;if(this._zoom=d.getScaleZoom(I,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&I<1||this._zoom>d.getMaxZoom()&&I>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,I===1)return}else{var B=w._add(A)._divideBy(2)._subtract(this._centerPoint);if(I===1&&B.x===0&&B.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var ee=c(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(ee,this,!0),on(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pt.addInitHook("addHandler","touchZoom",ed),pt.BoxZoom=gi,pt.DoubleClickZoom=Ru,pt.Drag=Bs,pt.Keyboard=Qc,pt.ScrollWheelZoom=Pl,pt.TapHold=Mu,pt.TouchZoom=ed,t.Bounds=J,t.Browser=ze,t.CRS=se,t.Canvas=Iu,t.Circle=Tu,t.CircleMarker=ca,t.Class=Le,t.Control=$n,t.DivIcon=Zh,t.DivOverlay=Yn,t.DomEvent=Ds,t.DomUtil=Dr,t.Draggable=cs,t.Evented=Ie,t.FeatureGroup=Ls,t.GeoJSON=cr,t.GridLayer=pa,t.Handler=Ci,t.Icon=Os,t.ImageOverlay=fa,t.LatLng=ve,t.LatLngBounds=be,t.Layer=hs,t.LayerGroup=ua,t.LineUtil=zi,t.Map=pt,t.Marker=Tl,t.Mixin=wu,t.Path=Us,t.Point=Ee,t.PolyUtil=Ur,t.Polygon=da,t.Polyline=ur,t.Popup=Cl,t.PosAnimation=or,t.Projection=ds,t.Rectangle=yo,t.Renderer=pi,t.SVG=ga,t.SVGOverlay=Nu,t.TileLayer=zr,t.Tooltip=Nl,t.Transformation=yt,t.Util=K,t.VideoOverlay=Fr,t.bind=c,t.bounds=ce,t.canvas=Rl,t.circle=Jh,t.circleMarker=$h,t.control=mi,t.divIcon=yg,t.extend=r,t.featureGroup=qh,t.geoJSON=Cu,t.geoJson=Al,t.gridLayer=Xh,t.icon=xl,t.imageOverlay=Kh,t.latLng=z,t.latLngBounds=re,t.layerGroup=mg,t.map=Or,t.marker=Gh,t.point=pe,t.polygon=gg,t.polyline=pg,t.popup=Wh,t.rectangle=vg,t.setOptions=V,t.stamp=m,t.svg=Ml,t.svgOverlay=Yh,t.tileLayer=Hi,t.tooltip=_g,t.transformation=dt,t.version=i,t.videoOverlay=ma;var td=window.L;t.noConflict=function(){return window.L=td,this},window.L=t}))})(th,th.exports)),th.exports}var G7=q7();const Hs=O0(G7),hC="travel_app_geo_cache_v3",$7=(n,e,t,i)=>{const a=gr(t-n),c=gr(i-e),f=Math.sin(a/2)*Math.sin(a/2)+Math.cos(gr(n))*Math.cos(gr(t))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))},gr=n=>n*(Math.PI/180),J7=(n,e,t,i)=>{const r=Math.sin(gr(i-e))*Math.cos(gr(t)),a=Math.cos(gr(n))*Math.sin(gr(t))-Math.sin(gr(n))*Math.cos(gr(t))*Math.cos(gr(i-e));return(Math.atan2(r,a)*180/Math.PI+360)%360},zm=n=>{if(!n)return null;if(n.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(n);const e=n.split("/");if(e.length!==3){const t=new Date(n);return isNaN(t.getTime())?null:t}return new Date(parseInt(e[2]),parseInt(e[1])-1,parseInt(e[0]))},fC=n=>{if(!n.date)return 0;const e=zm(n.date);if(!e)return 0;if(n.time){const[t,i]=n.time.split(":").map(Number);e.setHours(t||0,i||0)}return e.getTime()},K7=(n,e)=>n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear(),Q2={Bangkok:{lat:13.7563,lng:100.5018},Pattaya:{lat:12.9236,lng:100.8825},"Koh Samet":{lat:12.5681,lng:101.4524},Phuket:{lat:7.8804,lng:98.3923},"Chiang Mai":{lat:18.7883,lng:98.9853},"Koh Samui":{lat:9.512,lng:100.0136},Krabi:{lat:8.0863,lng:98.9063},"Tel Aviv":{lat:32.0853,lng:34.7818},London:{lat:51.5074,lng:-.1278},Paris:{lat:48.8566,lng:2.3522},"New York":{lat:40.7128,lng:-74.006},Tokyo:{lat:35.6762,lng:139.6503},"Abu Dhabi":{lat:24.4539,lng:54.3773},Dubai:{lat:25.2048,lng:55.2708}},Ry=async n=>{if(!n)return null;const e=n.toLowerCase();for(const[t,i]of Object.entries(Q2))if(e.includes(t.toLowerCase()))return i;try{const i=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n)}&limit=1`,{headers:{"User-Agent":"TravelPlannerPro/1.0"}})).json();return i&&i.length>0?{lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon)}:null}catch{return console.warn("Geocoding failed for",n),null}},mx=({trip:n,items:e,height:t="75vh",title:i})=>{const r=X.useRef(null),a=X.useRef(null),c=X.useRef(null),f=X.useRef(null),[m,p]=X.useState([]),[x,T]=X.useState(!1),[S,N]=X.useState(""),[O,V]=X.useState(()=>{try{const P=localStorage.getItem(hC);return P?JSON.parse(P):{}}catch{return{}}});return X.useEffect(()=>{var Q;let P=[];if(e)P=e;else if(n){const W=[...((Q=n.flights)==null?void 0:Q.segments)||[]].sort((j,Z)=>{var k,U;const Y=((k=zm(j.date))==null?void 0:k.getTime())||0,D=((U=zm(Z.date))==null?void 0:U.getTime())||0;return Y-D}),H=W.length>0?W[0].fromCode:null;W.forEach(j=>{j.fromCode!==H&&P.push({id:`flight-${j.flightNumber}-dep`,type:"airport",subType:"departure",flightId:j.flightNumber,name:`${j.fromCity} (${j.fromCode})`,address:`${j.fromCity} Airport`,description:`: ${j.departureTime}`,date:j.date,time:j.departureTime}),j.toCode!==H&&P.push({id:`flight-${j.flightNumber}-arr`,type:"airport",subType:"arrival",flightId:j.flightNumber,name:`${j.toCity} (${j.toCode})`,address:`${j.toCity} Airport`,description:`: ${j.arrivalTime}`,date:j.date,time:j.arrivalTime})}),n.hotels.forEach(j=>P.push({id:j.id,type:"hotel",name:j.name,address:j.address,lat:j.lat,lng:j.lng,description:j.roomType,date:j.checkInDate})),n.restaurants.forEach(j=>j.restaurants.forEach(Z=>P.push({id:Z.id,type:"restaurant",name:Z.name,address:Z.location,lat:Z.lat,lng:Z.lng,description:Z.description,date:Z.reservationDate,time:Z.reservationTime}))),n.attractions.forEach(j=>j.attractions.forEach(Z=>P.push({id:Z.id,type:"attraction",name:Z.name,address:Z.location,lat:Z.lat,lng:Z.lng,description:Z.description,date:Z.scheduledDate,time:Z.scheduledTime}))),n.shoppingItems&&n.shoppingItems.forEach(j=>{j.shopName&&P.push({id:j.id,type:"shopping",name:j.shopName,address:`${j.shopName}, ${n.destinationEnglish||n.destination}`,description:`${j.name} (${j.price} ${j.currency})`,date:j.purchaseDate?j.purchaseDate.split("-").reverse().join("/"):void 0})})}p(P)},[n,e]),X.useEffect(()=>{(async()=>{if(m.length===0)return;m.filter(j=>!j.lat&&j.address).length>0&&T(!0);const W=[...m];let H={};await Promise.all(W.map(async j=>{if(j.lat&&j.lng||!j.address)return;if(O[j.address]){j.lat=O[j.address].lat,j.lng=O[j.address].lng;return}let Z=j.address;j.type==="airport"&&(Z=j.name.split("(")[0]+" Airport");const Y=await Ry(Z);Y&&(j.lat=Y.lat,j.lng=Y.lng,H[j.address]=Y)})),Object.keys(H).length>0&&V(j=>{const Z={...j,...H};return localStorage.setItem(hC,JSON.stringify(Z)),Z}),p(W),T(!1)})()},[n,m.length]),X.useEffect(()=>{if(!r.current)return;a.current||(a.current=Hs.map(r.current),Hs.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap & CARTO",subdomains:"abcd",maxZoom:20}).addTo(a.current),c.current=Hs.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,iconCreateFunction:function(Y){const D=Y.getChildCount();return Hs.divIcon({html:`<div style="background-color: rgba(30, 64, 175, 0.9); width: 40px; height: 40px; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-family: 'Rubik'; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">${D}</div>`,className:"my-custom-cluster-icon",iconSize:Hs.point(40,40)})}}).addTo(a.current),f.current=Hs.layerGroup().addTo(a.current));const P=a.current,Q=c.current,W=f.current;if(!Q||!W)return;setTimeout(()=>{P.invalidateSize()},100),Q.clearLayers(),W.clearLayers();const H=m.filter(Y=>Y.lat&&Y.lng),j=Hs.latLngBounds([]);if(H.forEach(Y=>{if(!Y.lat||!Y.lng||Y.type==="airport")return;let D="#3b82f6",k="";switch(Y.type){case"hotel":D="#4f46e5",k=`<div style="background-color: ${D}; width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-8a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v8"/><path d="M5 21h14"/><path d="M9 10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2"/></svg></div>`;break;case"restaurant":D="#ea580c",k=`<div style="background-color: ${D}; width: 28px; height: 28px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg></div>`;break;case"attraction":D="#9333ea",k=`<div style="background-color: ${D}; width: 28px; height: 28px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m2 22 1-1h3l9-9"/><path d="M3 21v-8"/><path d="m22 2-9 9"/><path d="M17 12a5 5 0 0 0-5-5"/></svg></div>`;break;case"shopping":D="#ec4899",k=`<div style="background-color: ${D}; width: 28px; height: 28px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: white;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m2 22 1-1h3l9-9"/><path d="M3 21v-8"/><path d="m22 2-9 9"/><path d="M17 12a5 5 0 0 0-5-5"/></svg></div>`;break}const U=Hs.divIcon({html:k,className:"custom-div-icon",iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]}),G=Hs.marker([Y.lat,Y.lng],{icon:U}).bindPopup(`
                <div style="text-align: right; direction: rtl; font-family: 'Rubik', sans-serif;">
                    <div style="font-weight: bold; font-size: 14px;">${Y.name}</div>
                    <div style="font-size: 12px; color: #666;">${Y.description||Y.address||""}</div>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Y.name+" "+Y.address)}" target="_blank" style="color: ${D}; font-weight: bold; font-size: 11px;">  </a>
                </div>
            `);Q.addLayer(G),j.extend([Y.lat,Y.lng])}),n&&!e){const Y=H.filter(D=>D.type==="airport"||D.type==="hotel").sort((D,k)=>fC(D)-fC(k));for(let D=0;D<Y.length-1;D++){const k=Y[D],U=Y[D+1];if(!k.lat||!k.lng||!U.lat||!U.lng)continue;const G=k.type==="airport"&&U.type==="airport"&&k.subType==="departure"&&U.subType==="arrival"&&k.flightId===U.flightId,$=$7(k.lat,k.lng,U.lat,U.lng);if(!G&&$<5||!G&&$>3e3)continue;const te=(k.lat+U.lat)/2,K=(k.lng+U.lng)/2,Le=Hs.polyline([[k.lat,k.lng],[U.lat,U.lng]],{color:G?"#3b82f6":"#10b981",weight:3,opacity:.8,dashArray:G?"10, 10":void 0,lineCap:"round"});W.addLayer(Le),j.extend([k.lat,k.lng]),j.extend([U.lat,U.lng]);const fe=`<div style="transform: rotate(${J7(k.lat,k.lng,U.lat,U.lng)}deg); background: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); color: #3b82f6;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12h20"/><path d="m13 2 9 10-9 10"/></svg></div>`,Ee=Hs.divIcon({html:G?fe:'<div style="background: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); color: #10b981;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg></div>',className:"",iconSize:[24,24],iconAnchor:[12,12]});Hs.marker([te,K],{icon:Ee,interactive:!1}).addTo(W)}}const Z=async()=>{var k;if(!n){H.length>0&&P.fitBounds(j,{padding:[50,50],maxZoom:15});return}if(n&&!e&&H.length>1){P.fitBounds(j,{padding:[80,80],maxZoom:10});return}const Y=new Date,D=n.itinerary.find(U=>{const G=zm(U.date);return G&&K7(G,Y)});if(D){const U=D.title.split(/[-:]/)[0].trim()||D.title;let G=Q2[U]||O[U];if(G||(G=await Ry(U)||void 0),G){P.setView([G.lat,G.lng],13),N(` : ${U}`);return}}if(H.length>0)P.fitBounds(j,{padding:[50,50],maxZoom:13});else{const G=(k=(n.destinationEnglish||n.destination||"").split(/[-,\/]/)[0])==null?void 0:k.trim();if(G){const $=await Ry(G);$&&P.setView([$.lat,$.lng],11)}}};setTimeout(()=>{Z()},500)},[m,n]),g.jsxs("div",{className:"w-full relative bg-white rounded-3xl overflow-hidden shadow-sm border border-gray-200 animate-fade-in",children:[i&&g.jsx("div",{className:"absolute top-4 right-4 z-[400] bg-white/95 backdrop-blur px-4 py-2 rounded-xl shadow-lg border border-gray-200",children:g.jsxs("h3",{className:"font-black text-gray-800 flex items-center gap-2",children:[g.jsx(rl,{className:"w-5 h-5 text-blue-600"}),i]})}),n&&!e&&g.jsxs("div",{className:"absolute bottom-4 right-4 z-[400] bg-white/95 backdrop-blur px-3 py-2 rounded-xl shadow-lg border border-gray-200 text-xs font-bold text-gray-600 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-0.5 bg-blue-500 border-t border-dashed border-blue-500"}),"  "]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-0.5 bg-emerald-500"}),"  "]})]}),S&&g.jsxs("div",{className:"absolute top-4 left-4 z-[400] bg-blue-600/90 backdrop-blur px-4 py-1.5 rounded-full shadow-lg border border-blue-500 flex items-center gap-2 text-white animate-fade-in",children:[g.jsx(Ip,{className:"w-3 h-3"}),g.jsx("span",{className:"text-xs font-bold",children:S})]}),x&&g.jsxs("div",{className:"absolute bottom-4 left-4 z-[400] bg-white/95 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-gray-200 flex items-center gap-2",children:[g.jsx(Ts,{className:"w-4 h-4 animate-spin text-blue-600"}),g.jsx("span",{className:"text-xs font-bold text-gray-600",children:" ..."})]}),g.jsx("div",{ref:r,style:{height:t,width:"100%"},className:"z-10"})]})},eM=(n="")=>{const e=n.toLowerCase();return e.includes("fine")||e.includes("michelin")||e.includes("luxury")?{icon:"",gradient:"bg-gradient-to-br from-slate-800 to-black text-white",label:"Luxury"}:e.includes("street")||e.includes("market")||e.includes("stall")?{icon:"",gradient:"bg-gradient-to-br from-orange-400 to-red-500 text-white",label:"Street Food"}:e.includes("burger")||e.includes("american")?{icon:"",gradient:"bg-gradient-to-br from-red-500 to-orange-600 text-white",label:"Burger"}:e.includes("pizza")||e.includes("italian")?{icon:"",gradient:"bg-gradient-to-br from-green-500 to-emerald-700 text-white",label:"Italian"}:e.includes("sushi")||e.includes("japanese")||e.includes("ramen")?{icon:"",gradient:"bg-gradient-to-br from-rose-400 to-pink-600 text-white",label:"Japanese"}:e.includes("coffee")||e.includes("cafe")||e.includes("brunch")?{icon:"",gradient:"bg-gradient-to-br from-amber-600 to-brown-800 text-white",label:"Cafe"}:e.includes("bar")||e.includes("cocktail")||e.includes("pub")?{icon:"",gradient:"bg-gradient-to-br from-purple-600 to-indigo-800 text-white",label:"Nightlife"}:e.includes("seafood")?{icon:"",gradient:"bg-gradient-to-br from-blue-400 to-cyan-600 text-white",label:"Seafood"}:e.includes("thai")||e.includes("asian")?{icon:"",gradient:"bg-gradient-to-br from-orange-500 to-yellow-500 text-white",label:"Asian"}:e.includes("dessert")||e.includes("ice cream")?{icon:"",gradient:"bg-gradient-to-br from-pink-300 to-rose-400 text-white",label:"Sweets"}:{icon:"",gradient:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white",label:"Restaurant"}},Xl=n=>n?n.replace(/[^\x00-\x7F]/g,"").replace(/\s+/g," ").trim():"",mC=n=>n.sort((e,t)=>e.isFavorite&&!t.isFavorite?-1:!e.isFavorite&&t.isFavorite?1:(t.googleRating||0)-(e.googleRating||0)),pC=({rec:n,tripDestination:e,tripDestinationEnglish:t,isAdded:i,onAdd:r})=>{const a=Xl(n.nameEnglish||n.name),c=Xl(n.location)||Xl(t||e),m=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${a} ${c}`)}`,p=n.nameEnglish||Xl(n.name)||n.name,x=eM(n.cuisine);return g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col overflow-hidden group relative border border-slate-100 h-full",children:[g.jsxs("div",{className:`h-28 ${x.gradient} relative flex flex-col justify-between p-4`,children:[g.jsxs("div",{className:"flex justify-between items-start w-full",children:[g.jsx("div",{className:"text-3xl filter drop-shadow-md transform group-hover:scale-110 transition-transform duration-300",children:x.icon}),g.jsx("div",{className:"flex flex-col items-end",children:n.googleRating&&g.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-2 py-1 rounded-lg flex items-center gap-1 shadow-sm text-white",children:[g.jsx("span",{className:"text-xs font-black",children:n.googleRating}),g.jsx(Ec,{className:"w-3 h-3 fill-white text-white"})]})})]}),g.jsx("h3",{className:"text-xl font-black text-white leading-tight font-sans tracking-tight line-clamp-2 drop-shadow-md mt-2",dir:"ltr",children:p})]}),g.jsxs("div",{className:"p-4 flex flex-col flex-grow relative",children:[g.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[n.recommendationSource&&g.jsxs("span",{className:"text-[9px] font-bold bg-yellow-50 text-yellow-700 px-2 py-0.5 rounded-full flex items-center gap-1 border border-yellow-100",children:[g.jsx(Rp,{className:"w-3 h-3"}),n.recommendationSource.replace("Bib","Michelin")]}),n.isHotelRestaurant&&g.jsxs("span",{className:"text-[9px] font-bold bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded-full flex items-center gap-1 border border-indigo-100",children:[g.jsx(ws,{className:"w-3 h-3"}),"  "]}),g.jsx("span",{className:"text-[9px] font-bold bg-slate-50 text-slate-500 px-2 py-0.5 rounded-full border border-slate-100",children:n.cuisine||x.label})]}),g.jsx("div",{className:"mb-4",children:g.jsx("p",{className:"text-sm text-slate-600 line-clamp-4 leading-relaxed font-medium",dir:"rtl",children:n.description})}),g.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-50 flex gap-2",children:[g.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-white hover:bg-blue-50 text-slate-500 hover:text-blue-600 border border-slate-200 rounded-xl py-2 flex items-center justify-center gap-2 transition-colors text-[10px] font-bold",children:[g.jsx(rl,{className:"w-3.5 h-3.5"})," "]}),g.jsxs("button",{onClick:()=>r(n,n.categoryTitle||"AI"),disabled:i,className:`flex-1 py-2 rounded-xl text-[10px] font-bold flex items-center justify-center gap-2 transition-all shadow-sm ${i?"bg-green-50 text-green-700 border border-green-200":"bg-slate-900 text-white hover:bg-slate-800"}`,children:[i?g.jsx(gh,{className:"w-3.5 h-3.5"}):g.jsx(Er,{className:"w-3.5 h-3.5"}),i?"":""]})]})]})]})},Y7=({trip:n,onUpdateTrip:e})=>{const[t,i]=X.useState("my_list"),[r,a]=X.useState("list"),[c,f]=X.useState(n.aiRestaurants||[]),[m,p]=X.useState(!1),[x,T]=X.useState(""),[S,N]=X.useState(!1),[O,V]=X.useState("all"),[P,Q]=X.useState("all"),[W,H]=X.useState(new Set),[j,Z]=X.useState(""),[Y,D]=X.useState(!1),[k,U]=X.useState(null);X.useEffect(()=>{n.aiRestaurants&&n.aiRestaurants.length>0&&f(n.aiRestaurants)},[n.aiRestaurants]);const G=X.useMemo(()=>n.destination?n.destination.split("-").map(re=>re.trim()):[],[n.destination]),$=async()=>{if(j.trim()){D(!0),U(null),T("");try{const re=Sr(),ve=`${Jp}

Search for: "${j}" in ${n.destination}. Return 6 high quality restaurant results.
CRITICAL: 'name' MUST be in English. 'nameEnglish' MUST be provided. Description in Hebrew.`,z={type:Be.OBJECT,properties:{results:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{name:{type:Be.STRING},nameEnglish:{type:Be.STRING},description:{type:Be.STRING},location:{type:Be.STRING},googleRating:{type:Be.NUMBER},reviewCount:{type:Be.NUMBER},cuisine:{type:Be.STRING},iconType:{type:Be.STRING},isHotelRestaurant:{type:Be.BOOLEAN},recommendationSource:{type:Be.STRING},googleMapsUrl:{type:Be.STRING}},required:["name","description","location"]}}}},se=await Ar(re,ve,{responseMimeType:"application/json",responseSchema:z}),oe=JSON.parse(se.text||"{}");oe.results&&U(oe.results.map((Me,Fe)=>({...Me,id:`search-res-${Fe}`,categoryTitle:" "})))}catch(re){console.error(re),T(" .   .")}finally{D(!1)}}},te=()=>{Z(""),U(null)},K=()=>{G.length>1?N(!0):Le(!0,n.destinationEnglish||G[0])},Le=async(re=!1,ve)=>{N(!1),p(!0),T("");try{const z=Sr(),oe=new Date().getFullYear()-1,Me=`
        Act as a strict, fact-checking Food Guide Editor for ${ve}.
        Provide exactly 10 authentic recommendations for each of the following SPECIFIC categories.

        **Category Structure (Hebrew Titles):**
        1. "  " (Street Food Legends)
        2. "  " (Best Ramen - Must include Ramen places)
        3. "  " (Best Pizza - Must include Pizza places)
        4. "  " (Best Burger)
        5. " " (Noodles & Stir Fry)
        6. "  " (Cafes & Desserts)
        7. "  / " (Fine Dining)
        8. " " (Bars)

        **CRITICAL INTEGRITY RULES:**
        1. **NAME:** Must be the REAL English name of the place (e.g. "Raan Jay Fai", "Thipsamai").
        2. **DESCRIPTION:** Must be in HEBREW. Describe the food.
        3. **SOURCES:** Use Michelin, 50 Best, or Local Favorites.
        4. **HOTEL:** If the restaurant is inside a hotel, set isHotelRestaurant = true.
        5. **ICONS:** Determine a 'cuisine' field (e.g. "Ramen", "Pizza", "Burger") for icon matching.

        **DATA OUTPUT RULES:**
        - 'name': English Name.
        - 'nameEnglish': English Name.
        - 'description': Hebrew.
        - 'googleRating': Realistic rating (e.g. 4.5).
        `,Fe={type:Be.OBJECT,properties:{categories:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},title:{type:Be.STRING},restaurants:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{name:{type:Be.STRING},nameEnglish:{type:Be.STRING},description:{type:Be.STRING},location:{type:Be.STRING},cuisine:{type:Be.STRING},googleRating:{type:Be.NUMBER},reviewCount:{type:Be.NUMBER},recommendationSource:{type:Be.STRING},isHotelRestaurant:{type:Be.BOOLEAN},iconType:{type:Be.STRING},googleMapsUrl:{type:Be.STRING}},required:["name","nameEnglish","description","location","isHotelRestaurant","recommendationSource","cuisine"]}}},required:["id","title","restaurants"]}}}},yt=await Ar(z,Me,{responseMimeType:"application/json",responseSchema:Fe,temperature:.1}),dt=JSON.parse(yt.text||"{}");if(dt.categories){const Ft=dt.categories.map(kt=>({...kt,region:ve,restaurants:kt.restaurants.map((mn,tt)=>({...mn,id:`ai-rec-${kt.id}-${tt}`,categoryTitle:kt.title}))}));f(Ft),V("all"),e({...n,aiRestaurants:Ft})}}catch(z){console.error("AI Error:",z),T("  .   .")}finally{p(!1)}},rt=X.useMemo(()=>{let re=[];return c.forEach(ve=>ve.restaurants.forEach(z=>re.push({...z,categoryTitle:ve.title}))),re.sort((ve,z)=>(z.googleRating||0)-(ve.googleRating||0))},[c]),fe=X.useMemo(()=>{const re=new Set;return rt.forEach(ve=>{if(ve.recommendationSource){let z=ve.recommendationSource;const se=z.toLowerCase();se.includes("michelin")?z="Michelin Guide":se.includes("50 best")?z="50 Best":se.includes("local")||se.includes("google")?z="Local / Google":z=z.replace(/#\d+|20\d\d/g,"").trim(),re.add(z)}}),Array.from(re).sort()},[rt]),Ie=X.useMemo(()=>{let re=[];if(O==="all")re=rt;else{const ve=c.find(z=>z.id===O);re=ve?[...ve.restaurants].sort((z,se)=>(se.googleRating||0)-(z.googleRating||0)):[]}return P!=="all"&&(re=re.filter(ve=>{if(!ve.recommendationSource)return!1;const z=P.toLowerCase(),se=ve.recommendationSource.toLowerCase();return z==="michelin guide"?se.includes("michelin"):z==="local / google"?se.includes("local")||se.includes("google"):se.includes(z)})),re},[c,O,P,rt]),Ee=X.useMemo(()=>n.restaurants,[n.restaurants]),[Qe,pe]=X.useState("all"),J=X.useMemo(()=>{if(Qe==="all"){const ve=[];return Ee.forEach(z=>ve.push(...z.restaurants)),mC(ve)}const re=Ee.find(ve=>ve.title===Qe);return re?[{...re,restaurants:mC([...re.restaurants])}]:[]},[Ee,Qe]),ce=(re,ve)=>{let z=[...n.restaurants],se="",oe=z.findIndex(Fe=>Fe.region===se&&Fe.title===ve);oe===-1&&(z.push({id:`cat-${Date.now()}`,title:ve,region:se,restaurants:[]}),oe=z.length-1),z[oe].restaurants.some(Fe=>Fe.name===re.name)||(z[oe].restaurants.push({...re,id:`added-${Date.now()}`}),e({...n,restaurants:z}),H(Fe=>new Set(Fe).add(re.id)),setTimeout(()=>{H(Fe=>{const yt=new Set(Fe);return yt.delete(re.id),yt})},2e3))},be=()=>{const re=[];return t==="my_list"?n.restaurants.forEach(ve=>ve.restaurants.forEach(z=>re.push({id:z.id,type:"restaurant",name:z.name,address:z.location,lat:z.lat,lng:z.lng,description:z.description}))):rt.forEach(ve=>re.push({id:ve.id,type:"restaurant",name:ve.name,address:ve.location,lat:ve.lat,lng:ve.lng,description:`${ve.googleRating}`})),re};return g.jsxs("div",{className:"space-y-4 animate-fade-in pb-12",children:[g.jsx("div",{className:"relative z-20",children:g.jsxs("div",{className:"bg-white p-2 rounded-2xl shadow-sm border border-slate-200 flex items-center gap-2 focus-within:border-orange-400 focus-within:ring-2 focus-within:ring-orange-100 transition-all",children:[g.jsx(ZC,{className:"w-5 h-5 text-slate-400 mr-2"}),g.jsx("input",{className:"flex-grow outline-none text-slate-700 font-medium text-sm",placeholder:"     ...",value:j,onChange:re=>Z(re.target.value),onKeyDown:re=>re.key==="Enter"&&$()}),j&&g.jsx("button",{onClick:te,className:"p-1.5 hover:bg-slate-100 rounded-full text-slate-400",children:g.jsx(bi,{className:"w-4 h-4"})}),g.jsxs("button",{onClick:$,disabled:Y||!j.trim(),className:"bg-orange-600 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-orange-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[Y?g.jsx(Ts,{className:"w-3 h-3 animate-spin"}):g.jsx(ai,{className:"w-3 h-3"}),Y?"...":""]})]})}),k&&g.jsxs("div",{className:"space-y-3 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"text-lg font-black text-slate-800",children:" "}),g.jsx("button",{onClick:te,className:"text-xs text-slate-500 hover:text-red-500 underline",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:k.map(re=>g.jsx(pC,{rec:re,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,isAdded:W.has(re.id),onAdd:ce},re.id))}),g.jsx("div",{className:"border-b border-slate-200 my-4"})]}),g.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-slate-200 p-1.5 flex mb-2",children:[g.jsxs("button",{onClick:()=>i("my_list"),className:`flex-1 py-3 rounded-[1.2rem] text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="my_list"?"bg-slate-900 text-white shadow-lg":"text-slate-500 hover:bg-slate-50"}`,children:[g.jsx(qa,{className:"w-4 h-4"}),"  "]}),g.jsxs("button",{onClick:()=>i("recommended"),className:`flex-1 py-3 rounded-[1.2rem] text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="recommended"?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg":"text-slate-500 hover:bg-orange-50 hover:text-orange-600"}`,children:[g.jsx(ai,{className:"w-4 h-4"}),"   (AI)"]})]}),r==="map"?g.jsxs("div",{className:"space-y-3",children:[g.jsx("div",{className:"flex justify-end",children:g.jsxs("button",{onClick:()=>a("list"),className:"px-3 py-1.5 rounded-lg flex items-center gap-2 font-bold text-xs bg-slate-100 text-slate-900 transition-all hover:bg-slate-200",children:[g.jsx(YC,{className:"w-3 h-3"}),"  "]})}),g.jsx(mx,{items:be(),title:t==="my_list"?"  ":" "})]}):g.jsx(g.Fragment,{children:t==="my_list"?g.jsx(g.Fragment,{children:n.restaurants.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-6",children:[g.jsx("div",{className:"bg-orange-50 p-8 rounded-full shadow-inner animate-pulse",children:g.jsx(qa,{className:"w-16 h-16 text-orange-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-black text-slate-800",children:" "}),g.jsx("p",{className:"text-slate-500 font-medium mt-2 max-w-xs mx-auto",children:" -AI          ."})]}),g.jsxs("button",{onClick:()=>{i("recommended"),K()},className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-3 rounded-2xl font-bold shadow-xl shadow-orange-200 hover:scale-105 transition-transform flex items-center gap-2",children:[g.jsx(ai,{className:"w-5 h-5"}),"    (AI)"]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex justify-between items-center mb-1",children:g.jsxs("button",{onClick:()=>a("map"),className:"px-3 py-1.5 rounded-lg flex items-center gap-1 font-bold text-xs bg-white border border-slate-200 text-blue-600 hover:bg-blue-50 transition-all shadow-sm",children:[g.jsx(rl,{className:"w-3 h-3"})," "]})}),g.jsx("div",{className:"mb-2 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>pe("all"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${Qe==="all"?"bg-slate-900 text-white border-slate-900 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:""}),Ee.map(re=>g.jsx("button",{onClick:()=>pe(re.title),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${Qe===re.title?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:re.title},re.id))]})}),g.jsx("div",{className:"space-y-4 mt-2",children:Qe==="all"?g.jsx("div",{className:"flex flex-col gap-3",children:J.map(re=>g.jsx(gC,{data:re,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,onSaveNote:ve=>e({...n,restaurants:n.restaurants.map(z=>({...z,restaurants:z.restaurants.map(se=>se.id===re.id?{...se,notes:ve}:se)}))}),onUpdate:ve=>e({...n,restaurants:n.restaurants.map(z=>({...z,restaurants:z.restaurants.map(se=>se.id===re.id?{...se,...ve}:se)}))}),onDelete:()=>{window.confirm("?")&&e({...n,restaurants:n.restaurants.map(ve=>({...ve,restaurants:ve.restaurants.filter(z=>z.id!==re.id)})).filter(ve=>ve.restaurants.length>0)})}},re.id))}):J.map(re=>g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-2 flex items-center justify-between",children:[re.title,g.jsx("span",{className:"text-[10px] font-normal bg-slate-100 px-2 py-0.5 rounded-full text-slate-500",children:re.region})]}),g.jsx("div",{className:"flex flex-col gap-3",children:re.restaurants.map(ve=>g.jsx(gC,{data:ve,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,onSaveNote:z=>e({...n,restaurants:n.restaurants.map(se=>se.id===re.id?{...se,restaurants:se.restaurants.map(oe=>oe.id===ve.id?{...oe,notes:z}:oe)}:se)}),onUpdate:z=>e({...n,restaurants:n.restaurants.map(se=>se.id===re.id?{...se,restaurants:se.restaurants.map(oe=>oe.id===ve.id?{...oe,...z}:oe)}:se)}),onDelete:()=>{window.confirm("?")&&e({...n,restaurants:n.restaurants.map(z=>z.id===re.id?{...z,restaurants:z.restaurants.filter(se=>se.id!==ve.id)}:z).filter(z=>z.restaurants.length>0)})}},ve.id))})]},re.id))})]})}):g.jsx("div",{className:"animate-fade-in",children:!m&&c.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-6",children:[g.jsx("div",{className:"bg-orange-100 p-6 rounded-full",children:g.jsx(Ip,{className:"w-10 h-10 text-orange-600"})}),g.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"  ?"}),g.jsxs("button",{onClick:K,className:"bg-white border-2 border-orange-500 text-orange-600 px-8 py-3 rounded-2xl text-base font-bold shadow-md hover:shadow-lg hover:bg-orange-50 transition-all",children:[n.destination," -   "]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-slate-900 text-white p-4 rounded-2xl mb-4 shadow-lg flex items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-white/10 p-2 rounded-full backdrop-blur-sm",children:g.jsx(qC,{className:"w-5 h-5 text-orange-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-bold text-slate-200 uppercase tracking-wider",children:"Market Research"}),g.jsx("p",{className:"font-black text-lg",children:"  "})]})]}),!m&&g.jsxs("button",{onClick:K,className:"text-[10px] font-bold text-orange-400 bg-white/10 px-3 py-1.5 rounded-lg hover:bg-white/20 flex items-center gap-1",children:[g.jsx(WC,{className:"w-3 h-3"}),"  "]})]}),m?g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx(Ts,{className:"w-10 h-10 text-orange-600 animate-spin mb-4"}),g.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"  ..."}),g.jsx("p",{className:"text-slate-500 text-sm mt-2 max-w-xs",children:"    ..."})]}):x?g.jsxs("div",{className:"text-center py-10",children:[g.jsx("p",{className:"text-red-500 text-sm font-bold mb-4",children:x}),g.jsxs("button",{onClick:K,className:"bg-slate-900 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-md hover:scale-105 transition-transform flex items-center gap-2 mx-auto",children:[g.jsx(SL,{className:"w-4 h-4"}),"  "]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"mb-2 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>V("all"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all flex items-center gap-1 ${O==="all"?"bg-slate-900 text-white border-slate-900 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:[g.jsx(KC,{className:"w-3 h-3"})," "]}),c.map(re=>g.jsx("button",{onClick:()=>V(re.id),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${O===re.id?"bg-slate-800 text-white border-slate-800 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:re.title},re.id))]})}),g.jsx("div",{className:"mb-4 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase flex-shrink-0",children:' ":'}),g.jsx("button",{onClick:()=>Q("all"),className:`flex-shrink-0 px-3 py-1 rounded-full text-[10px] font-bold border transition-all ${P==="all"?"bg-orange-100 text-orange-700 border-orange-200":"bg-white text-slate-500 border-slate-200"}`,children:""}),fe.map(re=>g.jsx("button",{onClick:()=>Q(re),className:`flex-shrink-0 px-3 py-1 rounded-full text-[10px] font-bold border transition-all ${P===re?"bg-orange-100 text-orange-700 border-orange-200 ring-2 ring-orange-100":"bg-white text-slate-500 border-slate-200"}`,children:re},re))]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Ie.map(re=>g.jsx(pC,{rec:re,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,isAdded:W.has(re.id),onAdd:ce},re.id))}),Ie.length===0&&g.jsx("div",{className:"text-center py-10",children:g.jsx("p",{className:"text-slate-400 font-bold",children:"   ."})})]})]})})}),S&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",children:g.jsx("div",{className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl",children:g.jsxs("div",{className:"p-6 text-center",children:[g.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"  "}),g.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"-AI      "}),g.jsx("div",{className:"space-y-3",children:G.map(re=>g.jsx("button",{onClick:()=>Le(!0,re),className:"w-full py-4 rounded-xl border-2 border-slate-100 font-bold text-slate-700 hover:border-orange-500 hover:bg-orange-50 hover:text-orange-700 transition-all",children:re},re))}),g.jsx("button",{onClick:()=>N(!1),className:"mt-6 text-xs font-bold text-slate-400 hover:text-slate-600",children:""})]})})})]})},gC=({data:n,tripDestination:e,tripDestinationEnglish:t,onSaveNote:i,onUpdate:r,onDelete:a})=>{const[c,f]=X.useState(!1),[m,p]=X.useState(n.notes||""),[x,T]=X.useState(!1),[S,N]=X.useState(""),[O,V]=X.useState(""),P=$=>$?$.split("/").reverse().join("-"):"",Q=$=>$.split("-").reverse().join("/");X.useEffect(()=>{n.reservationDate&&N(P(n.reservationDate)),n.reservationTime&&V(n.reservationTime)},[n.reservationDate,n.reservationTime]);const W=()=>{r({reservationDate:Q(S),reservationTime:O}),T(!1)},H=()=>{i(m),f(!1)},j=()=>{r({isFavorite:!n.isFavorite})},Z=n,Y=Xl(Z.nameEnglish||n.name),D=Xl(n.location)||Xl(t||e),U=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${Y} ${D}`)}`,G=eM(Z.cuisine);return g.jsxs("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all group flex flex-col md:flex-row gap-3 relative overflow-hidden pl-3 py-3 pr-3 md:pr-0 ${n.isFavorite?"border-yellow-200 ring-1 ring-yellow-100":"border-slate-100"}`,children:[g.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-1 ${G.gradient.split(" ")[0]}`}),g.jsxs("div",{className:"flex-grow min-w-0 pr-2",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:j,className:"focus:outline-none",children:g.jsx(Ec,{className:`w-5 h-5 transition-all ${n.isFavorite?"text-yellow-400 fill-yellow-400 scale-110":"text-slate-300 hover:text-yellow-400"}`})}),g.jsx("span",{className:"text-lg",children:G.icon}),g.jsx("h4",{className:"text-base font-black text-slate-900 leading-tight tracking-tight font-sans",dir:"ltr",children:Z.nameEnglish||n.name}),n.googleRating&&g.jsxs("div",{className:"flex items-center bg-slate-50 px-1.5 py-0.5 rounded border border-slate-100",children:[g.jsx("span",{className:"text-[10px] font-bold text-slate-800",children:n.googleRating}),g.jsx(Ec,{className:"w-2.5 h-2.5 text-yellow-400 fill-yellow-400 ml-0.5"})]})]}),g.jsx("p",{className:"text-slate-600 text-sm mt-1 leading-snug line-clamp-2 md:line-clamp-1",children:n.description}),g.jsxs("div",{className:"flex gap-2 mt-2",children:[n.recommendationSource&&g.jsxs("div",{className:"inline-flex items-center text-[9px] font-bold text-slate-900 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 w-fit",children:[g.jsx(Rp,{className:"w-2.5 h-2.5 mr-1 text-yellow-600"})," ",n.recommendationSource.replace("Bib","Michelin")]}),Z.isHotelRestaurant&&g.jsxs("div",{className:"inline-flex items-center text-[9px] font-bold text-indigo-700 bg-indigo-50 px-1.5 py-0.5 rounded border border-indigo-100 w-fit",children:[g.jsx(ws,{className:"w-2.5 h-2.5 mr-1"})," "]})]})]}),g.jsxs("div",{className:"flex items-center gap-1 pl-1 ml-auto md:ml-0 self-start",children:[g.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-500 hover:text-blue-600 bg-slate-50 rounded-lg hover:bg-blue-50 transition-colors",children:g.jsx(rl,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>T(!x),className:`p-2 rounded-lg border ${n.reservationDate?"bg-orange-50 text-orange-600 border-orange-100":"bg-slate-50 text-slate-400 border-transparent hover:bg-slate-100"}`,children:g.jsx(Za,{className:"w-4 h-4"})}),g.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-red-600 bg-slate-50 rounded-lg hover:bg-red-50",children:g.jsx(Xr,{className:"w-4 h-4"})})]})]}),x&&g.jsxs("div",{className:"mt-3 bg-orange-50 p-2 rounded-lg border border-orange-100 flex items-center gap-2 animate-fade-in",children:[g.jsx("input",{type:"date",value:S,onChange:$=>N($.target.value),className:"w-full p-1.5 rounded border border-orange-200 text-xs"}),g.jsx("input",{type:"time",value:O,onChange:$=>V($.target.value),className:"w-full p-1.5 rounded border border-orange-200 text-xs"}),g.jsx("button",{onClick:W,className:"bg-orange-600 text-white px-3 py-1.5 rounded text-xs font-bold whitespace-nowrap",children:""})]}),!x&&n.reservationDate&&g.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] font-bold text-orange-700 bg-orange-50 w-fit px-2 py-1 rounded border border-orange-100",children:[g.jsx($C,{className:"w-3 h-3"})," ",n.reservationDate," ",n.reservationTime]}),g.jsx("div",{className:"mt-2",children:c?g.jsxs("div",{className:"bg-yellow-50 p-2 rounded-lg border border-yellow-200",children:[g.jsx("textarea",{className:"w-full bg-transparent border-none outline-none text-xs text-slate-800 resize-none",rows:1,placeholder:"...",value:m,onChange:$=>p($.target.value)}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>f(!1),className:"text-[10px] text-slate-500",children:""}),g.jsx("button",{onClick:H,className:"text-[10px] bg-yellow-400 text-yellow-900 px-2 py-0.5 rounded font-bold",children:""})]})]}):g.jsxs("div",{onClick:()=>f(!0),className:`px-2 py-1.5 rounded-lg border text-[10px] flex items-center gap-1 cursor-pointer transition-colors ${n.notes?"bg-yellow-50 border-yellow-100 text-yellow-900":"bg-slate-50 border-dashed border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[g.jsx(G0,{className:`w-3 h-3 flex-shrink-0 ${n.notes?"text-yellow-600":"text-gray-400"}`}),g.jsx("span",{className:"line-clamp-1",children:n.notes||" ..."})]})})]})]})},hh=n=>n?n.replace(/[^\x00-\x7F]/g,"").replace(/\s+/g," ").trim():"",W7=n=>{const e=(n||"").toLowerCase();return e.includes("must")||e.includes("top")?"bg-purple-600 border-purple-600 text-purple-600":e.includes("nature")||e.includes("park")?"bg-emerald-600 border-emerald-600 text-emerald-600":e.includes("beach")||e.includes("island")?"bg-cyan-500 border-cyan-500 text-cyan-600":e.includes("museum")||e.includes("history")?"bg-amber-700 border-amber-700 text-amber-700":e.includes("shopping")?"bg-pink-500 border-pink-500 text-pink-600":e.includes("night")?"bg-slate-800 border-slate-800 text-slate-800":"bg-blue-600 border-blue-600 text-blue-600"},_C=n=>n.sort((e,t)=>e.isFavorite&&!t.isFavorite?-1:!e.isFavorite&&t.isFavorite?1:(t.rating||0)-(e.rating||0)),yC=({rec:n,tripDestination:e,tripDestinationEnglish:t,isAdded:i,onAdd:r})=>{const a=hh(n.name),c=hh(n.location)||hh(t||e),m=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${a} ${c}`)}`,p=W7(n.type),x=p.split(" ")[2];return g.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 flex overflow-hidden group relative border border-slate-200 h-full min-h-[160px]",children:[g.jsx("div",{className:`w-2 ${p.split(" ")[0]}`}),g.jsxs("div",{className:"p-4 flex flex-col flex-grow relative",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("div",{className:"flex flex-col gap-1",children:n.recommendationSource?g.jsxs("span",{className:`text-[10px] font-black uppercase tracking-widest ${x} flex items-center gap-1`,children:[g.jsx(Rp,{className:"w-3 h-3"})," ",n.recommendationSource]}):g.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:n.type||"Attraction"})}),n.rating&&g.jsxs("div",{className:"bg-slate-50 px-2 py-1 rounded-lg border border-slate-100 flex items-center gap-1 shadow-sm",children:[g.jsx("span",{className:"text-xs font-black text-slate-800",children:n.rating}),g.jsx(Ec,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"})]})]}),g.jsxs("div",{className:"mb-3",children:[g.jsx("h3",{className:"text-lg font-black text-slate-900 leading-tight mb-1 font-sans tracking-tight",dir:"ltr",children:n.name}),g.jsx("p",{className:"text-xs text-slate-500 line-clamp-3 leading-relaxed",dir:"rtl",children:n.description}),n.price&&g.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 bg-slate-50 px-2 py-1 rounded text-[10px] font-bold text-slate-600",children:[g.jsx(Np,{className:"w-3 h-3"})," ",n.price]})]}),g.jsxs("div",{className:"mt-auto pt-3 border-t border-dashed border-slate-100 flex gap-2",children:[g.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-slate-50 hover:bg-slate-100 text-slate-600 hover:text-blue-600 border border-slate-200 rounded-lg py-2 flex items-center justify-center gap-2 transition-colors text-[10px] font-bold",children:[g.jsx(rl,{className:"w-3 h-3"}),"  "]}),g.jsxs("button",{onClick:()=>r(n,"AI"),disabled:i,className:`flex-1 py-2 rounded-lg text-[10px] font-bold flex items-center justify-center gap-2 transition-all ${i?"bg-green-50 text-green-700 border border-green-200":"bg-slate-900 text-white hover:bg-slate-800 shadow-md"}`,children:[i?g.jsx(gh,{className:"w-3 h-3"}):g.jsx(Er,{className:"w-3 h-3"}),i?"":""]})]})]})]})},Z7=({trip:n,onUpdateTrip:e})=>{const[t,i]=X.useState("my_list"),[r,a]=X.useState("list"),[c,f]=X.useState(n.aiAttractions||[]),[m,p]=X.useState(!1),[x,T]=X.useState(""),[S,N]=X.useState(!1),[O,V]=X.useState("all"),[P,Q]=X.useState("all"),[W,H]=X.useState(new Set),[j,Z]=X.useState(""),[Y,D]=X.useState(!1),[k,U]=X.useState(null),G=n.attractions||[];X.useEffect(()=>{n.aiAttractions&&n.aiAttractions.length>0&&f(n.aiAttractions)},[n.aiAttractions]);const $=X.useMemo(()=>n.destination?n.destination.split("-").map(z=>z.trim()):[],[n.destination]),te=async()=>{if(j.trim()){D(!0),U(null);try{const z=Sr(),se=`${Jp}

Search for attractions in ${n.destination} matching: "${j}".
Prioritize results from Google Maps Top Rated, TripAdvisor "Travelers' Choice" or UNESCO lists.
Try to include a price estimate if possible.
CRITICAL: 'name' MUST be in English. Description in Hebrew.`,oe={type:Be.OBJECT,properties:{results:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{name:{type:Be.STRING},description:{type:Be.STRING},location:{type:Be.STRING},rating:{type:Be.NUMBER},reviewCount:{type:Be.NUMBER},type:{type:Be.STRING},price:{type:Be.STRING},recommendationSource:{type:Be.STRING},googleMapsUrl:{type:Be.STRING}},required:["name","description","location"]}}}},Me=await Ar(z,se,{responseMimeType:"application/json",responseSchema:oe}),Fe=JSON.parse(Me.text||"{}");Fe.results&&U(Fe.results.map((yt,dt)=>({...yt,id:`search-attr-${dt}`})))}catch(z){console.error(z),alert(" .")}finally{D(!1)}}},K=()=>{Z(""),U(null)},Le=()=>{$.length>1?N(!0):rt(!0,n.destinationEnglish||$[0])},rt=async(z=!1,se)=>{if(N(!1),!z&&!se&&n.aiAttractions&&n.aiAttractions.length>0){f(n.aiAttractions);return}p(!0),T("");try{const oe=Sr(),Fe=`
        Act as a Luxury Travel Concierge for ${se||n.destinationEnglish||n.destination}.
        Provide a structured guide with 6 categories.
        For each category, provide 10 items (Total ~60).
        
        Categories (Hebrew Titles):
        1. " " (Must See)
        2. " " (Hidden Gems)
        3. " " (Museums)
        4. " " (Nature)
        5. " " (Shopping)
        6. " " (Nightlife)

        **CRITICAL RULES:**
        1. **NAME:** Must be the REAL English name of the place (e.g. "Grand Palace", "Wat Arun").
        2. **DESCRIPTION:** Must be in HEBREW.
        3. **SOURCES:** "UNESCO", "TripAdvisor Choice", "Lonely Planet", "Atlas Obscura", "Local Secret".
        4. **PRICE:** include estimate (e.g. "Free", "500 THB").
        `,yt={type:Be.OBJECT,properties:{categories:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},title:{type:Be.STRING},attractions:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{name:{type:Be.STRING},description:{type:Be.STRING},location:{type:Be.STRING},rating:{type:Be.NUMBER},type:{type:Be.STRING},price:{type:Be.STRING},recommendationSource:{type:Be.STRING},googleMapsUrl:{type:Be.STRING}},required:["name","description","location","recommendationSource"]}}},required:["id","title","attractions"]}}}},dt=await Ar(oe,Fe,{responseMimeType:"application/json",responseSchema:yt}),Ft=JSON.parse(dt.text||"{}");if(Ft.categories){const kt=Ft.categories.map(mn=>({...mn,attractions:mn.attractions.map((tt,qt)=>({...tt,id:`ai-attr-${mn.id}-${qt}`}))}));f(kt),V("all"),e({...n,aiAttractions:kt})}}catch(oe){console.error(oe);const Me=oe.message.includes("500")||oe.message.includes("xhr")?"  .   .":` : ${oe.message}`;T(Me)}finally{p(!1)}},fe=(z,se)=>{const oe=(z||"").toLowerCase();return oe.includes("nature")||oe.includes("park")||oe.includes("beach")?" ":oe.includes("museum")||oe.includes("culture")||oe.includes("history")?" ":oe.includes("shop")||oe.includes("market")||oe.includes("mall")?" ":oe.includes("night")||oe.includes("bar")||oe.includes("club")?" ":oe.includes("gem")||oe.includes("hidden")?" ":se||""},Ie=(z,se)=>{let oe=[...G];const Me=fe(z.type,se);let Fe=oe.findIndex(dt=>dt.title===Me);Fe===-1&&(oe.push({id:`cat-attr-${Date.now()}`,title:Me,attractions:[]}),Fe=oe.length-1),oe[Fe].attractions.some(dt=>dt.name===z.name)||(oe[Fe].attractions.push({...z,id:`added-${Date.now()}`}),e({...n,attractions:oe}),H(dt=>new Set(dt).add(z.id)),setTimeout(()=>{H(dt=>{const Ft=new Set(dt);return Ft.delete(z.id),Ft})},2e3))},Ee=X.useMemo(()=>{let z=[];if(O==="all")c.forEach(se=>z.push(...se.attractions));else{const se=c.find(oe=>oe.id===O);z=se?se.attractions:[]}return P!=="all"&&(z=z.filter(se=>se.recommendationSource===P)),z},[c,O,P]),Qe=X.useMemo(()=>{const z=new Set;return c.forEach(se=>se.attractions.forEach(oe=>{oe.recommendationSource&&z.add(oe.recommendationSource)})),Array.from(z).sort()},[c]),[pe,J]=X.useState("all"),ce=X.useMemo(()=>pe==="all"?G.map(z=>({...z,attractions:_C([...z.attractions])})).filter(z=>z.attractions.length>0):G.filter(z=>z.title===pe).map(z=>({...z,attractions:_C([...z.attractions])})),[G,pe]),be=(z,se)=>{const oe=G.map(Me=>({...Me,attractions:Me.attractions.map(Fe=>Fe.id===z?{...Fe,...se}:Fe)}));e({...n,attractions:oe})},re=z=>{if(window.confirm("?")){const se=G.map(oe=>({...oe,attractions:oe.attractions.filter(Me=>Me.id!==z)})).filter(oe=>oe.attractions.length>0);e({...n,attractions:se})}},ve=()=>{const z=[];return t==="my_list"?G.forEach(se=>se.attractions.forEach(oe=>z.push({id:oe.id,type:"attraction",name:oe.name,address:oe.location,lat:oe.lat,lng:oe.lng,description:oe.description}))):c.forEach(se=>se.attractions.forEach(oe=>z.push({id:oe.id,type:"attraction",name:oe.name,address:oe.location,lat:oe.lat,lng:oe.lng,description:`${oe.rating}`}))),z};return g.jsxs("div",{className:"space-y-4 animate-fade-in pb-10",children:[g.jsx("div",{className:"relative z-20",children:g.jsxs("div",{className:"bg-white p-2 rounded-2xl shadow-sm border border-gray-200 flex items-center gap-2 focus-within:border-purple-400 focus-within:ring-2 focus-within:ring-purple-100 transition-all",children:[g.jsx(ZC,{className:"w-5 h-5 text-gray-400 mr-2"}),g.jsx("input",{className:"flex-grow outline-none text-gray-700 font-medium text-sm",placeholder:"  (   )...",value:j,onChange:z=>Z(z.target.value),onKeyDown:z=>z.key==="Enter"&&te()}),j&&g.jsx("button",{onClick:K,className:"p-1.5 hover:bg-gray-100 rounded-full text-gray-400",children:g.jsx(bi,{className:"w-4 h-4"})}),g.jsxs("button",{onClick:te,disabled:Y||!j.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-xl font-bold text-xs hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[Y?g.jsx(Ts,{className:"w-3 h-3 animate-spin"}):g.jsx(ai,{className:"w-3 h-3"}),Y?"...":""]})]})}),k&&g.jsxs("div",{className:"space-y-3 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"text-lg font-black text-gray-800",children:" "}),g.jsx("button",{onClick:K,className:"text-xs text-gray-500 hover:text-red-500 underline",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:k.map(z=>g.jsx(yC,{rec:z,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,isAdded:W.has(z.id),onAdd:Ie},z.id))}),g.jsx("div",{className:"border-b border-gray-200 my-4"})]}),g.jsxs("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-200 p-1.5 flex mb-2",children:[g.jsxs("button",{onClick:()=>i("my_list"),className:`flex-1 py-3 rounded-[1.2rem] text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="my_list"?"bg-gray-900 text-white shadow-lg":"text-gray-500 hover:bg-gray-50"}`,children:[g.jsx(Uo,{className:"w-4 h-4"}),"  "]}),g.jsxs("button",{onClick:()=>i("recommended"),className:`flex-1 py-3 rounded-[1.2rem] text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="recommended"?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":"text-gray-500 hover:bg-purple-50 hover:text-purple-600"}`,children:[g.jsx(ai,{className:"w-4 h-4"}),"  TOP (AI)"]})]}),r==="map"?g.jsxs("div",{className:"space-y-3",children:[g.jsx("div",{className:"flex justify-end",children:g.jsxs("button",{onClick:()=>a("list"),className:"px-3 py-1.5 rounded-lg flex items-center gap-2 font-bold text-xs bg-gray-100 text-gray-900 transition-all hover:bg-gray-200",children:[g.jsx(YC,{className:"w-3 h-3"}),"  "]})}),g.jsx(mx,{items:ve(),title:t==="my_list"?"  ":" "})]}):g.jsx(g.Fragment,{children:t==="my_list"?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex justify-between items-center mb-1",children:g.jsxs("button",{onClick:()=>a("map"),className:"px-3 py-1.5 rounded-lg flex items-center gap-1 font-bold text-xs bg-white border border-gray-200 text-blue-600 hover:bg-blue-50 transition-all shadow-sm",children:[g.jsx(rl,{className:"w-3 h-3"})," "]})}),g.jsx("div",{className:"mb-2 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>J("all"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${pe==="all"?"bg-gray-900 text-white border-gray-900 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:""}),G.map(z=>g.jsx("button",{onClick:()=>J(z.title),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${pe===z.title?"bg-gray-800 text-white border-gray-800 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:z.title},z.id))]})}),ce.length>0?g.jsx("div",{className:"space-y-4 mt-2",children:ce.map(z=>g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-2 flex items-center justify-between",children:[z.title,g.jsx("span",{className:"text-[10px] font-normal bg-gray-100 px-2 py-0.5 rounded-full text-gray-500",children:z.attractions.length})]}),g.jsx("div",{className:"flex flex-col gap-2",children:[...z.attractions].map(se=>g.jsx(X7,{data:se,onSaveNote:oe=>be(se.id,{notes:oe}),onUpdate:oe=>be(se.id,oe),onDelete:()=>re(se.id)},se.id))})]},z.id))}):g.jsxs("div",{className:"text-center py-10 bg-white rounded-xl border border-dashed border-gray-300 mt-4 flex flex-col items-center justify-center",children:[g.jsx(Uo,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),g.jsx("p",{className:"text-gray-500 text-sm font-bold mb-4",children:"    ."}),g.jsxs("button",{onClick:()=>{i("recommended"),Le()},className:"bg-purple-600 text-white px-6 py-2 rounded-xl font-bold text-xs hover:bg-purple-700 transition-colors shadow-lg flex items-center gap-2",children:[g.jsx(ai,{className:"w-4 h-4"}),"   AI "]})]})]}):g.jsx("div",{className:"animate-fade-in",children:!m&&c.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[g.jsx("div",{className:"bg-purple-100 p-4 rounded-full",children:g.jsx(Ip,{className:"w-8 h-8 text-purple-600"})}),g.jsx("h3",{className:"text-xl font-black text-gray-800",children:"  "}),g.jsxs("button",{onClick:Le,className:"bg-white border-2 border-purple-500 text-purple-600 px-8 py-3 rounded-2xl text-base font-bold shadow-md hover:shadow-lg hover:bg-purple-50 transition-all",children:[n.destination," -   "]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-purple-50 p-3 rounded-xl mb-3 border border-purple-100 flex items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm",children:g.jsx(qC,{className:"w-4 h-4 text-purple-600"})}),g.jsx("div",{children:g.jsx("h3",{className:"text-xs font-black text-purple-900",children:" AI: Travelers' Choice"})})]}),!m&&g.jsxs("button",{onClick:Le,className:"text-[10px] font-bold text-purple-600 bg-white px-2 py-1 rounded shadow-sm flex items-center gap-1",children:[g.jsx(WC,{className:"w-3 h-3"}),"  "]})]}),m?g.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[g.jsx(Ts,{className:"w-8 h-8 text-purple-600 animate-spin mb-2"}),g.jsx("p",{className:"text-sm font-bold text-gray-400",children:"  ,    ..."})]}):x?g.jsx("div",{className:"text-center text-red-500 text-sm font-bold py-4",children:x}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"mb-2 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>V("all"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all flex items-center gap-1 ${O==="all"?"bg-purple-800 text-white border-purple-800 shadow-md":"bg-white text-slate-600 border-slate-200"}`,children:[g.jsx(KC,{className:"w-3 h-3"})," "]}),c.map(z=>g.jsx("button",{onClick:()=>V(z.id),className:`flex-shrink-0 px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap border transition-all ${O===z.id?"bg-purple-800 text-white border-purple-800 shadow-md transform scale-105":"bg-white text-slate-600 border-slate-200 hover:border-slate-300"}`,children:z.title},z.id))]})}),g.jsx("div",{className:"mb-4 overflow-x-auto pb-2 scrollbar-hide",children:g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase flex-shrink-0",children:' ":'}),g.jsx("button",{onClick:()=>Q("all"),className:`flex-shrink-0 px-3 py-1 rounded-full text-[10px] font-bold border transition-all ${P==="all"?"bg-purple-100 text-purple-700 border-purple-200":"bg-white text-slate-500 border-slate-200"}`,children:""}),Qe.map(z=>g.jsx("button",{onClick:()=>Q(z),className:`flex-shrink-0 px-3 py-1 rounded-full text-[10px] font-bold border transition-all ${P===z?"bg-purple-100 text-purple-700 border-purple-200 ring-2 ring-purple-100":"bg-white text-slate-500 border-slate-200"}`,children:z},z))]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Ee.map(z=>g.jsx(yC,{rec:z,tripDestination:n.destination,tripDestinationEnglish:n.destinationEnglish,isAdded:W.has(z.id),onAdd:Ie},z.id))}),Ee.length===0&&g.jsx("div",{className:"text-center py-10",children:g.jsx("p",{className:"text-slate-400 font-bold",children:"   ."})})]})]})})}),S&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",children:g.jsx("div",{className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl",children:g.jsxs("div",{className:"p-6 text-center",children:[g.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"  "}),g.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"-AI      "}),g.jsx("div",{className:"space-y-3",children:$.map(z=>g.jsx("button",{onClick:()=>rt(!0,z),className:"w-full py-4 rounded-xl border-2 border-slate-100 font-bold text-slate-700 hover:border-purple-500 hover:bg-purple-50 hover:text-purple-700 transition-all",children:z},z))}),g.jsx("button",{onClick:()=>N(!1),className:"mt-6 text-xs font-bold text-slate-400 hover:text-slate-600",children:""})]})})})]})},X7=({data:n,onSaveNote:e,onUpdate:t,onDelete:i})=>{const[r,a]=X.useState(!1),[c,f]=X.useState(n.notes||""),[m,p]=X.useState(!1),[x,T]=X.useState(""),[S,N]=X.useState(""),O=k=>k?k.split("/").reverse().join("-"):"",V=k=>k.split("-").reverse().join("/");X.useEffect(()=>{n.scheduledDate&&T(O(n.scheduledDate)),n.scheduledTime&&N(n.scheduledTime)},[n.scheduledDate,n.scheduledTime]);const P=()=>{t({scheduledDate:V(x),scheduledTime:S}),p(!1)},Q=()=>{e(c),a(!1)},W=()=>{t({isFavorite:!n.isFavorite})},H=hh(n.name),j=hh(n.location),Y=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${H} ${j}`)}`,D=()=>{const k=(n.name+" "+(n.description||"")).toLowerCase();return k.includes("museum")||k.includes("art")||k.includes("gallery")?g.jsx(eL,{className:"w-5 h-5 text-amber-600"}):k.includes("nature")||k.includes("park")||k.includes("garden")?g.jsx(pL,{className:"w-5 h-5 text-emerald-600"}):k.includes("beach")||k.includes("sea")||k.includes("island")?g.jsx(HL,{className:"w-5 h-5 text-cyan-600"}):k.includes("shop")||k.includes("mall")||k.includes("market")?g.jsx(Lo,{className:"w-5 h-5 text-pink-600"}):g.jsx(Uo,{className:"w-5 h-5 text-purple-600"})};return g.jsxs("div",{className:`bg-white rounded-xl border p-3 hover:shadow-md transition-all group flex flex-col md:flex-row gap-3 relative overflow-hidden ${n.isFavorite?"border-yellow-200 ring-1 ring-yellow-100":"border-gray-100"}`,children:[g.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3 md:block",children:[g.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-sm bg-gray-50 text-gray-500 ring-1 ring-gray-100",children:D()}),g.jsx("div",{className:"md:hidden font-bold text-gray-900",dir:"ltr",children:n.name})]}),g.jsxs("div",{className:"flex-grow min-w-0",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"hidden md:flex flex-col",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:W,className:"focus:outline-none",children:g.jsx(Ec,{className:`w-4 h-4 transition-all ${n.isFavorite?"text-yellow-400 fill-yellow-400 scale-110":"text-slate-300 hover:text-yellow-400"}`})}),g.jsx("h4",{className:"text-sm font-bold text-gray-900 leading-tight",dir:"ltr",children:n.name}),n.rating&&g.jsxs("div",{className:"flex items-center bg-yellow-50 px-1 py-0.5 rounded border border-yellow-100",children:[g.jsx("span",{className:"text-[9px] font-bold text-yellow-700",children:n.rating}),g.jsx(Ec,{className:"w-2 h-2 text-yellow-600 fill-current mr-0.5"})]})]}),g.jsx("p",{className:"text-gray-500 text-[10px] mt-0.5 leading-snug line-clamp-1",children:n.description}),g.jsxs("div",{className:"flex gap-2 mt-1",children:[n.recommendationSource&&g.jsxs("div",{className:"inline-flex items-center text-[9px] font-bold text-purple-700 bg-purple-50 px-1.5 py-0.5 rounded border border-purple-100 w-fit",children:[g.jsx(Rp,{className:"w-2 h-2 mr-1"})," ",n.recommendationSource]}),n.price&&g.jsxs("div",{className:"inline-flex items-center text-[9px] font-bold text-slate-700 bg-slate-50 px-1.5 py-0.5 rounded border border-slate-200 w-fit",children:[g.jsx(Np,{className:"w-2 h-2 mr-1"})," ",n.price]})]}),g.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-[9px] text-gray-400",children:[g.jsx(Xa,{className:"w-2 h-2"})," ",n.location]})]}),g.jsxs("div",{className:"flex items-center gap-1 pl-1 ml-auto md:ml-0",children:[g.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-gray-400 hover:text-blue-600 bg-gray-50 rounded-lg text-[10px] flex items-center gap-1 font-bold",children:[g.jsx(rl,{className:"w-3 h-3"}),"  "]}),g.jsx("button",{onClick:()=>p(!m),className:`p-1.5 rounded-lg border ${n.scheduledDate?"bg-purple-50 text-purple-600 border-purple-100":"bg-gray-50 text-gray-400 border-transparent"}`,children:g.jsx(Za,{className:"w-3.5 h-3.5"})}),g.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-600 bg-gray-50 rounded-lg",children:g.jsx(Xr,{className:"w-3.5 h-3.5"})})]})]}),g.jsx("div",{className:"md:hidden mt-2 text-xs text-gray-500",children:n.description}),m&&g.jsxs("div",{className:"mt-2 bg-purple-50 p-2 rounded-lg border border-purple-100 flex items-center gap-2",children:[g.jsx("input",{type:"date",value:x,onChange:k=>T(k.target.value),className:"w-full p-1 rounded border border-purple-200 text-xs"}),g.jsx("input",{type:"time",value:S,onChange:k=>N(k.target.value),className:"w-full p-1 rounded border border-purple-200 text-xs"}),g.jsx("button",{onClick:P,className:"bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold whitespace-nowrap",children:""})]}),!m&&n.scheduledDate&&g.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[9px] font-bold text-purple-700 bg-purple-50 w-fit px-2 py-0.5 rounded border border-purple-100",children:[g.jsx($C,{className:"w-2.5 h-2.5"})," ",n.scheduledDate," ",n.scheduledTime]}),g.jsx("div",{className:"mt-1",children:r?g.jsxs("div",{className:"bg-yellow-50 p-1.5 rounded-lg border border-yellow-200",children:[g.jsx("textarea",{className:"w-full bg-transparent border-none outline-none text-xs text-gray-800 resize-none",rows:1,placeholder:"...",value:c,onChange:k=>f(k.target.value)}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>a(!1),className:"text-[9px] text-gray-500",children:""}),g.jsx("button",{onClick:Q,className:"text-[9px] bg-yellow-400 text-yellow-900 px-2 py-0.5 rounded font-bold",children:""})]})]}):g.jsxs("div",{onClick:()=>a(!0),className:`px-2 py-1 rounded-lg border text-[10px] flex items-center gap-1 cursor-pointer transition-colors ${n.notes?"bg-yellow-50 border-yellow-100 text-yellow-900":"bg-gray-50 border-dashed border-gray-200 text-gray-400"}`,children:[g.jsx(G0,{className:`w-3 h-3 flex-shrink-0 ${n.notes?"text-yellow-600":"text-gray-400"}`}),g.jsx("span",{className:"line-clamp-1",children:n.notes||" ..."})]})})]})]})},Ba=n=>{if(!n)return null;let e=null;if(n.includes("/")){const t=n.split("/");e=new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0]),12,0,0)}else if(n.includes("-")){const t=n.split("-");t[0].length===4?e=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]),12,0,0):t[2].length===4&&(e=new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0]),12,0,0))}else e=new Date(n),e.setHours(12,0,0,0);return e&&!isNaN(e.getTime())?e:null},vC=n=>n.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),xC=n=>` ${["","","","","","",""][n.getDay()]}`,wC=({trip:n,onUpdateTrip:e,onSwitchTab:t})=>{const[i,r]=X.useState([]),[a,c]=X.useState(""),[f,m]=X.useState(null),[p,x]=X.useState(null),[T,S]=X.useState([]);X.useEffect(()=>{(()=>{var te,K,Le,rt,fe,Ie,Ee,Qe;let j=new Date;j.setHours(12,0,0,0);let Z=new Date;if(Z.setDate(j.getDate()+7),Z.setHours(12,0,0,0),n.dates){const pe=n.dates.split("-").map(J=>J.trim());if(pe.length===2){const J=Ba(pe[0]),ce=Ba(pe[1]);J&&ce&&(j=J,Z=ce)}}const Y=new Map,D=new Date(j);for(;D<=Z;){const pe=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}-${D.getDate().toString().padStart(2,"0")}`;Y.set(pe,{dateIso:pe,displayDate:vC(D),displayDayOfWeek:xC(D),locationContext:"",events:[],stats:{food:0,attr:0,flight:0,travel:0},hasHotel:!1}),D.setDate(D.getDate()+1)}const k=(pe,J)=>{var re;const ce=Ba(pe);if(!ce)return;const be=`${ce.getFullYear()}-${(ce.getMonth()+1).toString().padStart(2,"0")}-${ce.getDate().toString().padStart(2,"0")}`;Y.has(be)||Y.set(be,{dateIso:be,displayDate:vC(ce),displayDayOfWeek:xC(ce),locationContext:"",events:[],stats:{food:0,attr:0,flight:0,travel:0},hasHotel:!1}),(re=Y.get(be))==null||re.events.push(J)};(K=(te=n.flights)==null?void 0:te.segments)==null||K.forEach(pe=>{k(pe.date,{id:`flight-dep-${pe.flightNumber}`,type:"flight",time:pe.departureTime,title:` ${pe.toCity||pe.toCode||""}`,subtitle:`: ${pe.airline} ${pe.flightNumber}`,location:`${pe.fromCode}  ${pe.toCode}`,icon:bs,colorClass:"text-blue-600",bgClass:"bg-blue-50 border-blue-100"});const J=Ba(pe.date);if(J){const ce=`${J.getFullYear()}-${(J.getMonth()+1).toString().padStart(2,"0")}-${J.getDate().toString().padStart(2,"0")}`,be=Y.get(ce);be&&(be.locationContext="")}}),(Le=n.hotels)==null||Le.forEach(pe=>{const J=pe.googleMapsUrl||`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pe.name+" "+pe.address)}`;k(pe.checkInDate,{id:`hotel-in-${pe.id}`,type:"hotel_checkin",time:"14:00",title:`Check-in: ${pe.name}`,location:pe.address,icon:ws,colorClass:"text-indigo-600",bgClass:"bg-indigo-50 border-indigo-100",externalLink:J}),k(pe.checkOutDate,{id:`hotel-out-${pe.id}`,type:"hotel_checkout",time:"11:00",title:`Check-out: ${pe.name}`,icon:ws,colorClass:"text-slate-500",bgClass:"bg-slate-50 border-slate-100",externalLink:J});const ce=Ba(pe.checkInDate),be=Ba(pe.checkOutDate),re=pe.address?pe.address.split(",")[0].trim():pe.name;if(ce&&be){const ve=new Date(ce);for(;ve<=be;){const z=`${ve.getFullYear()}-${(ve.getMonth()+1).toString().padStart(2,"0")}-${ve.getDate().toString().padStart(2,"0")}`,se=Y.get(z);if(se){const oe=ve.getTime()===be.getTime();if(oe||(se.hasHotel=!0),(!se.locationContext||se.locationContext==="")&&(se.locationContext=re),!(ve.getTime()===ce.getTime())&&!oe){const Fe=`stay-${pe.id}-${z}`;se.events.find(yt=>yt.id===Fe)||se.events.unshift({id:Fe,type:"hotel_stay",time:"",title:` -${pe.name}`,location:pe.address,icon:IT,colorClass:"text-indigo-500",bgClass:"bg-indigo-50/30 border-indigo-100",externalLink:J})}}ve.setDate(ve.getDate()+1)}}}),(rt=n.restaurants)==null||rt.forEach(pe=>pe.restaurants.forEach(J=>{J.reservationDate&&k(J.reservationDate,{id:J.id,type:"food",time:J.reservationTime||"20:00",title:J.name,subtitle:J.cuisine,location:J.location,icon:qa,colorClass:"text-orange-600",bgClass:"bg-orange-50 border-orange-100"})})),(fe=n.attractions)==null||fe.forEach(pe=>pe.attractions.forEach(J=>{J.scheduledDate&&k(J.scheduledDate,{id:J.id,type:"attraction",time:J.scheduledTime||"10:00",title:J.name,price:J.price,location:J.location,icon:Uo,colorClass:"text-purple-600",bgClass:"bg-purple-50 border-purple-100"})})),(Ie=n.itinerary)==null||Ie.forEach(pe=>{pe.activities.forEach((J,ce)=>{const be=J.match(/^(\d{1,2}:\d{2})\s*-?\s*(.*)/),re=be?be[1]:"",ve=be?be[2]:J;let z="activity",se=ai,oe="text-emerald-600",Me="bg-emerald-50 border-emerald-100";const Fe=ve.toLowerCase();Fe.includes("")||Fe.includes("flight")?(z="flight",se=bs,oe="text-blue-600",Me="bg-blue-50 border-blue-100"):(Fe.includes("")||Fe.includes("driver")||Fe.includes("")||Fe.includes("transfer"))&&(z="travel",se=hc,oe="text-gray-600",Me="bg-gray-50 border-gray-100"),k(pe.date,{id:`manual-${pe.id}-${ce}`,type:z,time:re,title:ve,icon:se,colorClass:oe,bgClass:Me,isManual:!0,dayId:pe.id,activityIndex:ce})})});const U=Array.from(Y.values()).sort((pe,J)=>pe.dateIso.localeCompare(J.dateIso)),G=n.destinationEnglish||n.destination.split("-")[0].trim();U.forEach(pe=>{pe.locationContext||(pe.hasHotel,pe.locationContext=G),pe.events.sort((J,ce)=>J.type==="hotel_stay"&&!J.time?-1:ce.type==="hotel_stay"&&!ce.time?1:(J.time||"00:00").localeCompare(ce.time||"00:00")),pe.stats={food:pe.events.filter(J=>J.type==="food").length,attr:pe.events.filter(J=>J.type==="attraction").length,flight:pe.events.filter(J=>J.type==="flight").length,travel:pe.events.filter(J=>J.type==="travel").length}}),r(U),!a&&U.length>0&&c(U[0].dateIso);const $=[];(Qe=(Ee=n.flights)==null?void 0:Ee.segments)==null||Qe.forEach(pe=>{const J=Ba(pe.date);if(J){const ce=`${J.getFullYear()}-${(J.getMonth()+1).toString().padStart(2,"0")}-${J.getDate().toString().padStart(2,"0")}`,be=Y.get(ce);be&&!be.events.some(re=>re.type==="travel")&&$.push({id:`flight-transfer-${pe.flightNumber}`,type:"warning",title:" ",description:` -${pe.date}.   ?`,actionLabel:"",action:()=>x({date:pe.date,defaultTime:pe.departureTime}),icon:hc})}}),S($)})()},[n]);const N=X.useMemo(()=>i.find(H=>H.dateIso===a),[i,a]),O=(H,j)=>{let Z=j;if(!Z&&N){const[k,U,G]=N.dateIso.split("-");Z=`${G}/${U}/${k}`}if(!Z)return;let Y=[...n.itinerary],D=Y.findIndex(k=>k.date===Z);D===-1?Y.push({id:`day-${Date.now()}`,day:0,date:Z,title:" ",activities:[H]}):Y[D].activities.push(H),e({...n,itinerary:Y}),m(null)},V=(H,j)=>{if(!window.confirm("  ?"))return;const Z=n.itinerary.map(Y=>Y.id===H?{...Y,activities:Y.activities.filter((D,k)=>k!==j)}:Y);e({...n,itinerary:Z})},P=H=>{if(H.preventDefault(),!p)return;const j=new FormData(H.target),Z=j.get("description"),Y=j.get("time"),D=j.get("price"),k=j.get("notes"),U=`${Y} ${Z} ${k?`- ${k}`:""}`;let G=[...n.itinerary];const $=p.date;let te=G.findIndex(Le=>Le.date===$);if(te===-1){const Le=Ba($);if(Le){const rt=Le.toLocaleDateString("en-GB");te=G.findIndex(fe=>fe.date===rt),te===-1?G.push({id:`day-${Date.now()}`,day:0,date:rt,title:" ",activities:[U]}):G[te]={...G[te],activities:[...G[te].activities,U]}}else G.push({id:`day-${Date.now()}`,day:0,date:$,title:" ",activities:[U]})}else G[te]={...G[te],activities:[...G[te].activities,U]};let K=n.expenses||[];if(D){const Le=parseFloat(D);!isNaN(Le)&&Le>0&&(K=[...K,{id:`exp-${Date.now()}`,title:Z||"",amount:Le,category:"transport"}])}e({...n,itinerary:G,expenses:K}),x(null)},Q=()=>{const H=prompt("   :");H&&e({...n,coverImage:H})},W=X.useMemo(()=>{var H,j,Z,Y,D;return{flights:((j=(H=n.flights)==null?void 0:H.segments)==null?void 0:j.length)||0,hotels:((Z=n.hotels)==null?void 0:Z.length)||0,restaurants:((Y=n.restaurants)==null?void 0:Y.reduce((k,U)=>k+U.restaurants.length,0))||0,attractions:((D=n.attractions)==null?void 0:D.reduce((k,U)=>k+U.attractions.length,0))||0}},[n]);return g.jsxs("div",{className:"space-y-6 animate-fade-in pb-24",children:[g.jsxs("div",{className:"relative h-[220px] rounded-[2rem] overflow-hidden shadow-xl group mx-1",children:[g.jsx("img",{src:n.coverImage||"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&q=80",className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105",alt:"Trip Cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/90 via-slate-900/40 to-transparent"}),g.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex flex-col md:flex-row justify-between items-end gap-4",children:[g.jsxs("div",{className:"space-y-1 max-w-xl",children:[g.jsxs("div",{className:"flex items-center gap-3 text-white/80 font-bold text-xs uppercase tracking-widest bg-white/10 backdrop-blur-md px-3 py-1 rounded-full w-fit border border-white/20",children:[g.jsx(Za,{className:"w-3.5 h-3.5"})," ",n.dates]}),g.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white leading-tight tracking-tight drop-shadow-md",children:n.name}),g.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-white/90",children:[g.jsx(Xa,{className:"w-4 h-4 text-blue-400"})," ",n.destination]})]}),g.jsxs("div",{className:"hidden md:flex gap-6 bg-white/10 backdrop-blur-xl border border-white/20 p-4 rounded-3xl",children:[g.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[g.jsx(bs,{className:"w-8 h-8 text-blue-400 mb-1"}),g.jsx("span",{className:"text-3xl font-black text-white leading-none",children:W.flights}),g.jsx("span",{className:"text-[10px] text-white/80 font-bold uppercase tracking-wide mt-1",children:""})]}),g.jsx("div",{className:"w-px bg-white/20"}),g.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[g.jsx(ws,{className:"w-8 h-8 text-indigo-400 mb-1"}),g.jsx("span",{className:"text-3xl font-black text-white leading-none",children:W.hotels}),g.jsx("span",{className:"text-[10px] text-white/80 font-bold uppercase tracking-wide mt-1",children:""})]}),g.jsx("div",{className:"w-px bg-white/20"}),g.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[g.jsx(qa,{className:"w-8 h-8 text-orange-400 mb-1"}),g.jsx("span",{className:"text-3xl font-black text-white leading-none",children:W.restaurants}),g.jsx("span",{className:"text-[10px] text-white/80 font-bold uppercase tracking-wide mt-1",children:""})]}),g.jsx("div",{className:"w-px bg-white/20"}),g.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[g.jsx(Uo,{className:"w-8 h-8 text-purple-400 mb-1"}),g.jsx("span",{className:"text-3xl font-black text-white leading-none",children:W.attractions}),g.jsx("span",{className:"text-[10px] text-white/80 font-bold uppercase tracking-wide mt-1",children:""})]})]})]}),g.jsx("button",{onClick:Q,className:"absolute top-4 left-4 p-2 bg-black/40 hover:bg-black/60 backdrop-blur-md rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(xL,{className:"w-4 h-4"})})]}),T.length>0&&g.jsxs("div",{className:"px-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[g.jsx(ai,{className:"w-5 h-5 text-purple-600 animate-pulse"}),g.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"   "})]}),g.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:T.map(H=>g.jsxs("div",{className:"min-w-[280px] bg-white rounded-2xl border border-slate-200 p-4 shadow-sm hover:shadow-md transition-all relative overflow-hidden group",children:[g.jsx("div",{className:`absolute top-0 right-0 w-1.5 h-full ${H.type==="warning"?"bg-red-500":"bg-blue-500"}`}),g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:`p-2.5 rounded-xl ${H.type==="warning"?"bg-red-50 text-red-600":"bg-purple-50 text-purple-600"}`,children:g.jsx(H.icon,{className:"w-5 h-5"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:H.title}),g.jsx("p",{className:"text-xs text-slate-500 leading-snug mb-3",children:H.description}),g.jsxs("button",{onClick:H.action,className:"text-xs font-bold bg-slate-50 hover:bg-slate-100 text-slate-700 px-3 py-1.5 rounded-lg flex items-center gap-1 transition-colors",children:[H.actionLabel," ",g.jsx(ph,{className:"w-3 h-3"})]})]})]})]},H.id))})]}),g.jsx("div",{className:"relative px-2",children:g.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:i.length===0?g.jsx("div",{className:"col-span-full text-center text-slate-400 py-4",children:" ..."}):i.map(H=>{const j=a===H.dateIso;return g.jsxs("button",{onClick:()=>c(H.dateIso),className:`flex flex-col items-center justify-between py-2 px-1 rounded-xl border-2 transition-all duration-200 h-20 relative overflow-hidden ${j?"bg-slate-900 border-slate-900 text-white shadow-lg scale-105 z-10":"bg-white border-slate-100 text-slate-500 hover:border-slate-300 hover:bg-slate-50"}`,children:[H.hasHotel&&!j&&g.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 bg-indigo-500 rounded-full shadow-sm ring-1 ring-white"}),g.jsx("div",{className:`text-[9px] font-black uppercase tracking-wider mb-0.5 px-1 rounded w-full text-center line-clamp-2 leading-tight ${j?"text-blue-200":"text-slate-400"}`,children:H.locationContext.split(" ")[0]||""}),g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("span",{className:"text-lg font-black leading-none",children:H.displayDate.split(" ")[0]}),g.jsx("span",{className:"text-[9px] font-bold uppercase opacity-80",children:H.displayDate.split(" ")[1]})]}),g.jsxs("div",{className:"flex gap-0.5 mt-1 h-1",children:[H.stats.flight>0&&g.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-400"}),H.stats.food>0&&g.jsx("div",{className:"w-1 h-1 rounded-full bg-orange-400"}),H.stats.attr>0&&g.jsx("div",{className:"w-1 h-1 rounded-full bg-purple-400"})]})]},H.dateIso)})})}),N?g.jsxs("div",{className:"animate-fade-in px-2",children:[g.jsxs("div",{className:"flex justify-between items-end mb-6",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-bold uppercase tracking-widest mb-1",children:[g.jsx(Za,{className:"w-4 h-4"})," ",N.displayDayOfWeek,", ",N.displayDate]}),g.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 flex items-center gap-2",children:N.locationContext||" "})]}),g.jsxs("button",{onClick:()=>m("open"),className:"bg-slate-900 text-white px-5 py-3 rounded-xl font-bold text-sm shadow-md hover:bg-slate-800 flex items-center gap-2 transition-transform hover:scale-105",children:[g.jsx(Er,{className:"w-4 h-4"})," "]})]}),N.events.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.events.map((H,j)=>g.jsxs("div",{className:`p-5 rounded-[1.5rem] border shadow-sm transition-all hover:shadow-md flex flex-col justify-between h-full min-h-[160px] relative overflow-hidden group ${H.bgClass}`,children:[g.jsx("div",{className:`absolute -right-4 -top-4 w-28 h-28 rounded-full opacity-10 ${H.colorClass.replace("text-","bg-")}`}),H.isManual&&H.dayId&&H.activityIndex!==void 0&&g.jsx("button",{onClick:()=>V(H.dayId,H.activityIndex),className:"absolute top-3 left-3 p-1.5 bg-white/70 hover:bg-red-100 text-slate-400 hover:text-red-600 rounded-lg transition-colors z-20 backdrop-blur-sm",title:" ",children:g.jsx(Xr,{className:"w-4 h-4"})}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[H.time?g.jsx("span",{className:"font-mono text-xs font-black bg-white/80 px-2 py-1 rounded-lg backdrop-blur-sm shadow-sm border border-black/5",children:H.time}):g.jsx("div",{}),g.jsx(H.icon,{className:`w-6 h-6 ${H.colorClass}`})]}),g.jsx("h3",{className:"text-xl font-black text-slate-900 leading-tight mb-1",children:H.title}),H.subtitle&&g.jsx("p",{className:"text-xs font-bold text-slate-500 mb-3",children:H.subtitle}),g.jsxs("div",{className:"mt-auto flex items-end justify-between pt-4",children:[g.jsxs("div",{className:"flex flex-wrap gap-2",children:[H.location&&g.jsxs("div",{className:"flex items-center text-[10px] font-bold text-slate-500 bg-white/60 px-2 py-1 rounded-lg backdrop-blur-sm",children:[g.jsx(Xa,{className:"w-3 h-3 ml-1"})," ",H.location]}),H.price&&g.jsxs("div",{className:"flex items-center text-[10px] font-bold text-slate-500 bg-white/60 px-2 py-1 rounded-lg backdrop-blur-sm",children:[g.jsx(Uo,{className:"w-3 h-3 ml-1"})," ",H.price]})]}),H.externalLink&&g.jsxs("a",{href:H.externalLink,target:"_blank",rel:"noopener noreferrer",className:"bg-slate-900 text-white px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 hover:bg-slate-700 shadow-md transition-all hover:scale-105",children:[g.jsx(Ip,{className:"w-3 h-3"})," "]})]})]})]},`${H.id}-${j}`))}):g.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white border border-slate-200 rounded-[2.5rem] p-8 shadow-sm",children:[g.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[g.jsx("div",{className:"bg-white p-4 rounded-full shadow-sm mb-3",children:g.jsx(fL,{className:"w-10 h-10 text-slate-400"})}),g.jsx("h3",{className:"text-2xl font-black text-slate-800",children:N.hasHotel?`  ${N.locationContext}`:" "}),g.jsx("p",{className:"text-slate-500 font-medium text-sm",children:" .     ?"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("button",{onClick:()=>O(" "),className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all text-right group",children:[g.jsx("div",{className:"bg-indigo-50 w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:bg-indigo-100 text-indigo-600",children:g.jsx(IT,{className:"w-5 h-5"})}),g.jsx("div",{className:"font-bold text-slate-800",children:" "}),g.jsx("div",{className:"text-xs text-slate-500",children:' " " "'})]}),g.jsxs("button",{onClick:()=>t&&t("attractions"),className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:border-purple-200 transition-all text-right group",children:[g.jsx("div",{className:"bg-purple-50 w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:bg-purple-100 text-purple-600",children:g.jsx(Uo,{className:"w-5 h-5"})}),g.jsx("div",{className:"font-bold text-slate-800",children:" "}),g.jsx("div",{className:"text-xs text-slate-500",children:"  "})]}),g.jsxs("button",{onClick:()=>t&&t("restaurants"),className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:border-orange-200 transition-all text-right group",children:[g.jsx("div",{className:"bg-orange-50 w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange-100 text-orange-600",children:g.jsx(qa,{className:"w-5 h-5"})}),g.jsx("div",{className:"font-bold text-slate-800",children:" ?"}),g.jsx("div",{className:"text-xs text-slate-500",children:"  "})]})]})]})]}):g.jsx("div",{className:"flex items-center justify-center h-40 text-slate-400 font-bold",children:" ..."}),f&&g.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-[2rem] p-6 w-full max-w-md shadow-2xl relative overflow-hidden",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 relative z-10",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-black text-slate-800",children:' "'}),g.jsxs("p",{className:"text-xs text-slate-400 font-bold",children:[N==null?void 0:N.displayDayOfWeek,", ",N==null?void 0:N.displayDate]})]}),g.jsx("button",{onClick:()=>m(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsx("input",{autoFocus:!0,placeholder:": 19:00  ",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-lg text-slate-800 placeholder:text-slate-300 relative z-10",onKeyDown:H=>{H.key==="Enter"&&O(H.currentTarget.value)}}),g.jsx("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2 relative z-10 no-scrollbar",children:[" "," "," "," "," "].map(H=>g.jsx("button",{onClick:()=>O(`${H} ...`),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl text-xs font-bold text-slate-600 whitespace-nowrap transition-colors",children:H},H))})]})}),p&&g.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:g.jsxs("form",{onSubmit:P,className:"bg-white rounded-[2rem] p-6 w-full max-w-md shadow-2xl relative overflow-hidden",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[g.jsx(hc,{className:"w-6 h-6 text-emerald-600"}),"  "]}),g.jsx("button",{type:"button",onClick:()=>x(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{name:"description",defaultValue:" ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-emerald-500"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{name:"time",type:"time",defaultValue:p.defaultTime,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-emerald-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:" ()"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{name:"price",type:"number",placeholder:"0",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-emerald-500 pl-8"}),g.jsx(Np,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3.5"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:" /  "}),g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{name:"notes",placeholder:" , ,  ...",rows:3,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-medium text-slate-800 outline-none focus:border-emerald-500 resize-none pl-10"}),g.jsx(KL,{className:"w-5 h-5 text-slate-400 absolute left-3 top-3"})]})]}),g.jsxs("button",{type:"submit",className:"w-full py-3 bg-emerald-600 text-white rounded-xl font-bold shadow-lg hover:bg-emerald-700 transition-all mt-2 flex items-center justify-center gap-2",children:[g.jsx(hc,{className:"w-5 h-5"}),"  "]})]})]})})]})},Q7=n=>{const e=(n||"").toLowerCase();return e.includes("bangkok")||e.includes("bkk")?"https://images.unsplash.com/photo-1590523741831-ab7e8b8f9c7f?auto=format&fit=crop&q=80":e.includes("phuket")?"https://images.unsplash.com/photo-1589394815804-964ed0be2eb5?auto=format&fit=crop&q=80":e.includes("samui")||e.includes("koh samui")?"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&q=80":e.includes("pattaya")?"https://images.unsplash.com/photo-1598970434795-0c54fe7c0648?auto=format&fit=crop&q=80":e.includes("chiang mai")?"https://images.unsplash.com/photo-1598135753163-6167c1a1ad65?auto=format&fit=crop&q=80":e.includes("krabi")?"https://images.unsplash.com/photo-1552465011-b4e21bf6e79a?auto=format&fit=crop&q=80":e.includes("koh chang")?"https://images.unsplash.com/photo-1559530432-62dc0442c549?auto=format&fit=crop&q=80":e.includes("tao")||e.includes("koh tao")?"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&q=80":e.includes("london")||e.includes("uk")?"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?auto=format&fit=crop&q=80":e.includes("paris")||e.includes("france")?"https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&q=80":e.includes("rome")||e.includes("italy")?"https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&q=80":e.includes("barcelona")||e.includes("spain")?"https://images.unsplash.com/photo-1583422409516-2895a77efded?auto=format&fit=crop&q=80":e.includes("new york")||e.includes("nyc")?"https://images.unsplash.com/photo-1496442226666-8d4a0e62e6e9?auto=format&fit=crop&q=80":e.includes("beach")||e.includes("resort")||e.includes("island")?"https://images.unsplash.com/photo-1540541338287-41700207dee6?auto=format&fit=crop&q=80":"https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?auto=format&fit=crop&q=80"},eG=({trip:n,onUpdateTrip:e})=>{const{hotels:t}=n,[i,r]=X.useState(!1),[a,c]=X.useState(!1),[f,m]=X.useState(null),p=(P,Q)=>{const W=(n.hotels||[]).map(H=>H.id===P?{...H,notes:Q}:H);e({...n,hotels:W})},x=(P,Q)=>{const W=(n.hotels||[]).map(H=>H.id===P?{...H,locationVibe:Q}:H);e({...n,hotels:W})},T=P=>{if(window.confirm("      ?")){const Q=(n.hotels||[]).filter(W=>W.id!==P);e({...n,hotels:Q})}},S=P=>{m(P),r(!0)},N=()=>{m(null),r(!0)},O=P=>{const Q=[...n.hotels||[],{...P,id:`h-${Date.now()}`}];e({...n,hotels:Q}),c(!1)},V=P=>{let Q=[...n.hotels||[]];f?Q=Q.map(W=>W.id===P.id?P:W):Q.push({...P,id:`h-${Date.now()}`}),e({...n,hotels:Q}),r(!1),m(null)};return g.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[t&&t.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[g.jsxs("h2",{className:"text-3xl font-extrabold text-slate-800 flex items-center tracking-tight",children:[g.jsx("span",{className:"bg-indigo-100 p-2 rounded-xl ml-3 text-indigo-600 shadow-sm",children:g.jsx(ws,{className:"w-7 h-7"})})," "]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("button",{onClick:()=>c(!0),className:"flex-1 md:flex-none bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-5 py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-md hover:shadow-lg",children:[g.jsx(ai,{className:"w-5 h-5"}),"   (AI)"]}),g.jsxs("button",{onClick:N,className:"flex-1 md:flex-none bg-white text-indigo-600 border border-indigo-100 px-5 py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-all hover:bg-indigo-50",children:[g.jsx(Er,{className:"w-5 h-5"})," "]})]})]}),g.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.map((P,Q)=>g.jsx(tG,{data:P,onSaveNote:W=>p(P.id,W),onSaveVibe:W=>x(P.id,W),onDelete:()=>T(P.id),onEdit:()=>S(P)},P.id||Q))})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-8",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 bg-indigo-200 rounded-full blur-3xl opacity-20 animate-pulse"}),g.jsx("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-2xl shadow-indigo-100 relative z-10 transform -rotate-3 transition-transform hover:rotate-0 duration-500 border border-indigo-50",children:g.jsx(ws,{className:"w-24 h-24 text-indigo-500",strokeWidth:1.5})})]}),g.jsxs("div",{className:"space-y-3 max-w-md",children:[g.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:" ?"}),g.jsx("p",{className:"text-slate-500 text-lg font-medium leading-relaxed",children:"   .       -AI   ."})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full max-w-sm md:max-w-none justify-center",children:[g.jsxs("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-xl shadow-indigo-200 hover:shadow-2xl hover:-translate-y-1 transition-all flex items-center justify-center gap-3",children:[g.jsx(ai,{className:"w-6 h-6"}),"    (AI)"]}),g.jsxs("button",{onClick:N,className:"bg-white text-slate-600 border border-slate-200 px-8 py-4 rounded-2xl font-bold text-lg hover:bg-slate-50 transition-all flex items-center justify-center gap-3",children:[g.jsx(Er,{className:"w-6 h-6"}),"  "]})]})]}),i&&g.jsx(nG,{initialData:f,onClose:()=>r(!1),onSave:V}),a&&g.jsx(iG,{onClose:()=>c(!1),onSave:O})]})},tG=({data:n,onSaveNote:e,onSaveVibe:t,onDelete:i,onEdit:r})=>{const[a,c]=X.useState(!1),[f,m]=X.useState(n.notes||""),[p,x]=X.useState(!1),T=()=>{e(f),c(!1)},S=async()=>{x(!0);try{const O=Sr(),V=`Analyze location: "${n.name}", "${n.address}". Short Hebrew "Vibe Check" (max 15 words). e.g. ",  ,  ".`,P=await Ar(O,V);P.text&&t(P.text)}catch(O){console.error(O)}finally{x(!1)}},N=n.imageUrl||Q7(n.address||n.name);return g.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 overflow-hidden shadow-sm hover:shadow-xl transition-all flex flex-col md:flex-row group relative",children:[g.jsxs("div",{className:"absolute top-4 left-4 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:r,className:"bg-white/90 p-2 rounded-xl text-slate-600 hover:text-blue-600 shadow-md backdrop-blur-sm",children:g.jsx(OL,{className:"w-4 h-4"})}),g.jsx("button",{onClick:i,className:"bg-white/90 p-2 rounded-xl text-slate-600 hover:text-red-600 shadow-md backdrop-blur-sm",children:g.jsx(Xr,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"md:w-1/3 h-56 md:h-auto relative bg-slate-100",children:[g.jsx("img",{src:N,alt:n.name,className:"w-full h-full object-cover"}),g.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 items-end",children:[g.jsxs("div",{className:"bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs font-bold text-slate-800 shadow-sm flex items-center",children:[g.jsx(GC,{className:"w-3 h-3 ml-1 text-green-500"}),n.bookingSource]}),n.breakfastIncluded&&g.jsxs("div",{className:"bg-orange-100/90 backdrop-blur px-3 py-1 rounded-full text-xs font-bold text-orange-700 shadow-sm flex items-center",children:[g.jsx(OD,{className:"w-3 h-3 ml-1"})," "]})]})]}),g.jsxs("div",{className:"p-6 md:w-2/3 flex flex-col justify-between",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-start pl-10",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-1",children:n.name}),g.jsxs("div",{className:"flex items-start text-sm text-slate-500 mb-4 font-medium",children:[g.jsx(Xa,{className:"w-4 h-4 ml-1 flex-shrink-0 mt-0.5 text-slate-400"}),n.address]})]}),n.confirmationCode&&g.jsxs("span",{className:"text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200",children:["#",n.confirmationCode]})]}),n.cancellationPolicy&&g.jsxs("div",{className:"mb-3 text-xs text-red-500 bg-red-50 px-3 py-2 rounded-xl border border-red-100 flex items-start gap-2",children:[g.jsx(XC,{className:"w-4 h-4 flex-shrink-0"}),g.jsx("span",{className:"font-bold",children:n.cancellationPolicy})]}),g.jsx("div",{className:"mb-4",children:n.locationVibe?g.jsxs("div",{className:"bg-purple-50 border border-purple-100 p-3 rounded-2xl flex items-start gap-3",children:[g.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm",children:g.jsx(ai,{className:"w-4 h-4 text-purple-600"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-[10px] font-bold text-purple-700 uppercase mb-0.5",children:"  (AI)"}),g.jsx("p",{className:"text-sm text-purple-900 leading-snug font-medium",children:n.locationVibe})]})]}):g.jsxs("button",{onClick:S,disabled:p,className:"flex items-center gap-2 text-xs font-bold text-purple-600 hover:bg-purple-50 px-3 py-2 rounded-xl transition-colors border border-dashed border-purple-200 w-full justify-center",children:[p?g.jsx(Ts,{className:"w-3 h-3 animate-spin"}):g.jsx(ai,{className:"w-3 h-3"}),p?"...":" -Vibe  ?"]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[g.jsxs("div",{className:"bg-indigo-50 p-3 rounded-2xl border border-indigo-100",children:[g.jsx("div",{className:"text-[10px] text-indigo-600 font-bold uppercase mb-1",children:"' "}),g.jsxs("div",{className:"font-bold text-slate-900 flex items-center text-lg",children:[g.jsx(Za,{className:"w-4 h-4 ml-2 text-indigo-400"}),n.checkInDate]})]}),g.jsxs("div",{className:"bg-slate-50 p-3 rounded-2xl border border-slate-200",children:[g.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase mb-1",children:"' "}),g.jsxs("div",{className:"font-bold text-slate-900 flex items-center text-lg",children:[g.jsx(Za,{className:"w-4 h-4 ml-2 text-slate-400"}),n.checkOutDate]})]})]})]}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-dashed border-slate-200 flex items-center justify-between",children:[a?g.jsxs("div",{className:"flex-grow bg-yellow-50 p-2 rounded-xl border border-yellow-200 mr-4",children:[g.jsx("textarea",{className:"w-full bg-transparent border-none outline-none text-sm text-slate-800 resize-none",rows:1,placeholder:" ...",value:f,onChange:O=>m(O.target.value)}),g.jsxs("div",{className:"flex justify-end gap-2 mt-1",children:[g.jsx("button",{onClick:()=>c(!1),className:"text-xs text-slate-500",children:""}),g.jsx("button",{onClick:T,className:"text-xs bg-yellow-400 text-yellow-900 px-2 py-0.5 rounded font-bold",children:""})]})]}):g.jsxs("div",{onClick:()=>c(!0),className:`flex-grow p-2 rounded-xl border text-xs flex items-center gap-2 cursor-pointer transition-colors mr-4 ${n.notes?"bg-yellow-50 border-yellow-100 text-yellow-900 hover:bg-yellow-100":"bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100 border-dashed border-slate-200"}`,children:[g.jsx(G0,{className:`w-3.5 h-3.5 flex-shrink-0 ${n.notes?"text-yellow-600":"text-slate-400"}`}),g.jsx("span",{className:"truncate font-medium",children:n.notes||" "})]}),n.googleMapsUrl&&g.jsxs("a",{href:n.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[g.jsx(jD,{className:"w-4 h-4"})," "]})]})]})]})},nG=({initialData:n,onClose:e,onSave:t})=>{const[i,r]=X.useState(n||{name:"",address:"",checkInDate:"",checkOutDate:"",bookingSource:"Direct",price:""}),a=m=>(m==null?void 0:m.split("/").reverse().join("-"))||"",c=m=>m.split("-").reverse().join("/"),f=m=>{m.preventDefault(),t(i)};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-lg shadow-2xl overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-100 flex justify-between items-center",children:[g.jsx("h3",{className:"text-xl font-black text-slate-800",children:"  "}),g.jsx("button",{onClick:e,children:g.jsx(bi,{className:"w-6 h-6 text-slate-400"})})]}),g.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[g.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 rounded-2xl font-bold text-lg outline-none focus:ring-2 focus:ring-indigo-100",placeholder:" ",value:i.name,onChange:m=>r({...i,name:m.target.value})}),g.jsx("input",{className:"w-full p-4 bg-slate-50 rounded-2xl font-medium outline-none focus:ring-2 focus:ring-indigo-100",placeholder:"",value:i.address,onChange:m=>r({...i,address:m.target.value})}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("input",{type:"date",className:"w-full p-4 bg-slate-50 rounded-2xl outline-none",value:a(i.checkInDate),onChange:m=>r({...i,checkInDate:c(m.target.value)})}),g.jsx("input",{type:"date",className:"w-full p-4 bg-slate-50 rounded-2xl outline-none",value:a(i.checkOutDate),onChange:m=>r({...i,checkOutDate:c(m.target.value)})})]}),g.jsx("div",{className:"flex items-center gap-4 bg-indigo-50 p-4 rounded-2xl",children:g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",className:"w-5 h-5",checked:i.breakfastIncluded||!1,onChange:m=>r({...i,breakfastIncluded:m.target.checked})}),g.jsx("span",{className:"font-bold text-indigo-900",children:"  ?"})]})}),g.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-xl shadow-indigo-200 hover:scale-[1.02] transition-transform",children:""})]})]})})},iG=({onClose:n,onSave:e})=>{const[t,i]=X.useState(""),[r,a]=X.useState(!1),c=X.useRef(null),f=async(m,p)=>{a(!0);try{const x=Sr(),T=[{text:`Extract a SINGLE Hotel Booking from this content.
                Return JSON in 'HotelBooking' format: { name, address, checkInDate (DD/MM/YYYY), checkOutDate (DD/MM/YYYY), bookingSource, price, roomType, confirmationCode, breakfastIncluded (boolean), cancellationPolicy (string) }.
                If details are missing, omit them or guess logically.`}];if(m&&T.push({text:`Text: ${m}`}),p)for(let O=0;O<p.length;O++){const V=p[O],P=new FileReader,W=await new Promise(H=>{V.type==="text/plain"?(P.onload=()=>H({text:P.result}),P.readAsText(V)):(P.onload=()=>H({inlineData:{mimeType:V.type,data:P.result.split(",")[1]}}),P.readAsDataURL(V))});T.push(W)}const S=await Ar(x,{role:"user",parts:T},{responseMimeType:"application/json"}),N=JSON.parse(S.text);e(N)}catch(x){console.error(x),alert("  .")}finally{a(!1)}};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-lg shadow-2xl overflow-hidden flex flex-col relative",children:[g.jsxs("div",{className:"bg-indigo-50 p-6 border-b border-indigo-100 flex justify-between items-center",children:[g.jsxs("h3",{className:"text-xl font-black text-indigo-900 flex items-center gap-2",children:[g.jsx(ai,{className:"w-5 h-5"}),"  "]}),g.jsx("button",{onClick:n,children:g.jsx(bi,{className:"w-6 h-6 text-indigo-300 hover:text-indigo-600"})})]}),g.jsx("div",{className:"p-6 space-y-6",children:r?g.jsxs("div",{className:"py-10 text-center",children:[g.jsx(Ts,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),g.jsx("p",{className:"font-bold text-slate-500",children:"-AI    ..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("textarea",{className:"w-full h-32 p-4 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:border-indigo-500 resize-none font-medium",placeholder:"       ...",value:t,onChange:m=>i(m.target.value)}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"h-px bg-slate-200 flex-grow"}),g.jsx("span",{className:"text-xs font-bold text-slate-400",children:""}),g.jsx("div",{className:"h-px bg-slate-200 flex-grow"})]}),g.jsxs("div",{onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},className:"border-2 border-dashed border-indigo-200 bg-indigo-50/50 rounded-2xl p-6 flex flex-col items-center cursor-pointer hover:bg-indigo-50 transition-colors",children:[g.jsx(eu,{className:"w-8 h-8 text-indigo-400 mb-2"}),g.jsx("span",{className:"font-bold text-indigo-700 text-sm",children:"    PDF"}),g.jsx("input",{type:"file",multiple:!0,className:"hidden",ref:c,onChange:m=>m.target.files&&f("",m.target.files)})]}),g.jsx("button",{onClick:()=>f(t),disabled:!t.trim(),className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-xl shadow-indigo-200 hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})})]})})},sG=({activeTrip:n,onUpdate:e})=>{const[t,i]=X.useState(!1),[r,a]=X.useState(!1),[c,f]=X.useState(null),m=X.useRef(null),p=async T=>{a(!0),f(null);try{const S=Sr(),N=["image/png","image/jpeg","image/webp","application/pdf","text/plain"],O=[".txt",".md",".json",".csv"],V=Array.from(T).map(Z=>{const Y=N.includes(Z.type)&&Z.type==="text/plain"||O.some(D=>Z.name.endsWith(D));return new Promise(D=>{const k=new FileReader;Y?(k.onloadend=()=>{D({data:k.result,mimeType:"text/plain",name:Z.name,isText:!0})},k.readAsText(Z)):(k.onloadend=()=>{const U=k.result.split(",")[1];D({data:U,mimeType:Z.type,name:Z.name,isText:!1})},k.readAsDataURL(Z))})}),P=await Promise.all(V),Q=[{text:`You are an AI assistant for a travel app. Analyze the provided documents and update this trip object: ${JSON.stringify(n)}. 
        Extract flights, hotels, or just add the filename to the 'documents' list. 
        If you see text from a document, interpret it as travel details (itinerary, hotel name, flight).
        Return ONLY a JSON object with the full updated trip.`}];P.forEach(Z=>{Z.isText?Q.push({text:`Text Document (${Z.name}):
${Z.data}`}):N.includes(Z.mimeType)&&Q.push({inlineData:{mimeType:Z.mimeType,data:Z.data}})});const W=await Ar(S,{role:"user",parts:Q},{responseMimeType:"application/json"}),H=JSON.parse(W.text),j=P.map(Z=>Z.name);H.documents=Array.from(new Set([...H.documents||[],...j])),e(H),f({type:"success",message:"    !"}),setTimeout(()=>f(null),4e3)}catch(S){console.error("Magic Drop Error:",S),f({type:"error",message:",    .   , PDF   (.txt)."})}finally{a(!1),i(!1)}},x=T=>{T.preventDefault(),T.dataTransfer.files&&T.dataTransfer.files.length>0&&p(T.dataTransfer.files)};return g.jsxs("div",{onDragOver:T=>{T.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:x,className:`relative mb-8 rounded-[2rem] border-4 border-dashed transition-all duration-300 overflow-hidden ${t?"border-blue-500 bg-blue-50 scale-[1.01]":"border-gray-200 bg-white hover:border-blue-300"}`,children:[g.jsx("input",{type:"file",multiple:!0,className:"hidden",ref:m,onChange:T=>T.target.files&&p(T.target.files),accept:"image/*,application/pdf,text/plain"}),g.jsx("div",{className:"p-10 flex flex-col items-center justify-center text-center cursor-pointer",onClick:()=>{var T;return(T=m.current)==null?void 0:T.click()},children:r?g.jsxs("div",{className:"flex flex-col items-center animate-pulse",children:[g.jsx(Ts,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),g.jsx("p",{className:"text-blue-700 font-black text-xl",children:"-AI    ..."})]}):c?g.jsxs("div",{className:`flex items-center gap-4 font-black text-xl ${c.type==="success"?"text-green-600":"text-red-600"}`,children:[c.type==="success"?g.jsx(GC,{className:"w-10 h-10"}):g.jsx(q0,{className:"w-10 h-10"}),c.message]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"bg-blue-100 p-5 rounded-[1.5rem] text-blue-600 mb-4 group-hover:scale-110 transition-transform",children:g.jsx(ai,{className:"w-10 h-10"})}),g.jsx("h3",{className:"text-gray-800 font-black text-2xl",children:"  (Magic Upload)"}),g.jsx("p",{className:"text-gray-500 text-lg mt-2 font-bold italic",children:", PDF    (.txt)"}),g.jsxs("div",{className:"mt-6 flex items-center gap-3 text-blue-600 text-sm font-black uppercase tracking-widest bg-blue-50 px-6 py-2 rounded-full border border-blue-100 shadow-sm",children:[g.jsx(eu,{className:"w-5 h-5"}),"     "]})]})})]})},ic=n=>{if(!n)return"";if(n.match(/^\d{4}-\d{2}-\d{2}$/))return n;if(n.includes("/")){const t=n.split("/");if(t.length===3)return`${t[2]}-${t[1]}-${t[0]}`}const e=new Date(n);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]},bC=n=>{if(!n)return"";if(n.includes("-")){const[e,t,i]=n.split("-");return`${i}/${t}/${e}`}return n},rG=({data:n,onSave:e,onClose:t})=>{var J,ce,be,re,ve;const[i,r]=X.useState(n),[a,c]=X.useState(((J=n[0])==null?void 0:J.id)||""),[f,m]=X.useState(!1),[p,x]=X.useState(!1),T=X.useRef(null),[S,N]=X.useState([]),[O,V]=X.useState(""),[P,Q]=X.useState(""),[W,H]=X.useState("");X.useEffect(()=>{r(n),n.length>0&&!n.find(z=>z.id===a)&&c(n[0].id)},[n]);const j=i.find(z=>z.id===a)||i[0];X.useEffect(()=>{if(j)if(j.destination?N(j.destination.split(" - ").map(z=>z.trim()).filter(Boolean)):N([]),j.dates&&j.dates.includes("-")){const z=j.dates.split("-").map(se=>se.trim());Q(ic(z[0])),H(ic(z[1]))}else Q(""),H("")},[a,i]);const Z=z=>{const se=i.map(oe=>oe.id===a?{...oe,...z}:oe);r(se)},Y=()=>{if(!O.trim())return;const z=[...S,O.trim()];N(z),V(""),Z({destination:z.join(" - ")})},D=z=>{const se=S.filter((oe,Me)=>Me!==z);N(se),Z({destination:se.join(" - ")})},k=(z,se)=>{let oe=P,Me=W;if(z==="start"?(Q(se),oe=se):(H(se),Me=se),oe&&Me){const Fe=`${bC(oe)} - ${bC(Me)}`;Z({dates:Fe})}},U=(z,se)=>{if(z.stopPropagation(),window.confirm("        .  ?")){const oe=i.filter(Me=>Me.id!==se);if(oe.length===0){const Me={id:`t-${Date.now()}`,name:" ",dates:"",destination:" ",coverImage:"",flights:{passengerName:"",pnr:"",segments:[]},hotels:[],restaurants:[],attractions:[],itinerary:[],documents:[]};oe.push(Me)}r(oe),a===se&&c(oe[0].id),e(oe)}},G=z=>{var se;if((se=j.flights)!=null&&se.segments&&window.confirm("    ?")){const oe=j.flights.segments.filter((Me,Fe)=>Fe!==z);Z({flights:{...j.flights,segments:oe}})}},$=(z,se,oe)=>{var yt;const Me=[...((yt=j.flights)==null?void 0:yt.segments)||[]];let Fe=oe;Me[z]={...Me[z],[se]:Fe},Z({flights:{...j.flights,segments:Me}})},te=z=>{if(window.confirm("   ?")){const se=j.hotels.filter(oe=>oe.id!==z);Z({hotels:se})}},K=(z,se,oe)=>{const Me=j.hotels.map(Fe=>Fe.id===z?{...Fe,[se]:oe}:Fe);Z({hotels:Me})},Le=z=>{const se=[...i,z];r(se),c(z.id),m(!1),e(se)},rt=async z=>{if(!z.hotels.some(oe=>!oe.googleMapsUrl||!oe.address||oe.address.length<5))return z;try{const oe=Sr(),Me=z.hotels.map(Ft=>({id:Ft.id,name:Ft.name,knownAddress:Ft.address})),Fe=`
          I have a trip to ${z.destination}.
          Here is a list of hotels: ${JSON.stringify(Me)}.
          For each hotel, find the Official Name, Full Address, and a Google Maps URL.
          Return a JSON object with an array "hotels" containing { id, name, address, googleMapsUrl }.
          Only return valid JSON.
          `,yt=await Ar(oe,Fe,{responseMimeType:"application/json"}),dt=JSON.parse(yt.text||"{}");if(dt.hotels&&Array.isArray(dt.hotels)){const Ft=z.hotels.map(kt=>{const mn=dt.hotels.find(tt=>tt.id===kt.id);return mn?{...kt,name:mn.name||kt.name,address:mn.address||kt.address,googleMapsUrl:mn.googleMapsUrl||kt.googleMapsUrl}:kt});return{...z,hotels:Ft}}}catch(oe){console.error("Hotel Enrichment Failed",oe)}return z},fe=async()=>{x(!0);const z=await rt(j),se=i.map(oe=>oe.id===a?z:oe);e(se),x(!1),t()},Ie=()=>{const z=JSON.stringify(j,null,2),se=new Blob([z],{type:"application/json"}),oe=URL.createObjectURL(se),Me=document.createElement("a");Me.href=oe,Me.download=`trip_backup_${j.destination}_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)},Ee=z=>{var Me;const se=(Me=z.target.files)==null?void 0:Me[0];if(!se)return;const oe=new FileReader;oe.onload=Fe=>{var yt;try{const dt=JSON.parse((yt=Fe.target)==null?void 0:yt.result);if(!dt.id||!dt.itinerary){alert("  ");return}const Ft={...dt,id:`imported-${Date.now()}`,name:`${dt.name} ()`},kt=[...i,Ft];r(kt),c(Ft.id),e(kt),alert("  !")}catch(dt){console.error(dt),alert("  ")}},oe.readAsText(se),T.current&&(T.current.value="")},Qe=()=>{var dt,Ft,kt,mn;const z=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Travel Planner Pro//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"],se=tt=>tt.toISOString().replace(/[-:]/g,"").split(".")[0],oe=(tt,qt,vt,mt,zt,En=!1)=>{if(z.push("BEGIN:VEVENT"),z.push(`UID:${Date.now()}-${Math.random().toString(36).substr(2,9)}@travelplanner.app`),z.push(`DTSTAMP:${se(new Date)}Z`),En){z.push(`DTSTART;VALUE=DATE:${se(mt).substring(0,8)}`);const ci=new Date(zt);ci.setDate(ci.getDate()+1),z.push(`DTEND;VALUE=DATE:${se(ci).substring(0,8)}`)}else z.push(`DTSTART:${se(mt)}`),z.push(`DTEND:${se(zt)}`);z.push(`SUMMARY:${tt}`),z.push(`DESCRIPTION:${qt}`),z.push(`LOCATION:${vt}`),z.push("END:VEVENT")},Me=(tt,qt="00:00")=>{try{let vt=null;const mt=tt==null?void 0:tt.trim(),zt=qt==null?void 0:qt.trim();if(!mt)return null;if(mt.match(/^\d{4}-\d{2}-\d{2}$/))vt=new Date(`${mt}T${zt}:00`);else if(mt.includes("/")){const[En,ci,oo]=mt.split("/");vt=new Date(parseInt(oo),parseInt(ci)-1,parseInt(En));const[Ln,Xs]=zt.split(":").map(Number);vt.setHours(Ln||0,Xs||0)}else vt=new Date(`${mt} ${zt}`);return vt&&!isNaN(vt.getTime())?vt:null}catch{return null}};(Ft=(dt=j.flights)==null?void 0:dt.segments)==null||Ft.forEach(tt=>{const qt=Me(tt.date,tt.departureTime),vt=Me(tt.date,tt.arrivalTime);qt&&vt&&vt<qt&&vt.setDate(vt.getDate()+1),qt&&vt&&oe(`  ${tt.toCity} (${tt.flightNumber})`,`  ${tt.airline}
 : ${tt.flightNumber}
: ${tt.duration}
PNR: ${j.flights.pnr}`,`${tt.fromCity} Airport`,qt,vt)}),(kt=j.hotels)==null||kt.forEach(tt=>{const qt=Me(tt.checkInDate,"14:00"),vt=Me(tt.checkOutDate,"11:00");if(qt){const mt=new Date(qt);mt.setHours(15,0),oe(` '-: ${tt.name}`,`: ${tt.address}
: ${tt.confirmationCode||"N/A"}`,tt.address,qt,mt)}if(vt){const mt=new Date(vt);mt.setHours(10,0),oe(` '-: ${tt.name}`,`: ${tt.address}`,tt.address,mt,vt)}}),(mn=j.itinerary)==null||mn.forEach(tt=>{tt.activities.forEach(qt=>{const vt=qt.match(/^(\d{1,2}:\d{2})\s*-?\s*(.*)/),mt=vt?vt[1]:"09:00",zt=vt?vt[2]:qt,En=Me(tt.date,mt);if(En){const ci=new Date(En);ci.setHours(ci.getHours()+1),oe(` ${zt}`," ",j.destination,En,ci,!vt)}})}),z.push("END:VCALENDAR");const Fe=new Blob([z.join(`\r
`)],{type:"text/calendar;charset=utf-8"}),yt=document.createElement("a");yt.href=window.URL.createObjectURL(Fe),yt.setAttribute("download",`trip_itinerary_${j.destination}.ics`),document.body.appendChild(yt),yt.click(),document.body.removeChild(yt)},pe=z=>{const se={...j,...z,documents:[...j.documents||[],...z.documents||[]].filter((Me,Fe,yt)=>yt.indexOf(Me)===Fe),hotels:[...j.hotels||[],...z.hotels||[]]};Z(se);const oe=i.map(Me=>Me.id===a?se:Me);e(oe)};return g.jsx("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center md:pb-6 md:px-4 bg-slate-50 md:bg-gray-900/60 md:backdrop-blur-sm animate-fade-in overflow-hidden",children:g.jsxs("div",{className:"bg-white w-full h-full md:h-auto md:max-h-[90vh] md:w-full md:max-w-7xl md:rounded-[2rem] md:shadow-2xl overflow-hidden flex flex-col relative",children:[g.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 border-b border-slate-100 flex justify-between items-center flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-blue-600 p-2 md:p-2.5 rounded-xl text-white shadow-lg",children:g.jsx(ZD,{className:"w-5 h-5 md:w-6 md:h-6"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-800",children:" "}),g.jsx("p",{className:"hidden md:block text-xs text-slate-500 font-bold uppercase tracking-wider",children:" ,    "})]})]}),g.jsx("button",{onClick:t,className:"bg-white p-2 rounded-full border border-slate-200 text-slate-400 hover:text-slate-600 hover:bg-slate-50 transition-colors shadow-sm",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden relative",children:[g.jsxs("div",{className:"hidden md:flex w-full md:w-64 bg-slate-50 border-l border-slate-200 flex-col flex-shrink-0 overflow-y-auto",children:[g.jsxs("div",{className:"p-4 space-y-2",children:[g.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:" "}),i.map(z=>g.jsxs("div",{className:"group relative",children:[g.jsxs("button",{onClick:()=>c(z.id),className:`w-full text-right px-4 py-3 rounded-xl border-2 font-bold text-sm transition-all flex items-center justify-between ${a===z.id?"border-blue-600 bg-white text-blue-700 shadow-md":"border-transparent hover:bg-white text-slate-600"}`,children:[g.jsx("span",{className:"truncate",children:z.name}),a===z.id&&g.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),g.jsx("button",{onClick:se=>U(se,z.id),className:"absolute top-3 left-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Xr,{className:"w-4 h-4"})})]},z.id)),g.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 rounded-xl border-2 border-dashed border-slate-300 text-slate-400 font-bold text-sm hover:border-blue-400 hover:text-blue-500 hover:bg-blue-50 flex items-center justify-center gap-2 mt-2",children:[g.jsx(Er,{className:"w-4 h-4"}),"  "]})]}),g.jsxs("div",{className:"mt-auto p-4 border-t border-slate-200 space-y-2",children:[g.jsxs("button",{onClick:Qe,className:"w-full py-2 bg-blue-50 border border-blue-100 rounded-xl text-xs font-bold text-blue-600 hover:bg-blue-100 flex items-center justify-center gap-2",children:[g.jsx(xD,{className:"w-3 h-3"}),"  "]}),g.jsxs("button",{onClick:Ie,className:"w-full py-2 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 hover:bg-slate-50 flex items-center justify-center gap-2",children:[g.jsx(JC,{className:"w-3 h-3"}),"  "]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"file",accept:".json",className:"hidden",ref:T,onChange:Ee}),g.jsxs("button",{onClick:()=>{var z;return(z=T.current)==null?void 0:z.click()},className:"w-full py-2 bg-indigo-50 border border-indigo-100 rounded-xl text-xs font-bold text-indigo-600 hover:bg-indigo-100 flex items-center justify-center gap-2",children:[g.jsx(eu,{className:"w-3 h-3"}),"  "]})]})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8 bg-white",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("div",{className:"bg-purple-100 p-1.5 rounded-lg",children:g.jsx(ai,{className:"w-4 h-4 text-purple-600"})}),g.jsx("h3",{className:"font-bold text-purple-900 text-sm",children:"  (/)"})]}),g.jsx(sG,{activeTrip:j,onUpdate:pe})]}),g.jsx("div",{className:"h-px bg-slate-100 w-full"}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("h3",{className:"font-black text-xl text-slate-800 flex items-center gap-2",children:[g.jsx(yL,{className:"w-5 h-5 text-blue-500"}),"  "]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-[11px] font-bold text-slate-400 block mb-1 uppercase",children:" "}),g.jsx("input",{className:"w-full p-3 rounded-xl border border-slate-200 font-bold text-lg text-slate-800 focus:ring-2 focus:ring-blue-100 outline-none transition-shadow bg-slate-50 focus:bg-white",value:j.name,onChange:z=>Z({name:z.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-[11px] font-bold text-slate-400 block mb-1 uppercase",children:"  (URL)"}),g.jsx("input",{className:"w-full p-3 rounded-xl border border-slate-200 font-medium text-sm text-slate-600 focus:ring-2 focus:ring-blue-100 outline-none bg-slate-50 focus:bg-white",value:j.coverImage,onChange:z=>Z({coverImage:z.target.value})})]})]}),g.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-2xl border border-blue-100 space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-bold text-sm",children:[g.jsx(Za,{className:"w-4 h-4"}),"  "]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] font-bold text-blue-400 block mb-1",children:""}),g.jsx("input",{type:"date",className:"w-full p-2 bg-white border border-blue-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:border-blue-500",value:P,onChange:z=>k("start",z.target.value)})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] font-bold text-blue-400 block mb-1",children:""}),g.jsx("input",{type:"date",className:"w-full p-2 bg-white border border-blue-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:border-blue-500",value:W,onChange:z=>k("end",z.target.value)})]})]}),g.jsx("p",{className:"text-[10px] text-blue-400 text-center",children:j.dates})]})]}),g.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[g.jsxs("label",{className:"text-xs font-black text-slate-500 mb-3 block flex items-center gap-2",children:[g.jsx(Xa,{className:"w-4 h-4"}),"   ( )"]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[S.map((z,se)=>g.jsxs("div",{className:"flex items-center bg-white border border-slate-200 pl-1 pr-3 py-1.5 rounded-lg shadow-sm group hover:border-red-200 transition-colors",children:[g.jsx("span",{className:"text-sm font-bold text-slate-700",children:z}),g.jsx("button",{onClick:()=>D(se),className:"ml-2 p-1 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors",children:g.jsx(bi,{className:"w-3 h-3"})}),se<S.length-1&&g.jsx(ph,{className:"w-3 h-3 text-slate-300 mr-2 -ml-4 opacity-0"})]},se)),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{placeholder:"  ()",className:"bg-transparent border-b-2 border-slate-200 px-2 py-1 text-sm font-medium focus:border-blue-500 outline-none w-32 focus:w-48 transition-all",value:O,onChange:z=>V(z.target.value),onKeyDown:z=>z.key==="Enter"&&Y()}),g.jsx("button",{onClick:Y,className:"p-1 text-blue-500 hover:bg-blue-50 rounded-full ml-1",children:g.jsx(Er,{className:"w-4 h-4"})})]})]}),g.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-400 font-mono bg-white p-2 rounded border border-slate-100 inline-block",children:j.destination||"  "})]})]}),g.jsx("div",{className:"h-px bg-slate-100 w-full"}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[g.jsx("span",{className:"bg-indigo-100 p-1.5 rounded-lg text-indigo-600",children:g.jsx(ws,{className:"w-4 h-4"})})," "]}),g.jsx("button",{onClick:()=>Z({hotels:[...j.hotels,{id:`h-${Date.now()}`,name:" ",address:"",checkInDate:"",checkOutDate:"",nights:0}]}),className:"text-[10px] font-bold bg-indigo-50 text-indigo-600 px-2 py-1 rounded-lg hover:bg-indigo-100",children:"+ "})]}),g.jsx("datalist",{id:"trip-cities-list",children:S.map((z,se)=>g.jsx("option",{value:z},se))}),g.jsxs("div",{className:"space-y-3",children:[(ce=j.hotels)==null?void 0:ce.map((z,se)=>g.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("input",{className:"font-bold text-sm text-slate-800 w-full outline-none bg-transparent placeholder-slate-300 focus:border-b focus:border-indigo-300",value:z.name,placeholder:"  (-AI   )",onChange:oe=>K(z.id,"name",oe.target.value)}),g.jsx("button",{onClick:()=>te(z.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Xr,{className:"w-4 h-4"})})]}),g.jsx("input",{className:"text-xs text-slate-500 w-full outline-none bg-transparent mb-3 border-b border-transparent focus:border-slate-200",value:z.address,placeholder:" /  (   )",list:"trip-cities-list",onChange:oe=>K(z.id,"address",oe.target.value)}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-slate-50 p-2 rounded-lg",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Check-in"}),g.jsx("input",{type:"date",className:"w-full bg-transparent text-[11px] font-bold text-slate-700 outline-none",value:ic(z.checkInDate),onChange:oe=>K(z.id,"checkInDate",oe.target.value)})]}),g.jsxs("div",{className:"border-r border-slate-200 pr-2",children:[g.jsx("label",{className:"text-[9px] font-bold text-slate-400 block",children:"Check-out"}),g.jsx("input",{type:"date",min:ic(z.checkInDate),className:"w-full bg-transparent text-[11px] font-bold text-slate-700 outline-none",value:ic(z.checkOutDate),onChange:oe=>K(z.id,"checkOutDate",oe.target.value)})]})]})]},z.id||se)),(!j.hotels||j.hotels.length===0)&&g.jsx("div",{className:"text-center py-6 text-slate-400 text-xs bg-slate-50 rounded-xl border border-dashed border-slate-200",children:"  "})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[g.jsx("span",{className:"bg-blue-100 p-1.5 rounded-lg text-blue-600",children:g.jsx(bs,{className:"w-4 h-4"})})," "]}),g.jsx("button",{onClick:()=>Z({flights:{...j.flights,segments:[...j.flights.segments||[],{fromCode:"TLV",toCode:"NYC",date:"",flightNumber:"",airline:"",departureTime:"",arrivalTime:"",duration:"",fromCity:"",toCity:""}]}}),className:"text-[10px] font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded-lg hover:bg-blue-100",children:"+ "})]}),g.jsxs("div",{className:"space-y-3",children:[(re=(be=j.flights)==null?void 0:be.segments)==null?void 0:re.map((z,se)=>g.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group relative",children:[g.jsx("button",{onClick:()=>G(se),className:"absolute top-2 left-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100",children:g.jsx(Xr,{className:"w-3 h-3"})}),g.jsxs("div",{className:"flex items-center gap-2 mb-3 justify-center",children:[g.jsx("input",{className:"w-12 text-center font-black text-lg bg-slate-50 rounded border-transparent focus:border-blue-300 border outline-none uppercase",value:z.fromCode,onChange:oe=>$(se,"fromCode",oe.target.value),placeholder:"TLV"}),g.jsx(ph,{className:"w-4 h-4 text-slate-300"}),g.jsx("input",{className:"w-12 text-center font-black text-lg bg-slate-50 rounded border-transparent focus:border-blue-300 border outline-none uppercase",value:z.toCode,onChange:oe=>$(se,"toCode",oe.target.value),placeholder:"NYC"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"text-[9px] text-slate-400 absolute -top-1.5 right-2 bg-white px-1 font-bold",children:""}),g.jsx("input",{type:"date",className:"w-full bg-white border border-slate-200 rounded px-2 py-2 text-xs font-medium outline-none focus:border-blue-300",value:ic(z.date),onChange:oe=>$(se,"date",oe.target.value)})]}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"text-[9px] text-slate-400 absolute -top-1.5 right-2 bg-white px-1 font-bold",children:" "}),g.jsx("input",{className:"w-full bg-white border border-slate-200 rounded px-2 py-2 text-xs font-medium outline-none focus:border-blue-300",value:z.flightNumber,onChange:oe=>$(se,"flightNumber",oe.target.value),placeholder:" LY001"})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{className:"flex-1 bg-white border border-slate-200 rounded px-2 py-1 text-xs font-medium outline-none",value:z.departureTime,onChange:oe=>$(se,"departureTime",oe.target.value),placeholder:"Dep Time"}),g.jsx("input",{className:"flex-1 bg-white border border-slate-200 rounded px-2 py-1 text-xs font-medium outline-none",value:z.arrivalTime,onChange:oe=>$(se,"arrivalTime",oe.target.value),placeholder:"Arr Time"})]})]},se)),(!((ve=j.flights)!=null&&ve.segments)||j.flights.segments.length===0)&&g.jsx("div",{className:"text-center py-6 text-slate-400 text-xs bg-slate-50 rounded-xl border border-dashed border-slate-200",children:"  "})]})]})]}),g.jsx("div",{className:"pt-6",children:g.jsx("button",{onClick:fe,disabled:p,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-xl shadow-slate-300 hover:bg-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:p?g.jsxs(g.Fragment,{children:[g.jsx(Ts,{className:"w-5 h-5 animate-spin"}),"  ..."]}):g.jsxs(g.Fragment,{children:[g.jsx(NL,{className:"w-5 h-5"})," "]})})})]})]}),f&&g.jsx("div",{className:"absolute inset-0 z-50 bg-white",children:g.jsx(oG,{onFinish:Le,onCancel:()=>m(!1)})})]})})},oG=({onFinish:n,onCancel:e})=>{var T;const[t,i]=X.useState(0),[r,a]=X.useState({name:"",dates:"",destination:"",coverImage:""}),c=[{title:"  ?",desc:"    -  ' '  ' '",icon:Xa,color:"bg-blue-600",field:"name"},{title:" ?",desc:"    (: 15-22.1.2025)",icon:Za,color:"bg-purple-600",field:"dates"},{title:" ?",desc:"   ? (: , ,  )",icon:bs,color:"bg-orange-500",field:"destination"}],f=()=>{if(t<c.length-1)i(t+1);else{const S={id:`t-${Date.now()}`,name:r.name||" ",dates:r.dates,destination:r.destination||" ",coverImage:r.coverImage||"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&q=80",flights:{passengerName:"",pnr:"",segments:[]},hotels:[],restaurants:[],attractions:[],itinerary:[],documents:[]};n(S)}},m=(T=c[t])==null?void 0:T.field,p=m?r[m]:"",x=p.trim().length>0;return g.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-6 animate-fade-in",children:g.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden relative border border-white/20 flex flex-col max-h-[90vh]",children:[g.jsx("button",{onClick:e,className:"absolute top-6 right-6 z-10 p-2 bg-white/20 hover:bg-black/10 rounded-full transition-colors",children:g.jsx(bi,{className:"w-6 h-6 text-slate-800"})}),g.jsxs("div",{className:`transition-all duration-500 overflow-hidden relative flex flex-col items-center justify-center h-72 ${c[t].color}`,children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/20"}),g.jsx("div",{className:"relative z-10 bg-white/20 backdrop-blur-md p-4 rounded-full shadow-2xl border border-white/30 mb-2 animate-scale-in",children:V0.createElement(c[t].icon,{className:"w-16 h-16 text-white drop-shadow-md"})}),g.jsx("div",{className:"absolute bottom-6 flex gap-2",children:c.map((S,N)=>g.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${N===t?"w-8 bg-white":"w-2 bg-white/40"}`},N))})]}),g.jsxs("div",{className:"p-8 text-center flex flex-col flex-grow",children:[g.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight leading-tight",children:c[t].title}),g.jsx("p",{className:"text-slate-500 font-medium text-lg leading-relaxed mb-6",children:c[t].desc}),g.jsx("input",{type:"text",value:p,onChange:S=>a({...r,[m]:S.target.value}),placeholder:c[t].field==="name"?" ...":c[t].field==="dates"?"...":"...",className:"w-full px-6 py-4 rounded-2xl border-2 border-slate-200 focus:border-blue-500 focus:outline-none text-lg text-center font-medium transition-all",autoFocus:!0}),g.jsxs("div",{className:"mt-auto pt-6 space-y-3",children:[g.jsx("button",{onClick:f,disabled:!x,className:`w-full py-4 rounded-2xl font-bold text-xl text-white shadow-xl transition-all hover:scale-[1.02] hover:shadow-2xl flex items-center justify-center gap-2 ${c[t].color} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,children:t<c.length-1?g.jsxs(g.Fragment,{children:[" ",g.jsx(ph,{className:"w-5 h-5 rotate-180"})]}):g.jsxs(g.Fragment,{children:["  ",g.jsx(ai,{className:"w-5 h-5"})]})}),t>0&&g.jsxs("button",{onClick:()=>i(t-1),className:"w-full py-3 rounded-2xl font-medium text-slate-600 hover:bg-slate-100 transition-all flex items-center justify-center gap-2",children:[g.jsx(ph,{className:"w-4 h-4"})," "]})]})]})]})})},D0=n=>{if(!n)return 0;const e=n.match(/(\d[\d,.]*)/);return e?parseFloat(e[0].replace(/,/g,"")):0},aG=({trip:n,onUpdateTrip:e})=>{const[t,i]=X.useState(!1),[r,a]=X.useState({title:"",amount:0,category:"other"}),[c,f]=X.useState(null),m=X.useMemo(()=>{var j;let S=0,N=((j=n.flights)==null?void 0:j.totalPrice)||0,O=0,V=0,P=0,Q=0,W=0;return n.hotels.forEach(Z=>{S+=Z.costNumeric||D0(Z.price)}),n.attractions.forEach(Z=>{Z.attractions.forEach(Y=>{O+=Y.costNumeric||D0(Y.price)})}),n.restaurants.forEach(Z=>{Z.restaurants.forEach(Y=>{V+=Y.estimatedCost||0})}),n.shoppingItems&&n.shoppingItems.forEach(Z=>{P+=Z.price}),n.expenses&&n.expenses.forEach(Z=>{Z.category==="food"?V+=Number(Z.amount):Z.category==="shopping"?P+=Number(Z.amount):Z.category==="transport"?Q+=Number(Z.amount):W+=Number(Z.amount)}),{total:S+N+O+V+P+Q+W,breakdown:[{id:"flights",label:"",amount:N,icon:bs,color:"bg-blue-500",isInteractive:!0},{id:"hotels",label:"",amount:S,icon:ws,color:"bg-indigo-500",isInteractive:!0},{id:"transport",label:"",amount:Q,icon:hc,color:"bg-emerald-500"},{id:"attractions",label:"",amount:O,icon:Uo,color:"bg-purple-500"},{id:"food",label:"",amount:V,icon:qa,color:"bg-orange-500"},{id:"shopping",label:"",amount:P,icon:Lo,color:"bg-pink-500"},{id:"other",label:"",amount:W,icon:nh,color:"bg-gray-500"}]}},[n]),p=()=>{if(!r.title||!r.amount||!e)return;const S={id:`exp-${Date.now()}`,title:r.title,amount:Number(r.amount),category:r.category||"other"},N={...n,expenses:[...n.expenses||[],S]};e(N),a({title:"",amount:0,category:"other"}),i(!1)},x=S=>{if(!e)return;const N={...n,expenses:(n.expenses||[]).filter(O=>O.id!==S)};e(N)},T=n.currency==="USD"?"$":"";return g.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:"bg-green-100 p-3 rounded-2xl text-green-600",children:g.jsx(nh,{className:"w-8 h-8"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black text-gray-800",children:" "}),g.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"     "})]})]}),g.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-[2rem] p-6 text-white shadow-xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/5 rounded-full -mr-10 -mt-10 blur-3xl"}),g.jsxs("div",{className:"relative z-10 flex flex-col justify-between items-start gap-4",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-widest text-xs",children:'"  '}),g.jsxs("div",{className:"text-4xl font-black mt-1 flex items-baseline gap-1",children:[m.total.toLocaleString(),g.jsx("span",{className:"text-xl text-gray-400",children:T})]})]}),n.budgetLimit&&g.jsxs("div",{className:"w-full",children:[g.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-1",children:[g.jsx("span",{children:" "}),g.jsxs("span",{children:[n.budgetLimit.toLocaleString()," ",T]})]}),g.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${m.total>n.budgetLimit?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(m.total/n.budgetLimit*100,100)}%`}})})]})]})]}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:m.breakdown.map(S=>g.jsxs("div",{onClick:()=>{S.id==="hotels"&&f("hotels"),S.id==="flights"&&f("flights")},className:`bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-between transition-all relative overflow-hidden group ${S.isInteractive?"cursor-pointer hover:border-blue-300 hover:shadow-md":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("div",{className:`p-2 rounded-xl text-white ${S.color} shadow-sm`,children:g.jsx(S.icon,{className:"w-5 h-5"})}),S.isInteractive&&g.jsx("div",{className:"bg-slate-50 p-1 rounded-full text-slate-300 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:g.jsx(ID,{className:"w-4 h-4"})})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-400 text-xs font-bold uppercase tracking-wide",children:S.label}),g.jsx("div",{className:"text-xl font-black text-gray-800",children:S.amount.toLocaleString()})]})]},S.id))}),g.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-sm overflow-hidden",children:[g.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[g.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[g.jsx(GL,{className:"w-4 h-4 text-gray-500"}),"  "]}),g.jsx("button",{onClick:()=>i(!t),className:"bg-blue-600 text-white p-2 rounded-full shadow-md hover:bg-blue-700 transition-colors",children:t?g.jsx(bi,{className:"w-4 h-4"}):g.jsx(Er,{className:"w-4 h-4"})})]}),t&&g.jsx("div",{className:"p-5 bg-blue-50 border-b border-blue-100 animate-fade-in",children:g.jsxs("div",{className:"space-y-3",children:[g.jsx("input",{placeholder:"  (:  )",className:"w-full p-3 rounded-xl border border-blue-200 focus:outline-none focus:border-blue-500 font-bold text-sm",value:r.title,onChange:S=>a({...r,title:S.target.value})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("input",{type:"number",placeholder:"",className:"w-1/2 p-3 rounded-xl border border-blue-200 focus:outline-none focus:border-blue-500 font-bold text-sm",value:r.amount||"",onChange:S=>a({...r,amount:parseFloat(S.target.value)})}),g.jsxs("select",{className:"w-1/2 p-3 rounded-xl border border-blue-200 focus:outline-none focus:border-blue-500 font-bold text-sm bg-white",value:r.category,onChange:S=>a({...r,category:S.target.value}),children:[g.jsx("option",{value:"transport",children:"/"}),g.jsx("option",{value:"food",children:""}),g.jsx("option",{value:"shopping",children:""}),g.jsx("option",{value:"other",children:""})]})]}),g.jsx("button",{onClick:p,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-sm hover:bg-blue-700",children:" "})]})}),g.jsx("div",{className:"divide-y divide-gray-100",children:n.expenses&&n.expenses.length>0?n.expenses.map(S=>g.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-gray-100 p-2 rounded-full text-gray-500",children:S.category==="food"?g.jsx(qa,{className:"w-4 h-4"}):S.category==="shopping"?g.jsx(Lo,{className:"w-4 h-4"}):S.category==="transport"?g.jsx(hc,{className:"w-4 h-4"}):g.jsx(nh,{className:"w-4 h-4"})}),g.jsx("span",{className:"font-bold text-gray-800 text-sm",children:S.title})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"font-black text-gray-900",children:[S.amount.toLocaleString()," ",T]}),g.jsx("button",{onClick:()=>x(S.id),className:"text-gray-300 hover:text-red-500",children:g.jsx(Xr,{className:"w-4 h-4"})})]})]},S.id)):g.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:"   "})})]}),c&&e&&g.jsx(lG,{category:c,trip:n,onClose:()=>f(null),onUpdate:e})]})},lG=({category:n,trip:e,onClose:t,onUpdate:i})=>{X.useRef(null);const[r,a]=X.useState(null),c=(m,p)=>{if(n==="hotels"){const x=e.hotels.map(T=>T.id===m?{...T,costNumeric:p}:T);i({...e,hotels:x})}else{const x={...e.flights,totalPrice:p};i({...e,flights:x})}},f=async(m,p)=>{a(p);try{const x=Sr(),T=new FileReader;T.onloadend=async()=>{const S=T.result.split(",")[1],N=`Extract the total price from this ${n} receipt/invoice. Return ONLY JSON: { "price": number }. Ignore currency symbols.`,O=await Ar(x,{role:"user",parts:[{text:N},{inlineData:{mimeType:m.type,data:S}}]},{responseMimeType:"application/json"}),V=JSON.parse(O.text);V.price&&c(p,V.price)},T.readAsDataURL(m)}catch(x){console.error(x),alert("    .")}finally{a(null)}};return g.jsx("div",{className:"fixed inset-0 z-[120] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-lg overflow-hidden flex flex-col max-h-[85vh]",children:[g.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[g.jsxs("h3",{className:"text-xl font-black text-gray-800 flex items-center gap-2",children:[n==="hotels"?g.jsx(ws,{className:"w-5 h-5"}):g.jsx(bs,{className:"w-5 h-5"}),"  ",n==="hotels"?"":""]}),g.jsx("button",{onClick:t,children:g.jsx(bi,{className:"w-6 h-6 text-gray-400"})})]}),g.jsx("div",{className:"p-6 overflow-y-auto space-y-4",children:n==="hotels"?e.hotels.map(m=>g.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[g.jsx("div",{className:"font-bold text-gray-800 mb-2",children:m.name}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex-grow relative",children:[g.jsx("span",{className:"absolute left-3 top-3 text-gray-400",children:"$"}),g.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-bold outline-none focus:border-blue-500",value:m.costNumeric||D0(m.price)||"",onChange:p=>c(m.id,parseFloat(p.target.value)),placeholder:""})]}),g.jsx("input",{type:"file",className:"hidden",id:`file-${m.id}`,onChange:p=>p.target.files&&f(p.target.files[0],m.id)}),g.jsxs("label",{htmlFor:`file-${m.id}`,className:"bg-blue-50 text-blue-600 p-2.5 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors flex items-center gap-2 border border-blue-100",children:[r===m.id?g.jsx(Ts,{className:"w-5 h-5 animate-spin"}):g.jsx(eu,{className:"w-5 h-5"}),g.jsx("span",{className:"text-xs font-bold hidden md:inline",children:" "})]})]})]},m.id)):g.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:[g.jsx("div",{className:"font-bold text-gray-800 mb-2",children:'  (")'}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex-grow relative",children:[g.jsx("span",{className:"absolute left-3 top-3 text-gray-400",children:"$"}),g.jsx("input",{type:"number",className:"w-full pl-6 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg font-bold outline-none focus:border-blue-500",value:e.flights.totalPrice||"",onChange:m=>c("flight-main",parseFloat(m.target.value)),placeholder:"  "})]}),g.jsx("input",{type:"file",className:"hidden",id:"flight-receipt",onChange:m=>m.target.files&&f(m.target.files[0],"flight-main")}),g.jsxs("label",{htmlFor:"flight-receipt",className:"bg-blue-50 text-blue-600 p-2.5 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors flex items-center gap-2 border border-blue-100",children:[r==="flight-main"?g.jsx(Ts,{className:"w-5 h-5 animate-spin"}):g.jsx(eu,{className:"w-5 h-5"}),g.jsx("span",{className:"text-xs font-bold hidden md:inline",children:" "})]})]})]})})]})})},My={NEED_FORM:{label:" ",color:"bg-red-100 text-red-700 border-red-200",icon:q0},HAVE_FORM:{label:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:_h},STAMPED_AT_CUSTOMS:{label:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:QC},REFUNDED:{label:" ",color:"bg-green-100 text-green-700 border-green-200",icon:gh}},uG=({trip:n,onUpdateTrip:e})=>{const[t,i]=X.useState("list"),[r,a]=X.useState(n.shoppingItems||[]),[c,f]=X.useState(!1),[m,p]=X.useState({currency:n.currency||"THB",isVatEligible:!1,vatStatus:"NEED_FORM"}),[x,T]=X.useState(!1),S=X.useRef(null),N=r.reduce((Y,D)=>Y+D.price,0),O=r.filter(Y=>Y.isVatEligible).reduce((Y,D)=>Y+(D.refundAmountEstimated||D.price*.05),0),V=r.filter(Y=>Y.isVatEligible&&Y.vatStatus==="NEED_FORM").length,P=t==="vat"?r.filter(Y=>Y.isVatEligible):r,Q=()=>{if(!m.name||!m.price)return;const Y={id:m.id||`shop-${Date.now()}`,name:m.name,shopName:m.shopName||"",price:Number(m.price),currency:m.currency||"THB",purchaseDate:m.purchaseDate||new Date().toISOString().split("T")[0],isVatEligible:m.isVatEligible||!1,vatStatus:m.vatStatus,receiptImageUrl:m.receiptImageUrl,productImageUrl:m.productImageUrl,refundAmountEstimated:m.refundAmountEstimated},D=m.id?r.map(k=>k.id===m.id?Y:k):[Y,...r];a(D),e({...n,shoppingItems:D}),f(!1),p({currency:n.currency||"THB",isVatEligible:!1,vatStatus:"NEED_FORM"})},W=Y=>{if(window.confirm("  ?")){const D=r.filter(k=>k.id!==Y);a(D),e({...n,shoppingItems:D})}},H=(Y,D)=>{const k=r.map(U=>U.id===Y?{...U,vatStatus:D}:U);a(k),e({...n,shoppingItems:k})},j=(Y,D)=>{var U;const k=(U=Y.target.files)==null?void 0:U[0];if(k){const G=new FileReader;G.onloadend=()=>{p($=>({...$,[D]:G.result}))},G.readAsDataURL(k)}},Z=async Y=>{T(!0),f(!0);try{const D=Sr(),k=new FileReader;k.onloadend=async()=>{const U=k.result.split(",")[1],$=await Ar(D,{role:"user",parts:[{text:`Analyze this shopping receipt image. 
                Extract: 
                1. Store Name (shopName)
                2. Total Price (numeric)
                3. Currency (e.g. THB, USD)
                4. Date (YYYY-MM-DD)
                5. Main Item Name (or "Shopping Haul")
                6. Is this likely eligible for VAT Refund? (boolean) - usually if over a certain amount or marked TAX FREE.
                7. Estimated Refund Amount (approx 5-7% if eligible).
                
                Return JSON: { name, shopName, price, currency, purchaseDate, isVatEligible, refundAmountEstimated }`},{inlineData:{mimeType:Y.type,data:U}}]},{responseMimeType:"application/json"}),te=JSON.parse($.text);p(K=>({...K,...te,receiptImageUrl:k.result,vatStatus:te.isVatEligible?"NEED_FORM":void 0})),T(!1)},k.readAsDataURL(Y)}catch(D){console.error("Receipt analysis failed",D),alert("    ,   ."),T(!1)}};return g.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[g.jsxs("div",{className:"bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 flex mb-4",children:[g.jsxs("button",{onClick:()=>i("list"),className:`flex-1 py-3 rounded-xl text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="list"?"bg-pink-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[g.jsx(Lo,{className:"w-4 h-4"}),"  ?"]}),g.jsxs("button",{onClick:()=>i("vat"),className:`flex-1 py-3 rounded-xl text-sm font-black flex items-center justify-center gap-2 transition-all ${t==="vat"?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[g.jsx(ry,{className:"w-4 h-4"}),"   (VAT)"]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-2",children:[g.jsx("span",{className:`p-2 rounded-xl ${t==="vat"?"bg-indigo-100 text-indigo-600":"bg-pink-100 text-pink-600"}`,children:t==="vat"?g.jsx(ry,{className:"w-8 h-8"}):g.jsx(Lo,{className:"w-8 h-8"})}),t==="vat"?"  ":" "]}),g.jsx("p",{className:"text-slate-500 font-medium mt-1",children:t==="vat"?"     ":"   "})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("button",{onClick:()=>{var Y;return(Y=S.current)==null?void 0:Y.click()},className:"flex-1 md:flex-none bg-gradient-to-r from-pink-600 to-rose-600 text-white px-5 py-3 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-pink-200 hover:scale-105 transition-transform",children:[g.jsx(RT,{className:"w-5 h-5"}),"   (AI)"]}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:S,onChange:Y=>Y.target.files&&Z(Y.target.files[0])}),g.jsxs("button",{onClick:()=>f(!0),className:"flex-1 md:flex-none bg-white border border-slate-200 text-slate-700 px-5 py-3 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-slate-50",children:[g.jsx(Er,{className:"w-5 h-5"})," "]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t==="list"&&g.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-[2rem] shadow-xl relative overflow-hidden md:col-span-2",children:[g.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"}),g.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:'" '}),g.jsxs("div",{className:"text-4xl font-black mt-2",children:[N.toLocaleString()," ",g.jsx("span",{className:"text-xl text-slate-400",children:n.currency==="USD"?"$":""})]})]}),g.jsx("div",{className:"bg-white/10 p-3 rounded-2xl",children:g.jsx(Lo,{className:"w-8 h-8 text-white"})})]})]}),t==="vat"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-blue-600 text-white p-6 rounded-[2rem] shadow-xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full -mr-10 -mt-10 blur-2xl"}),g.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-indigo-100 text-xs font-bold uppercase tracking-widest",children:"  "}),g.jsxs("div",{className:"text-4xl font-black mt-2",children:[Math.floor(O).toLocaleString()," ",g.jsx("span",{className:"text-xl text-indigo-200",children:n.currency==="USD"?"$":""})]})]}),g.jsx("div",{className:"bg-white/20 p-3 rounded-2xl",children:g.jsx(Np,{className:"w-8 h-8 text-white"})})]})]}),g.jsx("div",{className:`p-6 rounded-[2rem] shadow-lg border relative overflow-hidden ${V>0?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,children:g.jsxs("div",{className:"relative z-10 flex justify-between items-center h-full",children:[g.jsxs("div",{children:[g.jsx("span",{className:`text-xs font-bold uppercase tracking-widest ${V>0?"text-orange-600":"text-green-600"}`,children:" "}),g.jsx("div",{className:`text-2xl font-black mt-2 ${V>0?"text-orange-800":"text-green-800"}`,children:V>0?` ${V} `:"  !"}),V>0&&g.jsx("p",{className:"text-xs text-orange-700 mt-1 font-medium",children:' "Tax Free Form" '})]}),g.jsx("div",{className:`p-3 rounded-2xl ${V>0?"bg-orange-200":"bg-green-200"}`,children:V>0?g.jsx(q0,{className:"w-8 h-8 text-orange-700"}):g.jsx(gh,{className:"w-8 h-8 text-green-700"})})]})})]})]}),t==="vat"&&g.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 p-4 rounded-2xl flex items-start gap-3",children:[g.jsx("div",{className:"bg-indigo-100 p-2 rounded-full",children:g.jsx(QC,{className:"w-5 h-5 text-indigo-600"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-indigo-900 text-sm",children:"   ?"}),g.jsxs("p",{className:"text-xs text-indigo-800 mt-1 leading-relaxed",children:['1.   "VAT Refund"  ( ). ',g.jsx("br",{}),"2.  , ",g.jsx("b",{children:""}),"  ,      (  ). ",g.jsx("br",{}),"3.   ,     ."]})]})]}),g.jsx("div",{className:"space-y-4",children:P.length===0?g.jsxs("div",{className:"text-center py-20 bg-white rounded-[2rem] border-2 border-dashed border-slate-200",children:[g.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:t==="vat"?g.jsx(ry,{className:"w-10 h-10 text-slate-300"}):g.jsx(Lo,{className:"w-10 h-10 text-slate-300"})}),g.jsx("h3",{className:"text-xl font-black text-slate-800",children:t==="vat"?"   ":"  "}),g.jsx("p",{className:"text-slate-400 font-medium",children:t==="vat"?"     -VAT":"    "}),g.jsx("button",{onClick:()=>{var Y;return(Y=S.current)==null?void 0:Y.click()},className:"mt-6 text-pink-600 font-bold hover:underline",children:"  "})]}):[...P].reverse().map(Y=>g.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-all flex flex-col md:flex-row gap-4 items-start md:items-center",children:[g.jsxs("div",{className:"w-20 h-20 bg-slate-100 rounded-xl flex-shrink-0 overflow-hidden relative border border-slate-200 cursor-pointer group",children:[Y.productImageUrl?g.jsx("img",{src:Y.productImageUrl,alt:Y.name,className:"w-full h-full object-cover"}):Y.receiptImageUrl?g.jsx("img",{src:Y.receiptImageUrl,alt:"Receipt",className:"w-full h-full object-cover opacity-80"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:g.jsx(Lo,{className:"w-8 h-8"})}),Y.receiptImageUrl&&g.jsx("div",{className:"absolute bottom-1 right-1 bg-white/90 p-1 rounded-md shadow-sm",children:g.jsx(_h,{className:"w-3 h-3 text-blue-600"})})]}),g.jsxs("div",{className:"flex-grow min-w-0",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("h3",{className:"font-bold text-slate-900 text-lg truncate",children:Y.name}),g.jsxs("span",{className:"font-black text-lg text-slate-800",children:[Y.price.toLocaleString()," ",Y.currency]})]}),g.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 font-medium",children:[g.jsx("span",{children:Y.shopName}),g.jsx("span",{children:""}),g.jsx("span",{children:Y.purchaseDate})]}),Y.isVatEligible?g.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[g.jsxs("div",{onClick:()=>{const D=["NEED_FORM","HAVE_FORM","STAMPED_AT_CUSTOMS","REFUNDED"],k=D[(D.indexOf(Y.vatStatus||"NEED_FORM")+1)%D.length];H(Y.id,k)},className:`cursor-pointer px-3 py-1 rounded-lg border text-xs font-bold flex items-center gap-1.5 transition-all ${My[Y.vatStatus||"NEED_FORM"].color} hover:opacity-80`,children:[V0.createElement(My[Y.vatStatus||"NEED_FORM"].icon,{className:"w-3.5 h-3.5"}),My[Y.vatStatus||"NEED_FORM"].label]}),Y.refundAmountEstimated&&g.jsxs("span",{className:"text-xs font-bold text-green-600",children:[" : ",Math.floor(Y.refundAmountEstimated)," ",Y.currency]})]}):t==="vat"&&g.jsx("div",{className:"mt-2 text-xs text-slate-400 font-medium",children:"   "})]}),g.jsx("button",{onClick:()=>W(Y.id),className:"p-2 text-slate-300 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors self-end md:self-center",children:g.jsx(Xr,{className:"w-5 h-5"})})]},Y.id))}),c&&g.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-end md:items-center justify-center p-0 md:p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white w-full md:max-w-md rounded-t-[2rem] md:rounded-[2rem] p-6 max-h-[90vh] overflow-y-auto relative",children:[x&&g.jsxs("div",{className:"absolute inset-0 bg-white/90 z-20 flex flex-col items-center justify-center rounded-[2rem]",children:[g.jsx(Ts,{className:"w-12 h-12 text-pink-600 animate-spin mb-4"}),g.jsx("p",{className:"text-lg font-bold text-slate-800 animate-pulse",children:"-AI   ..."}),g.jsx("p",{className:"text-sm text-slate-500",children:" ,  "})]}),g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-xl font-black text-slate-800",children:" "}),g.jsx("button",{onClick:()=>f(!1),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200",children:g.jsx(bi,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:"  / "}),g.jsx("input",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-pink-500",value:m.name||"",onChange:Y=>p({...m,name:Y.target.value}),placeholder:":  -Zara"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-pink-500",value:m.price||"",onChange:Y=>p({...m,price:Number(Y.target.value)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-800 outline-none",value:m.currency,onChange:Y=>p({...m,currency:Y.target.value}),children:[g.jsx("option",{value:"THB",children:"THB ()"}),g.jsx("option",{value:"USD",children:"USD ($)"}),g.jsx("option",{value:"EUR",children:"EUR ()"}),g.jsx("option",{value:"ILS",children:"ILS ()"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-medium text-slate-800 outline-none",value:m.shopName||"",onChange:Y=>p({...m,shopName:Y.target.value})})]}),g.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:g.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[g.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:m.isVatEligible,onChange:Y=>p({...m,isVatEligible:Y.target.checked})}),g.jsx("span",{className:"font-bold text-blue-900 text-sm",children:"   (Tax Free)?"})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[g.jsxs("label",{className:`h-24 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer ${m.receiptImageUrl?"border-green-400 bg-green-50":"border-slate-300"}`,children:[m.receiptImageUrl?g.jsx(gh,{className:"w-6 h-6 text-green-600"}):g.jsx(_h,{className:"w-6 h-6 text-slate-400"}),g.jsx("span",{className:"text-[10px] font-bold text-slate-500 mt-1",children:""}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y=>j(Y,"receiptImageUrl")})]}),g.jsxs("label",{className:`h-24 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer ${m.productImageUrl?"border-green-400 bg-green-50":"border-slate-300"}`,children:[m.productImageUrl?g.jsx("div",{className:"w-8 h-8 rounded overflow-hidden",children:g.jsx("img",{src:m.productImageUrl,className:"w-full h-full object-cover"})}):g.jsx(RT,{className:"w-6 h-6 text-slate-400"}),g.jsx("span",{className:"text-[10px] font-bold text-slate-500 mt-1",children:" "}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y=>j(Y,"productImageUrl")})]})]}),g.jsx("button",{onClick:Q,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-xl mt-2",children:" "})]})]})})]})},jm=[{id:"trip-1",name:" -  2026",dates:"06/08/2026 - 26/08/2026",destination:" -  -  ",destinationEnglish:"Bangkok",coverImage:"https://images.unsplash.com/photo-1590523741831-ab7e8b8f9c7f?q=80&w=2574&auto=format&fit=crop",documents:[],flights:{passengerName:"Traveler Name",pnr:"75PCS6",segments:[{fromCode:"TLV",fromCity:" ",toCode:"AUH",toCity:" ",departureTime:"20:10",arrivalTime:"00:25",duration:"03h 15m",flightNumber:"EY598",airline:"Etihad Airways",date:"06 Aug 2026",terminal:"3",gate:"B6"},{fromCode:"AUH",fromCity:" ",toCode:"BKK",toCity:"",departureTime:"02:20",arrivalTime:"11:50",duration:"06h 30m",flightNumber:"EY404",airline:"Etihad Airways",date:"07 Aug 2026",terminal:"A",gate:"12"}]},hotels:[],reservations:[],itinerary:[],restaurants:[],attractions:[]}],px="users",gx="trips",tM=n=>g7(fg,px,n,gx),cG=async n=>{try{const e=tM(n),t=M7(e,P7("updatedAt","desc")),i=await Y2(t),r=[];return i.forEach(a=>{const c=a.data();r.push({...c,id:a.id})}),r}catch(e){throw console.error("Error fetching user trips:",e),e}},nM=async(n,e)=>{try{const t=U2(fg,px,n,gx,e.id);await L7(t,{...e,updatedAt:nn.now()})}catch(t){throw console.error("Error saving trip:",t),t}},L0=async(n,e)=>{try{const t=e.map(i=>nM(n,i));await Promise.all(t)}catch(t){throw console.error("Error saving all trips:",t),t}},dG=async(n,e)=>{try{const t=U2(fg,px,n,gx,e);await O7(t)}catch(t){throw console.error("Error deleting trip:",t),t}},hG=async n=>{try{const e=tM(n);return!(await Y2(e)).empty}catch(e){return console.error("Error checking user trips:",e),!1}},_x="travel_app_data_v1",fh=()=>{try{const n=localStorage.getItem(_x);if(n)return JSON.parse(n)}catch(n){console.error("Failed to load from localStorage",n)}return jm},Ep=n=>{try{localStorage.setItem(_x,JSON.stringify(n))}catch(e){console.error("Failed to save to localStorage",e)}},fG=async n=>{if(!n)return fh();try{if(!await hG(n)){const t=fh();return t.length>0&&t!==jm?(await L0(n,t),localStorage.removeItem(_x),t):(await L0(n,jm),jm)}return await cG(n)}catch(e){return console.error("Error loading trips from Firestore:",e),fh()}},mG=async(n,e)=>{if(!e){Ep(n);return}try{await L0(e,n)}catch(t){console.error("Error saving trips to Firestore:",t),Ep(n)}},pG=async(n,e)=>{if(!e){const t=fh(),i=t.findIndex(r=>r.id===n.id);i>=0?t[i]=n:t.push(n),Ep(t);return}try{await nM(e,n)}catch(t){throw console.error("Error saving trip to Firestore:",t),t}},gG=async(n,e)=>{if(!e){const i=fh().filter(r=>r.id!==n);Ep(i);return}try{await dG(e,n)}catch(t){throw console.error("Error deleting trip from Firestore:",t),t}},_G=()=>{const{user:n,loading:e}=X2(),[t,i]=X.useState([]),[r,a]=X.useState(""),[c,f]=X.useState("itinerary"),[m,p]=X.useState(!1),[x,T]=X.useState(!0),[S,N]=X.useState(null),O=X.useCallback(async()=>{T(!0),N(null);try{const j=await fG(n==null?void 0:n.uid);i(j),j.length>0&&a(j[0].id)}catch(j){console.error("Error loading trips:",j),N("  .   .")}finally{T(!1)}},[n==null?void 0:n.uid]);X.useEffect(()=>{e||O()},[e,O]);const V=t.find(j=>j.id===r)||t[0];X.useEffect(()=>{t.length>0&&!t.find(j=>j.id===r)&&a(t[0].id)},[t,r]);const P=async j=>{const Z=t.map(Y=>Y.id===j.id?j:Y);i(Z);try{await pG(j,n==null?void 0:n.uid)}catch(Y){console.error("Error saving trip:",Y)}},Q=async j=>{i(j);try{await mG(j,n==null?void 0:n.uid)}catch(Z){console.error("Error saving all trips:",Z)}},W=async j=>{const Z=t.filter(Y=>Y.id!==j);i(Z),r===j&&Z.length>0&&a(Z[0].id);try{await gG(j,n==null?void 0:n.uid)}catch(Y){console.error("Error deleting trip:",Y)}};if(e||x)return g.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),g.jsx("span",{className:"text-gray-600",children:" ..."})]});if(S)return g.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[g.jsx("div",{className:"text-red-500 text-lg",children:S}),g.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:" "})]});if(!V)return g.jsx("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:g.jsx("span",{className:"text-gray-600",children:"  "})});const H=()=>{switch(c){case"flights":return g.jsx(j7,{trip:V});case"restaurants":return g.jsx(Y7,{trip:V,onUpdateTrip:P});case"attractions":return g.jsx(Z7,{trip:V,onUpdateTrip:P});case"itinerary":return g.jsx(wC,{trip:V,onUpdateTrip:P,onSwitchTab:f});case"hotels":return g.jsx(eG,{trip:V,onUpdateTrip:P});case"map_full":return g.jsx(mx,{trip:V,title:"  "});case"budget":return g.jsx(aG,{trip:V,onUpdateTrip:P});case"shopping":return g.jsx(uG,{trip:V,onUpdateTrip:P});default:return g.jsx(wC,{trip:V,onUpdateTrip:P,onSwitchTab:f})}};return g.jsxs(Zk,{children:[g.jsx(z7,{activeTrip:V,trips:t,onSwitchTrip:a,currentTab:c,onSwitchTab:f,onOpenAdmin:()=>p(!0),onUpdateTrip:P,onDeleteTrip:W,children:H()}),m&&g.jsx(rG,{data:t,onSave:Q,onClose:()=>p(!1)})]})},yG=()=>g.jsx(B7,{children:g.jsx(_G,{})}),iM=document.getElementById("root");if(!iM)throw new Error("Could not find root element to mount to");const vG=RP.createRoot(iM);vG.render(g.jsx(V0.StrictMode,{children:g.jsx(yG,{})}));
